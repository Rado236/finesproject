"use strict";(self.webpackChunkfinesproject=self.webpackChunkfinesproject||[]).push([[179],{6304:(Et,Se,O)=>{O.d(Se,{Dh:()=>Ue,GT:()=>Ie,cc:()=>me,hO:()=>Ke,on:()=>H,pX:()=>ie,xv:()=>_e});var p=O(8926),U=O(120),W=O(2793);Et=O.hmd(Et);const re=["ngOnDestroy"],ie=(je,At,xe,$e={})=>new Proxy(je,{get:(Ne,ke)=>xe.runOutsideAngular(()=>{var Qe;if(je[ke])return!(null===(Qe=$e?.spy)||void 0===Qe)&&Qe.get&&$e.spy.get(ke,je[ke]),je[ke];if(re.indexOf(ke)>-1)return()=>{};const se=At.toPromise().then(Je=>{const Ge=Je&&Je[ke];return"function"==typeof Ge?Ge.bind(Je):Ge&&Ge.then?Ge.then(ht=>xe.run(()=>ht)):xe.run(()=>Ge)});return new Proxy(()=>{},{get:(Je,Ge)=>se[Ge],apply:(Je,Ge,ht)=>se.then(Br=>{var Qr;const Ri=Br&&Br(...ht);return!(null===(Qr=$e?.spy)||void 0===Qr)&&Qr.apply&&$e.spy.apply(ke,ht,Ri),Ri})})})}),Ie=(je,At)=>{At.forEach(xe=>{Object.getOwnPropertyNames(xe.prototype||xe).forEach($e=>{Object.defineProperty(je.prototype,$e,Object.getOwnPropertyDescriptor(xe.prototype||xe,$e))})})};class ve{constructor(At){return At}}const Ue=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function H(je,At,xe){const Ne="object"==typeof xe&&xe||{};Ne.name=Ne.name||"string"==typeof xe&&xe||"[DEFAULT]";const Qe=U.Z.apps.filter(se=>se&&se.name===Ne.name)[0]||At.runOutsideAngular(()=>U.Z.initializeApp(je,Ne));try{JSON.stringify(je)!==JSON.stringify(Qe.options)&&q("error",`${Qe.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Qe)}const q=(je,...At)=>{(0,p.X6Q)()&&typeof console<"u"&&console[je](...At)},ce={provide:ve,useFactory:H,deps:[Ue,p.R0b,[new p.FiY,_e]]};let Ke=(()=>{class je{constructor(xe){U.Z.registerVersion("angularfire",W.q4.full,"core"),U.Z.registerVersion("angularfire",W.q4.full,"app-compat"),U.Z.registerVersion("angular",p.q4F.full,xe.toString())}static initializeApp(xe,$e){return{ngModule:je,providers:[{provide:Ue,useValue:xe},{provide:_e,useValue:$e}]}}}return je.\u0275fac=function(xe){return new(xe||je)(p.LFG(p.Lbi))},je.\u0275mod=p.oAB({type:je}),je.\u0275inj=p.cJS({providers:[ce]}),je})();function me(je,At,xe,$e,Ne){const[,ke,Qe]=globalThis.\u0275AngularfireInstanceCache.find(se=>se[0]===je)||[];if(ke)return function Xe(je,At){try{return je.toString()===At.toString()}catch{return je===At}}(Ne,Qe)||(et("error",`${At} was already initialized on the ${xe} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),et("warn",{is:Ne,was:Qe})),ke;{const se=$e();return globalThis.\u0275AngularfireInstanceCache.push([je,se,Ne]),se}}const nt=!!Et.hot,et=(je,...At)=>{(0,p.X6Q)()&&typeof console<"u"&&console[je](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(Et,Se,O)=>{O.d(Se,{q4:()=>ga,iC:()=>ya,fc:()=>x_,HU:()=>vd,vb:()=>Zc,JM:()=>vE,u3:()=>ou});var p=O(8926),U=O(4097),W=O(5861),re=O(534),ie=O(9058),Ie=O(4537),ve=O(7879);const Ue=(A,C)=>C.some(P=>A instanceof P);let _e,H;const Ke=new WeakMap,me=new WeakMap,Xe=new WeakMap,nt=new WeakMap,et=new WeakMap;let xe={get(A,C,P){if(A instanceof IDBTransaction){if("done"===C)return me.get(A);if("objectStoreNames"===C)return A.objectStoreNames||Xe.get(A);if("store"===C)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return Qe(A[C])},set:(A,C,P)=>(A[C]=P,!0),has:(A,C)=>A instanceof IDBTransaction&&("done"===C||"store"===C)||C in A};function ke(A){return"function"==typeof A?function Ne(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...C){return A.apply(se(this),C),Qe(Ke.get(this))}:function(...C){return Qe(A.apply(se(this),C))}:function(C,...P){const F=A.call(se(this),C,...P);return Xe.set(F,C.sort?C.sort():[C]),Qe(F)}}(A):(A instanceof IDBTransaction&&function At(A){if(me.has(A))return;const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("complete",J),A.removeEventListener("error",ue),A.removeEventListener("abort",ue)},J=()=>{P(),j()},ue=()=>{F(A.error||new DOMException("AbortError","AbortError")),j()};A.addEventListener("complete",J),A.addEventListener("error",ue),A.addEventListener("abort",ue)});me.set(A,C)}(A),Ue(A,function q(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,xe):A)}function Qe(A){if(A instanceof IDBRequest)return function je(A){const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("success",J),A.removeEventListener("error",ue)},J=()=>{P(Qe(A.result)),j()},ue=()=>{F(A.error),j()};A.addEventListener("success",J),A.addEventListener("error",ue)});return C.then(P=>{P instanceof IDBCursor&&Ke.set(P,A)}).catch(()=>{}),et.set(C,A),C}(A);if(nt.has(A))return nt.get(A);const C=ke(A);return C!==A&&(nt.set(A,C),et.set(C,A)),C}const se=A=>et.get(A),ht=["get","getKey","getAll","getAllKeys","count"],Br=["put","add","delete","clear"],Qr=new Map;function Ri(A,C){if(!(A instanceof IDBDatabase)||C in A||"string"!=typeof C)return;if(Qr.get(C))return Qr.get(C);const P=C.replace(/FromIndex$/,""),F=C!==P,j=Br.includes(P);if(!(P in(F?IDBIndex:IDBObjectStore).prototype)||!j&&!ht.includes(P))return;const J=function(){var ue=(0,W.Z)(function*(Ye,...Ze){const yt=this.transaction(Ye,j?"readwrite":"readonly");let Lt=yt.store;return F&&(Lt=Lt.index(Ze.shift())),(yield Promise.all([Lt[P](...Ze),j&&yt.done]))[0]});return function(Ze){return ue.apply(this,arguments)}}();return Qr.set(C,J),J}!function $e(A){xe=A(xe)}(A=>({...A,get:(C,P,F)=>Ri(C,P)||A.get(C,P,F),has:(C,P)=>!!Ri(C,P)||A.has(C,P)}));const Vs="@firebase/installations",Mn="0.6.4",Du=1e4,mc=`w:${Mn}`,de="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",Ee=36e5,bt=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rn(A){return A instanceof ie.ZR&&A.code.includes("request-failed")}function sr({projectId:A}){return`${le}/projects/${A}/installations`}function Nt(A){return{token:A.token,requestStatus:2,expiresIn:Wn(A.expiresIn),creationTime:Date.now()}}function wt(A,C){return _t.apply(this,arguments)}function _t(){return(_t=(0,W.Z)(function*(A,C){const F=(yield C.json()).error;return bt.create("request-failed",{requestName:A,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function On({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function Yr(A){return ye.apply(this,arguments)}function ye(){return(ye=(0,W.Z)(function*(A){const C=yield A();return C.status>=500&&C.status<600?A():C})).apply(this,arguments)}function Wn(A){return Number(A.replace("s","000"))}function Us(){return(Us=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:C},{fid:P}){const F=sr(A),j=On(A),J=C.getImmediate({optional:!0});if(J){const yt=yield J.getHeartbeatsHeader();yt&&j.append("x-firebase-client",yt)}const Ye={method:"POST",headers:j,body:JSON.stringify({fid:P,authVersion:de,appId:A.appId,sdkVersion:mc})},Ze=yield Yr(()=>fetch(F,Ye));if(Ze.ok){const yt=yield Ze.json();return{fid:yt.fid||P,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Nt(yt.authToken)}}throw yield wt("Create Installation",Ze)})).apply(this,arguments)}function uo(A){return new Promise(C=>{setTimeout(C,A)})}const Na=/^[cdef][\w-]{21}$/,Nn="";function Kt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const P=function Bt(A){return function So(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Na.test(P)?P:Nn}catch{return Nn}}function mi(A){return`${A.appName}!${A.appId}`}const Ot=new Map;function en(A,C){const P=mi(A);Xo(P,C),function Cn(A,C){const P=function Zt(){return!Yt&&"BroadcastChannel"in self&&(Yt=new BroadcastChannel("[Firebase] FID Change"),Yt.onmessage=A=>{Xo(A.data.key,A.data.fid)}),Yt}();P&&P.postMessage({key:A,fid:C}),function Cu(){0===Ot.size&&Yt&&(Yt.close(),Yt=null)}()}(P,C)}function Xo(A,C){const P=Ot.get(A);if(P)for(const F of P)F(C)}let Yt=null;const ka="firebase-installations-database",Pi=1,Jr="firebase-installations-store";let Ji=null;function Ro(){return Ji||(Ji=function Je(A,C,{blocked:P,upgrade:F,blocking:j,terminated:J}={}){const ue=indexedDB.open(A,C),Ye=Qe(ue);return F&&ue.addEventListener("upgradeneeded",Ze=>{F(Qe(ue.result),Ze.oldVersion,Ze.newVersion,Qe(ue.transaction))}),P&&ue.addEventListener("blocked",()=>P()),Ye.then(Ze=>{J&&Ze.addEventListener("close",()=>J()),j&&Ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ye}(ka,Pi,{upgrade:(A,C)=>{0===C&&A.createObjectStore(Jr)}})),Ji}function _i(A,C){return xi.apply(this,arguments)}function xi(){return(xi=(0,W.Z)(function*(A,C){const P=mi(A),j=(yield Ro()).transaction(Jr,"readwrite"),J=j.objectStore(Jr),ue=yield J.get(P);return yield J.put(C,P),yield j.done,(!ue||ue.fid!==C.fid)&&en(A,C.fid),C})).apply(this,arguments)}function Xi(A){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,W.Z)(function*(A){const C=mi(A),F=(yield Ro()).transaction(Jr,"readwrite");yield F.objectStore(Jr).delete(C),yield F.done})).apply(this,arguments)}function co(A,C){return yi.apply(this,arguments)}function yi(){return(yi=(0,W.Z)(function*(A,C){const P=mi(A),j=(yield Ro()).transaction(Jr,"readwrite"),J=j.objectStore(Jr),ue=yield J.get(P),Ye=C(ue);return void 0===Ye?yield J.delete(P):yield J.put(Ye,P),yield j.done,Ye&&(!ue||ue.fid!==Ye.fid)&&en(A,Ye.fid),Ye})).apply(this,arguments)}function z(A){return V.apply(this,arguments)}function V(){return V=(0,W.Z)(function*(A){let C;const P=yield co(A.appConfig,F=>{const j=function Y(A){return Kn(A||{fid:Kt(),registrationStatus:0})}(F),J=function pe(A,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(bt.create("app-offline"))};const P={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function ne(A,C){return ft.apply(this,arguments)}(A,P);return{installationEntry:P,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:xt(A)}:{installationEntry:C}}(A,j);return C=J.registrationPromise,J.installationEntry});return P.fid===Nn?{installationEntry:yield C}:{installationEntry:P,registrationPromise:C}}),V.apply(this,arguments)}function ft(){return ft=(0,W.Z)(function*(A,C){try{const P=yield function Is(A,C){return Us.apply(this,arguments)}(A,C);return _i(A.appConfig,P)}catch(P){throw rn(P)&&409===P.customData.serverCode?yield Xi(A.appConfig):yield _i(A.appConfig,{fid:C.fid,registrationStatus:0}),P}}),ft.apply(this,arguments)}function xt(A){return dn.apply(this,arguments)}function dn(){return(dn=(0,W.Z)(function*(A){let C=yield Sr(A.appConfig);for(;1===C.registrationStatus;)yield uo(100),C=yield Sr(A.appConfig);if(0===C.registrationStatus){const{installationEntry:P,registrationPromise:F}=yield z(A);return F||P}return C})).apply(this,arguments)}function Sr(A){return co(A,C=>{if(!C)throw bt.create("installation-not-found");return Kn(C)})}function Kn(A){return function Ln(A){return 1===A.registrationStatus&&A.registrationTime+Du<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Vn(){return(Vn=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:C},P){const F=function hr(A,{fid:C}){return`${sr(A)}/${C}/authTokens:generate`}(A,P),j=function or(A,{refreshToken:C}){const P=On(A);return P.append("Authorization",function Gn(A){return`${de} ${A}`}(C)),P}(A,P),J=C.getImmediate({optional:!0});if(J){const yt=yield J.getHeartbeatsHeader();yt&&j.append("x-firebase-client",yt)}const Ye={method:"POST",headers:j,body:JSON.stringify({installation:{sdkVersion:mc,appId:A.appId}})},Ze=yield Yr(()=>fetch(F,Ye));if(Ze.ok)return Nt(yield Ze.json());throw yield wt("Generate Auth Token",Ze)})).apply(this,arguments)}function Qt(A){return Po.apply(this,arguments)}function Po(){return Po=(0,W.Z)(function*(A,C=!1){let P;const F=yield co(A.appConfig,J=>{if(!kt(J))throw bt.create("not-registered");const ue=J.authToken;if(!C&&function mn(A){return 2===A.requestStatus&&!function er(A){const C=Date.now();return C<A.creationTime||A.creationTime+A.expiresIn<C+Ee}(A)}(ue))return J;if(1===ue.requestStatus)return P=function ge(A,C){return te.apply(this,arguments)}(A,C),J;{if(!navigator.onLine)throw bt.create("app-offline");const Ye=function Un(A){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:C})}(J);return P=function at(A,C){return Mt.apply(this,arguments)}(A,Ye),Ye}});return P?yield P:F.authToken}),Po.apply(this,arguments)}function te(){return(te=(0,W.Z)(function*(A,C){let P=yield Me(A.appConfig);for(;1===P.authToken.requestStatus;)yield uo(100),P=yield Me(A.appConfig);const F=P.authToken;return 0===F.requestStatus?Qt(A,C):F})).apply(this,arguments)}function Me(A){return co(A,C=>{if(!kt(C))throw bt.create("not-registered");return function Mi(A){return 1===A.requestStatus&&A.requestTime+Du<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Mt(){return Mt=(0,W.Z)(function*(A,C){try{const P=yield function tn(A,C){return Vn.apply(this,arguments)}(A,C),F=Object.assign(Object.assign({},C),{authToken:P});return yield _i(A.appConfig,F),P}catch(P){if(!rn(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield _i(A.appConfig,F)}else yield Xi(A.appConfig);throw P}}),Mt.apply(this,arguments)}function kt(A){return void 0!==A&&2===A.registrationStatus}function ea(){return(ea=(0,W.Z)(function*(A){const C=A,{installationEntry:P,registrationPromise:F}=yield z(C);return F?F.catch(console.error):Qt(C).catch(console.error),P.fid})).apply(this,arguments)}function _c(){return _c=(0,W.Z)(function*(A,C=!1){const P=A;return yield function Bl(A){return Oa.apply(this,arguments)}(P),(yield Qt(P,C)).token}),_c.apply(this,arguments)}function Oa(){return(Oa=(0,W.Z)(function*(A){const{registrationPromise:C}=yield z(A);C&&(yield C)})).apply(this,arguments)}function ta(A){return bt.create("missing-app-config-values",{valueName:A})}const yh="installations",bp=A=>{const C=A.getProvider("app").getImmediate(),P=function $l(A){if(!A||!A.options)throw ta("App Configuration");if(!A.name)throw ta("App Name");const C=["projectId","apiKey","appId"];for(const P of C)if(!A.options[P])throw ta(P);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(C);return{app:C,appConfig:P,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Pu=A=>{const C=A.getProvider("app").getImmediate(),P=(0,re._getProvider)(C,yh).getImmediate();return{getId:()=>function Bs(A){return ea.apply(this,arguments)}(P),getToken:j=>function Su(A){return _c.apply(this,arguments)}(P,j)}};(function Dp(){(0,re._registerComponent)(new Ie.wA(yh,bp,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("installations-internal",Pu,"PRIVATE"))})(),(0,re.registerVersion)(Vs,Mn),(0,re.registerVersion)(Vs,Mn,"esm2017");const jl="@firebase/remote-config",ei=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Yn{constructor(C,P,F,j){this.client=C,this.storage=P,this.storageCache=F,this.logger=j}isCachedDataFresh(C,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-P,j=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${j}.`),j}fetch(C){var P=this;return(0,W.Z)(function*(){const[F,j]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(j&&P.isCachedDataFresh(C.cacheMaxAgeMillis,F))return j;C.eTag=j&&j.eTag;const J=yield P.client.fetch(C),ue=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&ue.push(P.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(ue),J})()}}function No(A=navigator){return A.languages&&A.languages[0]||A.language}class lo{constructor(C,P,F,j,J,ue){this.firebaseInstallations=C,this.sdkVersion=P,this.namespace=F,this.projectId=j,this.apiKey=J,this.appId=ue}fetch(C){var P=this;return(0,W.Z)(function*(){const[F,j]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:P.sdkVersion,app_instance_id:F,app_instance_id_token:j,app_id:P.appId,language_code:No()},yt={method:"POST",headers:Ye,body:JSON.stringify(Ze)},Lt=fetch(ue,yt),Ut=new Promise((Ar,Ks)=>{C.signal.addEventListener(()=>{const eg=new Error("The operation was aborted.");eg.name="AbortError",Ks(eg)})});let os;try{yield Promise.race([Lt,Ut]),os=yield Lt}catch(Ar){let Ks="fetch-client-network";throw"AbortError"===Ar?.name&&(Ks="fetch-timeout"),ei.create(Ks,{originalErrorMessage:Ar?.message})}let ir=os.status;const qu=os.headers.get("ETag")||void 0;let To,Ss;if(200===os.status){let Ar;try{Ar=yield os.json()}catch(Ks){throw ei.create("fetch-client-parse",{originalErrorMessage:Ks?.message})}To=Ar.entries,Ss=Ar.state}if("INSTANCE_STATE_UNSPECIFIED"===Ss?ir=500:"NO_CHANGE"===Ss?ir=304:("NO_TEMPLATE"===Ss||"EMPTY_CONFIG"===Ss)&&(To={}),304!==ir&&200!==ir)throw ei.create("fetch-status",{httpStatus:ir});return{status:ir,eTag:qu,config:To}})()}}class Hl{constructor(C,P){this.client=C,this.storage=P}fetch(C){var P=this;return(0,W.Z)(function*(){const F=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:P,backoffCount:F}){var j=this;return(0,W.Z)(function*(){yield function Ft(A,C){return new Promise((P,F)=>{const j=Math.max(C-Date.now(),0),J=setTimeout(P,j);A.addEventListener(()=>{clearTimeout(J),F(ei.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,P);try{const J=yield j.client.fetch(C);return yield j.storage.deleteThrottleMetadata(),J}catch(J){if(!function La(A){if(!(A instanceof ie.ZR&&A.customData))return!1;const C=Number(A.customData.httpStatus);return 429===C||500===C||503===C||504===C}(J))throw J;const ue={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield j.storage.setThrottleMetadata(ue),j.attemptFetch(C,ue)}})()}}class xu{constructor(C,P,F,j,J){this.app=C,this._client=P,this._storageCache=F,this._storage=j,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Es(A,C){const P=A.target.error||void 0;return ei.create(C,{originalErrorMessage:P&&P?.message})}const Er="app_namespace_store";class ko{constructor(C,P,F,j=function fo(){return new Promise((A,C)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=F=>{C(Es(F,"storage-open"))},P.onsuccess=F=>{A(F.target.result)},P.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Er,{keyPath:"compositeKey"})}}catch(P){C(ei.create("storage-open",{originalErrorMessage:P?.message}))}})}()){this.appId=C,this.appName=P,this.namespace=F,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var P=this;return(0,W.Z)(function*(){const F=yield P.openDbPromise;return new Promise((j,J)=>{const Ye=F.transaction([Er],"readonly").objectStore(Er),Ze=P.createCompositeKey(C);try{const yt=Ye.get(Ze);yt.onerror=Lt=>{J(Es(Lt,"storage-get"))},yt.onsuccess=Lt=>{const Ut=Lt.target.result;j(Ut?Ut.value:void 0)}}catch(yt){J(ei.create("storage-get",{originalErrorMessage:yt?.message}))}})})()}set(C,P){var F=this;return(0,W.Z)(function*(){const j=yield F.openDbPromise;return new Promise((J,ue)=>{const Ze=j.transaction([Er],"readwrite").objectStore(Er),yt=F.createCompositeKey(C);try{const Lt=Ze.put({compositeKey:yt,value:P});Lt.onerror=Ut=>{ue(Es(Ut,"storage-set"))},Lt.onsuccess=()=>{J()}}catch(Lt){ue(ei.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(C){var P=this;return(0,W.Z)(function*(){const F=yield P.openDbPromise;return new Promise((j,J)=>{const Ye=F.transaction([Er],"readwrite").objectStore(Er),Ze=P.createCompositeKey(C);try{const yt=Ye.delete(Ze);yt.onerror=Lt=>{J(Es(Lt,"storage-delete"))},yt.onsuccess=()=>{j()}}catch(yt){J(ei.create("storage-delete",{originalErrorMessage:yt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Mu{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,W.Z)(function*(){const P=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),j=C.storage.getActiveConfig(),J=yield P;J&&(C.lastFetchStatus=J);const ue=yield F;ue&&(C.lastSuccessfulFetchTimestampMillis=ue);const Ye=yield j;Ye&&(C.activeConfig=Ye)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Nu(){return ra.apply(this,arguments)}function ra(){return(ra=(0,W.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function yc(){(0,re._registerComponent)(new Ie.wA("remote-config",function A(C,{instanceIdentifier:P}){const F=C.getProvider("app").getImmediate(),j=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ei.create("registration-window");if(!(0,ie.hl)())throw ei.create("indexed-db-unavailable");const{projectId:J,apiKey:ue,appId:Ye}=F.options;if(!J)throw ei.create("registration-project-id");if(!ue)throw ei.create("registration-api-key");if(!Ye)throw ei.create("registration-app-id");const Ze=new ko(Ye,F.name,P=P||"firebase"),yt=new Mu(Ze),Lt=new ve.Yd(jl);Lt.logLevel=ve.in.ERROR;const Ut=new lo(j,re.SDK_VERSION,P,J,ue,Ye),os=new Hl(Ut,Ze),ir=new Yn(os,Ze,yt,Lt),qu=new xu(F,ir,yt,Ze,Lt);return function Sp(A){const C=(0,ie.m9)(A);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(qu),qu},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(jl,"0.4.4"),(0,re.registerVersion)(jl,"0.4.4","esm2017")}();const Tr=(A,C)=>C.some(P=>A instanceof P);let Ba,po;const Wl=new WeakMap,ni=new WeakMap,ar=new WeakMap,ku=new WeakMap,Gs=new WeakMap;let $a={get(A,C,P){if(A instanceof IDBTransaction){if("done"===C)return ni.get(A);if("objectStoreNames"===C)return A.objectStoreNames||ar.get(A);if("store"===C)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return Oi(A[C])},set:(A,C,P)=>(A[C]=P,!0),has:(A,C)=>A instanceof IDBTransaction&&("done"===C||"store"===C)||C in A};function A_(A){return"function"==typeof A?function Pp(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $r(){return po||(po=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...C){return A.apply(xp(this),C),Oi(Wl.get(this))}:function(...C){return Oi(A.apply(xp(this),C))}:function(C,...P){const F=A.call(xp(this),C,...P);return ar.set(F,C.sort?C.sort():[C]),Oi(F)}}(A):(A instanceof IDBTransaction&&function Ts(A){if(ni.has(A))return;const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("complete",J),A.removeEventListener("error",ue),A.removeEventListener("abort",ue)},J=()=>{P(),j()},ue=()=>{F(A.error||new DOMException("AbortError","AbortError")),j()};A.addEventListener("complete",J),A.addEventListener("error",ue),A.addEventListener("abort",ue)});ni.set(A,C)}(A),Tr(A,function ki(){return Ba||(Ba=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,$a):A)}function Oi(A){if(A instanceof IDBRequest)return function vc(A){const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("success",J),A.removeEventListener("error",ue)},J=()=>{P(Oi(A.result)),j()},ue=()=>{F(A.error),j()};A.addEventListener("success",J),A.addEventListener("error",ue)});return C.then(P=>{P instanceof IDBCursor&&Wl.set(P,A)}).catch(()=>{}),Gs.set(C,A),C}(A);if(ku.has(A))return ku.get(A);const C=A_(A);return C!==A&&(ku.set(A,C),Gs.set(C,A)),C}const xp=A=>Gs.get(A);function Th(A,C,{blocked:P,upgrade:F,blocking:j,terminated:J}={}){const ue=indexedDB.open(A,C),Ye=Oi(ue);return F&&ue.addEventListener("upgradeneeded",Ze=>{F(Oi(ue.result),Ze.oldVersion,Ze.newVersion,Oi(ue.transaction))}),P&&ue.addEventListener("blocked",()=>P()),Ye.then(Ze=>{J&&Ze.addEventListener("close",()=>J()),j&&Ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ye}function js(A,{blocked:C}={}){const P=indexedDB.deleteDatabase(A);return C&&P.addEventListener("blocked",()=>C()),Oi(P).then(()=>{})}const Ou=["get","getKey","getAll","getAllKeys","count"],Ic=["put","add","delete","clear"],Mp=new Map;function b_(A,C){if(!(A instanceof IDBDatabase)||C in A||"string"!=typeof C)return;if(Mp.get(C))return Mp.get(C);const P=C.replace(/FromIndex$/,""),F=C!==P,j=Ic.includes(P);if(!(P in(F?IDBIndex:IDBObjectStore).prototype)||!j&&!Ou.includes(P))return;const J=function(){var ue=(0,W.Z)(function*(Ye,...Ze){const yt=this.transaction(Ye,j?"readwrite":"readonly");let Lt=yt.store;return F&&(Lt=Lt.index(Ze.shift())),(yield Promise.all([Lt[P](...Ze),j&&yt.done]))[0]});return function(Ze){return ue.apply(this,arguments)}}();return Mp.set(C,J),J}!function Ga(A){$a=A($a)}(A=>({...A,get:(C,P,F)=>b_(C,P)||A.get(C,P,F),has:(C,P)=>!!b_(C,P)||A.has(C,P)}));const D_="/firebase-messaging-sw.js",C_="/firebase-cloud-messaging-push-scope",ja="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_E="https://fcmregistrations.googleapis.com/v1",Kl="google.c.a.c_id",ur="google.c.a.c_l",Ec="google.c.a.ts";var Ql=function(A){return A.PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",A}(Ql||{});function ia(A){const C=new Uint8Array(A);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Oo(A){const P=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(P),j=new Uint8Array(F.length);for(let J=0;J<F.length;++J)j[J]=F.charCodeAt(J);return j}const sa="fcm_token_details_db",S_=5,Tc="fcm_token_object_Store";function za(){return za=(0,W.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(sa))return null;let C=null;return(yield Th(sa,S_,{upgrade:(F=(0,W.Z)(function*(j,J,ue,Ye){var Ze;if(J<2||!j.objectStoreNames.contains(Tc))return;const yt=Ye.objectStore(Tc),Lt=yield yt.index("fcmSenderId").get(A);if(yield yt.clear(),Lt)if(2===J){const Ut=Lt;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;C={token:Ut.fcmToken,createTime:null!==(Ze=Ut.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:ia(Ut.vapidKey)}}}else if(3===J){const Ut=Lt;C={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:ia(Ut.auth),p256dh:ia(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:ia(Ut.vapidKey)}}}else if(4===J){const Ut=Lt;C={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:ia(Ut.auth),p256dh:ia(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:ia(Ut.vapidKey)}}}}),function(J,ue,Ye,Ze){return F.apply(this,arguments)})})).close(),yield js(sa),yield js("fcm_vapid_details_db"),yield js("undefined"),function Yl(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:C}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var F}),za.apply(this,arguments)}const Jl="firebase-messaging-database",Fu=1,Fi="firebase-messaging-store";let es=null;function oa(){return es||(es=Th(Jl,Fu,{upgrade:(A,C)=>{0===C&&A.createObjectStore(Fi)}})),es}function nr(A){return aa.apply(this,arguments)}function aa(){return aa=(0,W.Z)(function*(A){const C=Xl(A),F=yield(yield oa()).transaction(Fi).objectStore(Fi).get(C);if(F)return F;{const j=yield function Np(A){return za.apply(this,arguments)}(A.appConfig.senderId);if(j)return yield wc(A,j),j}}),aa.apply(this,arguments)}function wc(A,C){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,W.Z)(function*(A,C){const P=Xl(A),j=(yield oa()).transaction(Fi,"readwrite");return yield j.objectStore(Fi).put(C,P),yield j.done,C})).apply(this,arguments)}function go(){return(go=(0,W.Z)(function*(A){const C=Xl(A),F=(yield oa()).transaction(Fi,"readwrite");yield F.objectStore(Fi).delete(C),yield F.done})).apply(this,arguments)}function Xl({appConfig:A}){return A.appId}const Mr=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bc(A,C){return wh.apply(this,arguments)}function wh(){return(wh=(0,W.Z)(function*(A,C){const P=yield Cc(A),F=Op(C),j={method:"POST",headers:P,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(ua(A.appConfig),j)).json()}catch(ue){throw Mr.create("token-subscribe-failed",{errorInfo:ue?.toString()})}if(J.error)throw Mr.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Mr.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function qa(){return(qa=(0,W.Z)(function*(A,C){const P=yield Cc(A),F=Op(C.subscriptionOptions),j={method:"PATCH",headers:P,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(`${ua(A.appConfig)}/${C.token}`,j)).json()}catch(ue){throw Mr.create("token-update-failed",{errorInfo:ue?.toString()})}if(J.error)throw Mr.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Mr.create("token-update-no-token");return J.token})).apply(this,arguments)}function Ah(A,C){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,W.Z)(function*(A,C){const F={method:"DELETE",headers:yield Cc(A)};try{const J=yield(yield fetch(`${ua(A.appConfig)}/${C}`,F)).json();if(J.error)throw Mr.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(j){throw Mr.create("token-unsubscribe-failed",{errorInfo:j?.toString()})}})).apply(this,arguments)}function ua({projectId:A}){return`${_E}/projects/${A}/registrations`}function Cc(A){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,W.Z)(function*({appConfig:A,installations:C}){const P=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Op({p256dh:A,auth:C,endpoint:P,vapidKey:F}){const j={web:{endpoint:P,auth:C,p256dh:A}};return F!==ja&&(j.web.applicationPubKey=F),j}const Sc=6048e5;function Rc(){return Rc=(0,W.Z)(function*(A){const C=yield function Li(A,C){return Mc.apply(this,arguments)}(A.swRegistration,A.vapidKey),P={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:C.endpoint,auth:ia(C.getKey("auth")),p256dh:ia(C.getKey("p256dh"))},F=yield nr(A.firebaseDependencies);if(F){if(function Wa(A,C){return C.vapidKey===A.vapidKey&&C.endpoint===A.endpoint&&C.auth===A.auth&&C.p256dh===A.p256dh}(F.subscriptionOptions,P))return Date.now()>=F.createTime+Sc?function Lp(A,C){return Pc.apply(this,arguments)}(A,{token:F.token,createTime:Date.now(),subscriptionOptions:P}):F.token;try{yield Ah(A.firebaseDependencies,F.token)}catch(j){console.warn(j)}return ed(A.firebaseDependencies,P)}return ed(A.firebaseDependencies,P)}),Rc.apply(this,arguments)}function Uu(){return Uu=(0,W.Z)(function*(A){const C=yield nr(A.firebaseDependencies);C&&(yield Ah(A.firebaseDependencies,C.token),yield function Ac(A){return go.apply(this,arguments)}(A.firebaseDependencies));const P=yield A.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()}),Uu.apply(this,arguments)}function Pc(){return Pc=(0,W.Z)(function*(A,C){try{const P=yield function Lu(A,C){return qa.apply(this,arguments)}(A.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:P,createTime:Date.now()});return yield wc(A.firebaseDependencies,F),P}catch(P){throw yield function bh(A){return Uu.apply(this,arguments)}(A),P}}),Pc.apply(this,arguments)}function ed(A,C){return xc.apply(this,arguments)}function xc(){return(xc=(0,W.Z)(function*(A,C){const F={token:yield bc(A,C),createTime:Date.now(),subscriptionOptions:C};return yield wc(A,F),F.token})).apply(this,arguments)}function Mc(){return(Mc=(0,W.Z)(function*(A,C){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Oo(C)})})).apply(this,arguments)}function _n(A){const C={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function Vp(A,C){if(!C.notification)return;A.notification={};const P=C.notification.title;P&&(A.notification.title=P);const F=C.notification.body;F&&(A.notification.body=F);const j=C.notification.image;j&&(A.notification.image=j);const J=C.notification.icon;J&&(A.notification.icon=J)}(C,A),function mo(A,C){C.data&&(A.data=C.data)}(C,A),function Ii(A,C){var P,F,j,J,ue;if(!(C.fcmOptions||null!==(P=C.notification)&&void 0!==P&&P.click_action))return;A.fcmOptions={};const Ye=null!==(j=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==j?j:null===(J=C.notification)||void 0===J?void 0:J.click_action;Ye&&(A.fcmOptions.link=Ye);const Ze=null===(ue=C.fcmOptions)||void 0===ue?void 0:ue.analytics_label;Ze&&(A.fcmOptions.analyticsLabel=Ze)}(C,A),C}function nd(A,C){const P=[];for(let F=0;F<A.length;F++)P.push(A.charAt(F)),F<C.length&&P.push(C.charAt(F));return P.join("")}function Gr(A){return Mr.create("missing-app-config-values",{valueName:A})}nd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Nc{constructor(C,P,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Hs(A){if(!A||!A.options)throw Gr("App Configuration Object");if(!A.name)throw Gr("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:P}=A;for(const F of C)if(!P[F])throw Gr(F);return{appName:A.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:j,installations:P,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ka(){return(Ka=(0,W.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(D_,{scope:C_}),A.swRegistration.update().catch(()=>{})}catch(C){throw Mr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Fo(){return(Fo=(0,W.Z)(function*(A,C){if(!C&&!A.swRegistration&&(yield function kc(A){return Ka.apply(this,arguments)}(A)),C||!A.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Mr.create("invalid-sw-registration");A.swRegistration=C}})).apply(this,arguments)}function Za(){return(Za=(0,W.Z)(function*(A,C){C?A.vapidKey=C:A.vapidKey||(A.vapidKey=ja)})).apply(this,arguments)}function Oc(){return Oc=(0,W.Z)(function*(A,C){if(!navigator)throw Mr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mr.create("permission-blocked");return yield function Dh(A,C){return Za.apply(this,arguments)}(A,C?.vapidKey),yield function qs(A,C){return Fo.apply(this,arguments)}(A,C?.serviceWorkerRegistration),function Fp(A){return Rc.apply(this,arguments)}(A)}),Oc.apply(this,arguments)}function Pt(){return(Pt=(0,W.Z)(function*(A,C,P){const F=function Sh(A){switch(A){case Ql.NOTIFICATION_CLICKED:return"notification_open";case Ql.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:P[Kl],message_name:P[ur],message_time:P[Ec],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bu(){return Bu=(0,W.Z)(function*(A,C){const P=C.data;if(!P.isFirebaseMessaging)return;A.onMessageHandler&&P.messageType===Ql.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(_n(P)):A.onMessageHandler.next(_n(P)));const F=P.data;(function td(A){return"object"==typeof A&&!!A&&Kl in A})(F)&&"1"===F["google.c.a.e"]&&(yield function Ch(A,C,P){return Pt.apply(this,arguments)}(A,P.messageType,F))}),Bu.apply(this,arguments)}const Fc="@firebase/messaging",Up=A=>{const C=new Nc(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function Qa(A,C){return Bu.apply(this,arguments)}(C,P)),C},ca=A=>{const C=A.getProvider("messaging").getImmediate();return{getToken:F=>function rd(A,C){return Oc.apply(this,arguments)}(C,F)}};function id(){return sd.apply(this,arguments)}function sd(){return(sd=(0,W.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bp(){(0,re._registerComponent)(new Ie.wA("messaging",Up,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("messaging-internal",ca,"PRIVATE")),(0,re.registerVersion)(Fc,"0.12.4"),(0,re.registerVersion)(Fc,"0.12.4","esm2017")}();const Vi="analytics",ts="firebase_id",od="origin",ad=6e4,xh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gp="https://www.googletagmanager.com/gtag/js",fr=new ve.Yd("@firebase/analytics"),kn=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Uc(A){if(!A.startsWith(Gp)){const C=kn.create("invalid-gtag-resource",{gtagURL:A});return fr.warn(C.message),""}return A}function Ya(A){return Promise.all(A.map(C=>C.catch(P=>P)))}function Bc(){return(Bc=(0,W.Z)(function*(A,C,P,F,j,J){const ue=F[j];try{if(ue)yield C[ue];else{const Ze=(yield Ya(P)).find(yt=>yt.measurementId===j);Ze&&(yield C[Ze.appId])}}catch(Ye){fr.error(Ye)}A("config",j,J)})).apply(this,arguments)}function Ja(){return(Ja=(0,W.Z)(function*(A,C,P,F,j){try{let J=[];if(j&&j.send_to){let ue=j.send_to;Array.isArray(ue)||(ue=[ue]);const Ye=yield Ya(P);for(const Ze of ue){const yt=Ye.find(Ut=>Ut.measurementId===Ze),Lt=yt&&C[yt.appId];if(!Lt){J=[];break}J.push(Lt)}}0===J.length&&(J=Object.values(C)),yield Promise.all(J),A("event",F,j||{})}catch(J){fr.error(J)}})).apply(this,arguments)}const Hp=30,Jn=new class qp{constructor(C={},P=1e3){this.throttleMetadata=C,this.intervalMillis=P}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,P){this.throttleMetadata[C]=P}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Wp(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function $c(){return($c=(0,W.Z)(function*(A){var C;const{appId:P,apiKey:F}=A,j={method:"GET",headers:Wp(F)},J=xh.replace("{app-id}",P),ue=yield fetch(J,j);if(200!==ue.status&&304!==ue.status){let Ye="";try{const Ze=yield ue.json();null!==(C=Ze.error)&&void 0!==C&&C.message&&(Ye=Ze.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:ue.status,responseMessage:Ye})}return ue.json()})).apply(this,arguments)}function Fh(){return(Fh=(0,W.Z)(function*(A,C=Jn,P){const{appId:F,apiKey:j,measurementId:J}=A.options;if(!F)throw kn.create("no-app-id");if(!j){if(J)return{measurementId:J,appId:F};throw kn.create("no-api-key")}const ue=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new cd;return setTimeout((0,W.Z)(function*(){Ye.abort()}),void 0!==P?P:ad),ri({appId:F,apiKey:j,measurementId:J},ue,Ye,C)})).apply(this,arguments)}function ri(A,C,P){return yo.apply(this,arguments)}function yo(){return yo=(0,W.Z)(function*(A,{throttleEndTimeMillis:C,backoffCount:P},F,j=Jn){var J;const{appId:ue,measurementId:Ye}=A;try{yield function Xn(A,C){return new Promise((P,F)=>{const j=Math.max(C-Date.now(),0),J=setTimeout(P,j);A.addEventListener(()=>{clearTimeout(J),F(kn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(F,C)}catch(Ze){if(Ye)return fr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:ue,measurementId:Ye};throw Ze}try{const Ze=yield function ud(A){return $c.apply(this,arguments)}(A);return j.deleteThrottleMetadata(ue),Ze}catch(Ze){const yt=Ze;if(!function Gc(A){if(!(A instanceof ie.ZR&&A.customData))return!1;const C=Number(A.customData.httpStatus);return 429===C||500===C||503===C||504===C}(yt)){if(j.deleteThrottleMetadata(ue),Ye)return fr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:ue,measurementId:Ye};throw Ze}const Lt=503===Number(null===(J=yt?.customData)||void 0===J?void 0:J.httpStatus)?(0,ie.$s)(P,j.intervalMillis,Hp):(0,ie.$s)(P,j.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Lt,backoffCount:P+1};return j.setThrottleMetadata(ue,Ut),fr.debug(`Calling attemptFetch again in ${Lt} millis`),ri(A,Ut,F,j)}}),yo.apply(this,arguments)}class cd{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let eu,zc;function dd(){return(dd=(0,W.Z)(function*(A,C,P,F,j){if(j&&j.global)A("event",P,F);else{const J=yield C;A("event",P,Object.assign(Object.assign({},F),{send_to:J}))}})).apply(this,arguments)}function Ui(){return(Ui=(0,W.Z)(function*(){if(!(0,ie.hl)())return fr.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(A){return fr.warn(kn.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function Vh(){return Vh=(0,W.Z)(function*(A,C,P,F,j,J,ue){var Ye;const Ze=function Oh(A){return Fh.apply(this,arguments)}(A);Ze.then(ir=>{P[ir.measurementId]=ir.appId,A.options.measurementId&&ir.measurementId!==A.options.measurementId&&fr.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${ir.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ir=>fr.error(ir)),C.push(Ze);const yt=function ju(){return Ui.apply(this,arguments)}().then(ir=>{if(ir)return F.getId()}),[Lt,Ut]=yield Promise.all([Ze,yt]);(function kh(A){const C=window.document.getElementsByTagName("script");for(const P of Object.values(C))if(P.src&&P.src.includes(Gp)&&P.src.includes(A))return P;return null})(J)||function jp(A,C){const P=function ns(A,C){let P;return window.trustedTypes&&(P=window.trustedTypes.createPolicy(A,C)),P}("firebase-js-sdk-policy",{createScriptURL:Uc}),F=document.createElement("script"),j=`${Gp}?l=${A}&id=${C}`;F.src=P?P?.createScriptURL(j):j,F.async=!0,document.head.appendChild(F)}(J,Lt.measurementId),zc&&(j("consent","default",zc),function da(A){zc=A}(void 0)),j("js",new Date);const os=null!==(Ye=ue?.config)&&void 0!==Ye?Ye:{};return os[od]="firebase",os.update=!0,null!=Ut&&(os[ts]=Ut),j("config",Lt.measurementId,os),eu&&(j("set",eu),function Lo(A){eu=A}(void 0)),Lt.measurementId}),Vh.apply(this,arguments)}class Zp{constructor(C){this.app=C}_delete(){return delete ws[this.app.options.appId],Promise.resolve()}}let ws={},Hc=[];const Qp={};let bs,Bi,nu="dataLayer",ha=!1;function Uh(A,C,P){!function P_(){const A=[];if((0,ie.ru)()&&A.push("This is a browser extension environment."),(0,ie.zI)()||A.push("Cookies are not available."),A.length>0){const C=A.map((F,j)=>`(${j+1}) ${F}`).join(" "),P=kn.create("invalid-analytics-context",{errorInfo:C});fr.warn(P.message)}}();const F=A.options.appId;if(!F)throw kn.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw kn.create("no-api-key");fr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ws[F])throw kn.create("already-exists",{id:F});if(!ha){!function Mh(A){let C=[];Array.isArray(window[A])?C=window[A]:window[A]=C}(nu);const{wrappedGtag:J,gtagCore:ue}=function la(A,C,P,F,j){let J=function(...ue){window[F].push(arguments)};return window[j]&&"function"==typeof window[j]&&(J=window[j]),window[j]=function zp(A,C,P,F){function J(){return J=(0,W.Z)(function*(ue,...Ye){try{if("event"===ue){const[Ze,yt]=Ye;yield function _o(A,C,P,F,j){return Ja.apply(this,arguments)}(A,C,P,Ze,yt)}else if("config"===ue){const[Ze,yt]=Ye;yield function Nh(A,C,P,F,j,J){return Bc.apply(this,arguments)}(A,C,P,F,Ze,yt)}else if("consent"===ue){const[Ze]=Ye;A("consent","update",Ze)}else if("get"===ue){const[Ze,yt,Lt]=Ye;A("get",Ze,yt,Lt)}else if("set"===ue){const[Ze]=Ye;A("set",Ze)}else A(ue,...Ye)}catch(Ze){fr.error(Ze)}}),J.apply(this,arguments)}return function j(ue){return J.apply(this,arguments)}}(J,A,C,P),{gtagCore:J,wrappedGtag:window[j]}}(ws,Hc,Qp,nu,"gtag");Bi=J,bs=ue,ha=!0}return ws[F]=function nn(A,C,P,F,j,J,ue){return Vh.apply(this,arguments)}(A,Hc,Qp,C,bs,nu,P),new Zp(A)}function $i(){return wr.apply(this,arguments)}function wr(){return(wr=(0,W.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const iu="@firebase/analytics";!function fa(){(0,re._registerComponent)(new Ie.wA(Vi,(C,{options:P})=>Uh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,re._registerComponent)(new Ie.wA("analytics-internal",function A(C){try{const P=C.getProvider(Vi).getImmediate();return{logEvent:(F,j,J)=>function pd(A,C,P,F){A=(0,ie.m9)(A),function ld(A,C,P,F,j){return dd.apply(this,arguments)}(Bi,ws[A.app.options.appId],C,P,F).catch(j=>fr.error(j))}(P,F,j,J)}}catch(P){throw kn.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,re.registerVersion)(iu,"0.10.0"),(0,re.registerVersion)(iu,"0.10.0","esm2017")}();var Bo=O(1954),Kc=O(2631);const su=new class md extends Kc.v{}(class Wc extends Bo.o{constructor(C,P){super(C,P),this.scheduler=C,this.work=P}schedule(C,P=0){return P>0?super.schedule(C,P):(this.delay=P,this.state=C,this.scheduler.flush(this),this)}execute(C,P){return P>0||this.closed?super.execute(C,P):this._execute(C,P)}requestAsyncId(C,P,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,P,F):(C.flush(this),0)}});var yd=O(6321),$o=O(5592),$h=O(9397),Go=O(3093),pa=O(5137);const ga=new p.GfV("7.6.1"),Gi="__angularfire_symbol__analyticsIsSupportedValue",Ws="__angularfire_symbol__analyticsIsSupported",ma="__angularfire_symbol__remoteConfigIsSupportedValue",jo="__angularfire_symbol__remoteConfigIsSupported",Ds="__angularfire_symbol__messagingIsSupportedValue",Hu="__angularfire_symbol__messagingIsSupported";function vE(A,C,P){if(C){if(1===C.length)return C[0];const J=C.filter(ue=>ue.app===P);if(1===J.length)return J[0]}return P.container.getProvider(A).getImmediate({optional:!0})}globalThis[Ws]||(globalThis[Ws]=$i().then(A=>globalThis[Gi]=A).catch(()=>globalThis[Gi]=!1)),globalThis[Hu]||(globalThis[Hu]=id().then(A=>globalThis[Ds]=A).catch(()=>globalThis[Ds]=!1)),globalThis[jo]||(globalThis[jo]=Nu().then(A=>globalThis[ma]=A).catch(()=>globalThis[ma]=!1));const Zc=(A,C)=>{const P=C?[C]:(0,U.C6)(),F=[];return P.forEach(j=>{j.container.getProvider(A).instances.forEach(ue=>{F.includes(ue)||F.push(ue)})}),F};function Cs(){}class Eo{constructor(C,P=su){this.zone=C,this.delegate=P}now(){return this.delegate.now()}schedule(C,P,F){const j=this.zone;return this.delegate.schedule(function(ue){j.runGuarded(()=>{C.apply(this,[ue])})},P,F)}}class Qc{constructor(C){this.zone=C,this.task=null}call(C,P){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs)),P.pipe((0,$h.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vd=(()=>{class A{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Eo(Zone.current)),this.insideAngular=P.run(()=>new Eo(Zone.current,yd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(P){return new(P||A)(p.LFG(p.R0b))},A.\u0275prov=p.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Rn(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function is(A){return Rn().ngZone.run(()=>A())}function x_(A){return A.pipe((0,Go.Q)(Rn().outsideAngular))}function ya(A){return Rn(),function Id(A){return function(P){return(P=P.lift(new Qc(A.ngZone))).pipe((0,pa.R)(A.outsideAngular),(0,Go.Q)(A.insideAngular))}}(Rn())(A)}const Yc=(A,C)=>function(){const F=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),is(()=>A.apply(void 0,F))},ou=(A,C)=>function(){let P;const F=arguments;for(let J=0;J<arguments.length;J++)"function"==typeof F[J]&&(C&&(P||(P=is(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs)))),F[J]=Yc(F[J],P));const j=function Xp(A){return Rn().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,F));if(!C){if(j instanceof $o.y){const J=Rn();return j.pipe((0,pa.R)(J.outsideAngular),(0,Go.Q)(J.insideAngular))}return is(()=>j)}return j instanceof $o.y?j.pipe(ya):j instanceof Promise?is(()=>new Promise((J,ue)=>j.then(Ye=>is(()=>J(Ye)),Ye=>is(()=>ue(Ye))))):"function"==typeof j&&P?function(){return setTimeout(()=>{P&&"scheduled"===P.state&&P.invoke()},10),j.apply(this,arguments)}:is(()=>j)}},2659:(Et,Se,O)=>{O.d(Se,{$:()=>wc,A:()=>de,D:()=>Te,I:()=>Qn,J:()=>Ni,L:()=>ki,N:()=>er,P:()=>pd,Q:()=>Th,R:()=>P_,U:()=>Mp,V:()=>b_,W:()=>D_,X:()=>Ic,Y:()=>Kl,Z:()=>ur,_:()=>ia,a:()=>la,a0:()=>Ac,a1:()=>Xl,a2:()=>wh,a3:()=>Cc,a4:()=>Op,a5:()=>Fp,a6:()=>bh,a7:()=>Lp,a8:()=>ed,a9:()=>Li,aA:()=>ye,aB:()=>C,aC:()=>kt,aD:()=>Un,aE:()=>ya,aF:()=>_a,aG:()=>Nr,aH:()=>tr,aL:()=>Xa,aO:()=>ja,aa:()=>Mc,ab:()=>_n,ac:()=>Vp,ad:()=>nd,ae:()=>Gr,af:()=>kc,ai:()=>Dh,aj:()=>rd,ak:()=>Oc,an:()=>Np,ao:()=>Bp,aq:()=>od,ar:()=>Ya,as:()=>Gn,at:()=>Fa,au:()=>Oa,av:()=>wt,aw:()=>tg,ax:()=>J,ay:()=>T_,az:()=>_t,b:()=>Ja,c:()=>su,d:()=>$h,e:()=>yd,f:()=>vE,g:()=>Rn,h:()=>Eo,i:()=>Gu,j:()=>x_,k:()=>F_,l:()=>wr,m:()=>IE,p:()=>Mn,r:()=>Bh,s:()=>Vo,u:()=>Yp});var p=O(5861),U=O(9058),W=O(534);function ve(E,g){var y={};for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&g.indexOf(T)<0&&(y[T]=E[T]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var R=0;for(T=Object.getOwnPropertySymbols(E);R<T.length;R++)g.indexOf(T[R])<0&&Object.prototype.propertyIsEnumerable.call(E,T[R])&&(y[T[R]]=E[T[R]])}return y}var Qr=O(7879),Ri=O(4537);const Mn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},de={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},ze=function Ee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rn=new Qr.Yd("@firebase/auth");function Nt(E,...g){rn.logLevel<=Qr.in.ERROR&&rn.error(`Auth (${W.SDK_VERSION}): ${E}`,...g)}function wt(E,...g){throw Yr(E,...g)}function _t(E,...g){return Yr(E,...g)}function On(E,g,y){const T=Object.assign(Object.assign({},ze()),{[g]:y});return new U.LL("auth","Firebase",T).create(g,{appName:E.name})}function or(E,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&wt(E,"argument-error"),On(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yr(E,...g){if("string"!=typeof E){const y=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(y,...T)}return We.create(E,...g)}function ye(E,g,...y){if(!E)throw Yr(g,...y)}function Wn(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Nt(g),new Error(g)}function Gn(E,g){E||Wn(g)}function Is(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Us(){return"http:"===uo()||"https:"===uo()}function uo(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Nn{constructor(g,y){this.shortDelay=g,this.longDelay=y,Gn(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function So(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Us()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(E,g){Gn(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Bt{static initialize(g,y,T){this.fetchImpl=g,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ot=new Nn(3e4,6e4);function en(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function cn(E,g,y,T){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*(E,g,y,T,R={}){return Xo(E,R,(0,p.Z)(function*(){let M={},G={};T&&("GET"===g?G=T:M={body:JSON.stringify(T)});const ee=(0,U.xO)(Object.assign({key:E.config.apiKey},G)).slice(1),Fe=yield E._getAdditionalHeaders();return Fe["Content-Type"]="application/json",E.languageCode&&(Fe["X-Firebase-Locale"]=E.languageCode),Bt.fetch()(Cu(E,E.config.apiHost,y,ee),Object.assign({method:g,headers:Fe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Xo(E,g,y){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(E,g,y){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},mi),g);try{const R=new ka(E),M=yield Promise.race([y(),R.promise]);R.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw Pi(E,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const ee=M.ok?G.errorMessage:G.error.message,[Fe,Ce]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Pi(E,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw Pi(E,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw Pi(E,"user-disabled",G);const ut=T[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw On(E,ut,Ce);wt(E,ut)}}catch(R){if(R instanceof U.ZR)throw R;wt(E,"network-request-failed",{message:String(R)})}})).apply(this,arguments)}function Yt(E,g,y,T){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(E,g,y,T,R={}){const M=yield cn(E,g,y,T,R);return"mfaPendingCredential"in M&&wt(E,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Cu(E,g,y,T){const R=`${g}${y}?${T}`;return E.config.emulator?Kt(E.config,R):`${E.config.apiScheme}://${R}`}class ka{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(_t(this.auth,"network-request-failed")),Ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pi(E,g,y){const T={appName:E.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const R=_t(E,g,T);return R.customData._tokenResponse=y,R}function Ji(){return(Ji=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Xi(){return(Xi=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Xr(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function z(){return(z=(0,p.Z)(function*(E,g=!1){const y=(0,U.m9)(E),T=yield y.getIdToken(g),R=Y(T);ye(R&&R.exp&&R.auth_time&&R.iat,y.auth,"internal-error");const M="object"==typeof R.firebase?R.firebase:void 0,G=M?.sign_in_provider;return{claims:R,token:T,authTime:Xr(V(R.auth_time)),issuedAtTime:Xr(V(R.iat)),expirationTime:Xr(V(R.exp)),signInProvider:G||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function V(E){return 1e3*Number(E)}function Y(E){const[g,y,T]=E.split(".");if(void 0===g||void 0===y||void 0===T)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,U.tV)(y);return R?JSON.parse(R):(Nt("Failed to decode base64 JWT payload"),null)}catch(R){return Nt("Caught error parsing JWT payload as JSON",R?.toString()),null}}function ne(E,g){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(E,g,y=!1){if(y)return g;try{return yield g}catch(T){throw T instanceof U.ZR&&function xt({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}class dn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const R=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield y.iteration()}),T)}iteration(){var g=this;return(0,p.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class Sr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kn(E){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,p.Z)(function*(E){var g;const y=E.auth,T=yield E.getIdToken(),R=yield ne(E,function xi(E,g){return Xi.apply(this,arguments)}(y,{idToken:T}));ye(R?.users.length,y,"internal-error");const M=R.users[0];E._notifyReloadListener(M);const G=null!==(g=M.providerUserInfo)&&void 0!==g&&g.length?function Qt(E){return E.map(g=>{var{providerId:y}=g,T=ve(g,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(M.providerUserInfo):[],ee=function hr(E,g){return[...E.filter(T=>!g.some(R=>R.providerId===T.providerId)),...g]}(E.providerData,G),ut=!!E.isAnonymous&&!(E.email&&M.passwordHash||ee?.length),zt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ee,metadata:new Sr(M.createdAt,M.lastLoginAt),isAnonymous:ut};Object.assign(E,zt)}),Ln.apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(E){const g=(0,U.m9)(E);yield Kn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ge(){return(ge=(0,p.Z)(function*(E,g){const y=yield Xo(E,{},(0,p.Z)(function*(){const T=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:M}=E.config,G=Cu(E,R,"/v1/token",`key=${M}`),ee=yield E._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",Bt.fetch()(G,{method:"POST",headers:ee,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ye(g.idToken,"internal-error"),ye(typeof g.idToken<"u","internal-error"),ye(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function pe(E){const g=Y(E);return ye(g,"internal-error"),ye(typeof g.exp<"u","internal-error"),ye(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var T=this;return(0,p.Z)(function*(){return ye(!T.accessToken||T.refreshToken,g,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var T=this;return(0,p.Z)(function*(){const{accessToken:R,refreshToken:M,expiresIn:G}=yield function Po(E,g){return ge.apply(this,arguments)}(g,y);T.updateTokensAndExpiration(R,M,Number(G))})()}updateTokensAndExpiration(g,y,T){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,y){const{refreshToken:T,accessToken:R,expirationTime:M}=y,G=new te;return T&&(ye("string"==typeof T,"internal-error",{appName:g}),G.refreshToken=T),R&&(ye("string"==typeof R,"internal-error",{appName:g}),G.accessToken=R),M&&(ye("number"==typeof M,"internal-error",{appName:g}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return Wn("not implemented")}}function Me(E,g){ye("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class at{constructor(g){var{uid:y,auth:T,stsTokenManager:R}=g,M=ve(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Sr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,p.Z)(function*(){const T=yield ne(y,y.stsTokenManager.getToken(y.auth,g));return ye(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(g){return function yi(E){return z.apply(this,arguments)}(this,g)}reload(){return function tn(E){return Vn.apply(this,arguments)}(this)}_assign(g){this!==g&&(ye(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new at(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var T=this;return(0,p.Z)(function*(){let R=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),R=!0),y&&(yield Kn(T)),yield T.auth._persistUserIfCurrent(T),R&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,p.Z)(function*(){const y=yield g.getIdToken();return yield ne(g,function Jr(E,g){return Ji.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var T,R,M,G,ee,Fe,Ce,ut;const zt=null!==(T=y.displayName)&&void 0!==T?T:void 0,gn=null!==(R=y.email)&&void 0!==R?R:void 0,ii=null!==(M=y.phoneNumber)&&void 0!==M?M:void 0,Ia=null!==(G=y.photoURL)&&void 0!==G?G:void 0,qh=null!==(ee=y.tenantId)&&void 0!==ee?ee:void 0,Wh=null!==(Fe=y._redirectEventId)&&void 0!==Fe?Fe:void 0,Ad=null!==(Ce=y.createdAt)&&void 0!==Ce?Ce:void 0,B_=null!==(ut=y.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:Kh,emailVerified:ji,isAnonymous:zo,providerData:Zh,stsTokenManager:nl}=y;ye(Kh&&nl,g,"internal-error");const Ti=te.fromJSON(this.name,nl);ye("string"==typeof Kh,g,"internal-error"),Me(zt,g.name),Me(gn,g.name),ye("boolean"==typeof ji,g,"internal-error"),ye("boolean"==typeof zo,g,"internal-error"),Me(ii,g.name),Me(Ia,g.name),Me(qh,g.name),Me(Wh,g.name),Me(Ad,g.name),Me(B_,g.name);const Ea=new at({uid:Kh,auth:g,email:gn,emailVerified:ji,displayName:zt,isAnonymous:zo,photoURL:Ia,phoneNumber:ii,tenantId:qh,stsTokenManager:Ti,createdAt:Ad,lastLoginAt:B_});return Zh&&Array.isArray(Zh)&&(Ea.providerData=Zh.map(ag=>Object.assign({},ag))),Wh&&(Ea._redirectEventId=Wh),Ea}static _fromIdTokenResponse(g,y,T=!1){return(0,p.Z)(function*(){const R=new te;R.updateFromServerResponse(y);const M=new at({uid:y.localId,auth:g,stsTokenManager:R,isAnonymous:T});return yield Kn(M),M})()}}const Mt=new Map;function kt(E){Gn(E instanceof Function,"Expected a class definition");let g=Mt.get(E);return g?(Gn(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,Mt.set(E,g),g)}const er=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(y,T){var R=this;return(0,p.Z)(function*(){R.storage[y]=T})()}_get(y){var T=this;return(0,p.Z)(function*(){const R=T.storage[y];return void 0===R?null:R})()}_remove(y){var T=this;return(0,p.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return E.type="NONE",E})();function Un(E,g,y){return`firebase:${E}:${g}:${y}`}class Mi{constructor(g,y,T){this.persistence=g,this.auth=y,this.userKey=T;const{config:R,name:M}=this.auth;this.fullUserKey=Un(this.userKey,R.apiKey,M),this.fullPersistenceKey=Un("persistence",R.apiKey,M),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?at._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,p.Z)(function*(){if(y.persistence===g)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,T="authUser"){return(0,p.Z)(function*(){if(!y.length)return new Mi(kt(er),g,T);const R=(yield Promise.all(y.map(function(){var Ce=(0,p.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let M=R[0]||kt(er);const G=Un(T,g.config.apiKey,g.name);let ee=null;for(const Ce of y)try{const ut=yield Ce._get(G);if(ut){const zt=at._fromJSON(g,ut);Ce!==M&&(ee=zt),M=Ce;break}}catch{}const Fe=R.filter(Ce=>Ce._shouldAllowMigration);return M._shouldAllowMigration&&Fe.length?(M=Fe[0],ee&&(yield M._set(G,ee.toJSON())),yield Promise.all(y.map(function(){var Ce=(0,p.Z)(function*(ut){if(ut!==M)try{yield ut._remove(G)}catch{}});return function(ut){return Ce.apply(this,arguments)}}())),new Mi(M,g,T)):new Mi(M,g,T)})()}}function Bs(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Bl(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ea(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(mh(g))return"Blackberry";if(Rr(g))return"Webos";if(Su(g))return"Safari";if((g.includes("chrome/")||_c(g))&&!g.includes("edge/"))return"Chrome";if(Oa(g))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function ea(E=(0,U.z$)()){return/firefox\//i.test(E)}function Su(E=(0,U.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function _c(E=(0,U.z$)()){return/crios\//i.test(E)}function Bl(E=(0,U.z$)()){return/iemobile/i.test(E)}function Oa(E=(0,U.z$)()){return/android/i.test(E)}function mh(E=(0,U.z$)()){return/blackberry/i.test(E)}function Rr(E=(0,U.z$)()){return/webos/i.test(E)}function Fa(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function T_(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function _h(E=(0,U.z$)()){return Fa(E)||Oa(E)||Rr(E)||mh(E)||/windows phone/i.test(E)||Bl(E)}function ta(E,g=[]){let y;switch(E){case"Browser":y=Bs((0,U.z$)());break;case"Worker":y=`${Bs((0,U.z$)())}-${E}`;break;default:y=E}const T=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${W.SDK_VERSION}/${T}`}function Gl(){return(Gl=(0,p.Z)(function*(E){return(yield cn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bp(E,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,p.Z)(function*(E,g){return cn(E,"GET","/v2/recaptchaConfig",en(E,g))})).apply(this,arguments)}function Dp(E){return void 0!==E&&void 0!==E.getResponse}function jl(E){return void 0!==E&&void 0!==E.enterprise}class vh{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function vi(E){return new Promise((g,y)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=g,T.onerror=R=>{const M=_t("internal-error");M.customData=R,y(M)},T.type="text/javascript",T.charset="UTF-8",function Ih(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(T)})}function zl(E){return`__${E}${Math.floor(1e6*Math.random())}`}class Pr{constructor(g){this.type="recaptcha-enterprise",this.auth=tr(g)}verify(g="verify",y=!1){var T=this;return(0,p.Z)(function*(){function M(){return M=(0,p.Z)(function*(ee){if(!y){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Fe=(0,p.Z)(function*(Ce,ut){bp(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(zt=>{if(void 0!==zt.recaptchaKey){const gn=new vh(zt);return null==ee.tenantId?ee._agentRecaptchaConfig=gn:ee._tenantRecaptchaConfigs[ee.tenantId]=gn,Ce(gn.siteKey)}ut(new Error("recaptcha Enterprise site key undefined"))}).catch(zt=>{ut(zt)})});return function(Ce,ut){return Fe.apply(this,arguments)}}())}),M.apply(this,arguments)}function G(ee,Fe,Ce){const ut=window.grecaptcha;jl(ut)?ut.enterprise.ready(()=>{ut.enterprise.execute(ee,{action:g}).then(zt=>{Fe(zt)}).catch(()=>{Fe("NO_RECAPTCHA")})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Fe)=>{(function R(ee){return M.apply(this,arguments)})(T.auth).then(Ce=>{if(!y&&jl(window.grecaptcha))G(Ce,ee,Fe);else{if(typeof window>"u")return void Fe(new Error("RecaptchaVerifier is only supported in browser"));vi("https://www.google.com/recaptcha/enterprise.js?render="+Ce).then(()=>{G(Ce,ee,Fe)}).catch(ut=>{Fe(ut)})}}).catch(Ce=>{Fe(Ce)})})})()}}function Zn(E,g,y){return xo.apply(this,arguments)}function xo(){return(xo=(0,p.Z)(function*(E,g,y,T=!1){const R=new Pr(E);let M;try{M=yield R.verify(y)}catch{M=yield R.verify(y,!0)}const G=Object.assign({},g);return Object.assign(G,T?{captchaResp:M}:{captchaResponse:M}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class ti{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const T=M=>new Promise((G,ee)=>{try{G(g(M))}catch(Fe){ee(Fe)}});T.onAbort=y,this.queue.push(T);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,p.Z)(function*(){if(y.auth.currentUser===g)return;const T=[];try{for(const R of y.queue)yield R(g),R.onAbort&&T.push(R.onAbort)}catch(R){T.reverse();for(const M of T)try{M()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:R?.message})}})()}}class Cp{constructor(g,y,T,R){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new na(this),this.idTokenSubscription=new na(this),this.beforeStateQueue=new ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(g,y){var T=this;return y&&(this._popupRedirectResolver=kt(y)),this._initializationPromise=this.queue((0,p.Z)(function*(){var R,M;if(!T._deleted&&(T.persistenceManager=yield Mi.create(T,g),!T._deleted)){if(null!==(R=T._popupRedirectResolver)&&void 0!==R&&R._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(M=T.currentUser)||void 0===M?void 0:M.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,p.Z)(function*(){var T;const R=yield y.assertedPersistence.getCurrentUser();let M=R,G=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ee=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,Fe=M?._redirectEventId,Ce=yield y.tryRedirectSignIn(g);(!ee||ee===Fe)&&Ce?.user&&(M=Ce.user,G=!0)}if(!M)return y.directlySetCurrentUser(null);if(!M._redirectEventId){if(G)try{yield y.beforeStateQueue.runMiddleware(M)}catch(ee){M=R,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(ee))}return M?y.reloadAndSetCurrentUserOrClear(M):y.directlySetCurrentUser(null)}return ye(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===M._redirectEventId?y.directlySetCurrentUser(M):y.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(g){var y=this;return(0,p.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,p.Z)(function*(){try{yield Kn(g)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Na(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,p.Z)(function*(){const T=g?(0,U.m9)(g):null;return T&&ye(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(g,y=!1){var T=this;return(0,p.Z)(function*(){if(!T._deleted)return g&&ye(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,p.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,p.Z)(function*(){yield y.assertedPersistence.setPersistence(kt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,p.Z)(function*(){const y=yield bp(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new vh(y);null==g.tenantId?g._agentRecaptchaConfig=T:g._tenantRecaptchaConfigs[g.tenantId]=T,T.emailPasswordEnabled&&new Pr(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,y,T){return this.registerStateListener(this.authStateSubscription,g,y,T)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,T){return this.registerStateListener(this.idTokenSubscription,g,y,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var T=this;return(0,p.Z)(function*(){const R=yield T.getOrInitRedirectPersistenceManager(y);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,p.Z)(function*(){if(!y.redirectPersistenceManager){const T=g&&kt(g)||y._popupRedirectResolver;ye(T,y,"argument-error"),y.redirectPersistenceManager=yield Mi.create(y,[kt(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,p.Z)(function*(){var T,R;return y._isInitialized&&(yield y.queue((0,p.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===g?y._currentUser:(null===(R=y.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,p.Z)(function*(){if(g===y.currentUser)return y.queue((0,p.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,T,R){if(this._deleted)return()=>{};const M="function"==typeof y?y:y.next.bind(y),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof y?g.addObserver(y,T,R):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,p.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){var y;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const R=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();R&&(T["X-Firebase-Client"]=R);const M=yield g._getAppCheckToken();return M&&(T["X-Firebase-AppCheck"]=M),T})()}_getAppCheckToken(){var g=this;return(0,p.Z)(function*(){var y;const T=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function sr(E,...g){rn.logLevel<=Qr.in.WARN&&rn.warn(`Auth (${W.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function tr(E){return(0,U.m9)(E)}class na{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qn(E,g,y){const T=tr(E);ye(T._canInitEmulator,T,"emulator-config-failed"),ye(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const R=!!y?.disableWarnings,M=pt(g),{host:G,port:ee}=function $t(E){const g=pt(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(T);if(R){const M=R[1];return{host:M,port:jn(T.substr(M.length+1))}}{const[M,G]=T.split(":");return{host:M,port:jn(G)}}}(g);T.config.emulator={url:`${M}//${G}${null===ee?"":`:${ee}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:G,port:ee,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function $s(){function E(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function pt(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function jn(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class Ni{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Wn("not implemented")}_getIdTokenResponse(g){return Wn("not implemented")}_linkToIdToken(g,y){return Wn("not implemented")}_getReauthenticationResolver(g){return Wn("not implemented")}}function xr(E,g){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:resetPassword",en(E,g))})).apply(this,arguments)}function Yn(E,g){return No.apply(this,arguments)}function No(){return(No=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:update",en(E,g))})).apply(this,arguments)}function La(E,g){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPassword",en(E,g))})).apply(this,arguments)}function ho(E,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:sendOobCode",en(E,g))})).apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(E,g){return ho(E,g)})).apply(this,arguments)}function Er(E,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(E,g){return ho(E,g)})).apply(this,arguments)}function Ua(E,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,p.Z)(function*(E,g){return ho(E,g)})).apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(E,g){return ho(E,g)})).apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",en(E,g))})).apply(this,arguments)}function Nu(){return(Nu=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",en(E,g))})).apply(this,arguments)}class ra extends Ni{constructor(g,y,T,R=null){super("password",T),this._email=g,this._password=y,this._tenantId=R}static _fromEmailAndPassword(g,y){return new ra(g,y,"password")}static _fromEmailAndCode(g,y,T=null){return new ra(g,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,p.Z)(function*(){var T;switch(y.signInMethod){case"password":const R={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const M=yield Zn(g,R,"signInWithPassword");return La(g,M)}return La(g,R).catch(function(){var M=(0,p.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield Zn(g,R,"signInWithPassword");return La(g,ee)}return Promise.reject(G)});return function(G){return M.apply(this,arguments)}}());case"emailLink":return function yc(E,g){return Jt.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:wt(g,"internal-error")}})()}_linkToIdToken(g,y){var T=this;return(0,p.Z)(function*(){switch(T.signInMethod){case"password":return Yn(g,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function ql(E,g){return Nu.apply(this,arguments)}(g,{idToken:y,email:T._email,oobCode:T._password});default:wt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Tr(E,g){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithIdp",en(E,g))})).apply(this,arguments)}class ki extends Ni{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ki(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):wt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:R}=y,M=ve(y,["providerId","signInMethod"]);if(!T||!R)return null;const G=new ki(T,R);return G.idToken=M.idToken||void 0,G.accessToken=M.accessToken||void 0,G.secret=M.secret,G.nonce=M.nonce,G.pendingToken=M.pendingToken||null,G}_getIdTokenResponse(g){return Tr(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,Tr(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Tr(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,U.xO)(y)}return g}}function Wl(){return(Wl=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:sendVerificationCode",en(E,g))})).apply(this,arguments)}function ar(){return(ar=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,g))})).apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(E,g){const y=yield Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,g));if(y.temporaryProof)throw Pi(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const vc={USER_NOT_FOUND:"user-not-found"};function $a(){return($a=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",en(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),vc)})).apply(this,arguments)}class Ga extends Ni{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ga({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ga({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function ni(E,g){return ar.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function ku(E,g){return Gs.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ts(E,g){return $a.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:T,verificationCode:R}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:T,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:T,phoneNumber:R,temporaryProof:M}=g;return T||y||R||M?new Ga({verificationId:y,verificationCode:T,phoneNumber:R,temporaryProof:M}):null}}class Oi{constructor(g){var y,T,R,M,G,ee;const Fe=(0,U.zd)((0,U.pd)(g)),Ce=null!==(y=Fe.apiKey)&&void 0!==y?y:null,ut=null!==(T=Fe.oobCode)&&void 0!==T?T:null,zt=function Pp(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Fe.mode)&&void 0!==R?R:null);ye(Ce&&ut&&zt,"argument-error"),this.apiKey=Ce,this.operation=zt,this.code=ut,this.continueUrl=null!==(M=Fe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ee=Fe.tenantId)&&void 0!==ee?ee:null}static parseLink(g){const y=function A_(E){const g=(0,U.zd)((0,U.pd)(E)).link,y=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,T=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(T?(0,U.zd)((0,U.pd)(T)).link:null)||T||y||g||E}(g);try{return new Oi(y)}catch{return null}}}let Th=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,T){return ra._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const R=Oi.parseLink(T);return ye(R,"argument-error"),ra._fromEmailAndCode(y,R.code,R.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class js{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ou extends js{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ic extends Ou{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ye("providerId"in y&&"signInMethod"in y,"argument-error"),ki._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ye(g.idToken||g.accessToken,"argument-error"),ki._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ic.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ic.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:R,pendingToken:M,nonce:G,providerId:ee}=g;if(!T&&!R&&!y&&!M||!ee)return null;try{return new Ic(ee)._credential({idToken:y,accessToken:T,nonce:G,pendingToken:M})}catch{return null}}}let Mp=(()=>{class E extends Ou{constructor(){super("facebook.com")}static credential(y){return ki._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),b_=(()=>{class E extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return ki._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:R}=y;if(!T&&!R)return null;try{return E.credential(T,R)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),D_=(()=>{class E extends Ou{constructor(){super("github.com")}static credential(y){return ki._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class ja extends Ni{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Tr(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,Tr(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Tr(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:R,pendingToken:M}=y;return T&&R&&M&&T===R?new ja(T,M):null}static _create(g,y){return new ja(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Kl extends js{constructor(g){ye(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Kl.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Kl.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=ja.fromJSON(g);return ye(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:T}=g;if(!y||!T)return null;try{return ja._create(T,y)}catch{return null}}}let ur=(()=>{class E extends Ou{constructor(){super("twitter.com")}static credential(y,T){return ki._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:R}=y;if(!T||!R)return null;try{return E.credential(T,R)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ec(E,g){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signUp",en(E,g))})).apply(this,arguments)}class zs{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,T,R=!1){return(0,p.Z)(function*(){const M=yield at._fromIdTokenResponse(g,T,R),G=Ql(T);return new zs({user:M,providerId:G,_tokenResponse:T,operationType:y})})()}static _forOperation(g,y,T){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const R=Ql(T);return new zs({user:g,providerId:R,_tokenResponse:T,operationType:y})})()}}function Ql(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function ia(E){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(E){var g;const y=tr(E);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new zs({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Ec(y,{returnSecureToken:!0}),R=yield zs._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(R.user),R})).apply(this,arguments)}class sa extends U.ZR{constructor(g,y,T,R){var M;super(y.code,y.message),this.operationType=T,this.user=R,Object.setPrototypeOf(this,sa.prototype),this.customData={appName:g.name,tenantId:null!==(M=g.tenantId)&&void 0!==M?M:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,y,T,R){return new sa(g,y,T,R)}}function S_(E,g,y,T){return("reauthenticate"===g?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?sa._fromErrorAndOperation(E,M,g,T):M})}function Tc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Np(E,g){return za.apply(this,arguments)}function za(){return za=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E);yield Fu(!0,y,g);const{providerUserInfo:T}=yield function Ro(E,g){return _i.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),R=Tc(T||[]);return y.providerData=y.providerData.filter(M=>R.has(M.providerId)),R.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),za.apply(this,arguments)}function Yl(E,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,p.Z)(function*(E,g,y=!1){const T=yield ne(E,g._linkToIdToken(E.auth,yield E.getIdToken()),y);return zs._forOperation(E,"link",T)})).apply(this,arguments)}function Fu(E,g,y){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(E,g,y){yield Kn(g);const R=!1===E?"provider-already-linked":"no-such-provider";ye(Tc(g.providerData).has(y)===E,g.auth,R)})).apply(this,arguments)}function es(E,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,p.Z)(function*(E,g,y=!1){const{auth:T}=E,R="reauthenticate";try{const M=yield ne(E,S_(T,R,g,E),y);ye(M.idToken,T,"internal-error");const G=Y(M.idToken);ye(G,T,"internal-error");const{sub:ee}=G;return ye(E.uid===ee,T,"user-mismatch"),zs._forOperation(E,R,M)}catch(M){throw"auth/user-not-found"===M?.code&&wt(T,"user-mismatch"),M}})).apply(this,arguments)}function nr(E,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(E,g,y=!1){const T="signIn",R=yield S_(E,T,g),M=yield zs._fromIdTokenResponse(E,T,R);return y||(yield E._updateCurrentUser(M.user)),M})).apply(this,arguments)}function wc(E,g){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(E,g){return nr(tr(E),g)})).apply(this,arguments)}function Ac(E,g){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E);return yield Fu(!1,y,g.providerId),Yl(y,g)})).apply(this,arguments)}function Xl(E,g){return kp.apply(this,arguments)}function kp(){return(kp=(0,p.Z)(function*(E,g){return es((0,U.m9)(E),g)})).apply(this,arguments)}function bc(){return(bc=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithCustomToken",en(E,g))})).apply(this,arguments)}function wh(E,g){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,p.Z)(function*(E,g){const y=tr(E),T=yield function Mr(E,g){return bc.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),R=yield zs._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(R.user),R}),Lu.apply(this,arguments)}class qa{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Ah._fromServerResponse(g,y):"totpInfo"in y?Dc._fromServerResponse(g,y):wt(g,"internal-error")}}class Ah extends qa{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Ah(y)}}class Dc extends qa{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new Dc(y)}}function ua(E,g,y){var T;ye((null===(T=y.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),ye(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ye(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ye(y.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Cc(E,g,y){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,p.Z)(function*(E,g,y){var T;const R=tr(E),M={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=R._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const G=yield Zn(R,M,"getOobCode",!0);y&&ua(R,G,y),yield Er(R,G)}else y&&ua(R,M,y),yield Er(R,M).catch(function(){var G=(0,p.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Fe=yield Zn(R,M,"getOobCode",!0);y&&ua(R,Fe,y),yield Er(R,Fe)}});return function(ee){return G.apply(this,arguments)}}())}),Vu.apply(this,arguments)}function Op(E,g,y){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,p.Z)(function*(E,g,y){yield xr((0,U.m9)(E),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Fp(E,g){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,p.Z)(function*(E,g){yield function lo(E,g){return Ft.apply(this,arguments)}((0,U.m9)(E),{oobCode:g})}),Rc.apply(this,arguments)}function bh(E,g){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E),T=yield xr(y,{oobCode:g}),R=T.requestType;switch(ye(R,y,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(T.mfaInfo,y,"internal-error");default:ye(T.email,y,"internal-error")}let M=null;return T.mfaInfo&&(M=qa._fromServerResponse(tr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:M},operation:R}})).apply(this,arguments)}function Lp(E,g){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,p.Z)(function*(E,g){const{data:y}=yield bh((0,U.m9)(E),g);return y.email})).apply(this,arguments)}function ed(E,g,y){return xc.apply(this,arguments)}function xc(){return xc=(0,p.Z)(function*(E,g,y){var T;const R=tr(E),M={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(T=R._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Ce=yield Zn(R,M,"signUpPassword");G=Ec(R,Ce)}else G=Ec(R,M).catch(function(){var Ce=(0,p.Z)(function*(ut){if("auth/missing-recaptcha-token"===ut.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const zt=yield Zn(R,M,"signUpPassword");return Ec(R,zt)}return Promise.reject(ut)});return function(ut){return Ce.apply(this,arguments)}}());const ee=yield G.catch(Ce=>Promise.reject(Ce)),Fe=yield zs._fromIdTokenResponse(R,"signIn",ee);return yield R._updateCurrentUser(Fe.user),Fe}),xc.apply(this,arguments)}function Li(E,g,y){return wc((0,U.m9)(E),Th.credential(g,y))}function Mc(E,g,y){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,p.Z)(function*(E,g,y){var T;const R=tr(E),M={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function G(ee,Fe){ye(Fe.handleCodeInApp,R,"argument-error"),Fe&&ua(R,ee,Fe)}if(null!==(T=R._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const ee=yield Zn(R,M,"getOobCode",!0);G(ee,y),yield Ua(R,ee)}else G(M,y),yield Ua(R,M).catch(function(){var ee=(0,p.Z)(function*(Fe){if("auth/missing-recaptcha-token"!==Fe.code)return Promise.reject(Fe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ce=yield Zn(R,M,"getOobCode",!0);G(Ce,y),yield Ua(R,Ce)}});return function(Fe){return ee.apply(this,arguments)}}())}),Wa.apply(this,arguments)}function _n(E,g){const y=Oi.parseLink(g);return"EMAIL_SIGNIN"===y?.operation}function Vp(E,g,y){return mo.apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E),R=Th.credentialWithLink(g,y||Is());return ye(R._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),wc(T,R)})).apply(this,arguments)}function td(){return(td=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:createAuthUri",en(E,g))})).apply(this,arguments)}function nd(E,g){return Hs.apply(this,arguments)}function Hs(){return Hs=(0,p.Z)(function*(E,g){const T={identifier:g,continueUri:Us()?Is():"http://localhost"},{signinMethods:R}=yield function Ii(E,g){return td.apply(this,arguments)}((0,U.m9)(E),T);return R||[]}),Hs.apply(this,arguments)}function Gr(E,g){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E),R={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&ua(y.auth,R,g);const{email:M}=yield function xu(E,g){return Es.apply(this,arguments)}(y.auth,R);M!==E.email&&(yield E.reload())}),Nc.apply(this,arguments)}function kc(E,g,y){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};y&&ua(T.auth,M,y);const{email:G}=yield function ko(E,g){return Mu.apply(this,arguments)}(T.auth,M);G!==E.email&&(yield E.reload())}),Ka.apply(this,arguments)}function Fo(){return(Fo=(0,p.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Dh(E,g){return Za.apply(this,arguments)}function Za(){return Za=(0,p.Z)(function*(E,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const T=(0,U.m9)(E),M={idToken:yield T.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},G=yield ne(T,function qs(E,g){return Fo.apply(this,arguments)}(T.auth,M));T.displayName=G.displayName||null,T.photoURL=G.photoUrl||null;const ee=T.providerData.find(({providerId:Fe})=>"password"===Fe);ee&&(ee.displayName=T.displayName,ee.photoURL=T.photoURL),yield T._updateTokensIfNecessary(G)}),Za.apply(this,arguments)}function rd(E,g){return Ch((0,U.m9)(E),g,null)}function Oc(E,g){return Ch((0,U.m9)(E),null,g)}function Ch(E,g,y){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(E,g,y){const{auth:T}=E,M={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(M.email=g),y&&(M.password=y);const G=yield ne(E,Yn(T,M));yield E._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Qa{constructor(g,y,T={}){this.isNewUser=g,this.providerId=y,this.profile=T}}class Bu extends Qa{constructor(g,y,T,R){super(g,y,T),this.username=R}}class Fc extends Qa{constructor(g,y){super(g,"facebook.com",y)}}class Rh extends Bu{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Up extends Qa{constructor(g,y){super(g,"google.com",y)}}class ca extends Bu{constructor(g,y,T){super(g,"twitter.com",y,T)}}function Bp(E){const{user:g,_tokenResponse:y}=E;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Sh(E){var g,y;if(!E)return null;const{providerId:T}=E,R=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},M=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&E?.idToken){const G=null===(y=null===(g=Y(E.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(G)return new Qa(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!T)return null;switch(T){case"facebook.com":return new Fc(M,R);case"github.com":return new Rh(M,R);case"google.com":return new Up(M,R);case"twitter.com":return new ca(M,R,E.screenName||null);case"custom":case"anonymous":return new Qa(M,null);default:return new Qa(M,T,R)}}(y)}class Vi{constructor(g,y,T){this.type=g,this.credential=y,this.auth=T}static _fromIdtoken(g,y){return new Vi("enroll",g,y)}static _fromMfaPendingCredential(g){return new Vi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,T;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Vi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return Vi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ts{constructor(g,y,T){this.session=g,this.hints=y,this.signInResolver=T}static _fromError(g,y){const T=tr(g),R=y.customData._serverResponse,M=(R.mfaInfo||[]).map(ee=>qa._fromServerResponse(T,ee));ye(R.mfaPendingCredential,T,"internal-error");const G=Vi._fromMfaPendingCredential(R.mfaPendingCredential);return new ts(G,M,function(){var ee=(0,p.Z)(function*(Fe){const Ce=yield Fe._process(T,G);delete R.mfaInfo,delete R.mfaPendingCredential;const ut=Object.assign(Object.assign({},R),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(y.operationType){case"signIn":const zt=yield zs._fromIdTokenResponse(T,y.operationType,ut);return yield T._updateCurrentUser(zt.user),zt;case"reauthenticate":return ye(y.user,T,"internal-error"),zs._forOperation(y.user,y.operationType,ut);default:wt(T,"internal-error")}});return function(Fe){return ee.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,p.Z)(function*(){return y.signInResolver(g)})()}}function od(E,g){var y;const T=(0,U.m9)(E),R=g;return ye(g.customData.operationType,T,"argument-error"),ye(null===(y=R.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),ts._fromError(T,R)}class kn{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>qa._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new kn(g)}getSession(){var g=this;return(0,p.Z)(function*(){return Vi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var T=this;return(0,p.Z)(function*(){const R=g,M=yield T.getSession(),G=yield ne(T.user,R._process(T.user.auth,M,y));return yield T.user._updateTokensIfNecessary(G),T.user.reload()})()}unenroll(g){var y=this;return(0,p.Z)(function*(){const T="string"==typeof g?g:g.uid,R=yield y.user.getIdToken();try{const M=yield ne(y.user,function jr(E,g){return cn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",en(E,g))}(y.user.auth,{idToken:R,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:G})=>G!==T),yield y.user._updateTokensIfNecessary(M),yield y.user.reload()}catch(M){throw M}})()}}const Uc=new WeakMap;function Ya(E){const g=(0,U.m9)(E);return Uc.has(g)||Uc.set(g,kn._fromUser(g)),Uc.get(g)}const ns="__sak";class jp{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ns,"1"),this.storage.removeItem(ns),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ja=(()=>{class E extends jp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mh(){const E=(0,U.z$)();return Su(E)||Fa(E)}()&&function $l(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_h(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const R=this.storage.getItem(T),M=this.localCache[T];R!==M&&y(T,M,R)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((ee,Fe,Ce)=>{this.notifyListeners(ee,Ce)});const R=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(R);if(y.newValue!==ee)null!==y.newValue?this.storage.setItem(R,y.newValue):this.storage.removeItem(R);else if(this.localCache[R]===y.newValue&&!T)return}const M=()=>{const ee=this.storage.getItem(R);!T&&this.localCache[R]===ee||this.notifyListeners(R,ee)},G=this.storage.getItem(R);!function w_(){return(0,U.w1)()&&10===document.documentMode}()||G===y.newValue||y.newValue===y.oldValue?M():setTimeout(M,10)}notifyListeners(y,T){this.localCache[y]=T;const R=this.listeners[y];if(R)for(const M of Array.from(R))M(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var R=()=>super._set,M=this;return(0,p.Z)(function*(){yield R().call(M,y,T),M.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,R=this;return(0,p.Z)(function*(){const M=yield T().call(R,y);return R.localCache[y]=JSON.stringify(M),M})()}_remove(y){var T=()=>super._remove,R=this;return(0,p.Z)(function*(){yield T().call(R,y),delete R.localCache[y]})()}}return E.type="LOCAL",E})(),la=(()=>{class E extends jp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return E.type="SESSION",E})();let Hp=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(M=>M.isListeningto(y));if(T)return T;const R=new E(y);return this.receivers.push(R),R}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,p.Z)(function*(){const R=y,{eventId:M,eventType:G,data:ee}=R.data,Fe=T.handlersMap[G];if(!Fe?.size)return;R.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const Ce=Array.from(Fe).map(function(){var zt=(0,p.Z)(function*(gn){return gn(R.origin,ee)});return function(gn){return zt.apply(this,arguments)}}()),ut=yield function kh(E){return Promise.all(E.map(function(){var g=(0,p.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return g.apply(this,arguments)}}()))}(Ce);R.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:ut})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Xa(E="",g=10){let y="";for(let T=0;T<g;T++)y+=Math.floor(10*Math.random());return E+y}class qp{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,T=50){var R=this;return(0,p.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,ee;return new Promise((Fe,Ce)=>{const ut=Xa("",20);M.port1.start();const zt=setTimeout(()=>{Ce(new Error("unsupported_event"))},T);ee={messageChannel:M,onMessage(gn){const ii=gn;if(ii.data.eventId===ut)switch(ii.data.status){case"ack":clearTimeout(zt),G=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(ii.data.response);break;default:clearTimeout(zt),clearTimeout(G),Ce(new Error("invalid_response"))}}},R.handlers.add(ee),M.port1.addEventListener("message",ee.onMessage),R.target.postMessage({eventType:g,eventId:ut,data:y},[M.port2])}).finally(()=>{ee&&R.removeMessageHandler(ee)})})()}}function Jn(){return window}function ud(){return typeof Jn().WorkerGlobalScope<"u"&&"function"==typeof Jn().importScripts}function Oh(){return(Oh=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const yo="firebaseLocalStorageDb",Gc="firebaseLocalStorage",cd="fbase_key";class eu{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ld(E,g){return E.transaction([Gc],g?"readwrite":"readonly").objectStore(Gc)}function hd(){const E=indexedDB.open(yo,1);return new Promise((g,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(Gc,{keyPath:cd})}catch(R){y(R)}}),E.addEventListener("success",(0,p.Z)(function*(){const T=E.result;T.objectStoreNames.contains(Gc)?g(T):(T.close(),yield function dd(){const E=indexedDB.deleteDatabase(yo);return new eu(E).toPromise()}(),g(yield hd()))}))})}function tu(E,g,y){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(E,g,y){const T=ld(E,!0).put({[cd]:g,value:y});return new eu(T).toPromise()})).apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(E,g){const y=ld(E,!1).get(g),T=yield new eu(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function zr(E,g){const y=ld(E,!0).delete(g);return new eu(y).toPromise()}const Gu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,p.Z)(function*(){return y.db||(y.db=yield hd()),y.db})()}_withRetries(y){var T=this;return(0,p.Z)(function*(){let R=0;for(;;)try{const M=yield T._openDb();return yield y(M)}catch(M){if(R++>3)throw M;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,p.Z)(function*(){return ud()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,p.Z)(function*(){y.receiver=Hp._getInstance(function ri(){return ud()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,p.Z)(function*(R,M){return{keyProcessed:(yield y._poll()).includes(M.key)}});return function(R,M){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,p.Z)(function*(R,M){return["keyChanged"]});return function(R,M){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,p.Z)(function*(){var T,R;if(y.activeServiceWorker=yield function $c(){return Oh.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new qp(y.activeServiceWorker);const M=yield y.sender._send("ping",{},800);M&&null!==(T=M[0])&&void 0!==T&&T.fulfilled&&null!==(R=M[0])&&void 0!==R&&R.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,p.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Fh(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const y=yield hd();return yield tu(y,ns,"1"),yield zr(y,ns),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,p.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var R=this;return(0,p.Z)(function*(){return R._withPendingWrite((0,p.Z)(function*(){return yield R._withRetries(M=>tu(M,y,T)),R.localCache[y]=T,R.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,p.Z)(function*(){const R=yield T._withRetries(M=>function Lh(E,g){return Sn.apply(this,arguments)}(M,y));return T.localCache[y]=R,R})()}_remove(y){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(R=>zr(R,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,p.Z)(function*(){const T=yield y._withRetries(G=>{const ee=ld(G,!1).getAll();return new eu(ee).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const R=[],M=new Set;for(const{fbase_key:G,value:ee}of T)M.add(G),JSON.stringify(y.localCache[G])!==JSON.stringify(ee)&&(y.notifyListeners(G,ee),R.push(G));for(const G of Object.keys(y.localCache))y.localCache[G]&&!M.has(G)&&(y.notifyListeners(G,null),R.push(G));return R})()}notifyListeners(y,T){this.localCache[y]=T;const R=this.listeners[y];if(R)for(const M of Array.from(R))M(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),nn=1e12;class Vh{constructor(g){this.auth=g,this.counter=nn,this._widgets=new Map}render(g,y){const T=this.counter;return this._widgets.set(T,new Zp(g,this.auth.name,y||{})),this.counter++,T}reset(g){var y;const T=g||nn;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(g){var y;return(null===(y=this._widgets.get(g||nn))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,p.Z)(function*(){var T;return null===(T=y._widgets.get(g||nn))||void 0===T||T.execute(),""})()}}class Zp{constructor(g,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;ye(R,"argument-error",{appName:y}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ws(E){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)g.push(y.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hc=zl("rcb"),Qp=new Nn(3e4,6e4);class As{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Jn().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ye(function bs(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&Dp(Jn().grecaptcha)?Promise.resolve(Jn().grecaptcha):new Promise((T,R)=>{const M=Jn().setTimeout(()=>{R(_t(g,"network-request-failed"))},Qp.get());Jn()[Hc]=()=>{Jn().clearTimeout(M),delete Jn()[Hc];const ee=Jn().grecaptcha;if(!ee||!Dp(ee))return void R(_t(g,"internal-error"));const Fe=ee.render;ee.render=(Ce,ut)=>{const zt=Fe(Ce,ut);return this.counter++,zt},this.hostLanguage=y,T(ee)},vi(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Hc,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(M),R(_t(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Jn().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bi{load(g){return(0,p.Z)(function*(){return new Vh(g)})()}clearedOneInstance(){}}const ha="recaptcha",fd={theme:"light",type:"image"};class P_{constructor(g,y=Object.assign({},fd),T){this.parameters=y,this.type=ha,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(T),this.isInvisible="invisible"===this.parameters.size,ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;ye(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bi:new As,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(y)||new Promise(M=>{const G=ee=>{ee&&(g.tokenChangeListeners.delete(G),M(ee))};g.tokenChangeListeners.add(G),g.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof g)g(y);else if("string"==typeof g){const T=Jn()[g];"function"==typeof T&&T(y)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){ye(Us()&&!ud(),g.auth,"internal-error"),yield function Uh(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function yh(E){return Gl.apply(this,arguments)}(g.auth);ye(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Io{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ga._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Vo(E,g,y){return $i.apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(E,g,y){const T=tr(E),R=yield ru(T,g,(0,U.m9)(y));return new Io(R,M=>wc(T,M))})).apply(this,arguments)}function wr(E,g,y){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E);yield Fu(!1,T,"phone");const R=yield ru(T.auth,g,(0,U.m9)(y));return new Io(R,M=>Ac(T,M))})).apply(this,arguments)}function Bh(E,g,y){return rr.apply(this,arguments)}function rr(){return(rr=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E),R=yield ru(T.auth,g,(0,U.m9)(y));return new Io(R,M=>Xl(T,M))})).apply(this,arguments)}function ru(E,g,y){return zu.apply(this,arguments)}function zu(){return zu=(0,p.Z)(function*(E,g,y){var T;const R=yield y.verify();try{let M;if(ye("string"==typeof R,E,"argument-error"),ye(y.type===ha,E,"argument-error"),M="string"==typeof g?{phoneNumber:g}:g,"session"in M){const G=M.session;if("phoneNumber"in M)return ye("enroll"===G.type,E,"internal-error"),(yield function ad(E,g){return cn(E,"POST","/v2/accounts/mfaEnrollment:start",en(E,g))}(E,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{ye("signin"===G.type,E,"internal-error");const ee=(null===(T=M.multiFactorHint)||void 0===T?void 0:T.uid)||M.multiFactorUid;return ye(ee,E,"missing-multi-factor-info"),(yield function zc(E,g){return cn(E,"POST","/v2/accounts/mfaSignIn:start",en(E,g))}(E,{mfaPendingCredential:G.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function $r(E,g){return Wl.apply(this,arguments)}(E,{phoneNumber:M.phoneNumber,recaptchaToken:R});return G}}finally{y._reset()}}),zu.apply(this,arguments)}function Yp(E,g){return qc.apply(this,arguments)}function qc(){return(qc=(0,p.Z)(function*(E,g){yield Yl((0,U.m9)(E),g)})).apply(this,arguments)}let pd=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=tr(y)}verifyPhoneNumber(y,T){return ru(this.auth,y,(0,U.m9)(T))}static credential(y,T){return Ga._fromVerification(y,T)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:R}=y;return T&&R?Ga._fromTokenResponse(T,R):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Uo(E,g){return g?kt(g):(ye(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class iu extends Ni{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Tr(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Tr(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Tr(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function gd(E){return nr(E.auth,new iu(E),E.bypassAuthState)}function fa(E){const{auth:g,user:y}=E;return ye(y,g,"internal-error"),es(y,new iu(E),E.bypassAuthState)}function Bo(E){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,p.Z)(function*(E){const{auth:g,user:y}=E;return ye(y,g,"internal-error"),Yl(y,new iu(E),E.bypassAuthState)})).apply(this,arguments)}class Kc{constructor(g,y,T,R,M=!1){this.auth=g,this.resolver=T,this.user=R,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,p.Z)(function*(T,R){g.pendingPromise={resolve:T,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(M){g.reject(M)}});return function(T,R){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,p.Z)(function*(){const{urlResponse:T,sessionId:R,postBody:M,tenantId:G,error:ee,type:Fe}=g;if(ee)return void y.reject(ee);const Ce={auth:y.auth,requestUri:T,sessionId:R,tenantId:G||void 0,postBody:M||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Fe)(Ce))}catch(ut){y.reject(ut)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return gd;case"linkViaPopup":case"linkViaRedirect":return Bo;case"reauthViaPopup":case"reauthViaRedirect":return fa;default:wt(this.auth,"internal-error")}}resolve(g){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const md=new Nn(2e3,1e4);function su(E,g,y){return _d.apply(this,arguments)}function _d(){return(_d=(0,p.Z)(function*(E,g,y){const T=tr(E);or(E,g,js);const R=Uo(T,y);return new pa(T,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function yd(E,g,y){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E);or(T.auth,g,js);const R=Uo(T.auth,y);return new pa(T.auth,"reauthViaPopup",g,R,T).executeNotNull()})).apply(this,arguments)}function $h(E,g,y){return Go.apply(this,arguments)}function Go(){return(Go=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E);or(T.auth,g,js);const R=Uo(T.auth,y);return new pa(T.auth,"linkViaPopup",g,R,T).executeNotNull()})).apply(this,arguments)}let pa=(()=>{class E extends Kc{constructor(y,T,R,M,G){super(y,T,M,G),this.provider=R,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,p.Z)(function*(){const T=yield y.execute();return ye(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,p.Z)(function*(){Gn(1===y.filter.length,"Popup operations only handle one event");const T=Xa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(R=>{y.reject(R)}),y.resolver._isIframeWebStorageSupported(y.auth,R=>{R||y.reject(_t(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(_t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,R;this.pollId=null!==(R=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==R&&R.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_t(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,md.get())};y()}}return E.currentPopupAction=null,E})();const ga="pendingRedirect",Gi=new Map;class Ws extends Kc{constructor(g,y,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,p.Z)(function*(){let T=Gi.get(y.auth._key());if(!T){try{const M=(yield function ma(E,g){return jo.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;T=()=>Promise.resolve(M)}catch(R){T=()=>Promise.reject(R)}Gi.set(y.auth._key(),T)}return y.bypassAuthState||Gi.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,T=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(T,g);if("unknown"!==g.type){if(g.eventId){const R=yield T.auth._redirectUserForId(g.eventId);if(R)return T.user=R,y().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function jo(){return(jo=(0,p.Z)(function*(E,g){const y=yE(g),T=Jp(E);if(!(yield T._isAvailable()))return!1;const R="true"===(yield T._get(y));return yield T._remove(y),R})).apply(this,arguments)}function Ds(E,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,p.Z)(function*(E,g){return Jp(E)._set(yE(g),"true")})).apply(this,arguments)}function Nr(){Gi.clear()}function _a(E,g){Gi.set(E._key(),g)}function Jp(E){return kt(E._redirectPersistence)}function yE(E){return Un(ga,E.config.apiKey,E.name)}function vE(E,g,y){return function Zc(E,g,y){return Cs.apply(this,arguments)}(E,g,y)}function Cs(){return(Cs=(0,p.Z)(function*(E,g,y){const T=tr(E);or(E,g,js),yield T._initializationPromise;const R=Uo(T,y);return yield Ds(R,T),R._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function Eo(E,g,y){return function Qc(E,g,y){return vd.apply(this,arguments)}(E,g,y)}function vd(){return(vd=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E);or(T.auth,g,js),yield T.auth._initializationPromise;const R=Uo(T.auth,y);yield Ds(R,T.auth);const M=yield Yc(T);return R._openRedirect(T.auth,g,"reauthViaRedirect",M)})).apply(this,arguments)}function Rn(E,g,y){return function Xp(E,g,y){return is.apply(this,arguments)}(E,g,y)}function is(){return(is=(0,p.Z)(function*(E,g,y){const T=(0,U.m9)(E);or(T.auth,g,js),yield T.auth._initializationPromise;const R=Uo(T.auth,y);yield Fu(!1,T,g.providerId),yield Ds(R,T.auth);const M=yield Yc(T);return R._openRedirect(T.auth,g,"linkViaRedirect",M)})).apply(this,arguments)}function x_(E,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(E,g){return yield tr(E)._initializationPromise,ya(E,g,!1)})).apply(this,arguments)}function ya(E,g){return Id.apply(this,arguments)}function Id(){return(Id=(0,p.Z)(function*(E,g,y=!1){const T=tr(E),R=Uo(T,g),G=yield new Ws(T,R,y).execute();return G&&!y&&(delete G.user._redirectEventId,yield T._persistUserIfCurrent(G.user),yield T._setRedirectUser(null,g)),G})).apply(this,arguments)}function Yc(E){return ou.apply(this,arguments)}function ou(){return(ou=(0,p.Z)(function*(E){const g=Xa(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class C{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(y=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function j(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var T;if(g.error&&!F(g)){const R=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(_t(this.auth,R))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const T=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(P(g))}saveEventToCache(g){this.cachedEventUids.add(P(g)),this.lastProcessedEventTime=Date.now()}}function P(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function F({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function J(E){return ue.apply(this,arguments)}function ue(){return(ue=(0,p.Z)(function*(E,g={}){return cn(E,"GET","/v1/projects",g)})).apply(this,arguments)}const Ye=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ze=/^https?/;function Lt(){return(Lt=(0,p.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield J(E);for(const y of g)try{if(Ut(y))return}catch{}wt(E,"unauthorized-domain")})).apply(this,arguments)}function Ut(E){const g=Is(),{protocol:y,hostname:T}=new URL(g);if(E.startsWith("chrome-extension://")){const G=new URL(E);return""===G.hostname&&""===T?"chrome-extension:"===y&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&G.hostname===T}if(!Ze.test(y))return!1;if(Ye.test(E))return T===E;const R=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(T)}const os=new Nn(3e4,6e4);function ir(){const E=Jn().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let To=null;const Ar=new Nn(5e3,15e3),Ks="__/auth/iframe",eg="emulator/auth/iframe",Ed={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ib=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function au(E){const g=E.config;ye(g.authDomain,E,"auth-domain-config-required");const y=g.emulator?Kt(g,eg):`https://${E.config.authDomain}/${Ks}`,T={apiKey:g.apiKey,appName:E.name,v:W.SDK_VERSION},R=Ib.get(E.config.apiHost);R&&(T.eid=R);const M=E._getFrameworks();return M.length&&(T.fw=M.join(",")),`${y}?${(0,U.xO)(T).slice(1)}`}function va(){return va=(0,p.Z)(function*(E){const g=yield function Ss(E){return To=To||function qu(E){return new Promise((g,y)=>{var T,R,M;function G(){ir(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ir(),y(_t(E,"network-request-failed"))},timeout:os.get()})}if(null!==(R=null===(T=Jn().gapi)||void 0===T?void 0:T.iframes)&&void 0!==R&&R.Iframe)g(gapi.iframes.getContext());else{if(null===(M=Jn().gapi)||void 0===M||!M.load){const ee=zl("iframefcb");return Jn()[ee]=()=>{gapi.load?G():y(_t(E,"network-request-failed"))},vi(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Fe=>y(Fe))}G()}}).catch(g=>{throw To=null,g})}(E),To}(E),y=Jn().gapi;return ye(y,E,"internal-error"),g.open({where:document.body,url:au(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ed,dontclear:!0},T=>new Promise(function(){var R=(0,p.Z)(function*(M,G){yield T.restyle({setHideOnLeave:!1});const ee=_t(E,"network-request-failed"),Fe=Jn().setTimeout(()=>{G(ee)},Ar.get());function Ce(){Jn().clearTimeout(Fe),M(T)}T.ping(Ce).then(Ce,()=>{G(ee)})});return function(M,G){return R.apply(this,arguments)}}()))}),va.apply(this,arguments)}const Jc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Td{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const N_="__/auth/handler",Tb="emulator/auth/handler",k_=encodeURIComponent("fac");function tg(E,g,y,T,R,M){return O_.apply(this,arguments)}function O_(){return(O_=(0,p.Z)(function*(E,g,y,T,R,M){ye(E.config.authDomain,E,"auth-domain-config-required"),ye(E.config.apiKey,E,"invalid-api-key");const G={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:T,v:W.SDK_VERSION,eventId:R};if(g instanceof js){g.setDefaultLanguage(E.languageCode),G.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(G.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ut,zt]of Object.entries(M||{}))G[ut]=zt}if(g instanceof Ou){const ut=g.getScopes().filter(zt=>""!==zt);ut.length>0&&(G.scopes=ut.join(","))}E.tenantId&&(G.tid=E.tenantId);const ee=G;for(const ut of Object.keys(ee))void 0===ee[ut]&&delete ee[ut];const Fe=yield E._getAppCheckToken(),Ce=Fe?`#${k_}=${encodeURIComponent(Fe)}`:"";return`${function zh({config:E}){return E.emulator?Kt(E,Tb):`https://${E.authDomain}/${N_}`}(E)}?${(0,U.xO)(ee).slice(1)}${Ce}`})).apply(this,arguments)}const el="webStorageSupport",F_=class wb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=la,this._completeRedirectFn=ya,this._overrideRedirectResult=_a}_openPopup(g,y,T,R){var M=this;return(0,p.Z)(function*(){var G;Gn(null===(G=M.eventManagers[g._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ee=yield tg(g,y,T,Is(),R);return function Eb(E,g,y,T=500,R=600){const M=Math.max((window.screen.availHeight-R)/2,0).toString(),G=Math.max((window.screen.availWidth-T)/2,0).toString();let ee="";const Fe=Object.assign(Object.assign({},Jc),{width:T.toString(),height:R.toString(),top:M,left:G}),Ce=(0,U.z$)().toLowerCase();y&&(ee=_c(Ce)?"_blank":y),ea(Ce)&&(g=g||"http://localhost",Fe.scrollbars="yes");const ut=Object.entries(Fe).reduce((gn,[ii,Ia])=>`${gn}${ii}=${Ia},`,"");if(function Ru(E=(0,U.z$)()){var g;return Fa(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ce)&&"_self"!==ee)return function M_(E,g){const y=document.createElement("a");y.href=E,y.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(g||"",ee),new Td(null);const zt=window.open(g||"",ee,ut);ye(zt,E,"popup-blocked");try{zt.focus()}catch{}return new Td(zt)}(g,ee,Xa())})()}_openRedirect(g,y,T,R){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(g),function Wp(E){Jn().location.href=E}(yield tg(g,y,T,Is(),R)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:R,promise:M}=this.eventManagers[y];return R?Promise.resolve(R):(Gn(M,"If manager is not set, promise should be"),M)}const T=this.initAndGetManager(g);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(g){var y=this;return(0,p.Z)(function*(){const T=yield function Wu(E){return va.apply(this,arguments)}(g),R=new C(g);return T.register("authEvent",M=>(ye(M?.authEvent,g,"invalid-auth-event"),{status:R.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:R},y.iframes[g._key()]=T,R})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(el,{type:el},R=>{var M;const G=null===(M=R?.[0])||void 0===M?void 0:M[el];void 0!==G&&y(!!G),wt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function yt(E){return Lt.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return _h()||Su()||Fa()}};class L_{constructor(g){this.factorId=g}_process(g,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,T);case"signin":return this._finalizeSignIn(g,y.credential);default:return Wn("unexpected MultiFactorSessionType")}}}class Hh extends L_{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Hh(g)}_finalizeEnroll(g,y,T){return function xh(E,g){return cn(E,"POST","/v2/accounts/mfaEnrollment:finalize",en(E,g))}(g,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function da(E,g){return cn(E,"POST","/v2/accounts/mfaSignIn:finalize",en(E,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let IE=(()=>{class E{constructor(){}static assertion(y){return Hh._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var wd="@firebase/auth";class EE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,p.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(T=>{g(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function kr(E){(0,W._registerComponent)(new Ri.wA("auth",(g,{options:y})=>{const T=g.getProvider("app").getImmediate(),R=g.getProvider("heartbeat"),M=g.getProvider("app-check-internal"),{apiKey:G,authDomain:ee}=T.options;ye(G&&!G.includes(":"),"invalid-api-key",{appName:T.name});const Fe={apiKey:G,authDomain:ee,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ta(E)},Ce=new Cp(T,R,M,Fe);return function Rp(E,g){const y=g?.persistence||[],T=(Array.isArray(y)?y:[y]).map(kt);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(T,g?.popupRedirectResolver)}(Ce,y),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,T)=>{g.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new Ri.wA("auth-internal",g=>{const y=tr(g.getProvider("auth").getImmediate());return new EE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(wd,"0.23.2",function TE(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,W.registerVersion)(wd,"0.23.2","esm2017")}("Browser")},9058:(Et,Se,O)=>{O.d(Se,{$s:()=>Xi,BH:()=>ke,L:()=>_e,LL:()=>We,P0:()=>xe,Pz:()=>Ne,Sg:()=>Qe,UG:()=>Ge,US:()=>Ie,ZB:()=>ce,ZR:()=>ze,aH:()=>$e,b$:()=>Qr,eu:()=>le,hl:()=>de,jU:()=>ht,m9:()=>yi,ne:()=>mi,pd:()=>Kt,q4:()=>At,r3:()=>ye,ru:()=>Br,tV:()=>H,uI:()=>Je,vZ:()=>Us,w1:()=>Vs,xO:()=>Na,xb:()=>Gn,z$:()=>se,zI:()=>Ee,zd:()=>Nn});const re=function(z){const V=[];let Y=0;for(let pe=0;pe<z.length;pe++){let ne=z.charCodeAt(pe);ne<128?V[Y++]=ne:ne<2048?(V[Y++]=ne>>6|192,V[Y++]=63&ne|128):55296==(64512&ne)&&pe+1<z.length&&56320==(64512&z.charCodeAt(pe+1))?(ne=65536+((1023&ne)<<10)+(1023&z.charCodeAt(++pe)),V[Y++]=ne>>18|240,V[Y++]=ne>>12&63|128,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128):(V[Y++]=ne>>12|224,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128)}return V},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,V){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let ne=0;ne<z.length;ne+=3){const ft=z[ne],xt=ne+1<z.length,dn=xt?z[ne+1]:0,Sr=ne+2<z.length,Kn=Sr?z[ne+2]:0;let Vn=(15&dn)<<2|Kn>>6,hr=63&Kn;Sr||(hr=64,xt||(Vn=64)),pe.push(Y[ft>>2],Y[(3&ft)<<4|dn>>4],Y[Vn],Y[hr])}return pe.join("")},encodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(z):this.encodeByteArray(re(z),V)},decodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(z):function(z){const V=[];let Y=0,pe=0;for(;Y<z.length;){const ne=z[Y++];if(ne<128)V[pe++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const ft=z[Y++];V[pe++]=String.fromCharCode((31&ne)<<6|63&ft)}else if(ne>239&&ne<365){const Sr=((7&ne)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;V[pe++]=String.fromCharCode(55296+(Sr>>10)),V[pe++]=String.fromCharCode(56320+(1023&Sr))}else{const ft=z[Y++],xt=z[Y++];V[pe++]=String.fromCharCode((15&ne)<<12|(63&ft)<<6|63&xt)}}return V.join("")}(this.decodeStringToByteArray(z,V))},decodeStringToByteArray(z,V){this.init_();const Y=V?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let ne=0;ne<z.length;){const ft=Y[z.charAt(ne++)],dn=ne<z.length?Y[z.charAt(ne)]:0;++ne;const Kn=ne<z.length?Y[z.charAt(ne)]:64;++ne;const tn=ne<z.length?Y[z.charAt(ne)]:64;if(++ne,null==ft||null==dn||null==Kn||null==tn)throw new ve;pe.push(ft<<2|dn>>4),64!==Kn&&(pe.push(dn<<4&240|Kn>>2),64!==tn&&pe.push(Kn<<6&192|tn))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(z){return function(z){const V=re(z);return Ie.encodeByteArray(V,!0)}(z).replace(/\./g,"")},H=function(z){try{return Ie.decodeString(z,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function ce(z,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return V}for(const Y in V)!V.hasOwnProperty(Y)||!Ke(Y)||(z[Y]=ce(z[Y],V[Y]));return z}function Ke(z){return"__proto__"!==z}const je=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=z&&H(z[1]);return V&&JSON.parse(V)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},At=z=>{var V,Y;return null===(Y=null===(V=je())||void 0===V?void 0:V.emulatorHosts)||void 0===Y?void 0:Y[z]},xe=z=>{const V=At(z);if(!V)return;const Y=V.lastIndexOf(":");if(Y<=0||Y+1===V.length)throw new Error(`Invalid host ${V} with no separate hostname and port!`);const pe=parseInt(V.substring(Y+1),10);return"["===V[0]?[V.substring(1,Y-1),pe]:[V.substring(0,Y),pe]},$e=()=>{var z;return null===(z=je())||void 0===z?void 0:z.config},Ne=z=>{var V;return null===(V=je())||void 0===V?void 0:V[`_${z}`]};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,Y)=>{this.resolve=V,this.reject=Y})}wrapCallback(V){return(Y,pe)=>{Y?this.reject(Y):this.resolve(pe),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(Y):V(Y,pe))}}}function Qe(z,V){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=V||"demo-project",ne=z.iat||0,ft=z.sub||z.user_id;if(!ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:ne,exp:ne+3600,auth_time:ne,sub:ft,user_id:ft,firebase:{sign_in_provider:"custom",identities:{}}},z);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(xt)),""].join(".")}function se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(se())}function Ge(){var z;const V=null===(z=je())||void 0===z?void 0:z.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ht(){return"object"==typeof self&&self.self===self}function Br(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Qr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Vs(){const z=se();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((z,V)=>{try{let Y=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(pe);ne.onsuccess=()=>{ne.result.close(),Y||self.indexedDB.deleteDatabase(pe),z(!0)},ne.onupgradeneeded=()=>{Y=!1},ne.onerror=()=>{var ft;V((null===(ft=ne.error)||void 0===ft?void 0:ft.message)||"")}}catch(Y){V(Y)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ze extends Error{constructor(V,Y,pe){super(Y),this.code=V,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(V,Y,pe){this.service=V,this.serviceName=Y,this.errors=pe}create(V,...Y){const pe=Y[0]||{},ne=`${this.service}/${V}`,ft=this.errors[V],xt=ft?function bt(z,V){return z.replace(rn,(Y,pe)=>{const ne=V[pe];return null!=ne?String(ne):`<${pe}?>`})}(ft,pe):"Error";return new ze(ne,`${this.serviceName}: ${xt} (${ne}).`,pe)}}const rn=/\{\$([^}]+)}/g;function ye(z,V){return Object.prototype.hasOwnProperty.call(z,V)}function Gn(z){for(const V in z)if(Object.prototype.hasOwnProperty.call(z,V))return!1;return!0}function Us(z,V){if(z===V)return!0;const Y=Object.keys(z),pe=Object.keys(V);for(const ne of Y){if(!pe.includes(ne))return!1;const ft=z[ne],xt=V[ne];if(uo(ft)&&uo(xt)){if(!Us(ft,xt))return!1}else if(ft!==xt)return!1}for(const ne of pe)if(!Y.includes(ne))return!1;return!0}function uo(z){return null!==z&&"object"==typeof z}function Na(z){const V=[];for(const[Y,pe]of Object.entries(z))Array.isArray(pe)?pe.forEach(ne=>{V.push(encodeURIComponent(Y)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(Y)+"="+encodeURIComponent(pe));return V.length?"&"+V.join("&"):""}function Nn(z){const V={};return z.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[ne,ft]=pe.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(ft)}}),V}function Kt(z){const V=z.indexOf("?");if(!V)return"";const Y=z.indexOf("#",V);return z.substring(V,Y>0?Y:void 0)}function mi(z,V){const Y=new Ot(z,V);return Y.subscribe.bind(Y)}class Ot{constructor(V,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{V(this)}).catch(pe=>{this.error(pe)})}next(V){this.forEachObserver(Y=>{Y.next(V)})}error(V){this.forEachObserver(Y=>{Y.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,Y,pe){let ne;if(void 0===V&&void 0===Y&&void 0===pe)throw new Error("Missing Observer.");ne=function cn(z,V){if("object"!=typeof z||null===z)return!1;for(const Y of V)if(Y in z&&"function"==typeof z[Y])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:Y,complete:pe},void 0===ne.next&&(ne.next=ln),void 0===ne.error&&(ne.error=ln),void 0===ne.complete&&(ne.complete=ln);const ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),ft}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,V)}sendOne(V,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{Y(this.observers[V])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const Ji=1e3,Ro=2,_i=144e5,xi=.5;function Xi(z,V=Ji,Y=Ro){const pe=V*Math.pow(Y,z),ne=Math.round(xi*pe*(Math.random()-.5)*2);return Math.min(_i,pe+ne)}function yi(z){return z&&z._delegate?z._delegate:z}},9624:(Et,Se,O)=>{var p=O(8926);let U=null;function W(){return U}class ie{}const Ie=new p.OlP("DocumentToken");let ve=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(_e)},providedIn:"platform"}),e})();const Ue=new p.OlP("Location Initialized");let _e=(()=>{var n;class e extends ve{constructor(){super(),this._doc=(0,p.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(r){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function H(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ce(n){return n&&"?"!==n[0]?"?"+n:n}let Ke=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Xe)},providedIn:"root"}),e})();const me=new p.OlP("appBaseHref");let Xe=(()=>{var n;class e extends Ke{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return H(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+ce(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,u){const d=this.prepareExternalUrl(s+ce(u));this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){const d=this.prepareExternalUrl(s+ce(u));this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(ve),p.LFG(me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),nt=(()=>{var n;class e extends Ke{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=H(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,u){let d=this.prepareExternalUrl(s+ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){let d=this.prepareExternalUrl(s+ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(ve),p.LFG(me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})(),et=(()=>{var n;class e{constructor(r){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(xe(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ce(i))}normalize(r){return e.stripTrailingSlash(function At(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,xe(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ce(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ce(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}}return(n=e).normalizeQueryParams=ce,n.joinWithSlash=H,n.stripTrailingSlash=q,n.\u0275fac=function(r){return new(r||n)(p.LFG(Ke))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function je(){return new et((0,p.LFG)(Ke))}()},providedIn:"root"}),e})();function xe(n){return n.replace(/\/index.html$/,"")}class mh{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Rr=(()=>{var n;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((s,u,d)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new mh(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===u?void 0:u);else if(null!==u){const f=i.get(u);i.move(f,d),Fa(f,s)}});for(let s=0,u=i.length;s<u;s++){const f=i.get(s).context;f.index=s,f.count=u,f.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{Fa(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Fa(n,e){n.context.$implicit=e.item}let Ru=(()=>{var n;class e{constructor(r,i){this._viewContainer=r,this._context=new w_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){_h("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){_h("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class w_{constructor(){this.$implicit=null,this.ngIf=null}}function _h(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let ho=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();function Ua(n){return"server"===n}let yc=(()=>{var n;class e{}return(n=e).\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Jt((0,p.LFG)(Ie),window)}),e})();class Jt{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Nu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ql(this.window.history)||ql(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ql(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Mc extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wa extends Mc{static makeCurrent(){!function re(n){U||(U=n)}(new Wa)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vp(){return _n=_n||document.querySelector("base"),_n?_n.getAttribute("href"):null}();return null==t?null:function Ii(n){mo=mo||document.createElement("a"),mo.setAttribute("href",n);const e=mo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_n=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Bs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let mo,_n=null,nd=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Hs=new p.OlP("EventManagerPlugins");let Gr=(()=>{var n;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(u=>u.supports(r)),!i)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Hs),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();class Nc{constructor(e){this._doc=e}}const kc="ng-app-id";let Ka=(()=>{var n;class e{constructor(r,i,s,u={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ua(u),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${kc}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const u=s.get(r);return u.usage+=i,u.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,u=s?.get(i);if(u?.parentNode===r)return s.delete(i),u.removeAttribute(kc),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(kc,this.appId),d}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const u=this.styleRef,d=u.get(i)?.elements;d?d.push(s):u.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const qs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fo=/%COMP%/g,Ch=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qa(n,e){return e.map(t=>t.replace(Fo,n))}let Bu=(()=>{var n;class e{constructor(r,i,s,u,d,f,_,I=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=f,this.ngZone=_,this.nonce=I,this.rendererByCompId=new Map,this.platformIsServer=Ua(f),this.defaultRenderer=new Fc(r,d,_,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===p.ifc.ShadowDom&&(i={...i,encapsulation:p.ifc.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof sd?s.applyToHost(r):s instanceof id&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let u=s.get(i.id);if(!u){const d=this.doc,f=this.ngZone,_=this.eventManager,I=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(i.encapsulation){case p.ifc.Emulated:u=new sd(_,I,i,this.appId,b,d,f,x);break;case p.ifc.ShadowDom:return new Bp(_,I,r,i,d,f,this.nonce,x);default:u=new id(_,I,i,b,d,f,x)}s.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Gr),p.LFG(Ka),p.LFG(p.AFp),p.LFG(Ch),p.LFG(Ie),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();class Fc{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ca(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ca(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qs[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=W().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function ca(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Bp extends Fc{constructor(e,t,r,i,s,u,d,f){super(e,s,u,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=Qa(i.id,i.styles);for(const I of _){const b=document.createElement("style");d&&b.setAttribute("nonce",d),b.textContent=I,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class id extends Fc{constructor(e,t,r,i,s,u,d,f){super(e,s,u,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=f?Qa(f,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class sd extends id{constructor(e,t,r,i,s,u,d,f){const _=i+"-"+r.id;super(e,t,r,s,u,d,f,_),this.contentAttr=function Pt(n){return"_ngcontent-%COMP%".replace(Fo,n)}(_),this.hostAttr=function Sh(n){return"_nghost-%COMP%".replace(Fo,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let $p=(()=>{var n;class e extends Nc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Lc=["alt","control","meta","shift"],Re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let R_=(()=>{var n;class e extends Nc{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const u=e.parseEventName(i),d=e.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>W().onAndCancel(r,u.domEventName,d))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const u=e._normalizeKey(i.pop());let d="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),d="code."),Lc.forEach(I=>{const b=i.indexOf(I);b>-1&&(i.splice(b,1),d+=I+".")}),d+=u,0!=i.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=d,_}static matchEventFullKeyCode(r,i){let s=Re[r.key]||r.key,u="";return i.indexOf("code.")>-1&&(s=r.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Lc.forEach(d=>{d!==s&&(0,hn[d])(r)&&(u+=d+".")}),u+=s,u===i)}static eventCallback(r,i,s){return u=>{e.matchEventFullKeyCode(u,r)&&s.runGuarded(()=>i(u))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Gp=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function ts(){Wa.makeCurrent()},multi:!0},{provide:Ie,useFactory:function ad(){return(0,p.RDi)(document),document},deps:[]}]),fr=new p.OlP(""),jr=[{provide:p.rWj,useClass:class td{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new p.vHH(5103,!1);return s},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(f){u=u||f,s--,0==s&&r(u)};i.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?W().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],kn=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function od(){return new p.qLn},deps:[]},{provide:Hs,useClass:$p,multi:!0,deps:[Ie,p.R0b,p.Lbi]},{provide:Hs,useClass:R_,multi:!0,deps:[Ie]},Bu,Ka,Gr,{provide:p.FYo,useExisting:Bu},{provide:class Tr{},useClass:nd,deps:[]},[]];let Uc=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:p.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(fr,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...kn,...jr],imports:[ho,p.hGG]}),e})(),Nh=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Mh(){return new Nh((0,p.LFG)(Ie))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;var Sn=O(2459),zr=O(5592);const{isArray:jc}=Array,{getPrototypeOf:$u,prototype:Kp,keys:Gu}=Object;function zc(n){if(1===n.length){const e=n[0];if(jc(e))return{args:e,keys:null};if(function da(n){return n&&"object"==typeof n&&$u(n)===Kp}(e)){const t=Gu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Lo=O(4829),ju=O(4564),Ui=O(8251),nn=O(7398);const{isArray:Vh}=Array;function ws(n){return(0,nn.U)(e=>function Zp(n,e){return Vh(e)?n(...e):n(e)}(n,e))}function Hc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let nu=(()=>{var n;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),e})(),As=(()=>{var n;class e extends nu{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),e})();const bs=new p.OlP("NgValueAccessor"),fd={provide:bs,useExisting:(0,p.Gpc)(()=>Io),multi:!0},Uh=new p.OlP("CompositionEventMode");let Io=(()=>{var n;class e extends nu{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function P_(){const n=W()?W().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Uh,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[p._Bn([fd]),p.qOj]}),e})();function Vo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function $i(n){return null!=n&&"number"==typeof n.length}const wr=new p.OlP("NgValidators"),rs=new p.OlP("NgAsyncValidators"),Bh=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class rr{static min(e){return function ru(n){return e=>{if(Vo(e.value)||Vo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function zu(n){return e=>{if(Vo(e.value)||Vo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Yp(e)}static requiredTrue(e){return function qc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function pd(n){return Vo(n.value)||Bh.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Uo(n){return e=>Vo(e.value)||!$i(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function iu(n){return e=>$i(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function gd(n){if(!n)return fa;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vo(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return yd(e)}static composeAsync(e){return $h(e)}}function Yp(n){return Vo(n.value)?{required:!0}:null}function fa(n){return null}function Bo(n){return null!=n}function Wc(n){return(0,p.QGY)(n)?(0,Sn.D)(n):n}function Kc(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function md(n,e){return e.map(t=>t(n))}function _d(n){return n.map(e=>function su(n){return!n.validate}(e)?e:t=>e.validate(t))}function yd(n){if(!n)return null;const e=n.filter(Bo);return 0==e.length?null:function(t){return Kc(md(t,e))}}function $o(n){return null!=n?yd(_d(n)):null}function $h(n){if(!n)return null;const e=n.filter(Bo);return 0==e.length?null:function(t){return function Qp(...n){const e=(0,ju.jO)(n),{args:t,keys:r}=zc(n),i=new zr.y(s=>{const{length:u}=t;if(!u)return void s.complete();const d=new Array(u);let f=u,_=u;for(let I=0;I<u;I++){let b=!1;(0,Lo.Xf)(t[I]).subscribe((0,Ui.x)(s,x=>{b||(b=!0,_--),d[I]=x},()=>f--,void 0,()=>{(!f||!b)&&(_||s.next(r?Hc(r,d):d),s.complete())}))}});return e?i.pipe(ws(e)):i}(md(t,e).map(Wc)).pipe((0,nn.U)(Kc))}}function Go(n){return null!=n?$h(_d(n)):null}function pa(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ga(n){return n._rawValidators}function Gi(n){return n._rawAsyncValidators}function Ws(n){return n?Array.isArray(n)?n:[n]:[]}function ma(n,e){return Array.isArray(n)?n.includes(e):n===e}function jo(n,e){const t=Ws(e);return Ws(n).forEach(i=>{ma(t,i)||t.push(i)}),t}function Ds(n,e){return Ws(e).filter(t=>!ma(n,t))}class Hu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$o(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Go(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Nr extends Hu{get formDirective(){return null}get path(){return null}}class _a extends Hu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jp{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zc=(()=>{var n;class e extends Jp{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(_a,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[p.qOj]}),e})(),Cs=(()=>{var n;class e extends Jp{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Nr,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[p.qOj]}),e})();const J="VALID",ue="INVALID",Ye="PENDING",Ze="DISABLED";function yt(n){return(ir(n)?n.validators:n)||null}function Ut(n,e){return(ir(e)?e.asyncValidators:n)||null}function ir(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function qu(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")}function To(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})}class Ss{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===J}get invalid(){return this.status===ue}get pending(){return this.status==Ye}get disabled(){return this.status===Ze}get enabled(){return this.status!==Ze}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ds(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ds(e,this._rawAsyncValidators))}hasValidator(e){return ma(this._rawValidators,e)}hasAsyncValidator(e){return ma(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ye,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ze,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=J,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===J||this.status===Ye)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ze:J}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ye,this._hasOwnPendingAsyncValidator=!0;const t=Wc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Ze:this.errors?ue:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ye)?Ye:this._anyControlsHaveStatus(ue)?ue:J}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ir(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Lt(n){return Array.isArray(n)?$o(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function os(n){return Array.isArray(n)?Go(n):n||null}(this._rawAsyncValidators)}}class Ar extends Ss{constructor(e,t,r){super(yt(t),Ut(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){To(this,0,e),Object.keys(e).forEach(r=>{qu(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Ed extends Ar{}const au=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Wu}),Wu="always";function Jc(n,e,t=Wu){Ku(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Eb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&N_(n,e)})}(n,e),function Tb(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function M_(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&N_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Xc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Gh(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Td(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function jh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ku(n,e){const t=ga(n);null!==e.validator?n.setValidators(pa(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Gi(n);null!==e.asyncValidator?n.setAsyncValidators(pa(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();jh(e._rawValidators,i),jh(e._rawAsyncValidators,i)}function Td(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=ga(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Gi(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return jh(e._rawValidators,r),jh(e._rawAsyncValidators,r),t}function N_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function TE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const kr=class extends Ss{constructor(e=null,t,r){super(yt(t),Ut(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ir(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=TE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){TE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ee=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Fe={provide:bs,useExisting:(0,p.Gpc)(()=>Ce),multi:!0};let Ce=(()=>{var n;class e extends As{writeValue(r){this.setProperty("value",r??"")}registerOnChange(r){this.onChange=i=>{r(""==i?null:parseFloat(i))}}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},features:[p._Bn([Fe]),p.qOj]}),e})(),gn=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();const Ad=new p.OlP("NgModelWithFormControlWarning"),ji={provide:Nr,useExisting:(0,p.Gpc)(()=>zo)};let zo=(()=>{var n;class e extends Nr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Td(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return Jc(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Gh(r.control||null,r,!1),function ng(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,function IE(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,s=this.form.get(r.path);i!==s&&(Gh(i||null,r),(n=>n instanceof kr)(s)&&(Jc(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);(function k_(n,e){Ku(n,e)})(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function tg(n,e){return Td(n,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ku(this.form,this),this._oldForm&&Td(this._oldForm,this)}_checkFormPresent(){}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(wr,10),p.Y36(rs,10),p.Y36(au,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&p.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([ji]),p.qOj,p.TTD]}),e})();const bb={provide:_a,useExisting:(0,p.Gpc)(()=>Qh)};let Qh=(()=>{var n;class e extends _a{set isDisabled(r){}constructor(r,i,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function V_(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Io?t=s:function Hh(n){return Object.getPrototypeOf(n.constructor)===As}(s)?r=s:i=s}),i||r||t||null}(0,u)}ngOnChanges(r){this._added||this._setUpControl(),function L_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return function va(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(n=e)._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(p.Y36(Nr,13),p.Y36(wr,10),p.Y36(rs,10),p.Y36(bs,10),p.Y36(Ad,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([bb]),p.qOj,p.TTD]}),e})();const Db={provide:bs,useExisting:(0,p.Gpc)(()=>$_),multi:!0};function Cb(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $_=(()=>{var n;class e extends As{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const s=Cb(this._getOptionId(r),r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){const i=function Sb(n){return n.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i):r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Db]),p.qOj]}),e})(),G_=(()=>{var n;class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(Cb(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36($_,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Mx={provide:bs,useExisting:(0,p.Gpc)(()=>j_),multi:!0};function Rb(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let j_=(()=>{var n;class e extends As{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let i;if(this.value=r,Array.isArray(r)){const s=r.map(u=>this._getOptionId(u));i=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else i=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{const s=[],u=i.selectedOptions;if(void 0!==u){const d=u;for(let f=0;f<d.length;f++){const I=this._getOptionValue(d[f].value);s.push(I)}}else{const d=i.options;for(let f=0;f<d.length;f++){const _=d[f];if(_.selected){const I=this._getOptionValue(_.value);s.push(I)}}}this.value=s,r(s)}}_registerOption(r){const i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){const i=function wE(n){return n.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([Mx]),p.qOj]}),e})(),bd=(()=>{var n;class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(Rb(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(Rb(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(j_,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),rl=(()=>{var n;class e{constructor(){this._validator=fa}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fa,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),e})();const kb={provide:wr,useExisting:(0,p.Gpc)(()=>Dd),multi:!0};let Dd=(()=>{var n;class e extends rl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.VuI,this.createValidator=r=>Yp}enabled(r){return r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&p.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([kb]),p.qOj]}),e})(),z_=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[gn]}),e})();class RE extends Ss{constructor(e,t,r){super(yt(t),Ut(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){To(this,0,e),e.forEach((r,i)=>{qu(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function PE(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Ub=(()=>{var n;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const r=new e;return r.useNonNullable=!0,r}group(r,i=null){const s=this._reduceControls(r);let u={};return PE(i)?u=i:null!==i&&(u.validators=i.validator,u.asyncValidators=i.asyncValidator),new Ar(s,u)}record(r,i=null){const s=this._reduceControls(r);return new Ed(s,i)}control(r,i,s){let u={};return this.useNonNullable?(PE(i)?u=i:(u.validators=i,u.asyncValidators=s),new kr(r,{...u,nonNullable:!0})):new kr(r,i,s)}array(r,i,s){const u=r.map(d=>this._createControl(d));return new RE(u,i,s)}_reduceControls(r){const i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){return r instanceof kr||r instanceof Ss?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Bb=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:au,useValue:r.callSetDisabledState??Wu}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[z_]}),e})(),$b=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ad,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:au,useValue:r.callSetDisabledState??Wu}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[z_]}),e})();var Xh=O(4674),Vt=O(2096),Zs=O(5619),il=O(2737),Gb=O(7103);function cg(...n){const e=(0,ju.yG)(n),t=(0,ju.jO)(n),{args:r,keys:i}=zc(n);if(0===r.length)return(0,Sn.D)([],e);const s=new zr.y(function H_(n,e,t=il.y){return r=>{NE(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let f=0;f<i;f++)NE(e,()=>{const _=(0,Sn.D)(n[f],e);let I=!1;_.subscribe((0,Ui.x)(r,b=>{s[f]=b,I||(I=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Hc(i,u):il.y));return t?s.pipe(ws(t)):s}function NE(n,e,t){n?(0,Gb.f)(t,n,e):e()}const sl=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var lg=O(7537);function OE(...n){return function jb(){return(0,lg.J)(1)}()((0,Sn.D)(n,(0,ju.yG)(n)))}function zb(n){return new zr.y(e=>{(0,Lo.Xf)(n()).subscribe(e)})}var Lx=O(8407);function ef(n,e){const t=(0,Xh.m)(n)?n:()=>n,r=i=>i.error(t());return new zr.y(e?i=>e.schedule(r,0,i):r)}var Zu=O(6232),dg=O(7394),Qs=O(9360);function ol(){return(0,Qs.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ui.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Hb extends zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qs.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dg.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ui.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dg.w0.EMPTY)}return e}refCount(){return ol()(this)}}var Cd=O(8645),wi=O(4664);function tf(n){return n<=0?()=>Zu.E:(0,Qs.e)((e,t)=>{let r=0;e.subscribe((0,Ui.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Qu(n,e){return(0,Qs.e)((t,r)=>{let i=0;t.subscribe((0,Ui.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var si=O(1631);function Sd(n){return(0,Qs.e)((e,t)=>{let r=!1;e.subscribe((0,Ui.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function q_(n=qb){return(0,Qs.e)((e,t)=>{let r=!1;e.subscribe((0,Ui.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qb(){return new sl}function Yu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qu((i,s)=>n(i,s,r)):il.y,tf(1),t?Sd(e):q_(()=>new sl))}function nf(n,e){return(0,Xh.m)(e)?(0,si.z)(n,e,1):(0,si.z)(n,1)}var as=O(9397);function Rd(n){return(0,Qs.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Ui.x)(t,void 0,void 0,u=>{s=(0,Lo.Xf)(n(u,Rd(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function LE(n){return n<=0?()=>Zu.E:(0,Qs.e)((e,t)=>{let r=[];e.subscribe((0,Ui.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Pd(n){return(0,Qs.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",W_=Symbol("RouteTitle");class hU{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function hg(n){return new hU(n)}function fU(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ta(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Wb(n[i],e[i]))return!1;return!0}function Wb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Kb(n){return n.length>0?n[n.length-1]:null}function ul(n){return function ME(n){return!!n&&(n instanceof zr.y||(0,Xh.m)(n.lift)&&(0,Xh.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):(0,Vt.of)(n)}const $x={exact:function VE(n,e,t){if(!rf(n.segments,e.segments)||!BE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!VE(n.children[r],e.children[r],t))return!1;return!0},subset:UE},K_={exact:function fg(n,e){return Ta(n,e)},subset:function Zb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wb(n[t],e[t]))},ignored:()=>!0};function uu(n,e,t){return $x[t.paths](n.root,e.root,t.matrixParams)&&K_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function UE(n,e,t){return Gx(n,e,e.segments,t)}function Gx(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!rf(i,t)||e.hasChildren()||!BE(i,t,r))}if(n.segments.length===t.length){if(!rf(n.segments,t)||!BE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!UE(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(rf(n.segments,i)&&BE(n.segments,i,r)&&n.children[Xt])&&Gx(n.children[Xt],e,s,r)}}function BE(n,e,t){return e.every((r,i)=>K_[t](n[i].parameters,r.parameters))}class pg{constructor(e=new Pn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hg(this.queryParams)),this._queryParamMap}toString(){return jx.serialize(this)}}class Pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Z_(this)}}class xd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=hg(this.parameters)),this._parameterMap}toString(){return Jb(this)}}function rf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gg=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new $E},providedIn:"root"}),e})();class $E{parse(e){const t=new xn(e);return new pg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sf(e.root,!0)}`,r=function Xb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Q_(t)}=${Q_(i)}`).join("&"):`${Q_(t)}=${Q_(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function GE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const jx=new $E;function Z_(n){return n.segments.map(e=>Jb(e)).join("/")}function sf(n,e){if(!n.hasChildren())return Z_(n);if(e){const t=n.children[Xt]?sf(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Xt&&r.push(`${i}:${sf(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Qb(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Xt?[sf(n.children[Xt],!1)]:[`${i}:${sf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${Z_(n)}/${t[0]}`:`${Z_(n)}/(${t.join("//")})`}}function mg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q_(n){return mg(n).replace(/%3B/gi,";")}function jE(n){return mg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ju(n){return decodeURIComponent(n)}function Yb(n){return Ju(n.replace(/\+/g,"%20"))}function Jb(n){return`${jE(n.path)}${function zE(n){return Object.keys(n).map(e=>`;${jE(e)}=${jE(n[e])}`).join("")}(n.parameters)}`}const zx=/^[^\/()?;#]+/;function HE(n){const e=n.match(zx);return e?e[0]:""}const Hx=/^[^\/()?;=#]+/,eD=/^[^=?&#]+/,_U=/^[^&#]+/;class xn{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Pn(e,t)),r}parseSegment(){const e=HE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new xd(Ju(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function qx(n){const e=n.match(Hx);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=HE(this.remaining);i&&(r=i,this.capture(r))}e[Ju(t)]=Ju(r)}parseQueryParam(e){const t=function mU(n){const e=n.match(eD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function _g(n){const e=n.match(_U);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Yb(t),s=Yb(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=HE(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Xt]:new Pn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function af(n){return n.segments.length>0?new Pn([],{[Xt]:n}):n}function qE(n){const e={};for(const r of Object.keys(n.children)){const s=qE(n.children[r]);if(r===Xt&&0===s.segments.length&&s.hasChildren())for(const[u,d]of Object.entries(s.children))e[u]=d;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function tD(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Pn(n.segments.concat(e.segments),e.children)}return n}(new Pn(n.segments,e))}function cl(n){return n instanceof pg}function rD(n){let e;const i=af(function t(s){const u={};for(const f of s.children){const _=t(f);u[f.outlet]=_}const d=new Pn(s.url,u);return s===n&&(e=d),d}(n.root));return e??i}function WE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return iD(i,i,i,t,r);const s=function KE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sD(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([f,_])=>{d[f]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new sD(t,e,r)}(e);if(s.toRoot())return iD(i,i,new Pn([],{}),t,r);const u=function oD(n,e,t){if(n.isAbsolute)return new vg(e,!0,0);if(!t)return new vg(e,!1,NaN);if(null===t.parent)return new vg(t,!0,0);const r=yg(n.commands[0])?0:1;return function Nd(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new vg(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),d=u.processChildren?ll(u.segmentGroup,u.index,s.commands):J_(u.segmentGroup,u.index,s.commands);return iD(i,u.segmentGroup,d,t,r)}function yg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Md(n){return"object"==typeof n&&null!=n&&n.outlets}function iD(n,e,t,r,i){let u,s={};r&&Object.entries(r).forEach(([f,_])=>{s[f]=Array.isArray(_)?_.map(I=>`${I}`):`${_}`}),u=n===e?t:Y_(n,e,t);const d=af(qE(u));return new pg(d,s,i)}function Y_(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Y_(s,e,t)}),new Pn(n.segments,r)}class sD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yg(r[0]))throw new p.vHH(4003,!1);const i=r.find(Md);if(i&&i!==Kb(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function J_(n,e,t){if(n||(n=new Pn([],{})),0===n.segments.length&&n.hasChildren())return ll(n,e,t);const r=function Kx(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(Md(d))break;const f=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!ey(f,_,u))return s;r+=2}else{if(!ey(f,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Pn(n.segments.slice(0,r.pathIndex),{});return s.children[Xt]=new Pn(n.segments.slice(r.pathIndex),n.children),ll(s,0,i)}return r.match&&0===i.length?new Pn(n.segments,{}):r.match&&!n.hasChildren()?Ig(n,e,t):r.match?ll(n,0,i):Ig(n,e,t)}function ll(n,e,t){if(0===t.length)return new Pn(n.segments,{});{const r=function Wx(n){return Md(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(!r[Xt]&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const s=ll(n.children[Xt],e,t);return new Pn(n.segments,s.children)}return Object.entries(r).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[s]=J_(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===r[s]&&(i[s]=u)}),new Pn(n.segments,i)}}function Ig(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Md(s)){const f=X_(s.outlets);return new Pn(r,f)}if(0===i&&yg(t[0])){r.push(new xd(n.segments[e].path,dl(t[0]))),i++;continue}const u=Md(s)?s.outlets[Xt]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&yg(d)?(r.push(new xd(u,dl(d))),i+=2):(r.push(new xd(u,{})),i++)}return new Pn(r,{})}function X_(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Ig(new Pn([],{}),0,r))}),e}function dl(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ey(n,e,t){return n==t.path&&Ta(e,t.parameters)}const kd="imperative";class cu{constructor(e,t){this.id=e,this.url=t}}class ZE extends cu{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hl extends cu{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xu extends cu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Eg extends cu{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class QE extends cu{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zx extends cu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YE extends cu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aD extends cu{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qx extends cu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uD extends cu{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yU{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vU{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yx{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jx{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IU{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class eM{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Od,this.attachRef=null}}let Od=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new eM,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class ty{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=fl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Tg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tg(e,this._root).map(t=>t.value)}}function fl(n,e){if(n===e.value)return e;for(const t of e.children){const r=fl(n,t);if(r)return r}return null}function Tg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Tg(n,t);if(r.length)return r.unshift(e),r}return[]}class wa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wg extends ty{constructor(e,t){super(e),this.snapshot=t,ry(this,e)}toString(){return this.snapshot.toString()}}function uf(n,e){const t=function cD(n,e){const u=new cf([],{},{},"",{},Xt,e,null,{});return new ny("",new wa(u,[]))}(0,e),r=new Zs.X([new xd("",{})]),i=new Zs.X({}),s=new Zs.X({}),u=new Zs.X({}),d=new Zs.X(""),f=new ec(r,i,u,d,s,Xt,e,t.root);return f.snapshot=t.root,new wg(new wa(f,[]),t)}class ec{constructor(e,t,r,i,s,u,d,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=u,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,nn.U)(_=>_[W_]))??(0,Vt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nn.U)(e=>hg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nn.U)(e=>hg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ag(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function EU(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class cf{get title(){return this.data?.[W_]}constructor(e,t,r,i,s,u,d,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.routeConfig=f,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ny extends ty{constructor(e,t){super(t),this.url=e,ry(this,t)}toString(){return lD(this._root)}}function ry(n,e){e.value._routerState=n,e.children.forEach(t=>ry(n,t))}function lD(n){const e=n.children.length>0?` { ${n.children.map(lD).join(", ")} } `:"";return`${n.value}${e}`}function eT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ta(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ta(e.params,t.params)||n.paramsSubject.next(t.params),function pU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ta(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ta(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iy(n,e){const t=Ta(n.params,e.params)&&function gU(n,e){return rf(n,e)&&n.every((t,r)=>Ta(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iy(n.parent,e.parent))}let sy=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Od),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(oy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=r;const s=this.location,d=r.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new tM(r,f,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:_,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),e})();class tM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ec?this.route:e===Od?this.childContexts:this.parent.get(e,t)}}const oy=new p.OlP("");let nM=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,s=cg([i.queryParams,i.params,i.data]).pipe((0,wi.w)(([u,d,f],_)=>(f={...u,...d,...f},0===_?(0,Vt.of)(f):Promise.resolve(f)))).subscribe(u=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const d=(0,p.qFp)(i.component);if(d)for(const{templateName:f}of d.inputs)r.activatedComponentRef.setInput(f,u[f]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,s)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();function Fd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tT(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fd(n,r,i);return Fd(n,r)})}(n,e,t);return new wa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Fd(n,d)),u}}const r=function iM(n){return new ec(new Zs.X(n.url),new Zs.X(n.params),new Zs.X(n.queryParams),new Zs.X(n.fragment),new Zs.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Fd(n,s));return new wa(r,i)}}const ay="ngNavigationCancelingError";function uy(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=cl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function bg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ay]=!0,r.cancellationCode=e,t&&(r.url=t),r}function dD(n){return nT(n)&&cl(n.url)}function nT(n){return n&&n[ay]}let hD=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[sy],encapsulation:2}),e})();function iT(n){const e=n.children&&n.children.map(iT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=hD),t}function Aa(n){return n.outlet||Xt}function df(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Dg{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),eT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=lu(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lu(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lu(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=lu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new IU(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Yx(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(eT(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),eT(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=df(i.snapshot);u.attachRef=null,u.route=i,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class oT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aT{constructor(e,t){this.component=e,this.route=t}}function uT(n,e,t){const r=n._root;return ff(r,e?e._root:null,t,[r.value])}function tc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function ff(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=lu(e);return n.children.forEach(u=>{(function gD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const f=function uM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!rf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rf(n.url,e.url)||!Ta(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iy(n,e)||!Ta(n.queryParams,e.queryParams);default:return!iy(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new oT(r)):(s.data=u.data,s._resolvedData=u._resolvedData),ff(n,e,s.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new aT(d.outlet.component,u))}else u&&Cg(e,d,i),i.canActivateChecks.push(new oT(r)),ff(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,d])=>Cg(d,t.getContext(u),i)),i}function Cg(n,e,t){const r=lu(n),i=n.value;Object.entries(r).forEach(([s,u])=>{Cg(u,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new aT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sg(n){return"function"==typeof n}function _D(n){return n instanceof sl||"EmptyError"===n?.name}const cT=Symbol("INITIAL_VALUE");function Rg(){return(0,wi.w)(n=>cg(n.map(e=>e.pipe(tf(1),function FE(...n){const e=(0,ju.yG)(n);return(0,Qs.e)((t,r)=>{(e?OE(n,t,e):OE(n,t)).subscribe(r)})}(cT)))).pipe((0,nn.U)(e=>{for(const t of e)if(!0!==t){if(t===cT)return cT;if(!1===t||t instanceof pg)return t}return!0}),Qu(e=>e!==cT),tf(1)))}function lT(n){return(0,Lx.z)((0,as.b)(e=>{if(cl(e))throw uy(0,e)}),(0,nn.U)(e=>!0===e))}class dT{constructor(e){this.segmentGroup=e||null}}class bD{constructor(e){this.urlTree=e}}function Ld(n){return ef(new dT(n))}function DD(n){return ef(new bD(n))}class pM{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Vt.of)(r);if(i.numberOfChildren>1||!i.children[Xt])return ef(new p.vHH(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new pg(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);r[i]=t[d]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([d,f])=>{u[d]=this.createSegmentGroup(e,f,r,i)}),new Pn(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const dy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gM(n,e,t,r,i){const s=hT(n,e,t);return s.matched?(r=function fD(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function AD(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Vt.of)(!0);const s=i.map(u=>{const d=tc(u,n);return ul(function nc(n){return n&&Sg(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,Vt.of)(s).pipe(Rg(),lT())}(r,e,t).pipe((0,nn.U)(u=>!0===u?s:{...dy}))):(0,Vt.of)(s)}function hT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...dy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||fU)(t,n,e);if(!i)return{...dy};const s={};Object.entries(i.posParams??{}).forEach(([d,f])=>{s[d]=f.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function mM(n,e,t,r){return t.length>0&&function pl(n,e,t){return t.some(r=>Pg(n,e,r)&&Aa(r)!==Xt)}(n,t,r)?{segmentGroup:new Pn(e,RD(r,new Pn(t,n.children))),slicedSegments:[]}:0===t.length&&function gf(n,e,t){return t.some(r=>Pg(n,e,r))}(n,t,r)?{segmentGroup:new Pn(n.segments,SD(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pn(n.segments,n.children),slicedSegments:t}}function SD(n,e,t,r,i){const s={};for(const u of r)if(Pg(n,t,u)&&!i[Aa(u)]){const d=new Pn([],{});s[Aa(u)]=d}return{...i,...s}}function RD(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&Aa(r)!==Xt){const i=new Pn([],{});t[Aa(r)]=i}return t}function Pg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class fT{constructor(e,t,r,i,s,u,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new pM(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=mM(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe(Rd(t=>{if(t instanceof bD)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof dT?this.noMatchError(t):t}),(0,nn.U)(t=>{const r=new cf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),i=new wa(r,t),s=new ny("",i),u=function nD(n,e,t=null,r=null){return WE(rD(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Xt).pipe(Rd(r=>{throw r instanceof dT?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=Ag(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Sn.D)(i).pipe(nf(s=>{const u=r.children[s],d=function oM(n,e){const t=n.filter(r=>Aa(r)===e);return t.push(...n.filter(r=>Aa(r)!==e)),t}(t,s);return this.processSegmentGroup(e,d,u,s)}),function Ux(n,e){return(0,Qs.e)(function Vx(n,e,t,r,i){return(s,u)=>{let d=t,f=e,_=0;s.subscribe((0,Ui.x)(u,I=>{const b=_++;f=d?n(f,I,b):(d=!0,I),r&&u.next(f)},i&&(()=>{d&&u.next(f),u.complete()})))}}(n,e,arguments.length>=2,!0))}((s,u)=>(s.push(...u),s)),Sd(null),function Bx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qu((i,s)=>n(i,s,r)):il.y,LE(1),t?Sd(e):q_(()=>new sl))}(),(0,si.z)(s=>{if(null===s)return Ld(r);const u=fy(s);return function xg(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,Vt.of)(u)}))}processSegment(e,t,r,i,s,u){return(0,Sn.D)(t).pipe(nf(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,s,u).pipe(Rd(f=>{if(f instanceof dT)return(0,Vt.of)(null);throw f}))),Yu(d=>!!d),Rd(d=>{if(_D(d))return function hy(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,Vt.of)([]):Ld(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,s,u,d){return function _M(n,e,t,r){return!!(Aa(n)===r||r!==Xt&&Pg(e,t,n))&&("**"===n.path||hT(e,n,t).matched)}(r,i,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,u,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,u):Ld(i):Ld(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DD(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,si.z)(u=>{const d=new Pn(u,{});return this.processSegment(e,t,d,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:I}=hT(t,i,s);if(!d)return Ld(t);const b=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,I);return i.redirectTo.startsWith("/")?DD(b):this.applyRedirects.lineralizeSegments(i,b).pipe((0,si.z)(x=>this.processSegment(e,r,t,x.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,u){let d;if("**"===r.path){const f=i.length>0?Kb(i).parameters:{},_=new cf(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,py(r),Aa(r),r.component??r._loadedComponent??null,r,pT(r));d=(0,Vt.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=gM(t,r,i,e).pipe((0,nn.U)(({matched:f,consumedSegments:_,remainingSegments:I,parameters:b})=>f?{snapshot:new cf(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,py(r),Aa(r),r.component??r._loadedComponent??null,r,pT(r)),consumedSegments:_,remainingSegments:I}:null));return d.pipe((0,wi.w)(f=>null===f?Ld(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,wi.w)(({routes:_})=>{const I=r._loadedInjector??e,{snapshot:b,consumedSegments:x,remainingSegments:k}=f,{segmentGroup:B,slicedSegments:Q}=mM(t,x,k,_);if(0===Q.length&&B.hasChildren())return this.processChildren(I,_,B).pipe((0,nn.U)(we=>null===we?null:[new wa(b,we)]));if(0===_.length&&0===Q.length)return(0,Vt.of)([new wa(b,[])]);const Z=Aa(r)===s;return this.processSegment(I,_,B,Q,Z?Xt:s,!0).pipe((0,nn.U)(we=>[new wa(b,we)]))}))))}getChildConfig(e,t,r){return t.children?(0,Vt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Vt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ht(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Vt.of)(!0);const s=i.map(u=>{const d=tc(u,n);return ul(function lM(n){return n&&Sg(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,Vt.of)(s).pipe(Rg(),lT())}(e,t,r).pipe((0,si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,as.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function CD(n){return ef(bg(!1,3))}())):(0,Vt.of)({routes:[],injector:e})}}function PD(n){const e=n.value.routeConfig;return e&&""===e.path}function fy(n){const e=[],t=new Set;for(const r of n){if(!PD(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=fy(r.children);e.push(new wa(r.value,i))}return e.filter(r=>!t.has(r))}function py(n){return n.data||{}}function pT(n){return n.resolve||{}}function ND(n){return"string"==typeof n.title||null===n.title}function mT(n){return(0,wi.w)(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,nn.U)(()=>e)):(0,Vt.of)(e)})}const _f=new p.OlP("ROUTES");let gy=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,Vt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=ul(r.loadComponent()).pipe((0,nn.U)(OD),(0,as.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=u}),Pd(()=>{this.componentLoaders.delete(r)})),s=new Hb(i,()=>new Cd.x).pipe(ol());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Vt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,nn.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(i);let _,I;return Array.isArray(f)?I=f:(_=f.create(r).injector,I=_.get(_f,[],p.XFs.Self|p.XFs.Optional).flat()),{routes:I.map(iT),injector:_}}),Pd(()=>{this.childrenLoaders.delete(i)})),d=new Hb(u,()=>new Cd.x).pipe(ol());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(r){return ul(r()).pipe((0,nn.U)(OD),(0,si.z)(i=>i instanceof p.YKP||Array.isArray(i)?(0,Vt.of)(i):(0,Sn.D)(this.compiler.compileModuleAsync(i))))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function OD(n){return function kD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let my=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Cd.x,this.configLoader=(0,p.f3M)(gy),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(gg),this.rootContexts=(0,p.f3M)(Od),this.inputBindingEnabled=null!==(0,p.f3M)(oy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Vt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new yU(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new JE(s))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r){return this.transitions=new Zs.X({id:0,currentUrlTree:r.currentUrlTree,currentRawUrl:r.currentUrlTree,extractedUrl:r.urlHandlingStrategy.extract(r.currentUrlTree),urlAfterRedirects:r.urlHandlingStrategy.extract(r.currentUrlTree),rawUrl:r.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:kd,restoredState:null,currentSnapshot:r.routerState.snapshot,targetSnapshot:null,currentRouterState:r.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qu(i=>0!==i.id),(0,nn.U)(i=>({...i,extractedUrl:r.urlHandlingStrategy.extract(i.rawUrl)})),(0,wi.w)(i=>{let s=!1,u=!1;return(0,Vt.of)(i).pipe((0,as.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,wi.w)(d=>{const f=r.browserUrlTree.toString(),_=!r.navigated||d.extractedUrl.toString()!==f||f!==r.currentUrlTree.toString();if(!_&&"reload"!==(d.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const b="";return this.events.next(new Eg(d.id,r.serializeUrl(i.rawUrl),b,0)),r.rawUrlTree=d.rawUrl,d.resolve(null),Zu.E}if(r.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Ys(d.source)&&(r.browserUrlTree=d.extractedUrl),(0,Vt.of)(d).pipe((0,wi.w)(b=>{const x=this.transitions?.getValue();return this.events.next(new ZE(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),x!==this.transitions?.getValue()?Zu.E:Promise.resolve(b)}),function gT(n,e,t,r,i,s){return(0,si.z)(u=>function mf(n,e,t,r,i,s,u="emptyOnly"){return new fT(n,e,t,r,i,u,s).recognize()}(n,e,t,r,u.extractedUrl,i,s).pipe((0,nn.U)(({state:d,tree:f})=>({...u,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,as.b)(b=>{if(i.targetSnapshot=b.targetSnapshot,i.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===r.urlUpdateStrategy){if(!b.extras.skipLocationChange){const k=r.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);r.setBrowserUrl(k,b)}r.browserUrlTree=b.urlAfterRedirects}const x=new Zx(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(x)}));if(_&&r.urlHandlingStrategy.shouldProcessUrl(r.rawUrlTree)){const{id:b,extractedUrl:x,source:k,restoredState:B,extras:Q}=d,Z=new ZE(b,this.urlSerializer.serialize(x),k,B);this.events.next(Z);const we=uf(0,this.rootComponentType).snapshot;return i={...d,targetSnapshot:we,urlAfterRedirects:x,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}},(0,Vt.of)(i)}{const b="";return this.events.next(new Eg(d.id,r.serializeUrl(i.extractedUrl),b,1)),r.rawUrlTree=d.rawUrl,d.resolve(null),Zu.E}}),(0,as.b)(d=>{const f=new YE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),(0,nn.U)(d=>i={...d,guards:uT(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function yD(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,Vt.of)({...t,guardsResult:!0}):function vD(n,e,t,r){return(0,Sn.D)(n).pipe((0,si.z)(i=>function wD(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Vt.of)(!0);const u=s.map(d=>{const f=df(e)??i,_=tc(d,f);return ul(function pf(n){return n&&Sg(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):f.runInContext(()=>_(n,e,t,r))).pipe(Yu())});return(0,Vt.of)(u).pipe(Rg())}(i.component,i.route,t,e,r)),Yu(i=>!0!==i,!0))}(u,r,i,n).pipe((0,si.z)(d=>d&&function cM(n){return"boolean"==typeof n}(d)?function bU(n,e,t,r){return(0,Sn.D)(e).pipe(nf(i=>OE(function ly(n,e){return null!==n&&e&&e(new vU(n)),(0,Vt.of)(!0)}(i.route.parent,r),function ID(n,e){return null!==n&&e&&e(new Jx(n)),(0,Vt.of)(!0)}(i.route,r),function TD(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function hf(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>zb(()=>{const d=u.guards.map(f=>{const _=df(u.node)??t,I=tc(f,_);return ul(function mD(n){return n&&Sg(n.canActivateChild)}(I)?I.canActivateChild(r,n):_.runInContext(()=>I(r,n))).pipe(Yu())});return(0,Vt.of)(d).pipe(Rg())}));return(0,Vt.of)(s).pipe(Rg())}(n,i.path,t),function ED(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Vt.of)(!0);const i=r.map(s=>zb(()=>{const u=df(e)??t,d=tc(s,u);return ul(function dM(n){return n&&Sg(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(Yu())}));return(0,Vt.of)(i).pipe(Rg())}(n,i.route,t))),Yu(i=>!0!==i,!0))}(r,s,n,e):(0,Vt.of)(d)),(0,nn.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,d=>this.events.next(d)),(0,as.b)(d=>{if(i.guardsResult=d.guardsResult,cl(d.guardsResult))throw uy(0,d.guardsResult);const f=new aD(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),Qu(d=>!!d.guardsResult||(r.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),mT(d=>{if(d.guards.canActivateChecks.length)return(0,Vt.of)(d).pipe((0,as.b)(f=>{const _=new Qx(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),(0,wi.w)(f=>{let _=!1;return(0,Vt.of)(f).pipe(function yM(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Vt.of)(t);let s=0;return(0,Sn.D)(i).pipe(nf(u=>function vM(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!ND(i)&&(s[W_]=i.title),function IM(n,e,t,r){const i=function MD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Vt.of)({});const s={};return(0,Sn.D)(i).pipe((0,si.z)(u=>function EM(n,e,t,r){const i=df(e)??r,s=tc(n,i);return ul(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(Yu(),(0,as.b)(d=>{s[u]=d}))),LE(1),function al(n){return(0,nn.U)(()=>n)}(s),Rd(u=>_D(u)?Zu.E:ef(u)))}(s,n,e,r).pipe((0,nn.U)(u=>(n._resolvedData=u,n.data=Ag(n,t).resolve,i&&ND(i)&&(n.data[W_]=i.title),null)))}(u.route,r,n,e)),(0,as.b)(()=>s++),LE(1),(0,si.z)(u=>s===i.length?(0,Vt.of)(t):Zu.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,as.b)({next:()=>_=!0,complete:()=>{_||(r.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,as.b)(f=>{const _=new uD(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),mT(d=>{const f=_=>{const I=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,as.b)(b=>{_.component=b}),(0,nn.U)(()=>{})));for(const b of _.children)I.push(...f(b));return I};return cg(f(d.targetSnapshot.root)).pipe(Sd(),tf(1))}),mT(()=>this.afterPreactivation()),(0,nn.U)(d=>{const f=function rM(n,e,t){const r=Fd(n,e._root,t?t._root:void 0);return new wg(r,e)}(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:f}}),(0,as.b)(d=>{r.currentUrlTree=d.urlAfterRedirects,r.rawUrlTree=r.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),r.routerState=d.targetRouterState,"deferred"===r.urlUpdateStrategy&&(d.extras.skipLocationChange||r.setBrowserUrl(r.rawUrlTree,d),r.browserUrlTree=d.urlAfterRedirects)}),((n,e,t,r)=>(0,nn.U)(i=>(new Dg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),tf(1),(0,as.b)({next:d=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,r.navigated=!0,this.events.next(new hl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(r.currentUrlTree))),r.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{s=!0}}),Pd(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Rd(d=>{if(u=!0,nT(d)){dD(d)||(r.navigated=!0,r.restoreHistory(i,!0));const f=new Xu(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode);if(this.events.next(f),dD(d)){const _=r.urlHandlingStrategy.merge(d.url,r.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===r.urlUpdateStrategy||Ys(i.source)};r.scheduleNavigation(_,kd,null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{r.restoreHistory(i,!0);const f=new QE(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);this.events.next(f);try{i.resolve(r.errorHandler(d))}catch(_){i.reject(_)}}return Zu.E}))}))}cancelNavigationTransition(r,i,s){const u=new Xu(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(u),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function Ys(n){return n!==kd}let FD=(()=>{var n;class e{buildTitle(r){let i,s=r.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(u=>u.outlet===Xt);return i}getResolvedTitleForRoute(r){return r.data[W_]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(TM)},providedIn:"root"}),e})(),TM=(()=>{var n;class e extends FD{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Nh))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),DU=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(LD)},providedIn:"root"}),e})();class _T{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let LD=(()=>{var n;class e extends _T{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const _y=new p.OlP("",{providedIn:"root",factory:()=>({})});let wM=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(AM)},providedIn:"root"}),e})(),AM=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var yf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(yf||{});function VD(n,e){n.events.pipe(Qu(t=>t instanceof hl||t instanceof Xu||t instanceof QE||t instanceof Eg),(0,nn.U)(t=>t instanceof hl||t instanceof Eg?yf.COMPLETE:t instanceof Xu&&(0===t.code||1===t.code)?yf.REDIRECTING:yf.FAILED),Qu(t=>t!==yf.REDIRECTING),tf(1)).subscribe(()=>{e()})}function bM(n){throw n}function yT(n,e,t){return e.parse("/")}const DM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zi=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(_y,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||bM,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yT,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(wM),this.routeReuseStrategy=(0,p.f3M)(DU),this.titleStrategy=(0,p.f3M)(FD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(_f,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)(my),this.urlSerializer=(0,p.f3M)(gg),this.location=(0,p.f3M)(et),this.componentInputBindingEnabled=!!(0,p.f3M)(oy,{optional:!0}),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new pg,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=uf(0,null),this.navigationTransitions.setupNavigations(this).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId??0},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),kd,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const f=this.parseUrl(r);this.scheduleNavigation(f,i,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(iT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,i={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:f,preserveFragment:_}=i,I=_?this.currentUrlTree.fragment:d;let x,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{x=rD(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),x=this.currentUrlTree.root}return WE(x,r,b,I??null)}navigateByUrl(r,i={skipLocationChange:!1}){const s=cl(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,kd,null,i)}navigate(r,i={skipLocationChange:!1}){return function SM(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,r)}return i}isActive(r,i){let s;if(s=!0===i?{...DM}:!1===i?{...CM}:i,cl(r))return uu(this.currentUrlTree,r,s);const u=this.parseUrl(r);return uu(this.currentUrlTree,u,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{const u=r[s];return null!=u&&(i[s]=u),i},{})}scheduleNavigation(r,i,s,u,d){if(this.disposed)return Promise.resolve(!1);let f,_,I;d?(f=d.resolve,_=d.reject,I=d.promise):I=new Promise((x,k)=>{f=x,_=k});const b=this.pendingTasks.add();return VD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:u,resolve:f,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(x=>Promise.reject(x))}setBrowserUrl(r,i){const s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(s,"",u)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),vf=(()=>{var n;class e{constructor(r,i,s,u,d,f){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new Cd.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=r.events.subscribe(I=>{I instanceof hl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,u,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==r||i||s||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const r=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){const s=this.renderer,u=this.el.nativeElement;null!==i?s.setAttribute(u,r,i):s.removeAttribute(u,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(zi),p.Y36(ec),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ke))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&p.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&p.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]}),e})();class UD{}let BD=(()=>{var n;class e{constructor(r,i,s,u,d){this.router=r,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Qu(r=>r instanceof hl),nf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const s=[];for(const u of i){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,r,`Route: ${u.path}`));const d=u._injector??r,f=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,Sn.D)(s).pipe((0,lg.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,Vt.of)(null);const u=s.pipe((0,si.z)(d=>null===d?(0,Vt.of)(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??r,d.routes))));if(i.loadComponent&&!i._loadedComponent){const d=this.loader.loadComponent(i);return(0,Sn.D)([u,d]).pipe((0,lg.J)())}return u})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(zi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(UD),p.LFG(gy))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const yy=new p.OlP("");let Mg=(()=>{var n;class e{constructor(r,i,s,u,d={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ZE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof hl?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Eg&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Xx&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xx(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(r){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();function hu(n,e){return{\u0275kind:n,\u0275providers:e}}function fu(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(zi),i=n.get(zD);1===n.get(IT)&&r.initialNavigation(),n.get(HD,null,p.XFs.Optional)?.setUpPreloading(),n.get(yy,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const zD=new p.OlP("",{factory:()=>new Cd.x}),IT=new p.OlP("",{providedIn:"root",factory:()=>1}),HD=new p.OlP("");function RU(n){return hu(0,[{provide:HD,useExisting:BD},{provide:UD,useExisting:n}])}const OM=new p.OlP("ROUTER_FORROOT_GUARD"),FM=[et,{provide:gg,useClass:$E},zi,Od,{provide:ec,useFactory:function PM(n){return n.routerState.root},deps:[zi]},gy,[]];function qD(){return new p.PXZ("Router",zi)}let AT=(()=>{var n;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[FM,[],{provide:_f,multi:!0,useValue:r},{provide:OM,useFactory:KD,deps:[[zi,new p.FiY,new p.tp0]]},{provide:_y,useValue:i||{}},i?.useHash?{provide:Ke,useClass:nt}:{provide:Ke,useClass:Xe},{provide:yy,useFactory:()=>{const n=(0,p.f3M)(yc),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(_y),r=(0,p.f3M)(my),i=(0,p.f3M)(gg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mg(i,r,n,e,t)}},i?.preloadingStrategy?RU(i.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:qD},i?.initialNavigation?kg(i):[],i?.bindToComponentInputs?hu(8,[nM,{provide:oy,useExisting:nM}]).\u0275providers:[],[{provide:ZD,useFactory:fu},{provide:p.tb,multi:!0,useExisting:ZD}]]}}static forChild(r){return{ngModule:e,providers:[{provide:_f,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(OM,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();function KD(n){return"guarded"}function kg(n){return["disabled"===n.initialNavigation?hu(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(zi);return()=>{e.setUpLocationChangeListener()}}},{provide:IT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hu(2,[{provide:IT,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Ue,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(zi),s=e.get(zD);VD(i,()=>{r(!0)}),e.get(my).afterPreactivation=()=>(r(!0),s.closed?(0,Vt.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ZD=new p.OlP("");var $=O(5861),rt=O(9058),In=O(534),YD=O(7582),us=O(7879),gl=O(4537);const $M=function XD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},eC=new rt.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Og=new us.Yd("@firebase/auth");function Iy(n,...e){Og.logLevel<=us.in.ERROR&&Og.error(`Auth (${In.SDK_VERSION}): ${n}`,...e)}function wo(n,...e){throw If(n,...e)}function ba(n,...e){return If(n,...e)}function If(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return eC.create(n,...e)}function tt(n,e,...t){if(!n)throw If(e,...t)}function pu(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Iy(e),new Error(e)}function gu(n,e){n||pu(e)}function Lg(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function Ef(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class ml{constructor(e,t){this.shortDelay=e,this.longDelay=t,gu(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,rt.uI)()||(0,rt.b$)()}get(){return function cs(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Ho(){return"http:"===Ef()||"https:"===Ef()}()||(0,rt.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Js(n,e){gu(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Ey{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tf={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},wf=new ml(3e4,6e4);function $n(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function zn(n,e,t,r){return _l.apply(this,arguments)}function _l(){return(_l=(0,$.Z)(function*(n,e,t,r,i={}){return Ud(n,i,(0,$.Z)(function*(){let s={},u={};r&&("GET"===e?u=r:s={body:JSON.stringify(r)});const d=(0,rt.xO)(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode),Ey.fetch()(CT(n,n.config.apiHost,t,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Ud(n,e,t){return yl.apply(this,arguments)}function yl(){return(yl=(0,$.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tf),e);try{const i=new nC(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=yield s.json();if("needConfirmation"in u)throw Af(n,"account-exists-with-different-credential",u);if(s.ok&&!("errorMessage"in u))return u;{const d=s.ok?u.errorMessage:u.error.message,[f,_]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===f)throw Af(n,"credential-already-in-use",u);if("EMAIL_EXISTS"===f)throw Af(n,"email-already-in-use",u);if("USER_DISABLED"===f)throw Af(n,"user-disabled",u);const I=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw function DT(n,e,t){const r=Object.assign(Object.assign({},$M()),{[e]:t});return new rt.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,I,_);wo(n,I)}}catch(i){if(i instanceof rt.ZR)throw i;wo(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function vl(){return(vl=(0,$.Z)(function*(n,e,t,r,i={}){const s=yield zn(n,e,t,r,i);return"mfaPendingCredential"in s&&wo(n,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function CT(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Js(n.config,i):`${n.config.apiScheme}://${i}`}class nC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ba(this.auth,"network-request-failed")),wf.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Af(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ba(n,e,r);return i.customData._tokenResponse=t,i}function Ty(){return(Ty=(0,$.Z)(function*(n,e){return zn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function Ay(){return(Ay=(0,$.Z)(function*(n,e){return zn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Bd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function oC(){return(oC=(0,$.Z)(function*(n,e=!1){const t=(0,rt.m9)(n),r=yield t.getIdToken(e),i=by(r);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,u=s?.sign_in_provider;return{claims:i,token:r,authTime:Bd(ST(i.auth_time)),issuedAtTime:Bd(ST(i.iat)),expirationTime:Bd(ST(i.exp)),signInProvider:u||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function ST(n){return 1e3*Number(n)}function by(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return Iy("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,rt.tV)(t);return i?JSON.parse(i):(Iy("Failed to decode base64 JWT payload"),null)}catch(i){return Iy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rc(n,e){return aC.apply(this,arguments)}function aC(){return(aC=(0,$.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof rt.ZR&&function GM({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}class jM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,$.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,$.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class uC{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bd(this.lastLoginAt),this.creationTime=Bd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $d(n){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,$.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield rc(n,function sC(n,e){return Ay.apply(this,arguments)}(t,{idToken:r}));tt(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const u=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function Vg(n){return n.map(e=>{var{providerId:t}=e,r=(0,YD._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],d=function cC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,u),I=!!n.isAnonymous&&!(n.email&&s.passwordHash||d?.length),b={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new uC(s.createdAt,s.lastLoginAt),isAnonymous:I};Object.assign(n,b)}),Gd.apply(this,arguments)}function bf(){return(bf=(0,$.Z)(function*(n){const e=(0,rt.m9)(n);yield $d(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function PT(){return(PT=(0,$.Z)(function*(n,e){const t=yield Ud(n,{},(0,$.Z)(function*(){const r=(0,rt.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,u=CT(n,i,"/v1/token",`key=${s}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Ey.fetch()(u,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class ic{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function GU(n){const e=by(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,$.Z)(function*(){return tt(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,$.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:u}=yield function lC(n,e){return PT.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(u))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,u=new ic;return r&&(tt("string"==typeof r,"internal-error",{appName:e}),u.refreshToken=r),i&&(tt("string"==typeof i,"internal-error",{appName:e}),u.accessToken=i),s&&(tt("number"==typeof s,"internal-error",{appName:e}),u.expirationTime=s),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ic,this.toJSON())}_performRefresh(){return pu("not implemented")}}function Il(n,e){tt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class jd{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,YD._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uC(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,$.Z)(function*(){const r=yield rc(t,t.stsTokenManager.getToken(t.auth,e));return tt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function $U(n){return oC.apply(this,arguments)}(this,e)}reload(){return function RT(n){return bf.apply(this,arguments)}(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,$.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield $d(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,$.Z)(function*(){const t=yield e.getIdToken();return yield rc(e,function rC(n,e){return Ty.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,u,d,f,_,I;const b=null!==(r=t.displayName)&&void 0!==r?r:void 0,x=null!==(i=t.email)&&void 0!==i?i:void 0,k=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,B=null!==(u=t.photoURL)&&void 0!==u?u:void 0,Q=null!==(d=t.tenantId)&&void 0!==d?d:void 0,Z=null!==(f=t._redirectEventId)&&void 0!==f?f:void 0,we=null!==(_=t.createdAt)&&void 0!==_?_:void 0,Pe=null!==(I=t.lastLoginAt)&&void 0!==I?I:void 0,{uid:be,emailVerified:Be,isAnonymous:gt,providerData:mt,stsTokenManager:fn}=t;tt(be&&fn,e,"internal-error");const Zr=ic.fromJSON(this.name,fn);tt("string"==typeof be,e,"internal-error"),Il(b,e.name),Il(x,e.name),tt("boolean"==typeof Be,e,"internal-error"),tt("boolean"==typeof gt,e,"internal-error"),Il(k,e.name),Il(B,e.name),Il(Q,e.name),Il(Z,e.name),Il(we,e.name),Il(Pe,e.name);const bu=new jd({uid:be,auth:e,email:x,emailVerified:Be,displayName:b,isAnonymous:gt,photoURL:B,phoneNumber:k,tenantId:Q,stsTokenManager:Zr,createdAt:we,lastLoginAt:Pe});return mt&&Array.isArray(mt)&&(bu.providerData=mt.map(Px=>Object.assign({},Px))),Z&&(bu._redirectEventId=Z),bu}static _fromIdTokenResponse(e,t,r=!1){return(0,$.Z)(function*(){const i=new ic;i.updateFromServerResponse(t);const s=new jd({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $d(s),s})()}}const dC=new Map;function sc(n){gu(n instanceof Function,"Expected a class definition");let e=dC.get(n);return e?(gu(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dC.set(n,e),e)}const Ug=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,$.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,$.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,$.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,$.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function zd(n,e,t){return`firebase:${n}:${e}:${t}`}class Bg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zd(this.userKey,i.apiKey,s),this.fullPersistenceKey=zd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,$.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?jd._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,$.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,$.Z)(function*(){if(!t.length)return new Bg(sc(Ug),e,r);const i=(yield Promise.all(t.map(function(){var _=(0,$.Z)(function*(I){if(yield I._isAvailable())return I});return function(I){return _.apply(this,arguments)}}()))).filter(_=>_);let s=i[0]||sc(Ug);const u=zd(r,e.config.apiKey,e.name);let d=null;for(const _ of t)try{const I=yield _._get(u);if(I){const b=jd._fromJSON(e,I);_!==s&&(d=b),s=_;break}}catch{}const f=i.filter(_=>_._shouldAllowMigration);return s._shouldAllowMigration&&f.length?(s=f[0],d&&(yield s._set(u,d.toJSON())),yield Promise.all(t.map(function(){var _=(0,$.Z)(function*(I){if(I!==s)try{yield I._remove(u)}catch{}});return function(I){return _.apply(this,arguments)}}())),new Bg(s,e,r)):new Bg(s,e,r)})()}}function fC(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_C(e))return"Blackberry";if(MT(e))return"Webos";if($g(e))return"Safari";if((e.includes("chrome/")||gC(e))&&!e.includes("edge/"))return"Chrome";if(mC(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function pC(n=(0,rt.z$)()){return/firefox\//i.test(n)}function $g(n=(0,rt.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gC(n=(0,rt.z$)()){return/crios\//i.test(n)}function xT(n=(0,rt.z$)()){return/iemobile/i.test(n)}function mC(n=(0,rt.z$)()){return/android/i.test(n)}function _C(n=(0,rt.z$)()){return/blackberry/i.test(n)}function MT(n=(0,rt.z$)()){return/webos/i.test(n)}function Gg(n=(0,rt.z$)()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yC(n=(0,rt.z$)()){return Gg(n)||mC(n)||MT(n)||_C(n)||/windows phone/i.test(n)||xT(n)}function Dy(n,e=[]){let t;switch(n){case"Browser":t=fC((0,rt.z$)());break;case"Worker":t=`${fC((0,rt.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${In.SDK_VERSION}/${r}`}function jg(n,e){return Df.apply(this,arguments)}function Df(){return(Df=(0,$.Z)(function*(n,e){return zn(n,"GET","/v2/recaptchaConfig",$n(n,e))})).apply(this,arguments)}function OT(n){return void 0!==n&&void 0!==n.enterprise}class vC{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function FT(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=ba("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function KM(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function zg(n){return`__${n}${Math.floor(1e6*Math.random())}`}class TC{constructor(e){this.type="recaptcha-enterprise",this.auth=Hr(e)}verify(e="verify",t=!1){var r=this;return(0,$.Z)(function*(){function s(){return s=(0,$.Z)(function*(d){if(!t){if(null==d.tenantId&&null!=d._agentRecaptchaConfig)return d._agentRecaptchaConfig.siteKey;if(null!=d.tenantId&&void 0!==d._tenantRecaptchaConfigs[d.tenantId])return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(function(){var f=(0,$.Z)(function*(_,I){jg(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(void 0!==b.recaptchaKey){const x=new vC(b);return null==d.tenantId?d._agentRecaptchaConfig=x:d._tenantRecaptchaConfigs[d.tenantId]=x,_(x.siteKey)}I(new Error("recaptcha Enterprise site key undefined"))}).catch(b=>{I(b)})});return function(_,I){return f.apply(this,arguments)}}())}),s.apply(this,arguments)}function u(d,f,_){const I=window.grecaptcha;OT(I)?I.enterprise.ready(()=>{I.enterprise.execute(d,{action:e}).then(b=>{f(b)}).catch(()=>{f("NO_RECAPTCHA")})}):_(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((d,f)=>{(function i(d){return s.apply(this,arguments)})(r.auth).then(_=>{if(!t&&OT(window.grecaptcha))u(_,d,f);else{if(typeof window>"u")return void f(new Error("RecaptchaVerifier is only supported in browser"));FT("https://www.google.com/recaptcha/enterprise.js?render="+_).then(()=>{u(_,d,f)}).catch(I=>{f(I)})}}).catch(_=>{f(_)})})})()}}class LT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((u,d)=>{try{u(e(s))}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,$.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class wC{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VT(this),this.idTokenSubscription=new VT(this),this.beforeStateQueue=new LT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=sc(t)),this._initializationPromise=this.queue((0,$.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield Bg.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,$.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,$.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,f=s?._redirectEventId,_=yield t.tryRedirectSignIn(e);(!d||d===f)&&_?.user&&(s=_.user,u=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(s)}catch(d){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return tt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,$.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,$.Z)(function*(){try{yield $d(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Vd(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,$.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,$.Z)(function*(){const r=e?(0,rt.m9)(e):null;return r&&tt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,$.Z)(function*(){if(!r._deleted)return e&&tt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,$.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,$.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,$.Z)(function*(){yield t.assertedPersistence.setPersistence(sc(e))}))}initializeRecaptchaConfig(){var e=this;return(0,$.Z)(function*(){const t=yield jg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new vC(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new TC(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,$.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,$.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&sc(e)||t._popupRedirectResolver;tt(r,t,"argument-error"),t.redirectPersistenceManager=yield Bg.create(t,[sc(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,$.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,$.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,$.Z)(function*(){if(e===t.currentUser)return t.queue((0,$.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),u=this._isInitialized?Promise.resolve():this._initializationPromise;return tt(u,this,"internal-error"),u.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,$.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,$.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,$.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function tC(n,...e){Og.logLevel<=us.in.WARN&&Og.warn(`Auth (${In.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Hr(n){return(0,rt.m9)(n)}class VT{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,rt.ne)(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function UT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CC(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class YM{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pu("not implemented")}_getIdTokenResponse(e){return pu("not implemented")}_linkToIdToken(e,t){return pu("not implemented")}_getReauthenticationResolver(e){return pu("not implemented")}}function _u(n,e){return KT.apply(this,arguments)}function KT(){return(KT=(0,$.Z)(function*(n,e){return function Xs(n,e,t,r){return vl.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",$n(n,e))})).apply(this,arguments)}class Hi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nN extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,$.Z)(function*(){const s=yield jd._fromIdTokenResponse(e,r,i),u=kC(r);return new ls({user:s,providerId:u,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,$.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=kC(r);return new ls({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function kC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class $y extends rt.ZR{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$y.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new $y(e,t,r,i)}}function tw(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?$y._fromErrorAndOperation(n,s,e,r):s})}function jy(){return(jy=(0,$.Z)(function*(n,e,t=!1){const r=yield rc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ls._forOperation(n,"link",r)})).apply(this,arguments)}function Zg(){return(Zg=(0,$.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield rc(n,tw(r,i,e,n),t);tt(s.idToken,r,"internal-error");const u=by(s.idToken);tt(u,r,"internal-error");const{sub:d}=u;return tt(n.uid===d,r,"user-mismatch"),ls._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&wo(r,"user-mismatch"),s}})).apply(this,arguments)}function zy(){return(zy=(0,$.Z)(function*(n,e,t=!1){const r="signIn",i=yield tw(n,r,e),s=yield ls._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})).apply(this,arguments)}const sv="__sak";class jC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sv,"1"),this.storage.removeItem(sv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const AN=(()=>{class n extends jC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function TN(){const n=(0,rt.z$)();return $g(n)||Gg(n)}()&&function WM(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yC(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((d,f,_)=>{this.notifyListeners(d,_)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(i);if(t.newValue!==d)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);!function qM(){return(0,rt.w1)()&&10===document.documentMode}()||u===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,$.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,$.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,$.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),qC=(()=>{class n extends jC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let n2=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,$.Z)(function*(){const i=t,{eventId:s,eventType:u,data:d}=i.data,f=r.handlersMap[u];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:u});const _=Array.from(f).map(function(){var b=(0,$.Z)(function*(x){return x(i.origin,d)});return function(x){return b.apply(this,arguments)}}()),I=yield function DN(n){return Promise.all(n.map(function(){var e=(0,$.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(_);i.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:I})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function WC(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class r2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,$.Z)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let u,d;return new Promise((f,_)=>{const I=WC("",20);s.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:s,onMessage(x){const k=x;if(k.data.eventId===I)switch(k.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),f(k.data.response);break;default:clearTimeout(b),clearTimeout(u),_(new Error("invalid_response"))}}},i.handlers.add(d),s.port1.addEventListener("message",d.onMessage),i.target.postMessage({eventType:e,eventId:I,data:t},[s.port2])}).finally(()=>{d&&i.removeMessageHandler(d)})})()}}function ai(){return window}function kf(){return typeof ai().WorkerGlobalScope<"u"&&"function"==typeof ai().importScripts}function Tw(){return(Tw=(0,$.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const QC="firebaseLocalStorageDb",ov="firebaseLocalStorage",YC="fbase_key";class av{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uv(n,e){return n.transaction([ov],e?"readwrite":"readonly").objectStore(ov)}function ww(){const n=indexedDB.open(QC,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ov,{keyPath:YC})}catch(i){t(i)}}),n.addEventListener("success",(0,$.Z)(function*(){const r=n.result;r.objectStoreNames.contains(ov)?e(r):(r.close(),yield function JC(){const n=indexedDB.deleteDatabase(QC);return new av(n).toPromise()}(),e(yield ww()))}))})}function XC(n,e,t){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,$.Z)(function*(n,e,t){const r=uv(n,!0).put({[YC]:e,value:t});return new av(r).toPromise()})).apply(this,arguments)}function cv(){return(cv=(0,$.Z)(function*(n,e){const t=uv(n,!1).get(e),r=yield new av(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function eS(n,e){const t=uv(n,!0).delete(e);return new av(t).toPromise()}const MN=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,$.Z)(function*(){return t.db||(t.db=yield ww()),t.db})()}_withRetries(t){var r=this;return(0,$.Z)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,$.Z)(function*(){return kf()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,$.Z)(function*(){t.receiver=n2._getInstance(function Xg(){return kf()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,$.Z)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,$.Z)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,$.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function CN(){return Tw.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new r2(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,$.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function ZC(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,$.Z)(function*(){try{if(!indexedDB)return!1;const t=yield ww();return yield XC(t,sv,"1"),yield eS(t,sv),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,$.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,$.Z)(function*(){return i._withPendingWrite((0,$.Z)(function*(){return yield i._withRetries(s=>XC(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,$.Z)(function*(){const i=yield r._withRetries(s=>function RN(n,e){return cv.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,$.Z)(function*(){return r._withPendingWrite((0,$.Z)(function*(){return yield r._withRetries(i=>eS(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,$.Z)(function*(){const r=yield t._withRetries(u=>{const d=uv(u,!1).getAll();return new av(d).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:u,value:d}of r)s.add(u),JSON.stringify(t.localCache[u])!==JSON.stringify(d)&&(t.notifyListeners(u,d),i.push(u));for(const u of Object.keys(t.localCache))t.localCache[u]&&!s.has(u)&&(t.notifyListeners(u,null),i.push(u));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,$.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();zg("rcb"),new ml(3e4,6e4);class rm extends YM{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _u(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _u(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _u(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HN(n){return function Qg(n,e){return zy.apply(this,arguments)}(n.auth,new rm(n),n.bypassAuthState)}function oS(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),function OC(n,e){return Zg.apply(this,arguments)}(t,new rm(n),n.bypassAuthState)}function Of(n){return fv.apply(this,arguments)}function fv(){return(fv=(0,$.Z)(function*(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),function Gy(n,e){return jy.apply(this,arguments)}(t,new rm(n),n.bypassAuthState)})).apply(this,arguments)}class qN{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,$.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,$.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:u,error:d,type:f}=e;if(d)return void t.reject(d);const _={auth:t.auth,requestUri:r,sessionId:i,tenantId:u||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(f)(_))}catch(I){t.reject(I)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HN;case"linkViaPopup":case"linkViaRedirect":return Of;case"reauthViaPopup":case"reauthViaRedirect":return oS;default:wo(this.auth,"internal-error")}}resolve(e){gu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new ml(2e3,1e4);const Pw="pendingRedirect",Ff=new Map;class uS extends qN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,$.Z)(function*(){let r=Ff.get(t.auth._key());if(!r){try{const s=(yield function cS(n,e){return mv.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Ff.set(t.auth._key(),r)}return t.bypassAuthState||Ff.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,$.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,$.Z)(function*(){})()}cleanUp(){}}function mv(){return(mv=(0,$.Z)(function*(n,e){const t=function ZN(n){return zd(Pw,n.config.apiKey,n.name)}(e),r=function Nw(n){return sc(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function KN(n,e){Ff.set(n._key(),e)}function lS(n,e){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,$.Z)(function*(n,e,t=!1){const r=Hr(n),i=function Kd(n,e){return e?sc(e):(tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),u=yield new uS(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,yield r._persistUserIfCurrent(u.user),yield r._setRedirectUser(null,e)),u})).apply(this,arguments)}class sm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function hS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $w(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$w(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(ba(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bw(e))}saveEventToCache(e){this.cachedEventUids.add(Bw(e)),this.lastProcessedEventTime=Date.now()}}function Bw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $w({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function _v(){return(_v=(0,$.Z)(function*(n,e={}){return zn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const tk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nk=/^https?/;function pS(){return pS=(0,$.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function fS(n){return _v.apply(this,arguments)}(n);for(const t of e)try{if(rk(t))return}catch{}wo(n,"unauthorized-domain")}),pS.apply(this,arguments)}function rk(n){const e=Lg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return""===u.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&u.hostname===r}if(!nk.test(t))return!1;if(tk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ik=new ml(3e4,6e4);function gS(){const n=ai().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let yv=null;const ok=new ml(5e3,15e3),Gw="__/auth/iframe",Iu="emulator/auth/iframe",ak={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function am(n){const e=n.config;tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Js(e,Iu):`https://${n.config.authDomain}/${Gw}`,r={apiKey:e.apiKey,appName:n.name,v:In.SDK_VERSION},i=jw.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${(0,rt.xO)(r).slice(1)}`}function zw(){return zw=(0,$.Z)(function*(n){const e=yield function om(n){return yv=yv||function sk(n){return new Promise((e,t)=>{var r,i,s;function u(){gS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gS(),t(ba(n,"network-request-failed"))},timeout:ik.get()})}if(null!==(i=null===(r=ai().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=ai().gapi)||void 0===s||!s.load){const d=zg("iframefcb");return ai()[d]=()=>{gapi.load?u():t(ba(n,"network-request-failed"))},FT(`https://apis.google.com/js/api.js?onload=${d}`).catch(f=>t(f))}u()}}).catch(e=>{throw yv=null,e})}(n),yv}(n),t=ai().gapi;return tt(t,n,"internal-error"),e.open({where:document.body,url:am(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ak,dontclear:!0},r=>new Promise(function(){var i=(0,$.Z)(function*(s,u){yield r.restyle({setHideOnLeave:!1});const d=ba(n,"network-request-failed"),f=ai().setTimeout(()=>{u(d)},ok.get());function _(){ai().clearTimeout(f),s(r)}r.ping(_).then(_,()=>{u(d)})});return function(s,u){return i.apply(this,arguments)}}()))}),zw.apply(this,arguments)}const ck={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _S="__/auth/handler",pk="emulator/auth/handler",gk=encodeURIComponent("fac");function Hw(n,e,t,r,i,s){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,$.Z)(function*(n,e,t,r,i,s){tt(n.config.authDomain,n,"auth-domain-config-required"),tt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:In.SDK_VERSION,eventId:i};if(e instanceof Hi){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",(0,rt.xb)(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,b]of Object.entries(s||{}))u[I]=b}if(e instanceof nN){const I=e.getScopes().filter(b=>""!==b);I.length>0&&(u.scopes=I.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const I of Object.keys(d))void 0===d[I]&&delete d[I];const f=yield n._getAppCheckToken(),_=f?`#${gk}=${encodeURIComponent(f)}`:"";return`${function mk({config:n}){return n.emulator?Js(n,pk):`https://${n.authDomain}/${_S}`}(n)}?${(0,rt.xO)(d).slice(1)}${_}`})).apply(this,arguments)}const qw="webStorageSupport",vS=class yS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qC,this._completeRedirectFn=lS,this._overrideRedirectResult=KN}_openPopup(e,t,r,i){var s=this;return(0,$.Z)(function*(){var u;gu(null===(u=s.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()");const d=yield Hw(e,t,r,Lg(),i);return function hk(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},ck),{width:r.toString(),height:i.toString(),top:s,left:u}),_=(0,rt.z$)().toLowerCase();t&&(d=gC(_)?"_blank":t),pC(_)&&(e=e||"http://localhost",f.scrollbars="yes");const I=Object.entries(f).reduce((x,[k,B])=>`${x}${k}=${B},`,"");if(function HM(n=(0,rt.z$)()){var e;return Gg(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(_)&&"_self"!==d)return function fk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",d),new Iv(null);const b=window.open(e||"",d,I);tt(b,n,"popup-blocked");try{b.focus()}catch{}return new Iv(b)}(e,d,WC())})()}_openRedirect(e,t,r,i){var s=this;return(0,$.Z)(function*(){return yield s._originValidation(e),function KC(n){ai().location.href=n}(yield Hw(e,t,r,Lg(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(gu(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,$.Z)(function*(){const r=yield function uk(n){return zw.apply(this,arguments)}(e),i=new sm(e);return r.register("authEvent",s=>(tt(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qw,{type:qw},i=>{var s;const u=null===(s=i?.[0])||void 0===s?void 0:s[qw];void 0!==u&&t(!!u),wo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function h2(n){return pS.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yC()||$g()||Gg()}};var wv="@firebase/auth";class TS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,$.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vk=(0,rt.Pz)("authIdTokenMaxAge")||300;let wS=null;const Ik=n=>function(){var e=(0,$.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>vk)return;const s=r?.token;wS!==s&&(wS=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function AS(n=(0,In.getApp)()){const e=(0,In._getProvider)(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function ZM(n,e){const t=(0,In._getProvider)(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if((0,rt.vZ)(s,e??{}))return i;wo(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:vS,persistence:[MN,AN,qC]}),r=(0,rt.Pz)("authTokenSyncURL");if(r){const s=Ik(r);(function BC(n,e,t){(0,rt.m9)(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function mN(n,e,t,r){(0,rt.m9)(n).onIdTokenChanged(e,t,r)}(t,u=>s(u))}const i=(0,rt.q4)("auth");return i&&function bC(n,e,t){const r=Hr(n);tt(r._canInitEmulator,r,"emulator-config-failed"),tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=UT(e),{host:u,port:d}=function DC(n){const e=UT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:CC(r.substr(s.length+1))}}{const[s,u]=r.split(":");return{host:s,port:CC(u)}}}(e);r.config.emulator={url:`${s}//${u}${null===d?"":`:${d}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:d,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function QM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function Zw(n){(0,In._registerComponent)(new gl.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;tt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dy(n)},_=new wC(r,i,s,f);return function AC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(sc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,In._registerComponent)(new gl.wA("auth-internal",e=>{const t=Hr(e.getProvider("auth").getImmediate());return new TS(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,In.registerVersion)(wv,"1.1.0",function Kw(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,In.registerVersion)(wv,"1.1.0","esm2017")}("Browser");var ct,Qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qo={},bv=bv||{},jt=Qw||self;function Dv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Vf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Yw="closure_uid_"+(1e9*Math.random()>>>0),DS=0;function Ek(n,e,t){return n.call.apply(n.bind,arguments)}function Rs(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Or(n,e,t){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ek:Rs).apply(null,arguments)}function Cv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Zd(){this.s=this.s,this.o=this.o}Zd.prototype.s=!1,Zd.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function bS(n){Object.prototype.hasOwnProperty.call(n,Yw)&&n[Yw]||(n[Yw]=++DS)}(this)},Zd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function um(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Uf(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Dv(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function ds(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ds.prototype.h=function(){this.defaultPrevented=!0};var Xw=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",()=>{},e),jt.removeEventListener("test",()=>{},e)}catch{}return n}();function cm(n){return/^[\s\xa0]*$/.test(n)}function lm(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function Eu(n){return-1!=lm().indexOf(n)}function e0(n){return e0[" "](n),n}e0[" "]=function(){};var r0,n,t0=Eu("Opera"),Qd=Eu("Trident")||Eu("MSIE"),CS=Eu("Edge"),Bf=CS||Qd,Sv=Eu("Gecko")&&!(-1!=lm().toLowerCase().indexOf("webkit")&&!Eu("Edge"))&&!(Eu("Trident")||Eu("MSIE"))&&!Eu("Edge"),g2=-1!=lm().toLowerCase().indexOf("webkit")&&!Eu("Edge");function n0(){var n=jt.document;return n?n.documentMode:void 0}e:{var Rv="",wl=(n=lm(),Sv?/rv:([^\);]+)(\)|;)/.exec(n):CS?/Edge\/([\d\.]+)/.exec(n):Qd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):g2?/WebKit\/(\S+)/.exec(n):t0?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wl&&(Rv=wl?wl[1]:""),Qd){var s0=n0();if(null!=s0&&s0>parseFloat(Rv)){r0=String(s0);break e}}r0=Rv}var m2=jt.document&&Qd&&(n0()||parseInt(r0,10))||void 0;function dm(n,e){if(ds.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Sv){e:{try{e0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_2[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&dm.$.h.call(this)}}Ai(dm,ds);var _2={2:"touch",3:"pen",4:"mouse"};dm.prototype.h=function(){dm.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var hm="closure_listenable_"+(1e6*Math.random()|0),wk=0;function Ak(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++wk,this.fa=this.ia=!1}function fm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Mv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function o0(n){const e={};for(const t in n)e[t]=n[t];return e}const a0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<a0.length;s++)t=a0[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nv(n){this.src=n,this.g={},this.h=0}function kv(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Jw(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(fm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function u0(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Nv.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=u0(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new Ak(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var Ov="closure_lm_"+(1e6*Math.random()|0),Fv={};function c0(n,e,t,r,i){if(r&&r.once)return RS(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)c0(n,e[s],t,r,i);return null}return t=MS(t),n&&n[hm]?n.O(e,t,Vf(r)?!!r.capture:!!r,i):l0(n,e,t,!1,r,i)}function l0(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=Vf(i)?!!i.capture:!!i,d=PS(n);if(d||(n[Ov]=d=new Nv(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function Dk(){const e=y2;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Xw||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Sk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function RS(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RS(n,e[s],t,r,i);return null}return t=MS(t),n&&n[hm]?n.P(e,t,Vf(r)?!!r.capture:!!r,i):l0(n,e,t,!0,r,i)}function Ck(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ck(n,e[s],t,r,i);else r=Vf(r)?!!r.capture:!!r,t=MS(t),n&&n[hm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=u0(s=n.g[e],t,r,i))&&(fm(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=PS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=u0(e,t,r,i)),(t=-1<n?e[n]:null)&&Lv(t))}function Lv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[hm])kv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=PS(e))?(kv(t,n),0==t.h&&(t.src=null,e[Ov]=null)):fm(n)}}}function Sk(n){return n in Fv?Fv[n]:Fv[n]="on"+n}function y2(n,e){if(n.fa)n=!0;else{e=new dm(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Lv(n),n=t.call(r,e)}return n}function PS(n){return(n=n[Ov])instanceof Nv?n:null}var xS="__closure_events_fn_"+(1e9*Math.random()>>>0);function MS(n){return"function"==typeof n?n:(n[xS]||(n[xS]=function(e){return n.handleEvent(e)}),n[xS])}function qi(){Zd.call(this),this.i=new Nv(this),this.S=this,this.J=null}function hs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ds(e,n);else if(e instanceof ds)e.target=e.target||n;else{var i=e;SS(e=new ds(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=d0(u,r,!0,e)&&i}if(i=d0(u=e.g=n,r,!0,e)&&i,i=d0(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=d0(u=e.g=t[s],r,!1,e)&&i}function d0(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var d=u.listener,f=u.la||u.src;u.ia&&kv(n.i,u),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Ai(qi,Zd),qi.prototype[hm]=!0,qi.prototype.removeEventListener=function(n,e,t,r){Ck(this,n,e,t,r)},qi.prototype.N=function(){if(qi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)fm(t[r]);delete n.g[e],n.h--}}this.J=null},qi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},qi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var NS=jt.JSON.stringify;function h0(){var n=Bv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var FS=new class kS{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Vv,n=>n.reset());class Vv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rk(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function v2(n){jt.setTimeout(()=>{throw n},0)}let Uv,pm=!1,Bv=new class OS{constructor(){this.h=this.g=null}add(e,t){const r=FS.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},LS=()=>{const n=jt.Promise.resolve(void 0);Uv=()=>{n.then(Pk)}};var Pk=()=>{for(var n;n=h0();){try{n.h.call(n.g)}catch(t){v2(t)}var e=FS;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}pm=!1};function $v(n,e){qi.call(this),this.h=n||1,this.g=e||jt,this.j=Or(this.qb,this),this.l=Date.now()}function VS(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function f0(n,e,t){if("function"==typeof n)t&&(n=Or(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Or(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function p0(n){n.g=f0(()=>{n.g=null,n.i&&(n.i=!1,p0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ai($v,qi),(ct=$v.prototype).ga=!1,ct.T=null,ct.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hs(this,"tick"),this.ga&&(VS(this),this.start()))}},ct.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.N=function(){$v.$.N.call(this),VS(this),delete this.g};class US extends Zd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:p0(this)}N(){super.N(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gv(n){Zd.call(this),this.h=n,this.g={}}Ai(Gv,Zd);var Wo=[];function g0(n,e,t,r){Array.isArray(t)||(t&&(Wo[0]=t.toString()),t=Wo);for(var i=0;i<t.length;i++){var s=c0(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function BS(n){Mv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lv(e)},n),n.g={}}function m0(){this.g=!0}function Al(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nk(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return NS(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Gv.prototype.N=function(){Gv.$.N.call(this),BS(this)},Gv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},m0.prototype.Ea=function(){this.g=!1},m0.prototype.info=function(){};var uc={},_0=null;function gm(){return _0=_0||new qi}function $S(n){ds.call(this,uc.Ta,n)}function $f(n){const e=gm();hs(e,new $S(e))}function y0(n,e){ds.call(this,uc.STAT_EVENT,n),this.stat=e}function fs(n){const e=gm();hs(e,new y0(e,n))}function v0(n,e){ds.call(this,uc.Ua,n),this.size=e}function mm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}uc.Ta="serverreachability",Ai($S,ds),uc.STAT_EVENT="statevent",Ai(y0,ds),uc.Ua="timingevent",Ai(v0,ds);var _m={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},GS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ym(){}function I0(){}ym.prototype.h=null;var jS,Yd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vm(){ds.call(this,"d")}function E0(){ds.call(this,"c")}function Im(){}function Em(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Gv(this),this.P=kk,this.V=new $v(n=Bf?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zS}function zS(){this.i=null,this.g="",this.h=!1}Ai(vm,ds),Ai(E0,ds),Ai(Im,ym),Im.prototype.g=function(){return new XMLHttpRequest},Im.prototype.i=function(){return{}},jS=new Im;var kk=45e3,T0={},Tm={};function HS(n,e,t){n.L=1,n.v=S0(Dl(e)),n.s=t,n.S=!0,w0(n,null)}function w0(n,e){n.G=Date.now(),Jd(n),n.A=Dl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),QS(t.i,"t",r),n.C=0,t=n.l.J,n.h=new zS,n.g=Hk(n.l,t?e:null,!n.s),0<n.O&&(n.M=new US(Or(n.Pa,n,n.g),n.O)),g0(n.U,n.g,"readystatechange",n.nb),e=n.I?o0(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),$f(),function Ps(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var I=_[0];_=_[1];var b=I.split("_");u=2<=b.length&&"type"==b[1]?u+(I+"=")+_+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function qS(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function A0(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=I2(n,t),i==Tm){4==e&&(n.o=4,fs(14),r=!1),Al(n.j,n.m,null,"[Incomplete Response]");break}if(i==T0){n.o=4,fs(15),Al(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Al(n.j,n.m,i,null),jv(n,i)}qS(n)&&i!=Tm&&i!=T0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),U0(e),e.M=!0,fs(11))):(Al(n.j,n.m,t,"[Invalid Chunked Response]"),bl(n),Am(n))}function I2(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Tm:(t=Number(e.substring(t,r)),isNaN(t)?T0:(r+=1)+t>e.length?Tm:(e=e.slice(r,r+t),n.C=r+t,e))}function Jd(n){n.Y=Date.now()+n.P,b0(n,n.P)}function b0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=mm(Or(n.lb,n),e)}function wm(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Am(n){0==n.l.H||n.J||uR(n.l,n)}function bl(n){wm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,VS(n.V),BS(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function jv(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Cm(t.i,n)))if(!n.K&&Cm(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;B0(t),Nm(t)}aR(t),fs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=mm(Or(t.ib,t),6e3));if(1>=JS(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else qf(t,11)}else if((n.K||t.g==n)&&B0(t),!cm(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const I=_[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const b=_[4];null!=b&&(t.Ga=b,t.l.info("SVER="+t.Ga));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var s=r.i;s.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Sm(s,s.h),s.h=null))}if(r.F){const Q=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,cr(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=zk(r,r.J?r.pa:null,r.Y),u.K){Rm(r.i,u);var d=u,f=r.L;f&&d.setTimeout(f),d.B&&(wm(d),Jd(d)),r.g=u}else V0(r);0<t.j.length&&tI(t)}else"stop"!=_[0]&&"close"!=_[0]||qf(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?qf(t,7):Mm(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}$f()}catch{}}function D0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Dv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function zv(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Dv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Gf(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Dv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ct=Em.prototype).setTimeout=function(n){this.P=n},ct.nb=function(n){n=n.target;const e=this.M;e&&3==Tu(n)?e.l():this.Pa(n)},ct.Pa=function(n){try{if(n==this.g)e:{const I=Tu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||Bf||this.g&&(this.h.h||this.g.ja()||iR(this.g)))){this.J||4!=I||7==e||$f(),wm(this);var t=this.g.da();this.ca=t;t:if(qS(this)){var r=iR(this.g);n="";var i=r.length,s=4==Tu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bl(this),Am(this);var u="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function xk(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cm(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,fs(12),bl(this),Am(this);break e}Al(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jv(this,t)}this.S?(A0(this,I,u),Bf&&this.i&&3==I&&(g0(this.U,this.V,"tick",this.mb),this.V.start())):(Al(this.j,this.m,u,null),jv(this,u)),4==I&&bl(this),this.i&&!this.J&&(4==I?uR(this.l,this):(this.i=!1,Jd(this)))}else(function Gk(n){const e={};n=(n.g&&2<=Tu(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(cm(n[r]))continue;var t=Rk(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function bk(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,fs(12)):(this.o=0,fs(13)),bl(this),Am(this)}}}catch{}},ct.mb=function(){if(this.g){var n=Tu(this.g),e=this.g.ja();this.C<e.length&&(wm(this),A0(this,n,e),this.i&&4!=n&&Jd(this))}},ct.cancel=function(){this.J=!0,bl(this)},ct.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Mk(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($f(),fs(17)),bl(this),this.o=2,Am(this)):b0(this,this.Y-n)};var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xd){this.h=n.h,bm(this,n.j),this.s=n.s,this.g=n.g,Hv(this,n.m),this.l=n.l;var e=n.i,t=new Wv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),WS(this,t),this.o=n.o}else n&&(e=String(n).match(C0))?(this.h=!1,bm(this,e[1]||"",!0),this.s=qv(e[2]||""),this.g=qv(e[3]||"",!0),Hv(this,e[4]),this.l=qv(e[5]||"",!0),WS(this,e[6]||"",!0),this.o=qv(e[7]||"")):(this.h=!1,this.i=new Wv(null,this.h))}function Dl(n){return new Xd(n)}function bm(n,e,t){n.j=t?qv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Hv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WS(n,e,t){e instanceof Wv?(n.i=e,function YS(n,e){e&&!n.j&&(eh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ZS(this,r),QS(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=jf(e,T2)),n.i=new Wv(e,n.h))}function cr(n,e,t){n.i.set(e,t)}function S0(n){return cr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function jf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Fk),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Fk(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(jf(e,KS,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(jf(e,KS,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(jf(t,"/"==t.charAt(0)?E2:Lk,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",jf(t,w2)),n.join("")};var KS=/[#\/\?@]/g,Lk=/[#\?:]/g,E2=/[#\?]/g,T2=/[#\?@]/g,w2=/#/g;function Wv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function eh(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ok(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ZS(n,e){eh(n),e=zf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Dm(n,e){return eh(n),e=zf(n,e),n.g.has(e)}function QS(n,e,t){ZS(n,e),0<t.length&&(n.i=null,n.g.set(zf(n,e),um(t)),n.h+=t.length)}function zf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function R0(n){this.l=n||P0,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ka&&jt.g.Ka()&&jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=Wv.prototype).add=function(n,e){eh(this),this.i=null,n=zf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){eh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ct.ta=function(){eh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ct.Z=function(n){eh(this);let e=[];if("string"==typeof n)Dm(this,n)&&(e=e.concat(this.g.get(zf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ct.set=function(n,e){return eh(this),this.i=null,Dm(this,n=zf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var P0=10;function Kv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function JS(n){return n.h?1:n.g?n.g.size:0}function Cm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sm(n,e){n.g?n.g.add(e):n.h=e}function Rm(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Vk(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return um(n.i)}R0.prototype.cancel=function(){if(this.i=Vk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var A2=class{stringify(n){return jt.JSON.stringify(n,void 0)}parse(n){return jt.JSON.parse(n,void 0)}};function b2(){this.g=new A2}function XS(n,e,t){const r=t||"";try{D0(n,function(i,s){let u=i;Vf(i)&&(u=NS(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Pm(n){this.l=n.fc||null,this.j=n.ob||!1}function Qv(n,e){qi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Yv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ai(Pm,ym),Pm.prototype.g=function(){return new Qv(this.l,this.j)},Pm.prototype.i=function(n){return function(){return n}}({}),Ai(Qv,qi);var Yv=0;function x0(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Hf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xm(n)}function xm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=Qv.prototype).open=function(n,e){if(this.readyState!=Yv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xm(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hf(this)),this.readyState=Yv},ct.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xm(this)),this.g&&(this.readyState=3,xm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;x0(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ct.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hf(this):xm(this),3==this.readyState&&x0(this)}},ct.Za=function(n){this.g&&(this.response=this.responseText=n,Hf(this))},ct.Ya=function(n){this.g&&(this.response=n,Hf(this))},ct.ka=function(){this.g&&Hf(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Bk=jt.JSON.parse;function pr(n){qi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Jv,this.L=this.M=!1}Ai(pr,qi);var Jv="",D2=/^https?$/i,eR=["POST","PUT"];function tR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,nR(n),N0(n)}function nR(n){n.F||(n.F=!0,hs(n,"complete"),hs(n,"error"))}function $k(n){if(n.h&&typeof bv<"u"&&(!n.C[1]||4!=Tu(n)||2!=n.da()))if(n.v&&4==Tu(n))f0(n.La,0,n);else if(hs(n,"readystatechange"),4==Tu(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(C0)[1]||null;!i&&jt.self&&jt.self.location&&(i=jt.self.location.protocol.slice(0,-1)),r=!D2.test(i?i.toLowerCase():"")}t=r}if(t)hs(n,"complete"),hs(n,"success");else{n.m=6;try{var s=2<Tu(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",nR(n)}}finally{N0(n)}}}function N0(n,e){if(n.g){rR(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||hs(n,"ready");try{t.onreadystatechange=r}catch{}}}function rR(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function Tu(n){return n.g?n.g.readyState:0}function iR(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Jv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function k0(n){let e="";return Mv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Xv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=k0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cr(n,e,t))}function eI(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sR(n){this.Ga=0,this.j=[],this.l=new m0,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=eI("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=eI("baseRetryDelayMs",5e3,n),this.hb=eI("retryDelaySeedMs",1e4,n),this.eb=eI("forwardChannelMaxRetries",2,n),this.xa=eI("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new R0(n&&n.concurrentRequestLimit),this.Ja=new b2,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Mm(n){if(O0(n),3==n.H){var e=n.W++,t=Dl(n.I);if(cr(t,"SID",n.K),cr(t,"RID",e),cr(t,"TYPE","terminate"),km(n,t),(e=new Em(n,n.l,e)).L=2,e.v=S0(Dl(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon)try{t=jt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Jd(e)}cR(n)}function Nm(n){n.g&&(U0(n),n.g.cancel(),n.g=null)}function O0(n){Nm(n),n.u&&(jt.clearTimeout(n.u),n.u=null),B0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function tI(n){if(!Kv(n.i)&&!n.m){n.m=!0;var e=n.Na;Uv||LS(),pm||(Uv(),pm=!0),Bv.add(e,n),n.C=0}}function oR(n,e){var t;t=e?e.m:n.W++;const r=Dl(n.I);cr(r,"SID",n.K),cr(r,"RID",t),cr(r,"AID",n.V),km(n,r),n.o&&n.s&&Xv(r,n.o,n.s),t=new Em(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=L0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Sm(n.i,t),HS(t,r,e)}function km(n,e){n.na&&Mv(n.na,function(t,r){cr(e,r,t)}),n.h&&D0({},function(t,r){cr(e,r,t)})}function L0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Or(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let _=i[f].g;const I=i[f].map;if(_-=s,0>_)s=Math.max(0,i[f].g-100),d=!1;else try{XS(I,u,"req"+_+"_")}catch{r&&r(I)}}if(d){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function V0(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Uv||LS(),pm||(Uv(),pm=!0),Bv.add(e,n),n.A=0}}function aR(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=mm(Or(n.Ma,n),jk(n,n.A)),n.A++,0))}function U0(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Om(n){n.g=new Em(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Dl(n.wa);cr(e,"RID","rpc"),cr(e,"SID",n.K),cr(e,"AID",n.V),cr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&cr(e,"TO",n.qa),cr(e,"TYPE","xmlhttp"),km(n,e),n.o&&n.s&&Xv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=S0(Dl(e)),t.s=null,t.S=!0,w0(t,n)}function B0(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function uR(n,e){var t=null;if(n.g==e){B0(n),U0(n),n.g=null;var r=2}else{if(!Cm(n.i,e))return;t=e.F,Rm(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;hs(r=gm(),new v0(r,t)),tI(n)}else V0(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function F0(n,e){return!(JS(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=mm(Or(n.Na,n,e),jk(n,n.C)),n.C++,0)))}(n,e)||2==r&&aR(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:qf(n,5);break;case 4:qf(n,10);break;case 3:qf(n,6);break;default:qf(n,2)}}function jk(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function qf(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Or(n.pb,n);t||(t=new Xd("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||bm(t,"https"),S0(t)),function Uk(n,e){const t=new m0;if(jt.Image){const r=new Image;r.onload=Cv(Zv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cv(Zv,t,r,"TestLoadImage: error",!1,e),r.onabort=Cv(Zv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cv(Zv,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fs(2);n.H=0,n.h&&n.h.za(e),cR(n),O0(n)}function cR(n){if(n.H=0,n.ma=[],n.h){const e=Vk(n.i);(0!=e.length||0!=n.j.length)&&(Uf(n.ma,e),Uf(n.ma,n.j),n.i.i.length=0,um(n.j),n.j.length=0),n.h.ya()}}function zk(n,e,t){var r=t instanceof Xd?Dl(t):new Xd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Hv(r,r.m);else{var i=jt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Xd(null);r&&bm(s,r),e&&(s.g=e),i&&Hv(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&cr(r,t,e),cr(r,"VER",n.ra),km(n,r),r}function Hk(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ha&&!n.va?new Pm({ob:!0}):n.va)).Oa(n.J),e}function qk(){}function $0(){if(Qd&&!(10<=Number(m2)))throw Error("Environmental error: no available transport.")}function Ko(n,e){qi.call(this),this.g=new sR(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!cm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cm(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fm(this)}function lR(n){vm.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Wk(){E0.call(this),this.status=1}function Fm(n){this.g=n}function wu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function dR(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ct=pr.prototype).Oa=function(n){this.M=n},ct.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jS.g(),this.C=function cc(n){return n.h||(n.h=n.i())}(this.u?this.u:jS),this.g.onreadystatechange=Or(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void tR(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=jt.FormData&&n instanceof jt.FormData,!(0<=Jw(eR,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rR(this),0<this.B&&((this.L=function M0(n){return Qd&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.ua,this)):this.A=f0(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){tR(this,s)}},ct.ua=function(){typeof bv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hs(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hs(this,"complete"),hs(this,"abort"),N0(this))},ct.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),N0(this,!0)),pr.$.N.call(this)},ct.La=function(){this.s||(this.G||this.v||this.l?$k(this):this.kb())},ct.kb=function(){$k(this)},ct.isActive=function(){return!!this.g},ct.da=function(){try{return 2<Tu(this)?this.g.status:-1}catch{return-1}},ct.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ct.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Bk(e)}},ct.Ia=function(){return this.m},ct.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=sR.prototype).ra=8,ct.H=1,ct.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Em(this,this.l,n);let s=this.s;if(this.U&&(s?(s=o0(s),SS(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=L0(this,i,e),cr(t=Dl(this.I),"RID",n),cr(t,"CVER",22),this.F&&cr(t,"X-HTTP-Session-Id",this.F),km(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(k0(s)))+"&"+e:this.o&&Xv(t,this.o,s)),Sm(this.i,i),this.bb&&cr(t,"TYPE","init"),this.P?(cr(t,"$req",e),cr(t,"SID","null"),i.aa=!0,HS(i,t,null)):HS(i,t,e),this.H=2}}else 3==this.H&&(n?oR(this,n):0==this.j.length||Kv(this.i)||oR(this))},ct.Ma=function(){if(this.u=null,Om(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=mm(Or(this.jb,this),n)}},ct.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fs(10),Nm(this),Om(this))},ct.ib=function(){null!=this.v&&(this.v=null,Nm(this),aR(this),fs(19))},ct.pb=function(n){n?(this.l.info("Successfully pinged google.com"),fs(2)):(this.l.info("Failed to ping google.com"),fs(1))},ct.isActive=function(){return!!this.h&&this.h.isActive(this)},(ct=qk.prototype).Ba=function(){},ct.Aa=function(){},ct.za=function(){},ct.ya=function(){},ct.isActive=function(){return!0},ct.Va=function(){},$0.prototype.g=function(n,e){return new Ko(n,e)},Ai(Ko,qi),Ko.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;fs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=zk(n,null,n.Y),tI(n)},Ko.prototype.close=function(){Mm(this.g)},Ko.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=NS(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&tI(e)},Ko.prototype.N=function(){this.g.h=null,delete this.j,Mm(this.g),delete this.g,Ko.$.N.call(this)},Ai(lR,vm),Ai(Wk,E0),Ai(Fm,qk),Fm.prototype.Ba=function(){hs(this.g,"a")},Fm.prototype.Aa=function(n){hs(this.g,new lR(n))},Fm.prototype.za=function(n){hs(this.g,new Wk)},Fm.prototype.ya=function(){hs(this.g,"b")},Ai(wu,function C2(){this.blockSize=-1}),wu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)dR(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){dR(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){dR(this,r),i=0;break}}this.h=i,this.i+=e},wu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var S2={};function o(n){return-128<=n&&128>n?function Tk(n,e){var t=S2;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function a(n){if(isNaN(n)||!isFinite(n))return h;if(0>n)return S(a(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=l;return new Fn(e,0)}var l=4294967296,h=o(0),m=o(1),v=o(16777216);function w(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function D(n){return-1==n.h}function S(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(m)}function N(n,e){return n.add(S(e))}function L(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function K(n,e){this.g=n,this.h=e}function X(n,e){if(w(e))throw Error("division by zero");if(w(n))return new K(h,h);if(D(n))return e=X(S(n),e),new K(S(e.g),S(e.h));if(D(e))return e=X(n,S(e)),new K(S(e.g),e.h);if(30<n.g.length){if(D(n)||D(e))throw Error("slowDivide_ only works with positive integers.");for(var t=m,r=e;0>=r.X(n);)t=Ae(t),r=Ae(r);var i=Oe(t,1),s=Oe(r,1);for(r=Oe(r,2),t=Oe(t,2);!w(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=Oe(r,1),t=Oe(t,1)}return e=N(n,i.R(e)),new K(i,e)}for(i=h;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=a(t)).R(e);D(u)||0<u.X(n);)u=(s=a(t-=r)).R(e);w(s)&&(s=m),i=i.add(s),n=N(n,u)}return new K(i,n)}function Ae(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function Oe(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Fn(i,n.h)}(ct=Fn.prototype).ea=function(){if(D(this))return-S(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:l+r)*e,e*=l}return n},ct.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(w(this))return"0";if(D(this))return"-"+S(this).toString(n);for(var e=a(Math.pow(n,6)),t=this,r="";;){var i=X(t,e).g,s=((0<(t=N(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(w(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ct.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ct.X=function(n){return D(n=N(this,n))?-1:w(n)?0:1},ct.abs=function(){return D(this)?S(this):this},ct.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},ct.R=function(n){if(w(this)||w(n))return h;if(D(this))return D(n)?S(this).R(S(n)):S(S(this).R(n));if(D(n))return S(this.R(S(n)));if(0>this.X(v)&&0>n.X(v))return a(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),d=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=u*f,L(t,2*r+2*i),t[2*r+2*i+1]+=s*f,L(t,2*r+2*i+1),t[2*r+2*i+1]+=u*d,L(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,L(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},ct.gb=function(n){return X(this,n).h},ct.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},ct.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},ct.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},$0.prototype.createWebChannel=$0.prototype.g,Ko.prototype.send=Ko.prototype.u,Ko.prototype.open=Ko.prototype.m,Ko.prototype.close=Ko.prototype.close,_m.NO_ERROR=0,_m.TIMEOUT=8,_m.HTTP_ERROR=6,GS.COMPLETE="complete",I0.EventType=Yd,Yd.OPEN="a",Yd.CLOSE="b",Yd.ERROR="c",Yd.MESSAGE="d",qi.prototype.listen=qi.prototype.O,pr.prototype.listenOnce=pr.prototype.P,pr.prototype.getLastError=pr.prototype.Sa,pr.prototype.getLastErrorCode=pr.prototype.Ia,pr.prototype.getStatus=pr.prototype.da,pr.prototype.getResponseJson=pr.prototype.Wa,pr.prototype.getResponseText=pr.prototype.ja,pr.prototype.send=pr.prototype.ha,pr.prototype.setWithCredentials=pr.prototype.Oa,wu.prototype.digest=wu.prototype.l,wu.prototype.reset=wu.prototype.reset,wu.prototype.update=wu.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=a,Fn.fromString=function c(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return S(c(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=a(Math.pow(e,8)),r=h,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=a(Math.pow(e,s)),r=r.R(s).add(a(u))):r=(r=r.R(t)).add(a(u))}return r};var it=qo.createWebChannelTransport=function(){return new $0},Tt=qo.getStatEventTarget=function(){return gm()},De=qo.ErrorCode=_m,Gt=qo.EventType=GS,an=qo.Event=uc,un=qo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wi=qo.FetchXmlHttpFactory=Pm,Ca=qo.WebChannel=I0,hR=qo.XhrIo=pr,fR=qo.Md5=wu,Au=qo.Integer=Fn;const R2="@firebase/firestore";class ps{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ps.UNAUTHENTICATED=new ps(null),ps.GOOGLE_CREDENTIALS=new ps("google-credentials-uid"),ps.FIRST_PARTY=new ps("first-party-uid"),ps.MOCK_USER=new ps("mock-user");let nI="10.1.0";const Wf=new us.Yd("@firebase/firestore");function Kk(){return Wf.logLevel}function He(n,...e){if(Wf.logLevel<=us.in.DEBUG){const t=e.map(Zk);Wf.debug(`Firestore (${nI}): ${n}`,...t)}}function ui(n,...e){if(Wf.logLevel<=us.in.ERROR){const t=e.map(Zk);Wf.error(`Firestore (${nI}): ${n}`,...t)}}function lc(n,...e){if(Wf.logLevel<=us.in.WARN){const t=e.map(Zk);Wf.warn(`Firestore (${nI}): ${n}`,...t)}}function Zk(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${nI}) INTERNAL ASSERTION FAILED: `+n;throw ui(e),new Error(e)}function Dt(n,e){n||vt()}function lt(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends rt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ki{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class P2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ps.UNAUTHENTICATED))}shutdown(){}}class F3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class L3{constructor(e){this.t=e,this.currentUser=ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ki,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=u;e.enqueueRetryable((0,$.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},f=_=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ki)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new P2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new ps(e)}}class V3{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ps.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class U3{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new V3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.R;return this.R=s.token,He("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.R=t.token,new x2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class M2{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=$3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function qt(n,e){return n<e?-1:n>e?1:0}function rI(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fr.fromMillis(Date.now())}static fromDate(e){return Fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Fr(0,0))}static max(){return new St(new Fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class G0{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===G0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof G0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends G0{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const G3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ci extends G0{construct(e,t,r){return new ci(e,t,r)}static isValidIdentifier(e){return G3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ci(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Le(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Le(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Le(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Le(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ci(t)}static emptyPath(){return new ci([])}}class st{constructor(e){this.path=e}static fromPath(e){return new st(wn.fromString(e))}static fromName(e){return new st(wn.fromString(e).popFirst(5))}static empty(){return new st(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new wn(e.slice()))}}function O2(n){return new Sa(n.readTime,n.key,-1)}class Sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sa(St.min(),st.empty(),-1)}static max(){return new Sa(St.max(),st.empty(),-1)}}function Yk(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=st.comparator(n.documentKey,e.documentKey),0!==t?t:qt(n.largestBatchId,e.largestBatchId))}const F2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Kf(n){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,$.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==F2)throw n;He("LocalStore","Unexpectedly lost primary lease")}),Jk.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;t(e[_]).next(I=>{u[_]=I,++d,d===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Zf(n){return"IndexedDbTransactionError"===n.name}let Ra=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function H0(n){return null==n}function q0(n){return 0===n&&1/n==-1/0}function H2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function q2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class lr{constructor(e,t){this.comparator=e,this.root=t||xs.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xs.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yR(this.root,e,this.comparator,!1)}getReverseIterator(){return new yR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yR(this.root,e,this.comparator,!0)}}class yR{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??xs.RED,this.left=i??xs.EMPTY,this.right=s??xs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new xs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return xs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}xs.EMPTY=null,xs.RED=!0,xs.BLACK=!1,xs.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new xs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gr{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W2(this.data.getIterator())}getIteratorFrom(e){return new W2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gr(this.comparator);return t.data=e,t}}class W2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zo{constructor(e){this.fields=e,e.sort(ci.comparator)}static empty(){return new Zo([])}unionWith(e){let t=new gr(ci.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rI(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class K2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new K2("Invalid base64 string: "+s):s}}(e);return new Zi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let u=0;u<i.length;++u)s+=String.fromCharCode(i[u]);return s}(e);return new Zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const p4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yf(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=p4.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qr(n.seconds),nanos:qr(n.nanos)}}function qr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nh(n){return"string"==typeof n?Zi.fromBase64String(n):Zi.fromUint8Array(n)}function vR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IR(n){const e=n.mapValue.fields.__previous_value__;return vR(e)?IR(e):e}function W0(n){const e=Yf(n.mapValue.fields.__local_write_time__.timestampValue);return new Fr(e.seconds,e.nanos)}class g4{constructor(e,t,r,i,s,u,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class Um{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Um("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Um&&e.projectId===this.projectId&&e.database===this.database}}const Jf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vR(n)?4:J2(n)?9007199254740991:10:vt()}function Sl(n,e){if(n===e)return!0;const t=Xf(n);if(t!==Xf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return W0(n).isEqual(W0(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const u=Yf(i.timestampValue),d=Yf(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,nh(n.bytesValue).isEqual(nh(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return qr(i.geoPointValue.latitude)===qr(s.geoPointValue.latitude)&&qr(i.geoPointValue.longitude)===qr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qr(i.integerValue)===qr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const u=qr(i.doubleValue),d=qr(s.doubleValue);return u===d?q0(u)===q0(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return rI(n.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:return function(i,s){const u=i.mapValue.fields||{},d=s.mapValue.fields||{};if(H2(u)!==H2(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===d[f]||!Sl(u[f],d[f])))return!1;return!0}(n,e);default:return vt()}var s}function K0(n,e){return void 0!==(n.values||[]).find(t=>Sl(t,e))}function ep(n,e){if(n===e)return 0;const t=Xf(n),r=Xf(e);if(t!==r)return qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=qr(s.integerValue||s.doubleValue),f=qr(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return Z2(n.timestampValue,e.timestampValue);case 4:return Z2(W0(n),W0(e));case 5:return qt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=nh(s),f=nh(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),f=u.split("/");for(let _=0;_<d.length&&_<f.length;_++){const I=qt(d[_],f[_]);if(0!==I)return I}return qt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=qt(qr(s.latitude),qr(u.latitude));return 0!==d?d:qt(qr(s.longitude),qr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],f=u.values||[];for(let _=0;_<d.length&&_<f.length;++_){const I=ep(d[_],f[_]);if(I)return I}return qt(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Jf.mapValue&&u===Jf.mapValue)return 0;if(s===Jf.mapValue)return 1;if(u===Jf.mapValue)return-1;const d=s.fields||{},f=Object.keys(d),_=u.fields||{},I=Object.keys(_);f.sort(),I.sort();for(let b=0;b<f.length&&b<I.length;++b){const x=qt(f[b],I[b]);if(0!==x)return x;const k=ep(d[f[b]],_[I[b]]);if(0!==k)return k}return qt(f.length,I.length)}(n.mapValue,e.mapValue);default:throw vt()}}function Z2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return qt(n,e);const t=Yf(n),r=Yf(e),i=qt(t.seconds,r.seconds);return 0!==i?i:qt(t.nanos,r.nanos)}function sI(n){return t1(n)}function t1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Yf(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nh(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=t1(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const u of r)s?s=!1:i+=",",i+=`${u}:${t1(t.fields[u])}`;return i+"}"}(n.mapValue):vt()}function Bm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n1(n){return!!n&&"integerValue"in n}function Z0(n){return!!n&&"arrayValue"in n}function Q2(n){return!!n&&"nullValue"in n}function Y2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wR(n){return!!n&&"mapValue"in n}function Q0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Q0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Q0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function J2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ms{constructor(e){this.value=e}static empty(){return new Ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Q0(t)}setAll(e){let t=ci.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=Q0(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());wR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ms(Q0(this.value))}}function tB(n){const e=[];return Qf(n.fields,(t,r)=>{const i=new ci([t]);if(wR(r)){const s=tB(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Zo(e)}class mr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new mr(e,0,St.min(),St.min(),St.min(),Ms.empty(),0)}static newFoundDocument(e,t,r,i){return new mr(e,1,t,St.min(),r,i,0)}static newNoDocument(e,t){return new mr(e,2,t,St.min(),St.min(),Ms.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,St.min(),St.min(),Ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tp{constructor(e,t){this.position=e,this.inclusive=t}}function nB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?st.comparator(st.fromName(u.referenceValue),t.key):ep(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function rB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sl(n.position[t],e.position[t]))return!1;return!0}class oI{constructor(e,t="asc"){this.field=e,this.dir=t}}function y4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class iB{}class yn extends iB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new v4(e,t,r):"array-contains"===t?new T4(e,r):"in"===t?new lB(e,r):"not-in"===t?new w4(e,r):"array-contains-any"===t?new A4(e,r):new yn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new I4(e,r):new E4(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ep(t,this.value)):null!==t&&Xf(this.value)===Xf(t)&&this.matchesComparison(ep(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Hn extends iB{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Hn(e,t)}matches(e){return aI(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function aI(n){return"and"===n.op}function i1(n){return function sB(n){for(const e of n.filters)if(e instanceof Hn)return!1;return!0}(n)&&aI(n)}function s1(n){if(n instanceof yn)return n.field.canonicalString()+n.op.toString()+sI(n.value);if(i1(n))return n.filters.map(e=>s1(e)).join(",");{const e=n.filters.map(t=>s1(t)).join(",");return`${n.op}(${e})`}}function oB(n,e){return n instanceof yn?(r=n,(i=e)instanceof yn&&r.op===i.op&&r.field.isEqual(i.field)&&Sl(r.value,i.value)):n instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,u,d)=>s&&oB(u,i.filters[d]),!0)}(n,e):void vt();var r,i}function uB(n){return n instanceof yn?`${(t=n).field.canonicalString()} ${t.op} ${sI(t.value)}`:n instanceof Hn?function(t){return t.op.toString()+" {"+t.getFilters().map(uB).join(" ,")+"}"}(n):"Filter";var t}class v4 extends yn{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class I4 extends yn{constructor(e,t){super(e,"in",t),this.keys=cB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class E4 extends yn{constructor(e,t){super(e,"not-in",t),this.keys=cB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class T4 extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Z0(t)&&K0(t.arrayValue,this.value)}}class lB extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&K0(this.value.arrayValue,t)}}class w4 extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(K0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!K0(this.value.arrayValue,t)}}class A4 extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Z0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>K0(this.value.arrayValue,r))}}class b4{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.he=null}}function o1(n,e=null,t=[],r=[],i=null,s=null,u=null){return new b4(n,e,t,r,i,s,u)}function $m(n){const e=lt(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>s1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),H0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sI(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sI(r)).join(",")),e.he=t}return e.he}function Y0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!y4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oB(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rB(n.startAt,e.startAt)&&rB(n.endAt,e.endAt)}function AR(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class rh{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=f,this.Pe=null,this.Ie=null}}function uI(n){return new rh(n)}function pB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function a1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function DR(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function u1(n){return null!==n.collectionGroup}function Gm(n){const e=lt(n);if(null===e.Pe){e.Pe=[];const t=DR(e),r=a1(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new oI(t)),e.Pe.push(new oI(ci.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new oI(ci.keyField(),s))}}}return e.Pe}function Ao(n){const e=lt(n);if(!e.Ie)if("F"===e.limitType)e.Ie=o1(e.path,e.collectionGroup,Gm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Gm(e))t.push(new oI(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new tp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tp(e.startAt.position,e.startAt.inclusive):null;e.Ie=o1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.Ie}function c1(n,e){e.getFirstInequalityField(),DR(n);const t=n.filters.concat([e]);return new rh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function CR(n,e,t){return new rh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function J0(n,e){return Y0(Ao(n),Ao(e))&&n.limitType===e.limitType}function gB(n){return`${$m(Ao(n))}|lt:${n.limitType}`}function l1(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>uB(i)).join(", ")}]`),H0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(u=i).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sI(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sI(i)).join(",")),`Target(${r})`}(Ao(n))}; limitType=${n.limitType})`}function X0(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):st.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Gm(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(u,d,f){const _=nB(u,d,f);return u.inclusive?_<=0:_<0}(r.startAt,Gm(r),i)||r.endAt&&!function(u,d,f){const _=nB(u,d,f);return u.inclusive?_>=0:_>0}(r.endAt,Gm(r),i)));var r,i}function _B(n){return(e,t)=>{let r=!1;for(const i of Gm(n)){const s=D4(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function D4(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(s,u,d){const f=u.data.field(s),_=d.data.field(s);return null!==f&&null!==_?ep(f,_):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class ih{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return q2(this.inner)}size(){return this.innerSize}}const C4=new lr(st.comparator);function Qo(){return C4}const yB=new lr(st.comparator);function eA(...n){let e=yB;for(const t of n)e=e.insert(t.key,t);return e}function vB(n){let e=yB;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rl(){return tA()}function IB(){return tA()}function tA(){return new ih(n=>n.toString(),(n,e)=>n.isEqual(e))}const S4=new lr(st.comparator),R4=new gr(st.comparator);function sn(...n){let e=R4;for(const t of n)e=e.add(t);return e}const P4=new gr(qt);function EB(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q0(e)?"-0":e}}function TB(n){return{integerValue:""+n}}function wB(n,e){return function V2(n){return"number"==typeof n&&Number.isInteger(n)&&!q0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?TB(e):EB(n,e)}class SR{constructor(){this._=void 0}}function x4(n,e,t){return n instanceof cI?function(i,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vR(s)&&(s=IR(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof jm?bB(n,e):n instanceof zm?DB(n,e):function(i,s){const u=AB(i,s),d=CB(u)+CB(i.Te);return n1(u)&&n1(i.Te)?TB(d):EB(i.serializer,d)}(n,e)}function M4(n,e,t){return n instanceof jm?bB(n,e):n instanceof zm?DB(n,e):t}function AB(n,e){return n instanceof lI?n1(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class cI extends SR{}class jm extends SR{constructor(e){super(),this.elements=e}}function bB(n,e){const t=SB(e);for(const r of n.elements)t.some(i=>Sl(i,r))||t.push(r);return{arrayValue:{values:t}}}class zm extends SR{constructor(e){super(),this.elements=e}}function DB(n,e){let t=SB(e);for(const r of n.elements)t=t.filter(i=>!Sl(i,r));return{arrayValue:{values:t}}}class lI extends SR{constructor(e,t){super(),this.serializer=e,this.Te=t}}function CB(n){return qr(n.integerValue||n.doubleValue)}function SB(n){return Z0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nA{constructor(e,t){this.field=e,this.transform=t}}class k4{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function RR(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class PR{}function RB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new hI(n.key,br.none()):new dI(n.key,n.data,br.none());{const t=n.data,r=Ms.empty();let i=new gr(ci.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new sh(n.key,r,new Zo(i.toArray()),br.none())}}function O4(n,e,t){n instanceof dI?function(i,s,u){const d=i.value.clone(),f=MB(i.fieldTransforms,s,u.transformResults);d.setAll(f),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof sh?function(i,s,u){if(!RR(i.precondition,s))return void s.convertToUnknownDocument(u.version);const d=MB(i.fieldTransforms,s,u.transformResults),f=s.data;f.setAll(xB(i)),f.setAll(d),s.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rA(n,e,t,r){return n instanceof dI?function(s,u,d,f){if(!RR(s.precondition,u))return d;const _=s.value.clone(),I=NB(s.fieldTransforms,f,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof sh?function(s,u,d,f){if(!RR(s.precondition,u))return d;const _=NB(s.fieldTransforms,f,u),I=u.data;return I.setAll(xB(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(d=t,RR(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function F4(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=AB(r.transform,i||null);null!=s&&(null===t&&(t=Ms.empty()),t.set(r.field,s))}return t||null}function PB(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&rI(r,i,(s,u)=>function N4(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof jm&&i instanceof jm||r instanceof zm&&i instanceof zm?rI(r.elements,i.elements,Sl):r instanceof lI&&i instanceof lI?Sl(r.Te,i.Te):r instanceof cI&&i instanceof cI);var r,i}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class dI extends PR{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sh extends PR{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xB(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function MB(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,M4(u,d,t[i]))}return r}function NB(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,x4(s,u,e))}return r}class hI extends PR{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h1 extends PR{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class f1{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&O4(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rA(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rA(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=IB();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const f=RB(u,d);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(St.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sn())}isEqual(e){return this.batchId===e.batchId&&rI(this.mutations,e.mutations,(t,r)=>PB(t,r))&&rI(this.baseMutations,e.baseMutations,(t,r)=>PB(t,r))}}class p1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=S4;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new p1(e,t,r,i)}}class g1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class V4{constructor(e,t){this.count=e,this.unchangedNames=t}}var bi,An;function OB(n){if(void 0===n)return ui("GRPC error has no .code"),he.UNKNOWN;switch(n){case bi.OK:return he.OK;case bi.CANCELLED:return he.CANCELLED;case bi.UNKNOWN:return he.UNKNOWN;case bi.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case bi.INTERNAL:return he.INTERNAL;case bi.UNAVAILABLE:return he.UNAVAILABLE;case bi.UNAUTHENTICATED:return he.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case bi.NOT_FOUND:return he.NOT_FOUND;case bi.ALREADY_EXISTS:return he.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return he.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case bi.ABORTED:return he.ABORTED;case bi.OUT_OF_RANGE:return he.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return he.UNIMPLEMENTED;case bi.DATA_LOSS:return he.DATA_LOSS;default:return vt()}}(An=bi||(bi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class m1{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return xR}static getOrCreateInstance(){return null===xR&&(xR=new m1),xR}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let xR=null;const U4=new Au([4294967295,4294967295],0);function LB(n){const e=function FB(){return new TextEncoder}().encode(n),t=new fR;return t.update(e),new Uint8Array(t.digest())}function VB(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Au([t,r],0),new Au([i,s],0)]}class _1{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new iA(`Invalid padding: ${t}`);if(r<0)throw new iA(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new iA(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new iA(`Invalid padding when bitmap length is 0: ${t}`);this.de=8*e.length-t,this.Ae=Au.fromNumber(this.de)}Re(e,t,r){let i=e.add(t.multiply(Au.fromNumber(r)));return 1===i.compare(U4)&&(i=new Au([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ae).toNumber()}Ve(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.de)return!1;const t=LB(e),[r,i]=VB(t);for(let s=0;s<this.hashCount;s++){const u=this.Re(r,i,s);if(!this.Ve(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new _1(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.de)return;const t=LB(e),[r,i]=VB(t);for(let s=0;s<this.hashCount;s++){const u=this.Re(r,i,s);this.me(u)}}me(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class iA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sA{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,oA.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sA(St.min(),i,new lr(qt),Qo(),sn())}}class oA{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new oA(r,t,sn(),sn(),sn())}}class MR{constructor(e,t,r,i){this.fe=e,this.removedTargetIds=t,this.key=r,this.ge=i}}class UB{constructor(e,t){this.targetId=e,this.pe=t}}class BB{constructor(e,t,r=Zi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class $B{constructor(){this.ye=0,this.we=jB(),this.Se=Zi.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return 0!==this.ye}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=sn(),t=sn(),r=sn();return this.we.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new oA(this.Se,this.be,e,t,r)}xe(){this.De=!1,this.we=jB()}Oe(e,t){this.De=!0,this.we=this.we.insert(e,t)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class B4{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=Qo(),this.$e=GB(),this.Ue=new lr(qt)}We(e){for(const t of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(t,e.ge):this.ze(t,e.key,e.ge);for(const t of e.removedTargetIds)this.ze(t,e.key,e.ge)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(t);break;case 3:this.Je(t)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Fe(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){var t,r;const i=e.targetId,s=e.pe.count,u=this.Xe(i);if(u){const d=u.target;if(AR(d))if(0===s){const f=new st(d.path);this.ze(i,f,mr.newNoDocument(f,St.min()))}else Dt(1===s);else{const f=this.et(i);if(f!==s){const _=this.tt(e,f);0!==_.status&&(this.Ye(i),this.Ue=this.Ue.insert(i,2===_.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=m1.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,x,k,B){var Q,Z,we,Pe,be,Be;const gt={localCacheCount:k,existenceFilterCount:B.count},mt=B.unchangedNames;return mt&&(gt.bloomFilter={applied:0===b,hashCount:null!==(Q=mt?.hashCount)&&void 0!==Q?Q:0,bitmapLength:null!==(Pe=null===(we=null===(Z=mt?.bits)||void 0===Z?void 0:Z.bitmap)||void 0===we?void 0:we.length)&&void 0!==Pe?Pe:0,padding:null!==(Be=null===(be=mt?.bits)||void 0===be?void 0:be.padding)&&void 0!==Be?Be:0},x&&(gt.bloomFilter.mightContain=x)),gt}(_.status,null!==(r=_.nt)&&void 0!==r?r:null,f,e.pe))}}}}tt(e,t){const{unchangedNames:r,count:i}=e.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let f,_;try{f=nh(s).toUint8Array()}catch(b){if(b instanceof K2)return lc("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw b}try{_=new _1(f,u,d)}catch(b){return lc(b instanceof iA?"BloomFilter error: ":"Applying bloom filter failed: ",b),{status:1}}const I=b=>{const x=this.qe.rt();return _.mightContain(`projects/${x.projectId}/databases/${x.database}/documents/${b}`)};return 0===_.de?{status:1}:{status:i===t-this.it(e.targetId,I)?0:2,nt:I}}it(e,t){const r=this.qe.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{t(s.path.canonicalString())||(this.ze(e,s,null),i++)}),i}st(e){const t=new Map;this.Qe.forEach((s,u)=>{const d=this.Xe(u);if(d){if(s.current&&AR(d.target)){const f=new st(d.target.path);null!==this.Ke.get(f)||this.ot(u,f)||this.ze(u,f,mr.newNoDocument(f,e))}s.Ce&&(t.set(u,s.Me()),s.xe())}});let r=sn();this.$e.forEach((s,u)=>{let d=!0;u.forEachWhile(f=>{const _=this.Xe(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Ke.forEach((s,u)=>u.setReadTime(e));const i=new sA(e,t,this.Ue,this.Ke,r);return this.Ke=Qo(),this.$e=GB(),this.Ue=new lr(qt),i}Ge(e,t){if(!this.Je(e))return;const r=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,r),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ot(e,t)?i.Oe(t,1):i.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),r&&(this.Ke=this.Ke.insert(t,r))}removeTarget(e){this.Qe.delete(e)}et(e){const t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let t=this.Qe.get(e);return t||(t=new $B,this.Qe.set(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new gr(qt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new $B),this.qe.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ot(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}function GB(){return new lr(st.comparator)}function jB(){return new lr(st.comparator)}const $4={asc:"ASCENDING",desc:"DESCENDING"},G4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j4={and:"AND",or:"OR"};class z4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y1(n,e){return n.useProto3Json||H0(e)?e:{value:e}}function fI(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function H4(n,e){return fI(n,e.toTimestamp())}function li(n){return Dt(!!n),St.fromTimestamp(function(t){const r=Yf(t);return new Fr(r.seconds,r.nanos)}(n))}function v1(n,e){return(r=n,new wn(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function HB(n){const e=wn.fromString(n);return Dt(e$(e)),e}function aA(n,e){return v1(n.databaseId,e.path)}function Pl(n,e){const t=HB(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(WB(t))}function I1(n,e){return v1(n.databaseId,e)}function uA(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WB(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KB(n,e,t){return{name:aA(n,e),fields:t.value.mapValue.fields}}function QB(n,e){return{documents:[I1(n,e.path)]}}function T1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I1(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I1(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return XB(Hn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:np((b=_).field),direction:Q4(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=y1(n,e.limit);return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),t;var f}function YB(n){let e=function qB(n){const e=HB(n);return 4===e.length?wn.emptyPath():WB(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(b){const x=JB(b);return x instanceof Hn&&i1(x)?x.getFilters():[x]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(x=>{return new oI(pI((B=x).field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction));var B}));let d=null;t.limit&&(d=function(b){let x;return x="object"==typeof b?b.value:b,H0(x)?null:x}(t.limit));let f=null;var b;t.startAt&&(f=new tp((b=t.startAt).values||[],!!b.before));let _=null;return t.endAt&&(_=function(b){return new tp(b.values||[],!b.before)}(t.endAt)),function fB(n,e,t,r,i,s,u,d){return new rh(n,e,t,r,i,s,u,d)}(e,i,u,s,d,"F",f,_)}function JB(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pI(t.unaryFilter.field);return yn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=pI(t.unaryFilter.field);return yn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pI(t.unaryFilter.field);return yn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=pI(t.unaryFilter.field);return yn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?yn.create(pI((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Hn.create(t.compositeFilter.filters.map(r=>JB(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(t.compositeFilter.op))}(n):vt();var t}function Q4(n){return $4[n]}function Y4(n){return G4[n]}function J4(n){return j4[n]}function np(n){return{fieldPath:n.canonicalString()}}function pI(n){return ci.fromServerFormat(n.fieldPath)}function XB(n){return n instanceof yn?function(t){if("=="===t.op){if(Y2(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NAN"}};if(Q2(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Y2(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NOT_NAN"}};if(Q2(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:np(t.field),op:Y4(t.op),value:t.value}}}(n):n instanceof Hn?function(t){const r=t.getFilters().map(i=>XB(i));return 1===r.length?r[0]:{compositeFilter:{op:J4(t.op),filters:r}}}(n):vt()}function X4(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class oh{constructor(e,t,r,i,s=St.min(),u=St.min(),d=Zi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new oh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class t${constructor(e){this.ct=e}}function w1(n){const e=YB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?CR(e,e.limit,"L"):e}class Km{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(qr(e.integerValue));else if("doubleValue"in e){const r=qr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),q0(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(nh(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?J2(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):vt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),st.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Km.bt=new Km;class u6{constructor(){this.sn=new R1}addToCollectionParentIndex(e,t){return this.sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Sa.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Sa.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class R1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gr(wn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gr(wn.comparator)).toArray()}}new Uint8Array(0);class no{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new no(e,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}no.DEFAULT_COLLECTION_PERCENTILE=10,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,no.DEFAULT=new no(41943040,no.DEFAULT_COLLECTION_PERCENTILE,no.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),no.DISABLED=new no(-1,0,0);class Qm{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new Qm(0)}static On(){return new Qm(-1)}}class p6{constructor(){this.changes=new ih(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class C${constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&rA(r.mutation,i,Zo.empty(),Fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sn()){const i=Rl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=eA();return s.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Rl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=Qo();const u=tA(),d=tA();return t.forEach((f,_)=>{const I=r.get(_.key);i.has(_.key)&&(void 0===I||I.mutation instanceof sh)?s=s.insert(_.key,_):void 0!==I?(u.set(_.key,I.mutation.getFieldMask()),rA(I.mutation,_,I.mutation.getFieldMask(),Fr.now())):u.set(_.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((_,I)=>u.set(_,I)),t.forEach((_,I)=>{var b;return d.set(_,new _6(I,null!==(b=u.get(_))&&void 0!==b?b:null))}),d))}recalculateAndSaveOverlays(e,t){const r=tA();let i=new lr((u,d)=>u-d),s=sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const _=t.get(f);if(null===_)return;let I=r.get(f)||Zo.empty();I=d.applyToLocalView(_,I),r.set(f,I);const b=(i.get(d.batchId)||sn()).add(f);i=i.insert(d.batchId,b)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,I=f.value,b=IB();I.forEach(x=>{if(!s.has(x)){const k=RB(t.get(x),r.get(x));null!==k&&b.set(x,k),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,b))}return oe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return st.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):u1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Rl());let d=-1,f=s;return u.next(_=>oe.forEach(_,(I,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),s.get(I)?oe.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,f,_,sn())).next(I=>({batchId:d,changes:vB(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next(r=>{let i=eA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=eA();return this.indexManager.getCollectionParents(e,i).next(u=>oe.forEach(u,d=>{const f=(I=t,b=d.child(i),new rh(b,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,b;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(_=>{_.forEach((I,b)=>{s=s.insert(I,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const _=f.getKey();null===s.get(_)&&(s=s.insert(_,mr.newInvalidDocument(_)))});let u=eA();return s.forEach((d,f)=>{const _=i.get(d);void 0!==_&&rA(_.mutation,f,Zo.empty(),Fr.now()),X0(t,f)&&(u=u.insert(d,f))}),u})}}class y6{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,t){return oe.resolve(this.ar.get(t))}saveBundleMetadata(e,t){return this.ar.set(t.id,{id:(i=t).id,version:i.version,createTime:li(i.createTime)}),oe.resolve();var i}getNamedQuery(e,t){return oe.resolve(this.ur.get(t))}saveNamedQuery(e,t){return this.ur.set(t.name,{name:(i=t).name,query:w1(i.bundledQuery),readTime:li(i.readTime)}),oe.resolve();var i}}class v6{constructor(){this.overlays=new lr(st.comparator),this.cr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rl();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.cr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.cr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Rl(),s=t.length+1,u=new st(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new lr((_,I)=>_-I);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let I=s.get(_.largestBatchId);null===I&&(I=Rl(),s=s.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const d=Rl(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,I)=>d.set(_,I)),!(d.size()>=i)););return oe.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.cr.get(i.largestBatchId).delete(r.key);this.cr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new g1(t,r));let s=this.cr.get(t);void 0===s&&(s=sn(),this.cr.set(t,s)),this.cr.set(t,s.add(r.key))}}class P1{constructor(){this.lr=new gr(ms.hr),this.Pr=new gr(ms.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,t){const r=new ms(e,t);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Er(new ms(e,t))}dr(e,t){e.forEach(r=>this.removeReference(r,t))}Ar(e){const t=new st(new wn([])),r=new ms(t,e),i=new ms(t,e+1),s=[];return this.Pr.forEachInRange([r,i],u=>{this.Er(u),s.push(u.key)}),s}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const t=new st(new wn([])),r=new ms(t,e),i=new ms(t,e+1);let s=sn();return this.Pr.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new ms(e,0),r=this.lr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ms{constructor(e,t){this.key=e,this.mr=t}static hr(e,t){return st.comparator(e.key,t.key)||qt(e.mr,t.mr)}static Ir(e,t){return qt(e.mr,t.mr)||st.comparator(e.key,t.key)}}class I6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.gr=1,this.pr=new gr(ms.hr)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.gr;this.gr++;const u=new f1(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.pr=this.pr.add(new ms(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.yr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.wr(t+1),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.gr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ms(t,0),i=new ms(t,Number.POSITIVE_INFINITY),s=[];return this.pr.forEachInRange([r,i],u=>{const d=this.yr(u.mr);s.push(d)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gr(qt);return t.forEach(i=>{const s=new ms(i,0),u=new ms(i,Number.POSITIVE_INFINITY);this.pr.forEachInRange([s,u],d=>{r=r.add(d.mr)})}),oe.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;st.isDocumentKey(s)||(s=s.child(""));const u=new ms(new st(s),0);let d=new gr(qt);return this.pr.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.mr)),!0)},u),oe.resolve(this.Sr(d))}Sr(e){const t=[];return e.forEach(r=>{const i=this.yr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();let r=this.pr;return oe.forEach(t.mutations,i=>{const s=new ms(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,t){const r=new ms(t,0),i=this.pr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}br(e,t){return this.wr(e)}wr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}yr(e){const t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class E6{constructor(e){this.Dr=e,this.docs=new lr(st.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Dr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let r=Qo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mr.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qo();const u=t.path,d=new st(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:I}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||Yk(O2(I),r)<=0||(i.has(I.key)||X0(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){vt()}vr(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new T6(this)}getSize(e){return oe.resolve(this.size)}}class T6 extends p6{constructor(e){super(),this.sr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.sr.addEntry(e,i)):this.sr.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.sr.getEntry(e,t)}getAllFromCache(e,t){return this.sr.getEntries(e,t)}}class w6{constructor(e){this.persistence=e,this.Cr=new ih(t=>$m(t),Y0),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new P1,this.targetCount=0,this.Or=Qm.xn()}forEachTarget(e,t){return this.Cr.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fr&&(this.Fr=t),oe.resolve()}Ln(e){this.Cr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Or=new Qm(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,t){return this.Ln(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Ln(t),oe.resolve()}removeTargetData(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Cr.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Cr.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cr.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Mr.Tr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Mr.dr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Mr.Ar(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Mr.Vr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Mr.containsKey(t))}}class x1{constructor(e,t){this.Nr={},this.overlays={},this.Br=new Ra(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new w6(this),this.indexManager=new u6,this.remoteDocumentCache=new E6(r=>this.referenceDelegate.qr(r)),this.serializer=new t$(t),this.Qr=new y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new v6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Nr[e.toKey()];return r||(r=new I6(t,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new A6(this.Br.next());return this.referenceDelegate.Kr(),r(i).next(s=>this.referenceDelegate.$r(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ur(e,t){return oe.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,t)))}}class A6 extends H3{constructor(e){super(),this.currentSequenceNumber=e}}class $R{constructor(e){this.persistence=e,this.Wr=new P1,this.Gr=null}static zr(e){return new $R(e)}get jr(){if(this.Gr)return this.Gr;throw vt()}addReference(e,t,r){return this.Wr.addReference(r,t),this.jr.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Wr.removeReference(r,t),this.jr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.jr.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Wr.Ar(t.targetId).forEach(i=>this.jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Kr(){this.Gr=new Set}$r(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.jr,r=>{const i=st.fromPath(r);return this.Hr(e,i).next(s=>{s||t.removeEntry(i,St.min())})}).next(()=>(this.Gr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hr(e,t).next(r=>{r?this.jr.delete(t.toString()):this.jr.add(t.toString())})}qr(e){return 0}Hr(e,t){return oe.or([()=>oe.resolve(this.Wr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ur(e,t)])}}class O1{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Li=r,this.ki=i}static qi(e,t){let r=sn(),i=sn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new O1(e,t.fromCache,r,i)}}class R${constructor(){this.Qi=!1}initialize(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.$i(e,t).next(s=>s||this.Ui(e,t,i,r)).next(s=>s||this.Wi(e,t))}$i(e,t){if(pB(t))return oe.resolve(null);let r=Ao(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=CR(t,null,"F"),r=Ao(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=sn(...s);return this.Ki.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.Gi(t,d);return this.zi(t,_,u,f.readTime)?this.$i(e,CR(t,null,"F")):this.ji(e,_,t,f)}))})))}Ui(e,t,r,i){return pB(t)||i.isEqual(St.min())?this.Wi(e,t):this.Ki.getDocuments(e,r).next(s=>{const u=this.Gi(t,s);return this.zi(t,u,r,i)?this.Wi(e,t):(Kk()<=us.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),l1(t)),this.ji(e,u,t,function k2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new Fr(t+1,0):new Fr(t,r));return new Sa(i,st.empty(),e)}(i,-1)))})}Gi(e,t){let r=new gr(_B(e));return t.forEach((i,s)=>{X0(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Wi(e,t){return Kk()<=us.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",l1(t)),this.Ki.getDocumentsMatchingQuery(e,t,Sa.min())}ji(e,t,r,i){return this.Ki.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class D6{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new lr(qt),this.Yi=new ih(s=>$m(s),Y0),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C$(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function x$(n,e){return F1.apply(this,arguments)}function F1(){return F1=(0,$.Z)(function*(n,e){const t=lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.es(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let f=sn();for(const _ of i){u.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}for(const _ of s){d.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}return t.localDocuments.getDocuments(r,f).next(_=>({ts:_,removedBatchIds:u,addedBatchIds:d}))})})}),F1.apply(this,arguments)}function M$(n){const e=lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.kr.getLastRemoteSnapshotVersion(t))}function R6(n,e){const t=lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yI(n,e,t){return L1.apply(this,arguments)}function L1(){return L1=(0,$.Z)(function*(n,e,t){const r=lt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Zf(u))throw u;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),L1.apply(this,arguments)}function zR(n,e,t){const r=lt(n);let i=St.min(),s=sn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,_,I){const b=lt(f),x=b.Yi.get(I);return void 0!==x?oe.resolve(b.Ji.get(x)):b.kr.getTargetData(_,I)}(r,u,Ao(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:St.min(),t?s:sn())).next(d=>(function F$(n,e,t){let r=n.Zi.get(e)||St.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Zi.set(e,r)}(r,function mB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,ss:s})))}class G1{constructor(){this.activeTargetIds=function d1(){return P4}()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U${constructor(){this.Hs=new G1,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,t,r){this.Js[e]=t}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new G1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M6{Ys(e){}shutdown(){}}class B${constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let WR=null;function z1(){return null===WR?WR=268435456+Math.round(2147483648*Math.random()):WR++,"0x"+WR.toString(16)}const N6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k6{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}const ro="WebChannelConnection";class O6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.To=r+"://"+t.host,this.Eo=`projects/${i}/databases/${s}`,this.Ao="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Ro(){return!1}Vo(t,r,i,s,u){const d=z1(),f=this.mo(t,r);He("RestConnection",`Sending RPC '${t}' ${d}:`,f,i);const _={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(_,s,u),this.po(t,f,_,i).then(I=>(He("RestConnection",`Received RPC '${t}' ${d}: `,I),I),I=>{throw lc("RestConnection",`RPC '${t}' ${d} failed with error: `,I,"url: ",f,"request:",i),I})}yo(t,r,i,s,u,d){return this.Vo(t,r,i,s,u)}fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+nI,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,u)=>t[u]=s),i&&i.headers.forEach((s,u)=>t[u]=s)}mo(t,r){return`${this.To}/v1/${r}:${N6[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,t,r,i){const s=z1();return new Promise((u,d)=>{const f=new hR;f.setWithCredentials(!0),f.listenOnce(Gt.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case De.NO_ERROR:const I=f.getResponseJson();He(ro,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case De.TIMEOUT:He(ro,`RPC '${e}' ${s} timed out`),d(new Le(he.DEADLINE_EXCEEDED,"Request time out"));break;case De.HTTP_ERROR:const b=f.getStatus();if(He(ro,`RPC '${e}' ${s} failed with status:`,b,"response text:",f.getResponseText()),b>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x?.error;if(k&&k.status&&k.message){const B=function(Z){const we=Z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(we)>=0?we:he.UNKNOWN}(k.status);d(new Le(B,k.message))}else d(new Le(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Le(he.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{He(ro,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(i);He(ro,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=z1(),s=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=it(),d=Tt(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new Wi({})),this.fo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");He(ro,`Creating RPC '${e}' stream ${i}: ${I}`,f);const b=u.createWebChannel(I,f);let x=!1,k=!1;const B=new k6({so:Z=>{k?He(ro,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(x||(He(ro,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),He(ro,`RPC '${e}' stream ${i} sending:`,Z),b.send(Z))},oo:()=>b.close()}),Q=(Z,we,Pe)=>{Z.listen(we,be=>{try{Pe(be)}catch(Be){setTimeout(()=>{throw Be},0)}})};return Q(b,Ca.EventType.OPEN,()=>{k||He(ro,`RPC '${e}' stream ${i} transport opened.`)}),Q(b,Ca.EventType.CLOSE,()=>{k||(k=!0,He(ro,`RPC '${e}' stream ${i} transport closed`),B.Po())}),Q(b,Ca.EventType.ERROR,Z=>{k||(k=!0,lc(ro,`RPC '${e}' stream ${i} transport errored:`,Z),B.Po(new Le(he.UNAVAILABLE,"The operation could not be completed")))}),Q(b,Ca.EventType.MESSAGE,Z=>{var we;if(!k){const Pe=Z.data[0];Dt(!!Pe);const Be=Pe.error||(null===(we=Pe[0])||void 0===we?void 0:we.error);if(Be){He(ro,`RPC '${e}' stream ${i} received error:`,Be);const gt=Be.status;let mt=function(bu){const Px=bi[bu];if(void 0!==Px)return OB(Px)}(gt),fn=Be.message;void 0===mt&&(mt=he.INTERNAL,fn="Unknown error status: "+gt+" with message "+Be.message),k=!0,B.Po(new Le(mt,fn)),b.close()}else He(ro,`RPC '${e}' stream ${i} received:`,Pe),B.Io(Pe)}}),Q(d,an.STAT_EVENT,Z=>{Z.stat===un.PROXY?He(ro,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===un.NOPROXY&&He(ro,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.ho()},0),B}}function KR(){return typeof document<"u"?document:null}function yA(n){return new z4(n,!0)}class H1{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.So=r,this.bo=i,this.Do=s,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const t=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Fo=Date.now(),e())),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}cancel(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}class G${constructor(e,t,r,i,s,u,d,f){this.ii=e,this.Bo=r,this.Lo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new H1(e,t)}$o(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Wo()}stop(){var e=this;return(0,$.Z)(function*(){e.$o()&&(yield e.close(0))})()}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,()=>this.jo()))}Ho(e){this.Jo(),this.stream.send(e)}jo(){var e=this;return(0,$.Z)(function*(){if(e.Uo())return e.close(0)})()}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}close(e,t){var r=this;return(0,$.Z)(function*(){r.Jo(),r.Yo(),r.Ko.cancel(),r.ko++,4!==e?r.Ko.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),r.Ko.Mo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Zo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.uo(t)})()}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),t=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.ko===t&&this.e_(r,i)},r=>{e(()=>{const i=new Le(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.t_(i)})})}e_(e,t){const r=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o(()=>{r(()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(i=>{r(()=>this.t_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Wo(){var e=this;this.state=5,this.Ko.xo((0,$.Z)(function*(){e.state=0,e.start()}))}t_(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.ko===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F6 extends G${constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}n_(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Ko.reset();const t=function W4(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:vt(),i=e.targetChange.targetIds||[],s=function(_,I){return _.useProto3Json?(Dt(void 0===I||"string"==typeof I),Zi.fromBase64String(I||"")):(Dt(void 0===I||I instanceof Uint8Array),Zi.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(_){const I=void 0===_.code?he.UNKNOWN:OB(_.code);return new Le(I,_.message||"")}(u);t=new BB(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Pl(n,r.document.name),s=li(r.document.updateTime),u=r.document.createTime?li(r.document.createTime):St.min(),d=new Ms({mapValue:{fields:r.document.fields}}),f=mr.newFoundDocument(i,s,u,d);t=new MR(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Pl(n,r.document),s=r.readTime?li(r.readTime):St.min(),u=mr.newNoDocument(i,s);t=new MR([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Pl(n,r.document);t=new MR([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return vt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new V4(i,s);t=new UB(r.targetId,u)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return St.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?li(u.readTime):St.min()}(e);return this.listener.r_(t,r)}i_(e){const t={};t.database=uA(this.serializer),t.addTarget=function(s,u){let d;const f=u.target;if(d=AR(f)?{documents:QB(s,f)}:{query:T1(s,f)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=zB(s,u.resumeToken);const _=y1(s,u.expectedCount);null!==_&&(d.expectedCount=_)}else if(u.snapshotVersion.compareTo(St.min())>0){d.readTime=fI(s,u.snapshotVersion.toTimestamp());const _=y1(s,u.expectedCount);null!==_&&(d.expectedCount=_)}return d}(this.serializer,e);const r=function Z4(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Ho(t)}s_(e){const t={};t.database=uA(this.serializer),t.removeTarget=e,this.Ho(t)}}class L6 extends G${constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const t=function K4(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(i,s){let u=li(i.updateTime?i.updateTime:s);return u.isEqual(St.min())&&(u=li(s)),new k4(u,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=li(e.commitTime);return this.listener.u_(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=uA(this.serializer),this.Ho(e)}a_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function cA(n,e){let t;if(e instanceof dI)t={update:KB(n,e.key,e.value)};else if(e instanceof hI)t={delete:aA(n,e.key)};else if(e instanceof sh)t={update:KB(n,e.key,e.data),updateMask:X4(e.fieldMask)};else{if(!(e instanceof h1))return vt();t={verify:aA(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof cI)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jm)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof zm)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof lI)return{fieldPath:u.field.canonicalString(),increment:d.Te};throw vt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:H4(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:vt()),t;var s}(this.serializer,r))};this.Ho(t)}}class V6 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.h_=!1}P_(){if(this.h_)throw new Le(he.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,t,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Vo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(he.UNKNOWN,i.toString())})}yo(e,t,r,i){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.yo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(he.UNKNOWN,s.toString())})}terminate(){this.h_=!0}}class B6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve())))}m_(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(ui(t),this.d_=!1):He("OnlineStateTracker",t)}f_(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}class $6{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=s,this.S_.Ys(d=>{r.enqueueAndForget((0,$.Z)(function*(){var f;op(u)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,$.Z)(function*(I){const b=lt(I);b.y_.add(4),yield vI(b),b.b_.set("Unknown"),b.y_.delete(4),yield vA(b)}),function _(I){return f.apply(this,arguments)})(u))}))}),this.b_=new B6(r,i)}}function vA(n){return W1.apply(this,arguments)}function W1(){return W1=(0,$.Z)(function*(n){if(op(n))for(const e of n.w_)yield e(!0)}),W1.apply(this,arguments)}function vI(n){return K1.apply(this,arguments)}function K1(){return K1=(0,$.Z)(function*(n){for(const e of n.w_)yield e(!1)}),K1.apply(this,arguments)}function ZR(n,e){const t=lt(n);t.p_.has(e.targetId)||(t.p_.set(e.targetId,e),Y1(t)?Q1(t):EI(t).Uo()&&Z1(t,e))}function IA(n,e){const t=lt(n),r=EI(t);t.p_.delete(e),r.Uo()&&j$(t,e),0===t.p_.size&&(r.Uo()?r.zo():op(t)&&t.b_.set("Unknown"))}function Z1(n,e){if(n.D_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}EI(n).i_(e)}function j$(n,e){n.D_.Be(e),EI(n).s_(e)}function Q1(n){n.D_=new B4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.p_.get(e)||null,rt:()=>n.datastore.serializer.databaseId}),EI(n).start(),n.b_.A_()}function Y1(n){return op(n)&&!EI(n).$o()&&n.p_.size>0}function op(n){return 0===lt(n).y_.size}function z$(n){n.D_=void 0}function G6(n){return J1.apply(this,arguments)}function J1(){return J1=(0,$.Z)(function*(n){n.p_.forEach((e,t)=>{Z1(n,e)})}),J1.apply(this,arguments)}function j6(n,e){return X1.apply(this,arguments)}function X1(){return X1=(0,$.Z)(function*(n,e){z$(n),Y1(n)?(n.b_.m_(e),Q1(n)):n.b_.set("Unknown")}),X1.apply(this,arguments)}function z6(n,e,t){return eO.apply(this,arguments)}function eO(){return eO=(0,$.Z)(function*(n,e,t){if(n.b_.set("Online"),e instanceof BB&&2===e.state&&e.cause)try{yield(r=(0,$.Z)(function*(s,u){const d=u.cause;for(const f of u.targetIds)s.p_.has(f)&&(yield s.remoteSyncer.rejectListen(f,d),s.p_.delete(f),s.D_.removeTarget(f))}),function i(s,u){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield QR(n,r)}else if(e instanceof MR?n.D_.We(e):e instanceof UB?n.D_.Ze(e):n.D_.je(e),!t.isEqual(St.min()))try{const r=yield M$(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.D_.st(u);return d.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const I=s.p_.get(_);I&&s.p_.set(_,I.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,_)=>{const I=s.p_.get(f);if(!I)return;s.p_.set(f,I.withResumeToken(Zi.EMPTY_BYTE_STRING,I.snapshotVersion)),j$(s,f);const b=new oh(I.target,f,_,I.sequenceNumber);Z1(s,b)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield QR(n,r)}var r}),eO.apply(this,arguments)}function QR(n,e,t){return tO.apply(this,arguments)}function tO(){return tO=(0,$.Z)(function*(n,e,t){if(!Zf(e))throw e;n.y_.add(1),yield vI(n),n.b_.set("Offline"),t||(t=()=>M$(n.localStore)),n.asyncQueue.enqueueRetryable((0,$.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.y_.delete(1),yield vA(n)}))}),tO.apply(this,arguments)}function H$(n,e){return e().catch(t=>QR(n,t,e))}function II(n){return nO.apply(this,arguments)}function nO(){return nO=(0,$.Z)(function*(n){const e=lt(n),t=ap(e);let r=e.g_.length>0?e.g_[e.g_.length-1].batchId:-1;for(;H6(e);)try{const i=yield R6(e.localStore,r);if(null===i){0===e.g_.length&&t.zo();break}r=i.batchId,q6(e,i)}catch(i){yield QR(e,i)}q$(e)&&W$(e)}),nO.apply(this,arguments)}function H6(n){return op(n)&&n.g_.length<10}function q6(n,e){n.g_.push(e);const t=ap(n);t.Uo()&&t.__&&t.a_(e.mutations)}function q$(n){return op(n)&&!ap(n).$o()&&n.g_.length>0}function W$(n){ap(n).start()}function W6(n){return rO.apply(this,arguments)}function rO(){return rO=(0,$.Z)(function*(n){ap(n).l_()}),rO.apply(this,arguments)}function K6(n){return iO.apply(this,arguments)}function iO(){return iO=(0,$.Z)(function*(n){const e=ap(n);for(const t of n.g_)e.a_(t.mutations)}),iO.apply(this,arguments)}function Z6(n,e,t){return sO.apply(this,arguments)}function sO(){return sO=(0,$.Z)(function*(n,e,t){const r=n.g_.shift(),i=p1.from(r,e,t);yield H$(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield II(n)}),sO.apply(this,arguments)}function Q6(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,$.Z)(function*(n,e){var t;e&&ap(n).__&&(yield(t=(0,$.Z)(function*(i,s){if(function kB(n){switch(n){default:return vt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}(d=s.code)&&d!==he.ABORTED){const u=i.g_.shift();ap(i).Go(),yield H$(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,s)),yield II(i)}var d}),function r(i,s){return t.apply(this,arguments)})(n,e)),q$(n)&&W$(n)}),oO.apply(this,arguments)}function K$(n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,$.Z)(function*(n,e){const t=lt(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=op(t);t.y_.add(3),yield vI(t),r&&t.b_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.y_.delete(3),yield vA(t)}),aO.apply(this,arguments)}function cO(){return cO=(0,$.Z)(function*(n,e){const t=lt(n);e?(t.y_.delete(2),yield vA(t)):e||(t.y_.add(2),yield vI(t),t.b_.set("Unknown"))}),cO.apply(this,arguments)}function EI(n){return n.v_||(n.v_=function(t,r,i){const s=lt(t);return s.P_(),new F6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{_o:G6.bind(null,n),uo:j6.bind(null,n),r_:z6.bind(null,n)}),n.w_.push(function(){var e=(0,$.Z)(function*(t){t?(n.v_.Go(),Y1(n)?Q1(n):n.b_.set("Unknown")):(yield n.v_.stop(),z$(n))});return function(t){return e.apply(this,arguments)}}())),n.v_}function ap(n){return n.C_||(n.C_=function(t,r,i){const s=lt(t);return s.P_(),new L6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{_o:W6.bind(null,n),uo:Q6.bind(null,n),c_:K6.bind(null,n),u_:Z6.bind(null,n)}),n.w_.push(function(){var e=(0,$.Z)(function*(t){t?(n.C_.Go(),yield II(n)):(yield n.C_.stop(),n.g_.length>0&&(He("RemoteStore",`Stopping write stream with ${n.g_.length} pending writes`),n.g_=[]))});return function(t){return e.apply(this,arguments)}}())),n.C_}class lO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new lO(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TI(n,e){if(ui("AsyncQueue",`${e}: ${n}`),Zf(n))return new Le(he.UNAVAILABLE,`${e}: ${n}`);throw n}class wI{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=eA(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new wI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wI)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new wI;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Z${constructor(){this.F_=new lr(st.comparator)}track(e){const t=e.doc.key,r=this.F_.get(t);r?0!==e.type&&3===r.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==r.type?this.F_=this.F_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.F_=this.F_.remove(t):1===e.type&&2===r.type?this.F_=this.F_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):vt():this.F_=this.F_.insert(t,e)}M_(){const e=[];return this.F_.inorderTraversal((t,r)=>{e.push(r)}),e}}class AI{constructor(e,t,r,i,s,u,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new AI(e,t,wI.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&J0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Y6{constructor(){this.x_=void 0,this.listeners=[]}}class J6{constructor(){this.queries=new ih(e=>gB(e),J0),this.onlineState="Unknown",this.O_=new Set}}function dO(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,$.Z)(function*(n,e){const t=lt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Y6),i)try{s.x_=yield t.onListen(r)}catch(u){const d=TI(u,`Initialization of query '${l1(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.N_(t.onlineState),s.x_&&e.B_(s.x_)&&gO(t)}),hO.apply(this,arguments)}function fO(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,$.Z)(function*(n,e){const t=lt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),pO.apply(this,arguments)}function X6(n,e){const t=lt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.B_(i)&&(r=!0);u.x_=i}}r&&gO(t)}function eW(n,e,t){const r=lt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function gO(n){n.O_.forEach(e=>{e.next()})}class mO{constructor(e,t,r){this.query=e,this.L_=t,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}B_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new AI(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),t=!0):this.K_(e,this.onlineState)&&(this.U_(e),t=!0),this.q_=e,t}onError(e){this.L_.error(e)}N_(e){this.onlineState=e;let t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}K_(e,t){return!e.fromCache||(!this.options.W_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Q_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}U_(e){e=AI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}class J${constructor(e){this.key=e}}class X${constructor(e){this.key=e}}class eG{constructor(e,t){this.query=e,this.X_=t,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=sn(),this.mutatedKeys=sn(),this.na=_B(e),this.ra=new wI(this.na)}get ia(){return this.X_}sa(e,t){const r=t?t.oa:new Z$,i=t?t.ra:this.ra;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,b)=>{const x=i.get(I),k=X0(this.query,b)?b:null,B=!!x&&this.mutatedKeys.has(x.key),Q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Z=!1;x&&k?x.data.isEqual(k.data)?B!==Q&&(r.track({type:3,doc:k}),Z=!0):this._a(x,k)||(r.track({type:2,doc:k}),Z=!0,(f&&this.na(k,f)>0||_&&this.na(k,_)<0)&&(d=!0)):!x&&k?(r.track({type:0,doc:k}),Z=!0):x&&!k&&(r.track({type:1,doc:x}),Z=!0,(f||_)&&(d=!0)),Z&&(k?(u=u.add(k),s=Q?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ra:u,oa:r,zi:d,mutatedKeys:s}}_a(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;const s=e.oa.M_();s.sort((_,I)=>function(x,k){const B=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return B(x)-B(k)}(_.type,I.type)||this.na(_.doc,I.doc)),this.aa(r);const u=t?this.ua():[],d=0===this.ta.size&&this.current?1:0,f=d!==this.ea;return this.ea=d,0!==s.length||f?{snapshot:new AI(this.query,e.ra,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ca:u}:{ca:u}}N_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new Z$,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}aa(e){e&&(e.addedDocuments.forEach(t=>this.X_=this.X_.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.X_=this.X_.delete(t)),this.current=e.current)}ua(){if(!this.current)return[];const e=this.ta;this.ta=sn(),this.ra.forEach(r=>{this.la(r.key)&&(this.ta=this.ta.add(r.key))});const t=[];return e.forEach(r=>{this.ta.has(r)||t.push(new X$(r))}),this.ta.forEach(r=>{e.has(r)||t.push(new J$(r))}),t}ha(e){this.X_=e.ss,this.ta=sn();const t=this.sa(e.documents);return this.applyChanges(t,!0)}Pa(){return AI.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}class rW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iW{constructor(e){this.key=e,this.Ia=!1}}class sW{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Ta={},this.Ea=new ih(d=>gB(d),J0),this.da=new Map,this.Aa=new Set,this.Ra=new lr(st.comparator),this.Va=new Map,this.ma=new P1,this.fa={},this.ga=new Map,this.pa=Qm.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return!0===this.ya}}function oW(n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,$.Z)(function*(n,e){const t=function BO(n){const e=lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cW.bind(null,e),e.Ta.r_=X6.bind(null,e.eventManager),e.Ta.Sa=eW.bind(null,e.eventManager),e}(n);let r,i;const s=t.Ea.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const u=yield function _I(n,e){const t=lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.kr.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.kr.allocateTargetId(r).next(u=>(i=new oh(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Ao(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function yO(n,e,t,r,i){return vO.apply(this,arguments)}(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&ZR(t.remoteStore,u)}return i}),_O.apply(this,arguments)}function vO(){return vO=(0,$.Z)(function*(n,e,t,r,i){n.wa=(b,x,k)=>{return(B=(0,$.Z)(function*(Z,we,Pe,be){let Be=we.view.sa(Pe);Be.zi&&(Be=yield zR(Z.localStore,we.query,!1).then(({documents:fn})=>we.view.sa(fn,Be)));const gt=be&&be.targetChanges.get(we.targetId),mt=we.view.applyChanges(Be,Z.isPrimaryClient,gt);return RO(Z,we.targetId,mt.ca),mt.snapshot}),function Q(Z,we,Pe,be){return B.apply(this,arguments)})(n,b,x,k);var B};const s=yield zR(n.localStore,e,!0),u=new eG(e,s.ss),d=u.sa(s.documents),f=oA.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(d,n.isPrimaryClient,f);RO(n,t,_.ca);const I=new rW(e,t,u);return n.Ea.set(e,I),n.da.has(t)?n.da.get(t).push(e):n.da.set(t,[e]),_.snapshot}),vO.apply(this,arguments)}function aW(n,e){return IO.apply(this,arguments)}function IO(){return IO=(0,$.Z)(function*(n,e){const t=lt(n),r=t.Ea.get(e),i=t.da.get(r.targetId);if(i.length>1)return t.da.set(r.targetId,i.filter(s=>!J0(s,e))),void t.Ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yI(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),IA(t.remoteStore,r.targetId),bI(t,r.targetId)}).catch(Kf))):(bI(t,r.targetId),yield yI(t.localStore,r.targetId,!0))}),IO.apply(this,arguments)}function EO(){return EO=(0,$.Z)(function*(n,e,t){const r=function $O(n){const e=lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dW.bind(null,e),e}(n);try{const i=yield function(u,d){const f=lt(u),_=Fr.now(),I=d.reduce((k,B)=>k.add(B.key),sn());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",k=>{let B=Qo(),Q=sn();return f.Xi.getEntries(k,I).next(Z=>{B=Z,B.forEach((we,Pe)=>{Pe.isValidDocument()||(Q=Q.add(we))})}).next(()=>f.localDocuments.getOverlayedDocuments(k,B)).next(Z=>{b=Z;const we=[];for(const Pe of d){const be=F4(Pe,b.get(Pe.key).overlayedDocument);null!=be&&we.push(new sh(Pe.key,be,tB(be.value.mapValue),br.exists(!0)))}return f.mutationQueue.addMutationBatch(k,_,we,d)}).next(Z=>{x=Z;const we=Z.applyToLocalDocumentSet(b,Q);return f.documentOverlayCache.saveOverlays(k,Z.batchId,we)})}).then(()=>({batchId:x.batchId,changes:vB(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,f){let _=u.fa[u.currentUser.toKey()];_||(_=new lr(qt)),_=_.insert(d,f),u.fa[u.currentUser.toKey()]=_}(r,i.batchId,t),yield ah(r,i.changes),yield II(r.remoteStore)}catch(i){const s=TI(i,"Failed to persist write");t.reject(s)}}),EO.apply(this,arguments)}function tG(n,e){return TO.apply(this,arguments)}function TO(){return TO=(0,$.Z)(function*(n,e){const t=lt(n);try{const r=yield function S6(n,e){const t=lt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((I,b)=>{const x=i.get(b);if(!x)return;d.push(t.kr.removeMatchingKeys(s,I.removedDocuments,b).next(()=>t.kr.addMatchingKeys(s,I.addedDocuments,b)));let k=x.withSequenceNumber(s.currentSequenceNumber);var Q,Z,we;null!==e.targetMismatches.get(b)?k=k.withResumeToken(Zi.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):I.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(I.resumeToken,r)),i=i.insert(b,k),Z=k,we=I,(0===(Q=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&d.push(t.kr.updateTargetData(s,k))});let f=Qo(),_=sn();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),d.push(function N$(n,e,t){let r=sn(),i=sn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Qo();return t.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(St.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{ns:u,rs:i}})}(s,u,e.documentUpdates).next(I=>{f=I.ns,_=I.rs})),!r.isEqual(St.min())){const I=t.kr.getLastRemoteSnapshotVersion(s).next(b=>t.kr.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(I)}return oe.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Va.get(s);u&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Ia=!0:i.modifiedDocuments.size>0?Dt(u.Ia):i.removedDocuments.size>0&&(Dt(u.Ia),u.Ia=!1))}),yield ah(t,r,e)}catch(r){yield Kf(r)}}),TO.apply(this,arguments)}function nG(n,e,t){const r=lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Ea.forEach((s,u)=>{const d=u.view.N_(e);d.snapshot&&i.push(d.snapshot)}),function(u,d){const f=lt(u);f.onlineState=d;let _=!1;f.queries.forEach((I,b)=>{for(const x of b.listeners)x.N_(d)&&(_=!0)}),_&&gO(f)}(r.eventManager,e),i.length&&r.Ta.r_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cW(n,e,t){return wO.apply(this,arguments)}function wO(){return wO=(0,$.Z)(function*(n,e,t){const r=lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Va.get(e),s=i&&i.key;if(s){let u=new lr(st.comparator);u=u.insert(s,mr.newNoDocument(s,St.min()));const d=sn().add(s),f=new sA(St.min(),new Map,new lr(qt),u,d);yield tG(r,f),r.Ra=r.Ra.remove(s),r.Va.delete(e),PO(r)}else yield yI(r.localStore,e,!1).then(()=>bI(r,e,t)).catch(Kf)}),wO.apply(this,arguments)}function lW(n,e){return AO.apply(this,arguments)}function AO(){return AO=(0,$.Z)(function*(n,e){const t=lt(n),r=e.batch.batchId;try{const i=yield function C6(n,e){const t=lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Xi.newChangeBuffer({trackRemovals:!0});return function(d,f,_,I){const b=_.batch,x=b.keys();let k=oe.resolve();return x.forEach(B=>{k=k.next(()=>I.getEntry(f,B)).next(Q=>{const Z=_.docVersions.get(B);Dt(null!==Z),Q.version.compareTo(Z)<0&&(b.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),I.addEntry(Q)))})}),k.next(()=>d.mutationQueue.removeMutationBatch(f,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=sn();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(f=f.add(d.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);SO(t,r,null),CO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ah(t,i)}catch(i){yield Kf(i)}}),AO.apply(this,arguments)}function dW(n,e,t){return bO.apply(this,arguments)}function bO(){return bO=(0,$.Z)(function*(n,e,t){const r=lt(n);try{const i=yield function(u,d){const f=lt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return f.mutationQueue.lookupMutationBatch(_,d).next(b=>(Dt(null!==b),I=b.keys(),f.mutationQueue.removeMutationBatch(_,b))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,I,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>f.localDocuments.getDocuments(_,I))})}(r.localStore,e);SO(r,e,t),CO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ah(r,i)}catch(i){yield Kf(i)}}),bO.apply(this,arguments)}function CO(n,e){(n.ga.get(e)||[]).forEach(t=>{t.resolve()}),n.ga.delete(e)}function SO(n,e,t){const r=lt(n);let i=r.fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.fa[r.currentUser.toKey()]=i}}function bI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.da.get(e))n.Ea.delete(r),t&&n.Ta.Sa(r,t);n.da.delete(e),n.isPrimaryClient&&n.ma.Ar(e).forEach(r=>{n.ma.containsKey(r)||rG(n,r)})}function rG(n,e){n.Aa.delete(e.path.canonicalString());const t=n.Ra.get(e);null!==t&&(IA(n.remoteStore,t),n.Ra=n.Ra.remove(e),n.Va.delete(t),PO(n))}function RO(n,e,t){for(const r of t)r instanceof J$?(n.ma.addReference(r.key,e),fW(n,r)):r instanceof X$?(He("SyncEngine","Document no longer in limbo: "+r.key),n.ma.removeReference(r.key,e),n.ma.containsKey(r.key)||rG(n,r.key)):vt()}function fW(n,e){const t=e.key,r=t.path.canonicalString();n.Ra.get(t)||n.Aa.has(r)||(He("SyncEngine","New document in limbo: "+t),n.Aa.add(r),PO(n))}function PO(n){for(;n.Aa.size>0&&n.Ra.size<n.maxConcurrentLimboResolutions;){const e=n.Aa.values().next().value;n.Aa.delete(e);const t=new st(wn.fromString(e)),r=n.pa.next();n.Va.set(r,new iW(t)),n.Ra=n.Ra.insert(t,r),ZR(n.remoteStore,new oh(Ao(uI(t.path)),r,"TargetPurposeLimboResolution",Ra.ae))}}function ah(n,e,t){return xO.apply(this,arguments)}function xO(){return xO=(0,$.Z)(function*(n,e,t){const r=lt(n),i=[],s=[],u=[];var d;r.Ea.isEmpty()||(r.Ea.forEach((d,f)=>{u.push(r.wa(f,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const I=O1.qi(f.targetId,_);s.push(I)}}))}),yield Promise.all(u),r.Ta.r_(i),yield(d=(0,$.Z)(function*(_,I){const b=lt(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>oe.forEach(I,k=>oe.forEach(k.Li,B=>b.persistence.referenceDelegate.addReference(x,k.targetId,B)).next(()=>oe.forEach(k.ki,B=>b.persistence.referenceDelegate.removeReference(x,k.targetId,B)))))}catch(x){if(!Zf(x))throw x;He("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const k=x.targetId;if(!x.fromCache){const B=b.Ji.get(k),Z=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);b.Ji=b.Ji.insert(k,Z)}}}),function f(_,I){return d.apply(this,arguments)})(r.localStore,s))}),xO.apply(this,arguments)}function pW(n,e){return MO.apply(this,arguments)}function MO(){return MO=(0,$.Z)(function*(n,e){const t=lt(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield x$(t.localStore,e);t.currentUser=e,(s=t).ga.forEach(d=>{d.forEach(f=>{f.reject(new Le(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ga.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ah(t,r.ts)}var s}),MO.apply(this,arguments)}function gW(n,e){const t=lt(n),r=t.Va.get(e);if(r&&r.Ia)return sn().add(r.key);{let i=sn();const s=t.da.get(e);if(!s)return i;for(const u of s){const d=t.Ea.get(u);i=i.unionWith(d.view.ia)}return i}}class YR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,$.Z)(function*(){t.serializer=yA(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function P$(n,e,t,r){return new D6(n,e,t,r)}(this.persistence,new R$,e.initialUser,this.serializer)}createPersistence(e){return new x1($R.zr,this.serializer)}createSharedClientState(e){return new U$}terminate(){var e=this;return(0,$.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class DI{initialize(e,t){var r=this;return(0,$.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nG(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pW.bind(null,r.syncEngine),yield function uO(n,e){return cO.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new J6}createDatastore(e){const t=yA(e.databaseInfo.databaseId),r=new O6(e.databaseInfo);return new V6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,u=t=>nG(this.syncEngine,t,0),d=B$.v()?new B$:new M6,new $6(r,i,s,u,d);var r,i,s,u,d}createSyncEngine(e,t){return function(i,s,u,d,f,_,I){const b=new sW(i,s,u,d,f,_);return I&&(b.ya=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,$.Z)(function*(r){const i=lt(r);He("RemoteStore","RemoteStore shutting down."),i.y_.add(5),yield vI(i),i.S_.shutdown(),i.b_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class JR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.va(this.observer.next,e)}error(e){this.observer.error?this.va(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString())}Ca(){this.muted=!0}va(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SW{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ps.UNAUTHENTICATED,this.clientId=M2.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,$.Z)(function*(d){He("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(He("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,$.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=TI(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function XR(n,e){return GO.apply(this,arguments)}function GO(){return GO=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,$.Z)(function*(s){r.isEqual(s)||(yield x$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),GO.apply(this,arguments)}function jO(n,e){return zO.apply(this,arguments)}function zO(){return zO=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function HO(n){return qO.apply(this,arguments)}(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>K$(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>K$(e.remoteStore,s)),n._onlineComponents=e}),zO.apply(this,arguments)}function qO(){return qO=(0,$.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){He("FirestoreClient","Using user provided OfflineComponentProvider");try{yield XR(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function cG(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;lc("Error using user provided cache. Falling back to memory cache: "+t),yield XR(n,new YR)}}else He("FirestoreClient","Using default OfflineComponentProvider"),yield XR(n,new YR);return n._offlineComponents}),qO.apply(this,arguments)}function eP(n){return WO.apply(this,arguments)}function WO(){return WO=(0,$.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(He("FirestoreClient","Using user provided OnlineComponentProvider"),yield jO(n,n._uninitializedComponentsProvider._online)):(He("FirestoreClient","Using default OnlineComponentProvider"),yield jO(n,new DI))),n._onlineComponents}),WO.apply(this,arguments)}function CI(n){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,$.Z)(function*(n){const e=yield eP(n),t=e.eventManager;return t.onListen=oW.bind(null,e.syncEngine),t.onUnlisten=aW.bind(null,e.syncEngine),t}),ZO.apply(this,arguments)}function gG(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const mG=new Map;function QO(n,e,t){if(!t)throw new Le(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _G(n){if(!st.isDocumentKey(n))throw new Le(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yG(n){if(st.isDocumentKey(n))throw new Le(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nP(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":vt()}function En(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nP(n);throw new Le(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class IG{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function LW(n,e,t,r){if(!0===e&&!0===r)throw new Le(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gG(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Le(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Le(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Le(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IG({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IG(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new O3;switch(r.type){case"firstParty":return new U3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Le(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mG.get(t);r&&(He("ComponentProvider","Removing Datastore"),mG.delete(t),r.terminate())}(this),Promise.resolve()}}class Ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class di{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new di(this.firestore,e,this._key)}}class xl extends Ns{constructor(e,t,r){super(e,t,uI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new di(this.firestore,null,new st(e))}withConverter(e){return new xl(this.firestore,e,this._path)}}function rP(n,e,...t){if(n=(0,rt.m9)(n),QO("collection","path",e),n instanceof EA){const r=wn.fromString(e,...t);return yG(r),new xl(n,null,r)}{if(!(n instanceof di||n instanceof xl))throw new Le(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return yG(r),new xl(n.firestore,null,r)}}function Jm(n,e,...t){if(n=(0,rt.m9)(n),1===arguments.length&&(e=M2.V()),QO("doc","path",e),n instanceof EA){const r=wn.fromString(e,...t);return _G(r),new di(n,null,new st(r))}{if(!(n instanceof di||n instanceof xl))throw new Le(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return _G(r),new di(n.firestore,n instanceof xl?n.converter:null,new st(r))}}class UW{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new H1(this,"async_queue_retry"),this.Xa=()=>{const t=KR();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ko.No()};const e=KR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const t=KR();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise(()=>{});const t=new Ki;return this.tu(()=>this.za&&this.Ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ga.push(e),this.nu()))}nu(){var e=this;return(0,$.Z)(function*(){if(0!==e.Ga.length){try{yield e.Ga[0](),e.Ga.shift(),e.Ko.reset()}catch(t){if(!Zf(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Ga.length>0&&e.Ko.xo(()=>e.nu())}})()}tu(e){const t=this.Wa.then(()=>(this.Ja=!0,e().catch(r=>{throw this.Ha=r,this.Ja=!1,ui("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ja=!1,r))));return this.Wa=t,t}enqueueAfterDelay(e,t,r){this.eu(),this.Za.indexOf(e)>-1&&(t=0);const i=lO.createAndSchedule(this,e,t,r,s=>this.ru(s));return this.ja.push(i),i}eu(){this.Ha&&vt()}verifyOperationInProgress(){}iu(){var e=this;return(0,$.Z)(function*(){let t;do{t=e.Wa,yield t}while(t!==e.Wa)})()}su(e){for(const t of this.ja)if(t.timerId===e)return!0;return!1}ou(e){return this.iu().then(()=>{this.ja.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ja)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.iu()})}_u(e){this.Za.push(e)}ru(e){const t=this.ja.indexOf(e);this.ja.splice(t,1)}}function YO(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class _r extends EA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new UW,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||TG(this),this._firestoreClient.terminate()}}function TA(n,e){const t="object"==typeof n?n:(0,In.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,In._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,rt.P0)("firestore");s&&function VW(n,e,t,r={}){var i;const s=(n=En(n,EA))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&lc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=ps.MOCK_USER;else{d=(0,rt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ps(_)}n._authCredentials=new F3(new P2(d,f))}}(i,...s)}return i}function Di(n){return n._firestoreClient||TG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TG(n){var e,t,r;const i=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new g4(n._databaseId,f,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,gG(I.experimentalLongPollingOptions),I.useFetchStreams));var f,I;n._firestoreClient=new SW(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Xm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xm(Zi.fromBase64String(e))}catch(t){throw new Le(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xm(Zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class SI{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class iP{constructor(e){this._methodName=e}}class JO{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}const GW=/^__.*__$/;class jW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sh(e,this.data,this.fieldMask,t,this.fieldTransforms):new dI(e,this.data,t,this.fieldTransforms)}}class bG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class sP{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.au(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new sP(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.cu({path:r,hu:!1});return i.Pu(e),i}Iu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.cu({path:r,hu:!1});return i.au(),i}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return aP(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(DG(this.uu)&&GW.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class zW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yA(e)}Ru(e,t,r,i=!1){return new sP({uu:e,methodName:t,Au:r,path:ci.emptyPath(),hu:!1,du:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RI(n){const e=n._freezeSettings(),t=yA(n._databaseId);return new zW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XO(n,e,t,r,i,s={}){const u=n.Ru(s.merge||s.mergeFields?2:0,e,t,i);tF("Data must be an object, but it was:",u,r);const d=xG(r,u);let f,_;if(s.merge)f=new Zo(u.fieldMask),_=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const b of s.mergeFields){const x=bA(e,b,t);if(!u.contains(x))throw new Le(he.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);NG(I,x)||I.push(x)}f=new Zo(I),_=u.fieldTransforms.filter(b=>f.covers(b.field))}else f=null,_=u.fieldTransforms;return new jW(new Ms(d),f,_)}class AA extends iP{_toFieldTransform(e){if(2!==e.uu)throw e.Eu(1===e.uu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AA}}class eF extends iP{_toFieldTransform(e){return new nA(e.path,new cI)}isEqual(e){return e instanceof eF}}function e_(n,e){if(MG(n=(0,rt.m9)(n)))return tF("Unsupported field value:",e,n),xG(n,e);if(n instanceof iP)return function(r,i){if(!DG(i.uu))throw i.Eu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Eu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.hu&&4!==e.uu)throw e.Eu("Nested arrays are not supported");return function(r,i){const s=[];let u=0;for(const d of r){let f=e_(d,i.Tu(u));null==f&&(f={nullValue:"NULL_VALUE"}),s.push(f),u++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,rt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return wB(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Fr.fromDate(r);return{timestampValue:fI(i.serializer,s)}}if(r instanceof Fr){const s=new Fr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fI(i.serializer,s)}}if(r instanceof JO)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xm)return{bytesValue:zB(i.serializer,r._byteString)};if(r instanceof di){const s=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(s))throw i.Eu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:v1(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Eu(`Unsupported field value: ${nP(r)}`)}(n,e)}function xG(n,e){const t={};return q2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qf(n,(r,i)=>{const s=e_(i,e.lu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function MG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fr||n instanceof JO||n instanceof Xm||n instanceof di||n instanceof iP)}function tF(n,e,t){if(!MG(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=nP(t);throw e.Eu("an object"===r?n+" a custom object":n+" "+r)}var i}function bA(n,e,t){if((e=(0,rt.m9)(e))instanceof SI)return e._internalPath;if("string"==typeof e)return oP(n,e);throw aP("Field path arguments must be of type string or ",n,!1,void 0,t)}const KW=new RegExp("[~\\*/\\[\\]]");function oP(n,e,t){if(e.search(KW)>=0)throw aP(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new SI(...e.split("."))._internalPath}catch{throw aP(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aP(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Le(he.INVALID_ARGUMENT,d+n+f)}function NG(n,e){return n.some(t=>t.isEqual(e))}class nF{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new di(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZW extends nF{data(){return super.data()}}function uP(n,e){return"string"==typeof e?oP(n,e):e instanceof SI?e._internalPath:e._delegate._internalPath}function kG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rF{}class iF extends rF{}function OG(n,e,...t){let r=[];e instanceof rF&&r.push(e),r=r.concat(t),function(s){const u=s.filter(f=>f instanceof PI).length,d=s.filter(f=>f instanceof DA).length;if(u>1||u>0&&d>0)throw new Le(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class DA extends iF{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new DA(e,t,r)}_apply(e){const t=this._parse(e);return BG(e._query,t),new Ns(e.firestore,e.converter,c1(e._query,t))}_parse(e){const t=RI(e.firestore);return function(s,u,d,f,_,I,b){let x;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Le(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){UG(b,I);const k=[];for(const B of b)k.push(VG(f,s,B));x={arrayValue:{values:k}}}else x=VG(f,s,b)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||UG(b,I),x=function PG(n,e,t,r=!1){return e_(t,n.Ru(r?4:3,e))}(d,"where",b,"in"===I||"not-in"===I);return yn.create(_,I,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function FG(n,e,t){const r=e,i=uP("where",n);return DA._create(i,r,t)}class PI extends rF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new PI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Hn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let u=i;const d=s.getFlattenedFilters();for(const f of d)BG(u,f),u=c1(u,f)}(e._query,t),new Ns(e.firestore,e.converter,c1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sF extends iF{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sF(e,t)}_apply(e){const t=function(i,s,u){if(null!==i.startAt)throw new Le(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Le(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new oI(s,u);return function(_,I){if(null===a1(_)){const b=DR(_);null!==b&&$G(0,b,I.field)}}(i,d),d}(e._query,this._field,this._direction);return new Ns(e.firestore,e.converter,function(i,s){const u=i.explicitOrderBy.concat([s]);return new rh(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class cP extends iF{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cP(e,t,r)}_apply(e){return new Ns(e.firestore,e.converter,CR(e._query,this._limit,this._limitType))}}function VG(n,e,t){if("string"==typeof(t=(0,rt.m9)(t))){if(""===t)throw new Le(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u1(e)&&-1!==t.indexOf("/"))throw new Le(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!st.isDocumentKey(r))throw new Le(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bm(n,new st(r))}if(t instanceof di)return Bm(n,t._key);throw new Le(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nP(t)}.`)}function UG(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BG(n,e){if(e.isInequality()){const r=DR(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Le(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=a1(n);null!==s&&$G(0,i,s)}const t=function(i,s){for(const u of i)for(const d of u.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Le(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $G(n,e,t){if(!t.isEqual(e))throw new Le(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class JW{convertValue(e,t="none"){switch(Xf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Qf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new JO(qr(e.latitude),qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IR(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(W0(e));default:return null}}convertTimestamp(e){const t=Yf(e);return new Fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Dt(e$(r));const i=new Um(r.get(1),r.get(3)),s=new st(r.popFirst(5));return i.isEqual(t)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function oF(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class t_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xI extends nF{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(uP("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class hP extends xI{data(e={}){return super.data(e)}}class MI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new t_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hP(this._firestore,this._userDataWriter,r.key,r,new t_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new hP(i._firestore,i._userDataWriter,d.doc.key,d.doc,new t_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const f=new hP(i._firestore,i._userDataWriter,d.doc.key,d.doc,new t_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let _=-1,I=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:e5(d.type),doc:f,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function e5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function fP(n){n=En(n,di);const e=En(n.firestore,_r);return function fG(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function(s,u,d,f,_){const I=new JR({next:x=>{u.enqueueAndForget(()=>fO(s,b));const k=x.docs.has(d);!k&&x.fromCache?_.reject(new Le(he.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&f&&"server"===f.source?_.reject(new Le(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new mO(uI(d.path),I,{includeMetadataChanges:!0,W_:!0});return dO(s,b)}(yield CI(n),n.asyncQueue,e,t,r)})),r.promise}(Di(e),n._key).then(t=>aF(e,n,t))}class up extends JW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new di(this.firestore,null,t)}}function jG(n,e,t,...r){n=En(n,di);const i=En(n.firestore,_r),s=RI(i);let u;return u="string"==typeof(e=(0,rt.m9)(e))||e instanceof SI?function RG(n,e,t,r,i,s){const u=n.Ru(1,e,t),d=[bA(e,r,t)],f=[i];if(s.length%2!=0)throw new Le(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(bA(e,s[x])),f.push(s[x+1]);const _=[],I=Ms.empty();for(let x=d.length-1;x>=0;--x)if(!NG(_,d[x])){const k=d[x];let B=f[x];B=(0,rt.m9)(B);const Q=u.Iu(k);if(B instanceof AA)_.push(k);else{const Z=e_(B,Q);null!=Z&&(_.push(k),I.set(k,Z))}}const b=new Zo(_);return new bG(I,b,u.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function SG(n,e,t,r){const i=n.Ru(1,e,t);tF("Data must be an object, but it was:",i,r);const s=[],u=Ms.empty();Qf(r,(f,_)=>{const I=oP(e,f,t);_=(0,rt.m9)(_);const b=i.Iu(I);if(_ instanceof AA)s.push(I);else{const x=e_(_,b);null!=x&&(s.push(I),u.set(I,x))}});const d=new Zo(s);return new bG(u,d,i.fieldTransforms)}(s,"updateDoc",n._key,e),CA(i,[u.toMutation(n._key,br.exists(!0))])}function zG(n,...e){var t,r,i;n=(0,rt.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||YO(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(YO(e[u])){const b=e[u];e[u]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[u+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[u+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let f,_,I;if(n instanceof di)_=En(n.firestore,_r),I=uI(n._key.path),f={next:b=>{e[u]&&e[u](aF(_,n,b))},error:e[u+1],complete:e[u+2]};else{const b=En(n,Ns);_=En(b.firestore,_r),I=b._query;const x=new up(_);f={next:k=>{e[u]&&e[u](new MI(_,x,b,k))},error:e[u+1],complete:e[u+2]},kG(n._query)}return function(x,k,B,Q){const Z=new JR(Q),we=new mO(k,Z,B);return x.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return dO(yield CI(x),we)})),()=>{Z.Ca(),x.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return fO(yield CI(x),we)}))}}(Di(_),I,d,f)}function CA(n,e){return function(r,i){const s=new Ki;return r.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function uW(n,e,t){return EO.apply(this,arguments)}(yield function KO(n){return eP(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(Di(n),e)}function aF(n,e,t){const r=t.docs.get(e._key),i=new up(n);return new xI(n,i,e._key,r,new t_(t.hasPendingWrites,t.fromCache),e.converter)}function HG(){return new eF("serverTimestamp")}!function(e,t=!0){nI=In.SDK_VERSION,(0,In._registerComponent)(new gl.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const u=r.getProvider("app").getImmediate(),d=new _r(new L3(r.getProvider("auth-internal")),new B3(r.getProvider("app-check-internal")),function(_,I){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Le(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Um(_.options.projectId,I)}(u,i),u);return s=Object.assign({useFetchStreams:t},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,In.registerVersion)(R2,"4.1.0",e),(0,In.registerVersion)(R2,"4.1.0","esm2017")}();var m5=O(3019),gP=O(3093),_5=O(4552);class y5 extends Cd.x{constructor(e=1/0,t=1/0,r=_5.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=u;f+=2)d=f;d&&r.splice(0,d+1)}}}var v5=O(3020);function WG(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,v5.B)({connector:()=>new y5(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function KG(n,e){return(0,Xh.m)(e)?(0,wi.w)(()=>n,e):(0,wi.w)(()=>n)}var uF=O(5137),Lr=O(2793),hc=O(6304),n_=O(4097);class NI{constructor(e){return e}}class ZG{constructor(){return(0,n_.C6)()}}const cF=new p.OlP("angularfire2._apps"),E5={provide:NI,useFactory:function I5(n){return n&&1===n.length?n[0]:new NI((0,n_.Mq)())},deps:[[new p.FiY,cF]]},T5={provide:ZG,deps:[[new p.FiY,cF]]};function w5(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new NI(r)}}let A5=(()=>{class n{constructor(t){(0,n_.KN)("angularfire",Lr.q4.full,"core"),(0,n_.KN)("angularfire",Lr.q4.full,"app"),(0,n_.KN)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[E5,T5]}),n})();function b5(n,...e){return{ngModule:A5,providers:[{provide:cF,useFactory:w5(n),multi:!0,deps:[p.R0b,p.zs3,Lr.HU,...e]}]}}const D5=(0,Lr.u3)(n_.ZF,!0),lF=new Map,QG={activated:!1,tokenObservers:[]},C5={initialized:!1,enabled:!1};function Wr(n){return lF.get(n)||Object.assign({},QG)}function mP(){return C5}const dF="https://content-firebaseappcheck.googleapis.com/v1",x5="exchangeDebugToken",YG={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class N5{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,$.Z)(function*(){t.stop();try{t.pending=new rt.BH,yield function k5(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new rt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ks=new rt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hF(n){if(!Wr(n).activated)throw ks.create("use-before-activation",{appName:n.name})}function vP(n,e){return pF.apply(this,arguments)}function pF(){return pF=(0,$.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const b=yield i.getHeartbeatsHeader();b&&(r["X-Firebase-Client"]=b)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,s)}catch(b){throw ks.create("fetch-network-error",{originalErrorMessage:b?.message})}if(200!==u.status)throw ks.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(b){throw ks.create("fetch-parse-error",{originalErrorMessage:b?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const _=1e3*Number(f[1]),I=Date.now();return{token:d.token,expireTimeMillis:I+_,issuedAtTimeMillis:I}}),pF.apply(this,arguments)}function JG(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dF}/projects/${t}/apps/${r}:${x5}?key=${i}`,body:{debug_token:e}}}const V5="firebase-app-check-database",U5=1,SA="firebase-app-check-store";let IP=null;function gF(){return gF=(0,$.Z)(function*(n,e){const r=(yield function ej(){return IP||(IP=new Promise((n,e)=>{try{const t=indexedDB.open(V5,U5);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ks.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(SA,{keyPath:"compositeKey"})}}catch(t){e(ks.create("storage-open",{originalErrorMessage:t?.message}))}}),IP)}()).transaction(SA,"readwrite"),s=r.objectStore(SA).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=f=>{u()},r.onerror=f=>{var _;d(ks.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})}),gF.apply(this,arguments)}const RA=new us.Yd("@firebase/app-check");function yF(n,e){return(0,rt.hl)()?function $5(n,e){return function tj(n,e){return gF.apply(this,arguments)}(function rj(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{RA.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IF(){return mP().enabled}function EF(){return TF.apply(this,arguments)}function TF(){return TF=(0,$.Z)(function*(){const n=mP();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TF.apply(this,arguments)}const W5={error:"UNKNOWN_ERROR"};function K5(n){return rt.US.encodeString(JSON.stringify(n),!1)}function EP(n){return wF.apply(this,arguments)}function wF(){return wF=(0,$.Z)(function*(n,e=!1){const t=n.app;hF(t);const r=Wr(t);let s,i=r.token;if(i&&!kI(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(kI(f)?i=f:yield yF(t,void 0))}if(!e&&i&&kI(i))return{token:i.token};let d,u=!1;if(IF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vP(JG(t,yield EF()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const f=yield r.exchangeTokenPromise;return yield yF(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Wr(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?RA.warn(f.message):RA.error(f),s=f}return i?s?d=kI(i)?{token:i.token,internalError:s}:aj(s):(d={token:i.token},r.token=i,yield yF(t,i)):d=aj(s),u&&function oj(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),wF.apply(this,arguments)}function AF(){return AF=(0,$.Z)(function*(n){const e=n.app;hF(e);const{provider:t}=Wr(e);if(IF()){const r=yield EF(),{token:i}=yield vP(JG(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),AF.apply(this,arguments)}function DF(n,e){const t=Wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sj(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function Z5(n){const{app:e}=n;return new N5((0,$.Z)(function*(){let r;if(r=Wr(e).token?yield EP(n,!0):yield EP(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},YG.RETRIAL_MIN_WAIT,YG.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kI(n){return n.expireTimeMillis-Date.now()>0}function aj(n){return{token:K5(W5),error:n}}class Q5{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)DF(this.app,t.next);return Promise.resolve()}}const gj="app-check-internal";!function l9(){(0,In._registerComponent)(new gl.wA("app-check",n=>function Y5(n,e){return new Q5(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gj).initialize()})),(0,In._registerComponent)(new gl.wA(gj,n=>function J5(n){return{getToken:e=>EP(n,e),getLimitedUseToken:()=>function ij(n){return AF.apply(this,arguments)}(n),addTokenListener:e=>function bF(n,e,t,r){const{app:i}=n,s=Wr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&kI(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),sj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>sj(n))}(n,"INTERNAL",e),removeTokenListener:e=>DF(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,In.registerVersion)("@firebase/app-check","0.8.0")}();class wP{constructor(){return(0,Lr.vb)("app-check")}}typeof window<"u"&&window;var g9=O(120);const _9=new p.OlP("angularfire2.auth.use-emulator"),y9=new p.OlP("angularfire2.auth.settings"),v9=new p.OlP("angularfire2.auth.tenant-id"),I9=new p.OlP("angularfire2.auth.langugage-code"),E9=new p.OlP("angularfire2.auth.use-device-language"),T9=new p.OlP("angularfire.auth.persistence");let PA=(()=>{class n{constructor(t,r,i,s,u,d,f,_,I,b,x,k){const B=new Cd.x,Q=(0,Vt.of)(void 0).pipe((0,gP.Q)(u.outsideAngular),(0,wi.w)(()=>s.runOutsideAngular(()=>O.e(661).then(O.bind(O,8661)))),(0,nn.U)(()=>(0,hc.on)(t,s,r)),(0,nn.U)(Z=>((n,e,t,r,i,s,u,d)=>(0,hc.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),u)for(const[_,I]of Object.entries(u))f.settings[_]=I;return d&&f.setPersistence(d),f},[t,r,i,s,u,d]))(Z,s,d,_,I,b,f,x)),WG({bufferSize:1,refCount:!1}));if(Ua(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Vt.of)(null);else{Q.pipe(Yu()).subscribe();const we=Q.pipe((0,wi.w)(Be=>Be.getRedirectResult().then(gt=>gt,()=>null)),Lr.iC,WG({bufferSize:1,refCount:!1})),Pe=Q.pipe((0,wi.w)(Be=>new zr.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Be.onAuthStateChanged(mt=>gt.next(mt),mt=>gt.error(mt),()=>gt.complete()))})))),be=Q.pipe((0,wi.w)(Be=>new zr.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Be.onIdTokenChanged(mt=>gt.next(mt),mt=>gt.error(mt),()=>gt.complete()))}))));this.authState=we.pipe(KG(Pe),(0,uF.R)(u.outsideAngular),(0,gP.Q)(u.insideAngular)),this.user=we.pipe(KG(be),(0,uF.R)(u.outsideAngular),(0,gP.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,wi.w)(Be=>Be?(0,Sn.D)(Be.getIdToken()):(0,Vt.of)(null))),this.idTokenResult=this.user.pipe((0,wi.w)(Be=>Be?(0,Sn.D)(Be.getIdTokenResult()):(0,Vt.of)(null))),this.credential=(0,m5.T)(we,B,this.authState.pipe(Qu(Be=>!Be))).pipe((0,nn.U)(Be=>Be?.user?Be:null),(0,uF.R)(u.outsideAngular),(0,gP.Q)(u.insideAngular))}return(0,hc.pX)(this,Q,s,{spy:{apply:(Z,we,Pe)=>{(Z.startsWith("signIn")||Z.startsWith("createUser"))&&Pe.then(be=>B.next(be))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hc.Dh),p.LFG(hc.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Lr.HU),p.LFG(_9,8),p.LFG(y9,8),p.LFG(v9,8),p.LFG(I9,8),p.LFG(E9,8),p.LFG(T9,8),p.LFG(wP,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A9=(()=>{class n{constructor(){g9.Z.registerVersion("angularfire",Lr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[PA]}),n})();var b9=O(6321),C9=O(3106);const _j="firebasestorage.googleapis.com",yj="storageBucket";class Vr extends rt.ZR{constructor(e,t,r=0){super(xF(e),`Firebase Storage: ${t} (${xF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Dr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Dr||{});function xF(n){return"storage/"+n}function MF(){return new Vr(Dr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vj(){return new Vr(Dr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ij(){return new Vr(Dr.CANCELED,"User canceled the upload/download.")}function Ej(){return new Vr(Dr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OI(n){return new Vr(Dr.INVALID_ARGUMENT,n)}function Tj(){return new Vr(Dr.APP_DELETED,"The Firebase app was deleted.")}function wj(n){return new Vr(Dr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xA(n,e){return new Vr(Dr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function MA(n){throw new Vr(Dr.INTERNAL_ERROR,"Internal error: "+n)}class io{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=io.makeFromUrl(e,t)}catch{return new io(e,"")}if(""===r.path)return r;throw function L9(n){return new Vr(Dr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Be){Be.path_=decodeURIComponent(Be.path)}const b=t.replace(/[.]/g,"\\."),be=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Be){"/"===Be.path.charAt(Be.path.length-1)&&(Be.path_=Be.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${b}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===_j?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Be=0;Be<be.length;Be++){const gt=be[Be],mt=gt.regex.exec(e);if(mt){let Zr=mt[gt.indices.path];Zr||(Zr=""),r=new io(mt[gt.indices.bucket],Zr),gt.postModify(r);break}}if(null==r)throw function F9(n){return new Vr(Dr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class G9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function AP(n){return"string"==typeof n||n instanceof String}function Aj(n){return NF()&&n instanceof Blob}function NF(){return typeof Blob<"u"&&!(0,rt.UG)()}function kF(n,e,t,r){if(r<e)throw OI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw OI(`Invalid value for '${n}'. Expected ${t} or less.`)}function uh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var FI=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(FI||{});function Dj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class K9{constructor(e,t,r,i,s,u,d,f,_,I,b,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=I,this.connectionFactory_=b,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,B)=>{this.resolve_=k,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function H9(n){return void 0!==n}(f)?s():s(f)}catch(f){u(f)}else if(null!==d){const f=MF();f.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,f):f)}else u(i.canceled?this.appDelete_?Tj():Ij():vj())};this.canceled_?t(0,new bP(!1,null,!0)):this.backoffId_=function j9(n,e,t){let r=1,i=null,s=null,u=!1,d=0;function f(){return 2===d}let _=!1;function I(...Z){_||(_=!0,e.apply(null,Z))}function b(Z){i=setTimeout(()=>{i=null,n(k,f())},Z)}function x(){s&&clearTimeout(s)}function k(Z,...we){if(_)return void x();if(Z)return x(),void I.call(null,Z,...we);if(f()||u)return x(),void I.call(null,Z,...we);let be;r<64&&(r*=2),1===d?(d=2,be=0):be=1e3*(r+Math.random()),b(be)}let B=!1;function Q(Z){B||(B=!0,x(),!_&&(null!==i?(Z||(d=2),clearTimeout(i),b(0)):Z||(d=1)))}return b(0),s=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new bP(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const d=s.getErrorCode()===FI.NO_ERROR,f=s.getStatus();if(!d||Dj(f,this.additionalRetryCodes_)&&this.retry){const I=s.getErrorCode()===FI.ABORT;return void r(!1,new bP(!1,null,I))}const _=-1!==this.successCodes_.indexOf(f);r(!0,new bP(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function z9(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bP{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function tK(...n){const e=function eK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(NF())return new Blob(n);throw new Vr(Dr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Pa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class OF{constructor(e,t){this.data=e,this.contentType=t||null}}function FF(n,e){switch(n){case Pa.RAW:return new OF(Cj(e));case Pa.BASE64:case Pa.BASE64URL:return new OF(Sj(n,e));case Pa.DATA_URL:return new OF(function sK(n){const e=new Rj(n);return e.base64?Sj(Pa.BASE64,e.rest):function iK(n){let e;try{e=decodeURIComponent(n)}catch{throw xA(Pa.DATA_URL,"Malformed data URL.")}return Cj(e)}(e.rest)}(e),function oK(n){return new Rj(n).contentType}(e))}throw MF()}function Cj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sj(n,e){switch(n){case Pa.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw xA(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Pa.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw xA(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function rK(n){if(typeof atob>"u")throw function $9(n){return new Vr(Dr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:xA(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Rj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw xA(Pa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function aK(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ml{constructor(e,t){let r=0,i="";Aj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Aj(this.data_)){const i=function nK(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ml(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ml(r,!0)}}static getBlob(...e){if(NF()){const t=e.map(r=>r instanceof Ml?r.data_:r);return new Ml(tK.apply(null,t))}{const t=e.map(u=>AP(u)?FF(Pa.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[s++]=u[d]}),new Ml(i,!0)}}uploadData(){return this.data_}}function LF(n){let e;try{e=JSON.parse(n)}catch{return null}return function W9(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Pj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function lK(n,e){return e}class bo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||lK}}let DP=null;function NA(){if(DP)return DP;const n=[];n.push(new bo("bucket")),n.push(new bo("generation")),n.push(new bo("metageneration")),n.push(new bo("name","fullPath",!0));const t=new bo("name");t.xform=function e(s,u){return function dK(n){return!AP(n)||n.length<2?n:Pj(n)}(u)},n.push(t);const i=new bo("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new bo("timeCreated")),n.push(new bo("updated")),n.push(new bo("md5Hash",null,!0)),n.push(new bo("cacheControl",null,!0)),n.push(new bo("contentDisposition",null,!0)),n.push(new bo("contentEncoding",null,!0)),n.push(new bo("contentLanguage",null,!0)),n.push(new bo("contentType",null,!0)),n.push(new bo("metadata","customMetadata",!0)),DP=n,DP}function xj(n,e,t){const r=LF(e);return null===r?null:function fK(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function hK(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new io(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function VF(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Mj="prefixes",Nj="items";class Nl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function kl(n){if(!n)throw MF()}function CP(n,e){return function t(r,i){const s=xj(n,i,e);return kl(null!==s),s}}function LI(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function k9(){return new Vr(Dr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function N9(){return new Vr(Dr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function M9(n){return new Vr(Dr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function O9(n){return new Vr(Dr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function kA(n){const e=LI(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function x9(n){return new Vr(Dr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function kj(n,e,t){const i=uh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Nl(i,"GET",CP(n,t),u);return d.errorHandler=kA(e),d}function vK(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=uh(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,I=new Nl(d,"GET",function _K(n,e){return function t(r,i){const s=function mK(n,e,t){const r=LF(t);return null===r?null:function gK(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Mj])for(const i of t[Mj]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new io(e,s));r.prefixes.push(u)}if(t[Nj])for(const i of t[Nj]){const s=n._makeStorageReference(new io(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return kl(null!==s),s}}(n,e.bucket),_);return I.urlParams=s,I.errorHandler=LI(e),I}function Fj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function wK(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function Lj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let be="";for(let Be=0;Be<2;Be++)be+=Math.random().toString().slice(2);return be}();u["Content-Type"]="multipart/related; boundary="+f;const _=Fj(e,r,i),I=VF(_,t),k=Ml.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===k)throw Ej();const B={name:_.fullPath},Q=uh(s,n.host,n._protocol),we=n.maxUploadRetryTime,Pe=new Nl(Q,"POST",CP(n,t),we);return Pe.urlParams=B,Pe.headers=u,Pe.body=k.uploadData(),Pe.errorHandler=LI(e),Pe}class SP{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function UF(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{kl(!1)}return kl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const CK={STATE_CHANGED:"state_changed"},Do={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BF(n){switch(n){case"running":case"pausing":case"canceling":return Do.RUNNING;case"paused":return Do.PAUSED;case"success":return Do.SUCCESS;case"canceled":return Do.CANCELED;default:return Do.ERROR}}class SK{constructor(e,t,r){if(function q9(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function VI(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Uj=null;class RK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=FI.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=FI.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=FI.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw MA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw MA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw MA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw MA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw MA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class PK extends RK{initXhr(){this.xhr_.responseType="text"}}function fc(){return Uj?Uj():new PK}class Bj{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=NA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Dr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Dj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=vj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Dr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function AK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=Fj(e,r,i),d={name:u.fullPath},f=uh(s,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},b=VF(u,t),B=new Nl(f,"POST",function k(Q){let Z;UF(Q);try{Z=Q.getResponseHeader("X-Goog-Upload-URL")}catch{kl(!1)}return kl(AP(Z)),Z},n.maxUploadRetryTime);return B.urlParams=d,B.headers=I,B.body=b,B.errorHandler=LI(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function bK(n,e,t,r){const f=new Nl(t,"POST",function s(_){const I=UF(_,["active","final"]);let b=null;try{b=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kl(!1)}b||kl(!1);const x=Number(b);return kl(!isNaN(x)),new SP(x,r.size(),"final"===I)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=LI(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,fc,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new SP(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function DK(n,e,t,r,i,s,u,d){const f=new SP(0,0);if(u?(f.current=u.current,f.total=u.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function U9(){return new Vr(Dr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let I=_;i>0&&(I=Math.min(I,i));const b=f.current;let k="";k=0===I?"finalize":_===I?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${f.current}`},Q=r.slice(b,b+I);if(null===Q)throw Ej();const be=new Nl(t,"POST",function Z(Be,gt){const mt=UF(Be,["active","final"]),fn=f.current+I,Zr=r.size();let bu;return bu="final"===mt?CP(e,s)(Be,gt):null,new SP(fn,Zr,"final"===mt,bu)},e.maxUploadRetryTime);return be.headers=B,be.body=Q.uploadData(),be.progressCallback=d||null,be.errorHandler=LI(n),be}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(u,fc,i,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=kj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Lj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ij(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=BF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new SK(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(BF(this._state)){case Do.SUCCESS:VI(this._resolve.bind(null,this.snapshot))();break;case Do.CANCELED:case Do.ERROR:VI(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(BF(this._state)){case Do.RUNNING:case Do.PAUSED:e.next&&VI(e.next.bind(e,this.snapshot))();break;case Do.SUCCESS:e.complete&&VI(e.complete.bind(e))();break;default:e.error&&VI(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class r_{constructor(e,t){this._service=e,this._location=t instanceof io?t:io.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new r_(e,t)}get root(){const e=new io(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pj(this._location.path)}get storage(){return this._service}get parent(){const e=function uK(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new io(this._location.bucket,e);return new r_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw wj(e)}}function Gj(n,e,t){return $F.apply(this,arguments)}function $F(){return $F=(0,$.Z)(function*(n,e,t){const i=yield jj(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Gj(n,e,i.nextPageToken))}),$F.apply(this,arguments)}function jj(n,e){null!=e&&"number"==typeof e.maxResults&&kF("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=vK(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,fc)}function GK(n){n._throwIfRoot("getDownloadURL");const e=function IK(n,e,t){const i=uh(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new Nl(i,"GET",function yK(n,e){return function t(r,i){const s=xj(n,i,e);return kl(null!==s),function pK(n,e,t,r){const i=LF(e);if(null===i||!AP(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(_=>{const b=n.fullPath;return uh("/b/"+u(n.bucket)+"/o/"+u(b),t,r)+bj({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=kA(e),d}(n.storage,n._location,NA());return n.storage.makeRequestWithTokens(e,fc).then(t=>{if(null===t)throw function B9(){return new Vr(Dr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function zj(n,e){const t=function cK(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new io(n._location.bucket,t);return new r_(n.storage,r)}function Hj(n,e){if(n instanceof GF){const t=n;if(null==t._bucket)throw function V9(){return new Vr(Dr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yj+"' property when initializing the app?")}();const r=new r_(t,t._bucket);return null!=e?Hj(r,e):r}return void 0!==e?zj(n,e):n}function qK(n,e){if(e&&function zK(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof GF)return function HK(n,e){return new r_(n,e)}(n,e);throw OI("To use ref(service, url), the first argument must be a Storage instance.")}return Hj(n,e)}function qj(n,e){const t=e?.[yj];return null==t?null:io.makeFromBucketSpec(t,n)}class GF{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_j,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?io.makeFromBucketSpec(i,this._host):qj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?io.makeFromBucketSpec(this._url,e):qj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,$.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,$.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new r_(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new G9(Tj());{const u=function X9(n,e,t,r,i,s,u=!0){const d=bj(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function Y9(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function Z9(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function Q9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function J9(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new K9(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,$.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const Wj="@firebase/storage",Zj="storage";function KK(n,e,t){return function $j(n,e,t){n._throwIfRoot("uploadBytes");const r=Lj(n.storage,n._location,NA(),new Ml(e,!0),t);return n.storage.makeRequestWithTokens(r,fc).then(i=>({metadata:i,ref:n}))}(n=(0,rt.m9)(n),e,t)}function Qj(n){return function UK(n){const e={prefixes:[],items:[]};return Gj(n,e).then(()=>e)}(n=(0,rt.m9)(n))}function Yj(n){return GK(n=(0,rt.m9)(n))}function Jj(n){return function jK(n){n._throwIfRoot("deleteObject");const e=function TK(n,e){const r=uh(e.fullServerUrl(),n.host,n._protocol),d=new Nl(r,"DELETE",function u(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=kA(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,fc)}(n=(0,rt.m9)(n))}function RP(n,e){return qK(n=(0,rt.m9)(n),e)}function Xj(n,e,t,r={}){!function WK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,rt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function t8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new GF(t,r,i,e,In.SDK_VERSION)}!function n8(){(0,In._registerComponent)(new gl.wA(Zj,t8,"PUBLIC").setMultipleInstances(!0)),(0,In.registerVersion)(Wj,"0.11.2",""),(0,In.registerVersion)(Wj,"0.11.2","esm2017")}();class PP{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ez{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PP(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new PP(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new PP(u,this,this._ref)):{next:t.next?u=>t.next(new PP(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class tz{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ch(e,this._service))}get items(){return this._delegate.items.map(e=>new ch(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ch{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function XK(n,e){return zj(n,e)}(this._delegate,e);return new ch(t,this.storage)}get root(){return new ch(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ch(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ez(function ZK(n,e,t){return function LK(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Bj(n,new Ml(e),t)}(n=(0,rt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Pa.RAW,r){this._throwIfRoot("putString");const i=FF(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new ez(new Bj(this._delegate,new Ml(i.data,!0),s),this)}listAll(){return Qj(this._delegate).then(e=>new tz(e,this.storage))}list(e){return function JK(n,e){return jj(n=(0,rt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new tz(t,this.storage))}getMetadata(){return function QK(n){return function BK(n){n._throwIfRoot("getMetadata");const e=kj(n.storage,n._location,NA());return n.storage.makeRequestWithTokens(e,fc)}(n=(0,rt.m9)(n))}(this._delegate)}updateMetadata(e){return function YK(n,e){return function $K(n,e){n._throwIfRoot("updateMetadata");const t=function EK(n,e,t,r){const s=uh(e.fullServerUrl(),n.host,n._protocol),d=VF(t,r),_=n.maxOperationRetryTime,I=new Nl(s,"PATCH",CP(n,r),_);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=kA(e),I}(n.storage,n._location,e,NA());return n.storage.makeRequestWithTokens(t,fc)}(n=(0,rt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return Yj(this._delegate)}delete(){return this._throwIfRoot("delete"),Jj(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw wj(e)}}class nz{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(rz(e))throw OI("ref() expected a child path but got a URL, use refFromURL instead.");return new ch(RP(this._delegate,e),this)}refFromURL(e){if(!rz(e))throw OI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{io.makeFromUrl(e,this._delegate.host)}catch{throw OI("refFromUrl() expected a valid full URL but got an invalid one.")}return new ch(RP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){Xj(this._delegate,e,t,r)}}function rz(n){return/^[A-Za-z]+:\/\//.test(n)}function o8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new nz(t,r)}function iz(n){const e=function u8(n){return new zr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(function D9(n,e=b9.z){return(0,Qs.e)((t,r)=>{let i=null,s=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function f(){const _=u+n,I=e.now();if(I<_)return i=this.schedule(void 0,_-I),void r.add(i);d()}t.subscribe((0,Ui.x)(r,_=>{s=_,u=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,nn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function xP(n){return{getDownloadURL:()=>(0,Vt.of)(void 0).pipe(Lr.fc,(0,wi.w)(()=>n.getDownloadURL()),Lr.iC),getMetadata:()=>(0,Vt.of)(void 0).pipe(Lr.fc,(0,wi.w)(()=>n.getMetadata()),Lr.iC),delete:()=>(0,Sn.D)(n.delete()),child:e=>xP(n.child(e)),updateMetadata:e=>(0,Sn.D)(n.updateMetadata(e)),put:(e,t)=>iz(n.put(e,t)),putString:(e,t,r)=>iz(n.putString(e,t,r)),list:e=>(0,Sn.D)(n.list(e)),listAll:()=>(0,Sn.D)(n.listAll())}}!function a8(n){const e={TaskState:Do,TaskEvent:CK,StringFormat:Pa,Storage:nz,Reference:ch};n.INTERNAL.registerComponent(new gl.wA("storage-compat",o8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(C9.Z);const c8=new p.OlP("angularfire2.storageBucket"),l8=new p.OlP("angularfire2.storage.maxUploadRetryTime"),d8=new p.OlP("angularfire2.storage.maxOperationRetryTime"),h8=new p.OlP("angularfire2.storage.use-emulator");let f8=(()=>{class n{constructor(t,r,i,s,u,d,f,_,I,b){const x=(0,hc.on)(t,u,r);this.storage=(0,hc.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const k=u.runOutsideAngular(()=>x.storage(i||void 0)),B=I;return B&&k.useEmulator(...B),f&&k.setMaxUploadRetryTime(f),_&&k.setMaxOperationRetryTime(_),k},[f,_])}ref(t){return xP(this.storage.ref(t))}refFromURL(t){return xP(this.storage.refFromURL(t))}upload(t,r,i){return xP(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hc.Dh),p.LFG(hc.xv,8),p.LFG(c8,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Lr.HU),p.LFG(l8,8),p.LFG(d8,8),p.LFG(h8,8),p.LFG(wP,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UI=(()=>{var n;class e{constructor(r,i,s){this.frauth=r,this.router=i,this.storage=s,this.frauth.onAuthStateChanged(u=>{u?(console.log("logged in",u.displayName),this.getAvatar(u.uid)):console.log("user logged out")})}register(r,i,s,u,d,f){var _=this;return(0,$.Z)(function*(){try{const b=(yield _.frauth.createUserWithEmailAndPassword(r,i)).user;if(!b)throw new Error("User creation failed.");const x=yield _.uploadAvatarStorage(f,b.uid);yield b.updateProfile({displayName:u,photoURL:x});const k={displayName:b.displayName??null,email:b.email??null,uid:b.uid??null,phoneNumber:d,photoURL:b.photoURL??null,providerId:b.providerId??null,department:s};return yield _.SetUserData(k),k}catch(I){throw console.error("Registration failed:",I),I}})()}signIn(r,i){var s=this;return(0,$.Z)(function*(){return s.frauth.signInWithEmailAndPassword(r,i)})()}signOut(){var r=this;return(0,$.Z)(function*(){r.frauth.signOut().then(()=>{r.router.navigate(["/login"])}).catch(i=>{console.error(i)})})()}getUser(){return AS().currentUser}SetUserData(r){(function n5(n,e,t){n=En(n,di);const r=En(n.firestore,_r),i=oF(n.converter,e,t);return CA(r,[XO(RI(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,br.none())])})(Jm(TA(),"users",r.uid),r).then(()=>{console.log("User data stored in Firestore.")}).catch(u=>{console.error("Error storing user data:",u)})}uploadAvatarStorage(r,i){var s=this;return(0,$.Z)(function*(){const d=yield(yield s.storage.upload("avatars/"+i,r)).ref.getDownloadURL();return s.currentlySignedInUserAvatarURL=d,d})()}getAvatar(r){var i=this;return(0,$.Z)(function*(){try{const u=yield(yield i.storage.ref("avatars/"+r).getDownloadURL()).toPromise();i.currentlySignedInUserAvatarURL=u}catch{i.currentlySignedInUserAvatarURL="https://wbi.net.au/wp-content/uploads/2019/04/person-icon-silhouette-png-12-1-e1555982192147.png"}})()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(PA),p.LFG(zi),p.LFG(f8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),p8=(()=>{var n;class e{constructor(r,i,s){this.auth=r,this.router=i,this.frauth=s,this.show_password=!1,this.loginForm=new Ar({email:new kr("",[rr.required,rr.email]),password:new kr("",rr.required)})}logIn(){this.loginForm.valid?this.auth.signIn(this.loginForm.value.email,this.loginForm.value.password).then(s=>{this.router.navigate(["/"])}).catch(s=>{console.log(s)}):console.log("Invalid")}showPassword(){this.show_password=!this.show_password}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI),p.Y36(zi),p.Y36(PA))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:16,vars:2,consts:[[1,"formDiv"],[1,"form",3,"formGroup","ngSubmit"],["for","email"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password-container"],["name","password","formControlName","password",3,"type"],["type","checkbox",3,"change"],["type","submit"],["routerLink","/register"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"form",1),p.NdJ("ngSubmit",function(){return i.logIn()}),p.TgZ(2,"label",2),p._uU(3,"Username"),p.qZA(),p._UZ(4,"input",3),p.TgZ(5,"label",4),p._uU(6,"Password"),p.qZA(),p.TgZ(7,"div",5),p._UZ(8,"input",6),p.TgZ(9,"input",7),p.NdJ("change",function(){return i.showPassword()}),p.qZA()(),p.TgZ(10,"button",8),p._uU(11,"Log-In"),p.qZA(),p.TgZ(12,"h4"),p._uU(13,"Don't have an account?"),p.TgZ(14,"a",9),p._uU(15,"Click here to create one!"),p.qZA()()()()),2&r&&(p.xp6(1),p.Q6J("formGroup",i.loginForm),p.xp6(7),p.s9C("type",i.show_password?"text":"password"))},dependencies:[vf,ee,Io,Zc,Cs,zo,Qh],styles:["body[_ngcontent-%COMP%]{background-image:url(/src/assets/logo.jpg);background-position:center;background-size:contain}.formDiv[_ngcontent-%COMP%]{margin:auto;display:flex;justify-content:center;align-items:center;height:50vh;width:50vh;border:2px solid black;border-radius:3px;background-color:azure;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], label[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px}"]}),e})();const g8=[{reason:"Huii",price:100},{reason:"Pedal",price:1e5}],m8=[{reason:"Pedal",price:3322},{reason:"Chukal malki deca",price:455555}];let sz=(()=>{var n;class e{constructor(r){this.authService=r,this.user=this.authService.getUser(),this.db=TA(),this.department=""}ngOnInit(){var r=this;return(0,$.Z)(function*(){try{if(r.user){const s=Jm(rP(r.db,"users"),r.user.uid),u=yield fP(s);u.exists()?r.department=u.data()?.department||"":console.log("kur")}}catch(i){throw i}})()}signOut(){this.authService.signOut()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-navbar"]],decls:12,vars:4,consts:[[1,"navbar"],[1,"navbar-left"],["routerLink","/"],[1,"navbar-right"],["alt","",1,"avatar",2,"max-height","35px","width","40px",3,"routerLink","src"],[3,"click"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"a",2),p._uU(3,"Home"),p.qZA()(),p.TgZ(4,"div",3)(5,"h4"),p._uU(6),p.qZA(),p.TgZ(7,"h4"),p._uU(8),p.qZA(),p._UZ(9,"img",4),p.TgZ(10,"button",5),p.NdJ("click",function(){return i.signOut()}),p._uU(11,"Log out"),p.qZA()()()),2&r&&(p.xp6(6),p.hij("Username: ",null==i.user?null:i.user.displayName,""),p.xp6(2),p.hij("Department: ",i.department,""),p.xp6(1),p.MGl("routerLink","profile/",null==i.user?null:i.user.uid,""),p.Q6J("src",i.authService.currentlySignedInUserAvatarURL,p.LSH))},dependencies:[vf],styles:[".navbar[_ngcontent-%COMP%]{display:flex;margin:-8px;box-sizing:border-box;justify-content:space-between;background-color:beige;height:40px;padding:10px}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.navbar-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.navbar-right[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.navbar-right[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-right:10px}.avatar[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;box-shadow:0 0 10px #0000004d;margin-right:10px}.avatar[_ngcontent-%COMP%]:hover{cursor:pointer;border:2px solid black}"]}),e})();function _8(n,e){if(1&n&&(p.TgZ(0,"option"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t.reason)}}function y8(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"option",20),p._uU(2,"Any"),p.qZA(),p.YNc(3,_8,2,1,"option",19),p.BQk()),2&n){const t=p.oxw();p.xp6(3),p.Q6J("ngForOf",t.policeReasons)}}function v8(n,e){if(1&n&&(p.TgZ(0,"option"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t.reason)}}function I8(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"option",20),p._uU(2,"Any"),p.qZA(),p.YNc(3,v8,2,1,"option",19),p.BQk()),2&n){const t=p.oxw();p.xp6(3),p.Q6J("ngForOf",t.muncipalityReasons)}}function E8(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"ul")(1,"div",21)(2,"li"),p._uU(3),p.qZA(),p.TgZ(4,"li"),p._uU(5),p.qZA(),p.TgZ(6,"li"),p._uU(7),p.qZA(),p.TgZ(8,"li"),p._uU(9),p.qZA(),p.TgZ(10,"li"),p._uU(11),p.qZA(),p.TgZ(12,"li"),p._uU(13),p.qZA(),p.TgZ(14,"button",22),p.NdJ("click",function(){const s=p.CHM(t).$implicit,u=p.oxw();return p.KtG(u.onFineClick(s.documentId))}),p._uU(15,"Modify"),p.qZA(),p.TgZ(16,"button",22),p.NdJ("click",function(){const s=p.CHM(t).$implicit,u=p.oxw();return p.KtG(u.deleteDoc(s.documentId))}),p._uU(17,"Delete"),p.qZA(),p.TgZ(18,"li"),p._uU(19),p.qZA()()()}if(2&n){const t=e.$implicit;p.xp6(3),p.hij("Firstname: ",t.firstname,""),p.xp6(2),p.hij("Lastname: ",t.lastname,""),p.xp6(2),p.hij("Date: ",t.date,""),p.xp6(2),p.hij("Time: ",t.time,""),p.xp6(2),p.hij("Reason: ",t.reason,""),p.xp6(2),p.hij("Price: ",t.price,"\u043b\u0432."),p.xp6(6),p.hij("Last updated: ",t.timestamp.toDate(),"")}}let T8=(()=>{var n;class e{constructor(r,i){this.authService=r,this.router=i,this.selectedImages=[],this.policeReasons=g8,this.muncipalityReasons=m8,this.user=this.authService.getUser(),this.db=TA(),this.storage=function e8(n=(0,In.getApp)(),e){n=(0,rt.m9)(n);const r=(0,In._getProvider)(n,Zj).getImmediate({identifier:e}),i=(0,rt.P0)("storage");return i&&Xj(r,...i),r}(),this.department="",this.fines=[],this.fine=new Ar({firstname:new kr("",[rr.required]),lastname:new kr("",rr.required),date:new kr("",rr.required),time:new kr("",rr.required),price:new kr("",rr.required),reason:new kr("",rr.required),image:new kr("",rr.required)})}ngOnInit(){var r=this;return(0,$.Z)(function*(){try{if(r.user){const i=Jm(r.db,"users",r.user.uid),s=yield fP(i);r.department=s.data()?.department||"",yield r.getFines()}}catch(i){throw i}})()}OnSubmit(){var r=this;return(0,$.Z)(function*(){if(r.user){const{firstname:i,lastname:s,date:u,time:d,reason:f,price:_}=r.fine.value,I={firstname:i,lastname:s,date:u,time:d,price:_,reason:f,image:"",issuer:r.user.displayName,issueruid:r.user.uid,timestamp:HG()},b=rP(r.db,"fines"),x=yield function i5(n,e){const t=En(n.firestore,_r),r=Jm(n),i=oF(n.converter,e);return CA(t,[XO(RI(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}(b,I);if(r.selectedImages.length>0){const k=[];for(const B of r.selectedImages){const Q=RP(r.storage,`fine_images/${r.user?.uid}/${x.id}/${B.name}`);yield KK(Q,B),k.push(yield Yj(Q))}yield jG(x,{image:k})}}else console.log("rku")})()}signOut(){this.authService.signOut()}getFines(){zG(OG(rP(this.db,"fines"),FG("issueruid","==",this.user?.uid)),s=>{s.docChanges().forEach(u=>{if("added"==u.type){const f={documentId:u.doc.id,...u.doc.data()};this.fines.push(f)}"removed"==u.type&&(this.fines=this.fines.filter(d=>d.documentId!=u.doc.id))})})}onFineClick(r){this.router.navigate(["/finedetails",r]),console.log(r)}deleteDoc(r){var i=this;return(0,$.Z)(function*(){try{const s=Jm(i.db,"fines",r);yield function r5(n){return CA(En(n.firestore,_r),[new hI(n._key,br.none())])}(s);const u=RP(i.storage,`fine_images/${i.user?.uid}/${s.id}`);yield i.deleteDocStorage(u),console.log("Document and associated storage contents deleted successfully.")}catch(s){console.error("Error deleting document and storage contents:",s)}})()}deleteDocStorage(r){return(0,$.Z)(function*(){const s=(yield Qj(r)).items.map(function(){var u=(0,$.Z)(function*(d){yield Jj(d)});return function(d){return u.apply(this,arguments)}}());yield Promise.all(s)})()}onImageSelected(r){r.target.files&&r.target.files.length>0&&(this.selectedImages=Array.from(r.target.files))}finePrice(){const r=this.fine.get("reason"),i=this.fine.get("price");let s=0;if("police"==this.department){const u=this.policeReasons.filter(d=>r?.value.includes(d.reason));for(const d of u)s+=d.price}if("muncipality"==this.department){const u=this.muncipalityReasons.filter(d=>r?.value.includes(d.reason));for(const d of u)s+=d.price}i?.setValue(s)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI),p.Y36(zi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:35,vars:4,consts:[[1,"container"],[1,"container-item"],[3,"formGroup","ngSubmit"],["for","firstname"],["type","text","name","firstname","formControlName","firstname"],["for","lastname"],["type","text","name","lastname","formControlName","lastname"],["for","reason"],["name","reason","formControlName","reason","multiple","",3,"change"],[4,"ngIf"],["for","date"],["type","date","id","date","name","date","formControlName","date"],["for","time"],["type","time","id","time","name","time","formControlName","time"],["for","price"],["type","number","name","price","formControlName","price"],["for","image"],["type","file","name","image","formControlName","image","accept","image/","multiple","",3,"change"],["id","submit","type","submit"],[4,"ngFor","ngForOf"],["value","any"],[1,"fine"],[3,"click"]],template:function(r,i){1&r&&(p._UZ(0,"app-navbar"),p.TgZ(1,"div",0)(2,"div",1)(3,"h3"),p._uU(4,"Submit new fine"),p.qZA(),p.TgZ(5,"form",2),p.NdJ("ngSubmit",function(){return i.OnSubmit()}),p.TgZ(6,"label",3),p._uU(7,"Firstname"),p.qZA(),p._UZ(8,"input",4),p.TgZ(9,"label",5),p._uU(10,"Lastname"),p.qZA(),p._UZ(11,"input",6),p.TgZ(12,"label",7),p._uU(13,"Reason"),p.qZA(),p.TgZ(14,"select",8),p.NdJ("change",function(){return i.finePrice()}),p.YNc(15,y8,4,1,"ng-container",9),p.YNc(16,I8,4,1,"ng-container",9),p.qZA(),p.TgZ(17,"label",10),p._uU(18,"Date:"),p.qZA(),p._UZ(19,"input",11),p.TgZ(20,"label",12),p._uU(21,"Time"),p.qZA(),p._UZ(22,"input",13),p.TgZ(23,"label",14),p._uU(24,"Pay price"),p.qZA(),p._UZ(25,"input",15),p.TgZ(26,"label",16),p._uU(27,"Evidence"),p.qZA(),p.TgZ(28,"input",17),p.NdJ("change",function(u){return i.onImageSelected(u)}),p.qZA(),p.TgZ(29,"button",18),p._uU(30,"Submit fine"),p.qZA()()(),p.TgZ(31,"div",1)(32,"h3"),p._uU(33,"Globi"),p.qZA(),p.YNc(34,E8,20,7,"ul",19),p.qZA()()),2&r&&(p.xp6(5),p.Q6J("formGroup",i.fine),p.xp6(10),p.Q6J("ngIf","police"===i.department),p.xp6(1),p.Q6J("ngIf","muncipality"===i.department),p.xp6(18),p.Q6J("ngForOf",i.fines))},dependencies:[Rr,Ru,ee,G_,bd,Io,Ce,j_,Zc,Cs,zo,Qh,sz],styles:['form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:60%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:6px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border:0;border-bottom:1px solid orange}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}#submit[_ngcontent-%COMP%]{-webkit-appearance:button;appearance:button;background-color:transparent;background-image:linear-gradient(to bottom,#fff,#f8eedb);border:0 solid #e5e7eb;border-radius:.5rem;box-sizing:border-box;color:#482307;column-gap:1rem;cursor:pointer;display:flex;font-family:ui-sans-serif,system-ui,-apple-system,system-ui,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:100%;font-weight:700;line-height:24px;margin:0;outline:2px solid transparent;padding:1rem 1.5rem;text-align:center;text-transform:none;transition:all .1s cubic-bezier(.4,0,.2,1);user-select:none;-webkit-user-select:none;touch-action:manipulation;box-shadow:-6px 8px 10px #51290a1a,0 2px 2px #51290a33}#submit[_ngcontent-%COMP%]:active{background-color:#f3f4f6;box-shadow:-1px 2px 5px #51290a26,0 1px 1px #51290a26;transform:translateY(.125rem)}#submit[_ngcontent-%COMP%]:focus{box-shadow:#48230775 0 0 0 4px,-6px 8px 10px #51290a1a,0 2px 2px #51290a33}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:30px}.container-item[_ngcontent-%COMP%]{width:50%}.container-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.container-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.fine[_ngcontent-%COMP%]{border:2px solid;padding:10px;box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px,#0a254059 0 -2px 6px inset}']}),e})(),jF=(()=>{var n;class e{constructor(r,i){this.auth=r,this.router=i}canActivate(){return!!this.auth.getUser()||(this.router.navigate(["/login"]),!1)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(UI),p.LFG(zi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),w8=(()=>{var n;class e{constructor(r,i,s){this.fb=r,this.auth=i,this.router=s,this.avatarFile=null,this.registration=new Ar({email:new kr("",[rr.required,rr.email]),password:new kr("",rr.required),displayName:new kr("",rr.required),department:new kr("",rr.required),phoneNumber:new kr("",rr.required),photoURL:new kr("")})}OnSubmit(){this.registration.valid?this.register():console.log("There was an error")}register(){const f=this.registration.value.photoURL;this.auth.register(this.registration.value.email,this.registration.value.password,this.registration.value.department,this.registration.value.displayName,this.registration.value.phoneNumber,f).then(_=>{f&&(this.auth.uploadAvatarStorage(this.avatarFile,_.uid),this.router.navigate(["login"]))}).catch(_=>{console.log(_)})}onFileSelected(r){const i=r.target.files[0];i&&(this.avatarFile=i)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Ub),p.Y36(UI),p.Y36(zi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],decls:29,vars:2,consts:[[3,"formGroup","ngSubmit"],["for","displayName"],["type","text","name","displayName","id","displayName","formControlName","displayName","required",""],["for","email"],["type","email","name","email","formControlName","email","required",""],["for","password"],["type","password","name","password","id","password","formControlName","password","required",""],["for","department"],["name","department","id","department","formControlName","department"],["value","police"],["value","muncipality"],["for","phoneNumber"],["type","text","name","phoneNumber","id","phoneNumber","formControlName","phoneNumber","required",""],["for","photoURL"],["type","file","name","photoURL","id","photoURL","formControlName","photoURL","accept","image/","required","",3,"change"],["type","submit",3,"disabled"],["routerLink","/login"]],template:function(r,i){1&r&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return i.OnSubmit()}),p.TgZ(1,"label",1),p._uU(2,"Username"),p.qZA(),p._UZ(3,"input",2),p.TgZ(4,"label",3),p._uU(5,"Email"),p.qZA(),p._UZ(6,"input",4),p.TgZ(7,"label",5),p._uU(8,"Password"),p.qZA(),p._UZ(9,"input",6),p.TgZ(10,"label",7),p._uU(11,"Department"),p.qZA(),p.TgZ(12,"select",8)(13,"option",9),p._uU(14,"Police"),p.qZA(),p.TgZ(15,"option",10),p._uU(16,"Muncipality"),p.qZA()(),p.TgZ(17,"label",11),p._uU(18,"Phone Number"),p.qZA(),p._UZ(19,"input",12),p.TgZ(20,"label",13),p._uU(21,"Avatar"),p.qZA(),p.TgZ(22,"input",14),p.NdJ("change",function(u){return i.onFileSelected(u)}),p.qZA(),p.TgZ(23,"button",15),p._uU(24,"Register Now!"),p.qZA(),p.TgZ(25,"h4"),p._uU(26,"Already having account?"),p.TgZ(27,"a",16),p._uU(28,"Click here to log-in!"),p.qZA()()()),2&r&&(p.Q6J("formGroup",i.registration),p.xp6(23),p.Q6J("disabled",i.registration.invalid))},dependencies:[vf,ee,G_,bd,Io,$_,Zc,Cs,Dd,zo,Qh],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid black;padding:20px;margin:auto;width:50%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;padding:6px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#c2fbd7;border-radius:100px;box-shadow:#2cbb6333 0 -25px 18px -14px inset,#2cbb6326 0 1px 2px,#2cbb6326 0 2px 4px,#2cbb6326 0 4px 8px,#2cbb6326 0 8px 16px,#2cbb6326 0 16px 32px;color:green;cursor:pointer;display:inline-block;font-family:CerebriSans-Regular,-apple-system,system-ui,Roboto,sans-serif;padding:7px 20px;text-align:center;text-decoration:none;transition:all .25s;border:0;font-size:16px;user-select:none;-webkit-user-select:none;touch-action:manipulation}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:#2cbb6359 0 -25px 18px -14px inset,#2cbb6340 0 1px 2px,#2cbb6340 0 2px 4px,#2cbb6340 0 4px 8px,#2cbb6340 0 8px 16px,#2cbb6340 0 16px 32px;transform:scale(1.05) rotate(-1deg)}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}"]}),e})();function A8(n,e){1&n&&p._UZ(0,"img",11),2&n&&p.Q6J("src",e.$implicit,p.LSH)}function b8(n,e){if(1&n&&(p.TgZ(0,"div")(1,"p")(2,"strong"),p._uU(3,"First Name:"),p.qZA(),p._uU(4),p.qZA(),p.TgZ(5,"p")(6,"strong"),p._uU(7,"Last Name:"),p.qZA(),p._uU(8),p.qZA(),p.TgZ(9,"p")(10,"strong"),p._uU(11,"Date:"),p.qZA(),p._uU(12),p.qZA(),p.TgZ(13,"p")(14,"strong"),p._uU(15,"Time:"),p.qZA(),p._uU(16),p.qZA(),p.TgZ(17,"p")(18,"strong"),p._uU(19,"Reason:"),p.qZA(),p._uU(20),p.qZA(),p.TgZ(21,"p")(22,"strong"),p._uU(23,"Price:"),p.qZA(),p._uU(24),p.qZA(),p.TgZ(25,"p")(26,"strong"),p._uU(27,"Issuer:"),p.qZA(),p._uU(28),p.qZA(),p.TgZ(29,"div",9),p.YNc(30,A8,1,1,"img",10),p.qZA()()),2&n){const t=p.oxw();p.xp6(4),p.Oqu(t.fineData.firstname),p.xp6(4),p.Oqu(t.fineData.lastname),p.xp6(4),p.Oqu(t.fineData.date),p.xp6(4),p.Oqu(t.fineData.time),p.xp6(4),p.Oqu(t.fineData.reason),p.xp6(4),p.hij("",t.fineData.price," \u043b\u0432."),p.xp6(4),p.Oqu(t.fineData.issuer),p.xp6(2),p.Q6J("ngForOf",t.fineData.image)}}let D8=(()=>{var n;class e{constructor(r,i){this.route=r,this.fb=i,this.db=TA(),this.modify=this.fb.group({firstname:[""],lastname:[""],price:[""]})}ngOnInit(){var r=this;return(0,$.Z)(function*(){const i=r.route.snapshot.paramMap.get("id");if(i)try{const s=Jm(r.db,"fines",i),u=yield fP(s);zG(s,d=>{d.exists()?(r.fineData=d.data(),r.modify.patchValue(r.fineData)):console.log("Fine document does not exist")}),u.exists()?r.fineData=u.data():console.log("Fine document does not exist")}catch(s){console.error("Error fetching fine document:",s)}})()}onSubmit(){var r=this;return(0,$.Z)(function*(){const i=r.route.snapshot.paramMap.get("id");if(i)try{const s=Jm(r.db,"fines",i),u=HG(),d={...r.modify.value,timestamp:u},f=yield fP(s);if(f.exists()){const _=f.data(),I={};for(const b in d)d[b]!==_[b]&&""!==d[b]&&(I[b]=d[b]);Object.keys(I).length>0?yield jG(s,I):console.log("error")}}catch(s){console.error("Error fetching fine document:",s)}else console.log("Fine document does not exist")})()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(ec),p.Y36(Ub))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-finedetails"]],decls:13,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],["for","firstname"],["type","text","formControlName","firstname"],["for","lastname"],["type","text","formControlName","lastname"],["for","price"],["type","text","formControlName","price"],["type","submit"],[1,"images"],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(r,i){1&r&&(p.YNc(0,b8,31,8,"div",0),p.TgZ(1,"form",1),p.NdJ("ngSubmit",function(){return i.onSubmit()}),p.TgZ(2,"label",2),p._uU(3,"Firstname"),p.qZA(),p._UZ(4,"input",3),p.TgZ(5,"label",4),p._uU(6,"Lastname"),p.qZA(),p._UZ(7,"input",5),p.TgZ(8,"label",6),p._uU(9,"Price: "),p.qZA(),p._UZ(10,"input",7),p.TgZ(11,"button",8),p._uU(12,"Save"),p.qZA()()),2&r&&(p.Q6J("ngIf",i.fineData),p.xp6(1),p.Q6J("formGroup",i.modify))},dependencies:[Rr,Ru,ee,Io,Zc,Cs,zo,Qh],styles:[".images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}"]}),e})();function C8(n,e){if(1&n&&(p.TgZ(0,"ul")(1,"li"),p._uU(2),p.qZA(),p.TgZ(3,"li"),p._uU(4),p.qZA(),p.TgZ(5,"li"),p._uU(6),p.qZA(),p.TgZ(7,"li"),p._uU(8),p.qZA(),p.TgZ(9,"li"),p._uU(10),p.qZA()()),2&n){const t=e.$implicit;p.xp6(2),p.hij("Firstname:",t.firstname,""),p.xp6(2),p.hij("Lastname:",t.lastname,""),p.xp6(2),p.hij("Date: ",t.date,""),p.xp6(2),p.hij("Time: ",t.time,""),p.xp6(2),p.hij("Reason: ",t.reason,"")}}const S8=[{path:"",component:T8,canActivate:[jF]},{path:"login",component:p8},{path:"register",component:w8},{path:"finedetails/:id",component:D8,canActivate:[jF]},{path:"profile/:id",component:(()=>{var n;class e{constructor(r){this.authService=r,this.user=this.authService.getUser(),this.lastFines=[]}ngOnInit(){this.getLastFines()}getLastFines(){const s=OG(rP(TA(),"fines"),FG("issueruid","==",this.user?.uid),function YW(n){return function vG(n,e){if(e<=0)throw new Le(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),cP._create("limit",n,"F")}(3),function QW(n,e="asc"){const t=e,r=uP("orderBy",n);return sF._create(r,t)}("timestamp","desc"));this.lastFines=[],function t5(n){n=En(n,Ns);const e=En(n.firestore,_r),t=Di(e),r=new up(e);return kG(n._query),function pG(n,e,t={}){const r=new Ki;return n.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function(s,u,d,f,_){const I=new JR({next:x=>{u.enqueueAndForget(()=>fO(s,b)),x.fromCache&&"server"===f.source?_.reject(new Le(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new mO(d,I,{includeMetadataChanges:!0,W_:!0});return dO(s,b)}(yield CI(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new MI(e,r,n,i))}(s).then(u=>{u.forEach(d=>{this.lastFines.push(d.data())})})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-profile"]],decls:11,vars:5,consts:[["alt","",3,"src"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(p._UZ(0,"app-navbar"),p.TgZ(1,"p"),p._uU(2),p.qZA(),p._UZ(3,"img",0),p.TgZ(4,"p"),p._uU(5),p.qZA(),p.TgZ(6,"p"),p._uU(7),p.qZA(),p.TgZ(8,"h3"),p._uU(9,"Last issued fines by you"),p.qZA(),p.YNc(10,C8,11,5,"ul",1)),2&r&&(p.xp6(2),p.Oqu(null==i.user?null:i.user.displayName),p.xp6(1),p.Q6J("src",i.authService.currentlySignedInUserAvatarURL,p.LSH),p.xp6(2),p.Oqu(null==i.user?null:i.user.phoneNumber),p.xp6(2),p.Oqu(null==i.user?null:i.user.email),p.xp6(3),p.Q6J("ngForOf",i.lastFines))},dependencies:[Rr,sz]}),e})(),canActivate:[jF]}];let R8=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[AT.forRoot(S8),AT]}),e})(),P8=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[sy]}),e})();O(2659);class az{constructor(){return(0,Lr.vb)("auth")}}const uz="@firebase/firestore";class _s{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_s.UNAUTHENTICATED=new _s(null),_s.GOOGLE_CREDENTIALS=new _s("google-credentials-uid"),_s.FIRST_PARTY=new _s("first-party-uid"),_s.MOCK_USER=new _s("mock-user");let BI="9.23.0";const cp=new us.Yd("@firebase/firestore");function qF(){return cp.logLevel}function qe(n,...e){if(cp.logLevel<=us.in.DEBUG){const t=e.map(WF);cp.debug(`Firestore (${BI}): ${n}`,...t)}}function hi(n,...e){if(cp.logLevel<=us.in.ERROR){const t=e.map(WF);cp.error(`Firestore (${BI}): ${n}`,...t)}}function pc(n,...e){if(cp.logLevel<=us.in.WARN){const t=e.map(WF);cp.warn(`Firestore (${BI}): ${n}`,...t)}}function WF(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${BI}) INTERNAL ASSERTION FAILED: `+n;throw hi(e),new Error(e)}function Ct(n,e){n||It()}function dt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends rt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_s.UNAUTHENTICATED))}shutdown(){}}class O8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class F8{constructor(e){this.t=e,this.currentUser=_s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=u;e.enqueueRetryable((0,$.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},f=_=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new cz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new _s(e)}}class L8{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=_s.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class V8{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new L8(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_s.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U8{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new lz(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function B8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dz{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=B8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function $I(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ur{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ur(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new Ur(0,0))}static max(){return new Rt(new Ur(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class OA{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===OA.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof OA?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends OA{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const $8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends OA{construct(e,t,r){return new fi(e,t,r)}static isValidIdentifier(e){return $8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ve(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ve(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ve(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Ve(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(t)}static emptyPath(){return new fi([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(bn.fromString(e))}static fromName(e){return new ot(bn.fromString(e).popFirst(5))}static empty(){return new ot(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new bn(e.slice()))}}function pz(n){return new xa(n.readTime,n.key,-1)}class xa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xa(Rt.min(),ot.empty(),-1)}static max(){return new xa(Rt.max(),ot.empty(),-1)}}function ZF(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ot.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const gz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lp(n){return QF.apply(this,arguments)}function QF(){return QF=(0,$.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==gz)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),QF.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;t(e[_]).next(I=>{u[_]=I,++d,d===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new ae((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function dp(n){return"IndexedDbTransactionError"===n.name}let Ma=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function VA(n){return null==n}function UA(n){return 0===n&&1/n==-1/0}function Az(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class dr{constructor(e,t){this.comparator=e,this.root=t||Os.EMPTY}insert(e,t){return new dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Os.BLACK,null,null))}remove(e){return new dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new FP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new FP(this.root,e,this.comparator,!1)}getReverseIterator(){return new FP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new FP(this.root,e,this.comparator,!0)}}class FP{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Os{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Os.RED,this.left=i??Os.EMPTY,this.right=s??Os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Os(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Os.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1,Os.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Os(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yr{constructor(e){this.comparator=e,this.data=new dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dz(this.data.getIterator())}getIteratorFrom(e){return new Dz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yr(this.comparator);return t.data=e,t}}class Dz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Yo{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new Yo([])}unionWith(e){let t=new yr(fi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $I(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Cz("Invalid base64 string: "+i):i}}(e);return new Yi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Yi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const f7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fp(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=f7.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kr(n.seconds),nanos:Kr(n.nanos)}}function Kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function lh(n){return"string"==typeof n?Yi.fromBase64String(n):Yi.fromUint8Array(n)}function LP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function VP(n){const e=n.mapValue.fields.__previous_value__;return LP(e)?VP(e):e}function BA(n){const e=fp(n.mapValue.fields.__local_write_time__.timestampValue);return new Ur(e.seconds,e.nanos)}class p7{constructor(e,t,r,i,s,u,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class o_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new o_("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof o_&&e.projectId===this.projectId&&e.database===this.database}}const pp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LP(n)?4:xz(n)?9007199254740991:10:It()}function Fl(n,e){if(n===e)return!0;const t=gp(n);if(t!==gp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return BA(n).isEqual(BA(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=fp(r.timestampValue),u=fp(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,lh(n.bytesValue).isEqual(lh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Kr(r.geoPointValue.latitude)===Kr(i.geoPointValue.latitude)&&Kr(r.geoPointValue.longitude)===Kr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Kr(r.integerValue)===Kr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Kr(r.doubleValue),u=Kr(i.doubleValue);return s===u?UA(s)===UA(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return $I(n.arrayValue.values||[],e.arrayValue.values||[],Fl);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Az(s)!==Az(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!Fl(s[d],u[d])))return!1;return!0}(n,e);default:return It()}var i}function $A(n,e){return void 0!==(n.values||[]).find(t=>Fl(t,e))}function mp(n,e){if(n===e)return 0;const t=gp(n),r=gp(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Kr(i.integerValue||i.doubleValue),d=Kr(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return Sz(n.timestampValue,e.timestampValue);case 4:return Sz(BA(n),BA(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=lh(i),d=lh(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let f=0;f<u.length&&f<d.length;f++){const _=Wt(u[f],d[f]);if(0!==_)return _}return Wt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Wt(Kr(i.latitude),Kr(s.latitude));return 0!==u?u:Wt(Kr(i.longitude),Kr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let f=0;f<u.length&&f<d.length;++f){const _=mp(u[f],d[f]);if(_)return _}return Wt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===pp.mapValue&&s===pp.mapValue)return 0;if(i===pp.mapValue)return 1;if(s===pp.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),f=s.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let I=0;I<d.length&&I<_.length;++I){const b=Wt(d[I],_[I]);if(0!==b)return b;const x=mp(u[d[I]],f[_[I]]);if(0!==x)return x}return Wt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw It()}}function Sz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=fp(n),r=fp(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function jI(n){return XF(n)}function XF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fp(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?lh(n.bytesValue).toBase64():"referenceValue"in n?ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=XF(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${XF(r.fields[d])}`;return s+"}"}(n.mapValue):It();var e}function eL(n){return!!n&&"integerValue"in n}function GA(n){return!!n&&"arrayValue"in n}function Rz(n){return!!n&&"nullValue"in n}function Pz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $P(n){return!!n&&"mapValue"in n}function jA(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=jA(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jA(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Fs{constructor(e){this.value=e}static empty(){return new Fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$P(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jA(t)}setAll(e){let t=fi.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=jA(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());$P(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$P(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Fs(jA(this.value))}}class vr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new vr(e,0,Rt.min(),Rt.min(),Rt.min(),Fs.empty(),0)}static newFoundDocument(e,t,r,i){return new vr(e,1,t,Rt.min(),r,i,0)}static newNoDocument(e,t){return new vr(e,2,t,Rt.min(),Rt.min(),Fs.empty(),0)}static newUnknownDocument(e,t){return new vr(e,3,t,Rt.min(),Rt.min(),Fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _p{constructor(e,t){this.position=e,this.inclusive=t}}function Oz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?ot.comparator(ot.fromName(u.referenceValue),t.key):mp(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Fz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fl(n.position[t],e.position[t]))return!1;return!0}class zI{constructor(e,t="asc"){this.field=e,this.dir=t}}function _7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Lz{}class vn extends Lz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new y7(e,t,r):"array-contains"===t?new E7(e,r):"in"===t?new jz(e,r):"not-in"===t?new T7(e,r):"array-contains-any"===t?new w7(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new v7(e,r):new I7(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(mp(t,this.value)):null!==t&&gp(this.value)===gp(t)&&this.matchesComparison(mp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qn extends Lz{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new qn(e,t)}matches(e){return HI(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function HI(n){return"and"===n.op}function nL(n){return function Vz(n){for(const e of n.filters)if(e instanceof qn)return!1;return!0}(n)&&HI(n)}function rL(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+jI(n.value);if(nL(n))return n.filters.map(e=>rL(e)).join(",");{const e=n.filters.map(t=>rL(t)).join(",");return`${n.op}(${e})`}}function Uz(n,e){return n instanceof vn?(t=n,(r=e)instanceof vn&&t.op===r.op&&t.field.isEqual(r.field)&&Fl(t.value,r.value)):n instanceof qn?function(t,r){return r instanceof qn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&Uz(s,r.filters[u]),!0)}(n,e):void It();var t,r}function $z(n){return n instanceof vn?`${(e=n).field.canonicalString()} ${e.op} ${jI(e.value)}`:n instanceof qn?function(e){return e.op.toString()+" {"+e.getFilters().map($z).join(" ,")+"}"}(n):"Filter";var e}class y7 extends vn{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class v7 extends vn{constructor(e,t){super(e,"in",t),this.keys=Gz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class I7 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=Gz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ot.fromName(r.referenceValue))}class E7 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return GA(t)&&$A(t.arrayValue,this.value)}}class jz extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$A(this.value.arrayValue,t)}}class T7 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if($A(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$A(this.value.arrayValue,t)}}class w7 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!GA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$A(this.value.arrayValue,r))}}class A7{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.dt=null}}function iL(n,e=null,t=[],r=[],i=null,s=null,u=null){return new A7(n,e,t,r,i,s,u)}function u_(n){const e=dt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rL(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),VA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jI(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jI(r)).join(",")),e.dt=t}return e.dt}function zA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!_7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Uz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fz(n.startAt,e.startAt)&&Fz(n.endAt,e.endAt)}function GP(n){return ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class dh{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function qI(n){return new dh(n)}function Wz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function c_(n){const e=dt(n);if(null===e.wt){e.wt=[];const t=function zP(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function sL(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new zI(t)),e.wt.push(new zI(fi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zI(fi.keyField(),s))}}}return e.wt}function Co(n){const e=dt(n);if(!e._t)if("F"===e.limitType)e._t=iL(e.path,e.collectionGroup,c_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of c_(e))t.push(new zI(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new _p(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new _p(e.startAt.position,e.startAt.inclusive):null;e._t=iL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function HP(n,e,t){return new dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function HA(n,e){return zA(Co(n),Co(e))&&n.limitType===e.limitType}function Kz(n){return`${u_(Co(n))}|lt:${n.limitType}`}function uL(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>$z(r)).join(", ")}]`),VA(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jI(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jI(r)).join(",")),`Target(${t})`}(Co(n))}; limitType=${n.limitType})`}function qA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ot.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of c_(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=Oz(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,c_(t),r)||t.endAt&&!function(i,s,u){const d=Oz(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,c_(t),r)));var t,r}function Qz(n){return(e,t)=>{let r=!1;for(const i of c_(n)){const s=b7(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function b7(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),f=u.data.field(i);return null!==d&&null!==f?mp(d,f):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}class hh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function bz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const D7=new dr(ot.comparator);function Jo(){return D7}const Yz=new dr(ot.comparator);function WA(...n){let e=Yz;for(const t of n)e=e.insert(t.key,t);return e}function Jz(n){let e=Yz;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ll(){return KA()}function Xz(){return KA()}function KA(){return new hh(n=>n.toString(),(n,e)=>n.isEqual(e))}new dr(ot.comparator);const S7=new yr(ot.comparator);function on(...n){let e=S7;for(const t of n)e=e.add(t);return e}const R7=new yr(Wt);class qP{constructor(){this._=void 0}}function P7(n,e,t){return n instanceof WI?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&LP(i)&&(i=VP(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof l_?iH(n,e):n instanceof d_?sH(n,e):function(r,i){const s=function rH(n,e){return n instanceof KI?eL(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}(r,i),u=oH(s)+oH(r.gt);return eL(s)&&eL(r.gt)?function tH(n){return{integerValue:""+n}}(u):function eH(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:UA(e)?"-0":e}}(r.serializer,u)}(n,e)}function x7(n,e,t){return n instanceof l_?iH(n,e):n instanceof d_?sH(n,e):t}class WI extends qP{}class l_ extends qP{constructor(e){super(),this.elements=e}}function iH(n,e){const t=aH(e);for(const r of n.elements)t.some(i=>Fl(i,r))||t.push(r);return{arrayValue:{values:t}}}class d_ extends qP{constructor(e){super(),this.elements=e}}function sH(n,e){let t=aH(e);for(const r of n.elements)t=t.filter(i=>!Fl(i,r));return{arrayValue:{values:t}}}class KI extends qP{constructor(e,t){super(),this.serializer=e,this.gt=t}}function oH(n){return Kr(n.integerValue||n.doubleValue)}function aH(n){return GA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WP(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lL{}function uH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new QI(n.key,Cr.none()):new ZI(n.key,n.data,Cr.none());{const t=n.data,r=Fs.empty();let i=new yr(fi.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new fh(n.key,r,new Yo(i.toArray()),Cr.none())}}function k7(n,e,t){n instanceof ZI?function(r,i,s){const u=r.value.clone(),d=dH(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof fh?function(r,i,s){if(!WP(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=dH(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(lH(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function QA(n,e,t,r){return n instanceof ZI?function(i,s,u,d){if(!WP(i.precondition,s))return u;const f=i.value.clone(),_=hH(i.fieldTransforms,d,s);return f.setAll(_),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof fh?function(i,s,u,d){if(!WP(i.precondition,s))return u;const f=hH(i.fieldTransforms,d,s),_=s.data;return _.setAll(lH(i)),_.setAll(f),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,WP(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function cH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$I(t,r,(i,s)=>function M7(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof l_&&r instanceof l_||t instanceof d_&&r instanceof d_?$I(t.elements,r.elements,Fl):t instanceof KI&&r instanceof KI?Fl(t.gt,r.gt):t instanceof WI&&r instanceof WI);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ZI extends lL{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fh extends lL{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function lH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dH(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,x7(u,d,t[i]))}return r}function hH(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,P7(s,u,e))}return r}class QI extends lL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hL{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&k7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=QA(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=QA(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Xz();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const f=uH(u,d);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&$I(this.mutations,e.mutations,(t,r)=>cH(t,r))&&$I(this.baseMutations,e.baseMutations,(t,r)=>cH(t,r))}}class pL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class L7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ci,Dn;function pH(n){if(void 0===n)return hi("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Ci.OK:return fe.OK;case Ci.CANCELLED:return fe.CANCELLED;case Ci.UNKNOWN:return fe.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return fe.INTERNAL;case Ci.UNAVAILABLE:return fe.UNAVAILABLE;case Ci.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Ci.NOT_FOUND:return fe.NOT_FOUND;case Ci.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Ci.ABORTED:return fe.ABORTED;case Ci.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Ci.DATA_LOSS:return fe.DATA_LOSS;default:return It()}}(Dn=Ci||(Ci={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class gL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return KP}static getOrCreateInstance(){return null===KP&&(KP=new gL),KP}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let KP=null;const V7=new Au([4294967295,4294967295],0);function mH(n){const e=function gH(){return new TextEncoder}().encode(n),t=new fR;return t.update(e),new Uint8Array(t.digest())}function _H(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Au([t,r],0),new Au([i,s],0)]}class mL{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new YA(`Invalid padding: ${t}`);if(r<0)throw new YA(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new YA(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new YA(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Au.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Au.fromNumber(r)));return 1===i.compare(V7)&&(i=new Au([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=mH(e),[r,i]=_H(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new mL(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.It)return;const t=mH(e),[r,i]=_H(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class YA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class JA{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,XA.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new JA(Rt.min(),i,new dr(Wt),Jo(),on())}}class XA{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new XA(r,t,on(),on(),on())}}class ZP{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class yH{constructor(e,t){this.targetId=e,this.Vt=t}}class vH{constructor(e,t,r=Yi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class IH{constructor(){this.St=0,this.Dt=TH(),this.Ct=Yi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=on(),t=on(),r=on();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new XA(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=TH()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class U7{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Jo(),this.zt=EH(),this.Wt=new dr(Wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const u=s.target;if(GP(u))if(0===i){const d=new ot(u.path);this.Yt(r,d,vr.newNoDocument(d,Rt.min()))}else Ct(1===i);else{const d=this.ie(r);if(d!==i){const f=this.re(e,d);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=gL.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,I,b){var x,k,B,Q,Z,we;const Pe={localCacheCount:I,existenceFilterCount:b.count},be=b.unchangedNames;return be&&(Pe.bloomFilter={applied:0===_,hashCount:null!==(x=be?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(Q=null===(B=null===(k=be?.bits)||void 0===k?void 0:k.bitmap)||void 0===B?void 0:B.length)&&void 0!==Q?Q:0,padding:null!==(we=null===(Z=be?.bits)||void 0===Z?void 0:Z.padding)&&void 0!==we?we:0}),Pe}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let f,_;try{f=lh(s).toUint8Array()}catch(I){if(I instanceof Cz)return pc("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw I}try{_=new mL(f,u,d)}catch(I){return pc(I instanceof YA?"BloomFilter error: ":"Applying bloom filter failed: ",I),1}return 0===_.It?1:i!==t-this.oe(e.targetId,_)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const u=this.Gt.ue(),d=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const d=this.se(u);if(d){if(s.current&&GP(d.target)){const f=new ot(d.target.path);null!==this.jt.get(f)||this.ae(u,f)||this.Yt(u,f,vr.newNoDocument(f,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let r=on();this.zt.forEach((s,u)=>{let d=!0;u.forEachWhile(f=>{const _=this.se(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const i=new JA(e,t,this.Wt,this.jt,r);return this.jt=Jo(),this.zt=EH(),this.Wt=new dr(Wt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new IH,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new yr(Wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new IH),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function EH(){return new dr(ot.comparator)}function TH(){return new dr(ot.comparator)}const B7={asc:"ASCENDING",desc:"DESCENDING"},$7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G7={and:"AND",or:"OR"};class j7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _L(n,e){return n.useProto3Json||VA(e)?e:{value:e}}function pi(n){return Ct(!!n),Rt.fromTimestamp(function(e){const t=fp(e);return new Ur(t.seconds,t.nanos)}(n))}function AH(n){const e=bn.fromString(n);return Ct(NH(e)),e}function Vl(n,e){const t=AH(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(DH(t))}function vL(n,e){return function yL(n,e){return(t=n,new bn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}(n.databaseId,e)}function tb(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function DH(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function RH(n,e){return{documents:[vL(n,e.path)]}}function EL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=vL(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=vL(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return MH(qn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:yp((I=_).field),direction:Z7(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=_L(n,e.limit);var d,f;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function PH(n){let e=function bH(n){const e=AH(n);return 4===e.length?bn.emptyPath():DH(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(I){const b=xH(I);return b instanceof qn&&nL(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new zI(JI((b=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let d=null;t.limit&&(d=function(I){let b;return b="object"==typeof I?I.value:I,VA(b)?null:b}(t.limit));let f=null;var I;t.startAt&&(f=new _p((I=t.startAt).values||[],!!I.before));let _=null;return t.endAt&&(_=function(I){return new _p(I.values||[],!I.before)}(t.endAt)),function qz(n,e,t,r,i,s,u,d){return new dh(n,e,t,r,i,s,u,d)}(e,i,u,s,d,"F",f,_)}function xH(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=JI(e.unaryFilter.field);return vn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=JI(e.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=JI(e.unaryFilter.field);return vn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=JI(e.unaryFilter.field);return vn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):void 0!==n.fieldFilter?vn.create(JI((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return qn.create(e.compositeFilter.filters.map(t=>xH(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return It()}}(e.compositeFilter.op))}(n):It();var e}function Z7(n){return B7[n]}function Q7(n){return $7[n]}function Y7(n){return G7[n]}function yp(n){return{fieldPath:n.canonicalString()}}function JI(n){return fi.fromServerFormat(n.fieldPath)}function MH(n){return n instanceof vn?function(e){if("=="===e.op){if(Pz(e.value))return{unaryFilter:{field:yp(e.field),op:"IS_NAN"}};if(Rz(e.value))return{unaryFilter:{field:yp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pz(e.value))return{unaryFilter:{field:yp(e.field),op:"IS_NOT_NAN"}};if(Rz(e.value))return{unaryFilter:{field:yp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yp(e.field),op:Q7(e.op),value:e.value}}}(n):n instanceof qn?function(e){const t=e.getFilters().map(r=>MH(r));return 1===t.length?t[0]:{compositeFilter:{op:Y7(e.op),filters:t}}}(n):It()}function NH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ph{constructor(e,t,r,i,s=Rt.min(),u=Rt.min(),d=Yi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ph(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kH{constructor(e){this.fe=e}}function TL(n){const e=PH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?HP(e,e.limit,"L"):e}class g_{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Kr(e.integerValue));else if("doubleValue"in e){const r=Kr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),UA(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(lh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?xz(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):It()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),ot.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}g_.Ve=new g_;class aZ{constructor(){this.rn=new SL}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(xa.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(xa.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class SL{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yr(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yr(bn.comparator)).toArray()}}new Uint8Array(0);class oo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new oo(e,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}oo.DEFAULT_COLLECTION_PERCENTILE=10,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oo.DEFAULT=new oo(41943040,oo.DEFAULT_COLLECTION_PERCENTILE,oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oo.DISABLED=new oo(-1,0,0);class __{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new __(0)}static Mn(){return new __(-1)}}class fZ{constructor(){this.changes=new hh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class oq{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&QA(r.mutation,i,Yo.empty(),Ur.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,on()).next(()=>r))}getLocalViewOfDocuments(e,t,r=on()){const i=Ll();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=WA();return s.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Ll();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,on()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=Jo();const u=KA(),d=KA();return t.forEach((f,_)=>{const I=r.get(_.key);i.has(_.key)&&(void 0===I||I.mutation instanceof fh)?s=s.insert(_.key,_):void 0!==I?(u.set(_.key,I.mutation.getFieldMask()),QA(I.mutation,_,I.mutation.getFieldMask(),Ur.now())):u.set(_.key,Yo.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((_,I)=>u.set(_,I)),t.forEach((_,I)=>{var b;return d.set(_,new mZ(I,null!==(b=u.get(_))&&void 0!==b?b:null))}),d))}recalculateAndSaveOverlays(e,t){const r=KA();let i=new dr((u,d)=>u-d),s=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const _=t.get(f);if(null===_)return;let I=r.get(f)||Yo.empty();I=d.applyToLocalView(_,I),r.set(f,I);const b=(i.get(d.batchId)||on()).add(f);i=i.insert(d.batchId,b)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,I=f.value,b=Xz();I.forEach(x=>{if(!s.has(x)){const k=uH(t.get(x),r.get(x));null!==k&&b.set(x,k),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ae.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ot.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function oL(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ae.resolve(Ll());let d=-1,f=s;return u.next(_=>ae.forEach(_,(I,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),s.get(I)?ae.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,f,_,on())).next(I=>({batchId:d,changes:Jz(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(r=>{let i=WA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=WA();return this.indexManager.getCollectionParents(e,i).next(u=>ae.forEach(u,d=>{const f=(_=t,I=d.child(i),new dh(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,I;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(_=>{_.forEach((I,b)=>{s=s.insert(I,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const _=f.getKey();null===s.get(_)&&(s=s.insert(_,vr.newInvalidDocument(_)))});let u=WA();return s.forEach((d,f)=>{const _=i.get(d);void 0!==_&&QA(_.mutation,f,Yo.empty(),Ur.now()),qA(t,f)&&(u=u.insert(d,f))}),u})}}class _Z{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:pi(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:TL(r.bundledQuery),readTime:pi(r.readTime)}),ae.resolve();var r}}class yZ{constructor(){this.overlays=new dr(ot.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ll();return ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=Ll(),s=t.length+1,u=new ot(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new dr((_,I)=>_-I);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let I=s.get(_.largestBatchId);null===I&&(I=Ll(),s=s.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const d=Ll(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,I)=>d.set(_,I)),!(d.size()>=i)););return ae.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new pL(t,r));let s=this.ls.get(t);void 0===s&&(s=on(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class RL{constructor(){this.fs=new yr(vs.ds),this.ws=new yr(vs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new vs(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new vs(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ot(new bn([])),r=new vs(t,e),i=new vs(t,e+1),s=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ot(new bn([])),r=new vs(t,e),i=new vs(t,e+1);let s=on();return this.ws.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new vs(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vs{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ot.comparator(e.key,t.key)||Wt(e.As,t.As)}static _s(e,t){return Wt(e.As,t.As)||ot.comparator(e.key,t.key)}}class vZ{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new yr(vs.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const u=new hL(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.Rs=this.Rs.add(new vs(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vs(t,0),i=new vs(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],u=>{const d=this.Ps(u.As);s.push(d)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yr(Wt);return t.forEach(i=>{const s=new vs(i,0),u=new vs(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],d=>{r=r.add(d.As)})}),ae.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const u=new vs(new ot(s),0);let d=new yr(Wt);return this.Rs.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.As)),!0)},u),ae.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(t.mutations,i=>{const s=new vs(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new vs(t,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IZ{constructor(e){this.Ds=e,this.docs=new dr(ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(t))}getEntries(e,t){let r=Jo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vr.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Jo();const u=t.path,d=new ot(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:I}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||ZF(pz(I),r)<=0||(i.has(I.key)||qA(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,r,i){It()}Cs(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EZ(this)}getSize(e){return ae.resolve(this.size)}}class EZ extends fZ{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class TZ{constructor(e){this.persistence=e,this.xs=new hh(t=>u_(t),zA),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new RL,this.targetCount=0,this.Ms=__.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new __(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ae.waitFor(s).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class PL{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ma(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new TZ(this),this.indexManager=new aZ,this.remoteDocumentCache=new IZ(r=>this.referenceDelegate.Ls(r)),this.serializer=new kH(t),this.qs=new _Z(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yZ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new vZ(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new wZ(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return ae.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class wZ extends z8{constructor(e){super(),this.currentSequenceNumber=e}}class ix{constructor(e){this.persistence=e,this.Qs=new RL,this.js=null}static zs(e){return new ix(e)}get Ws(){if(this.js)return this.js;throw It()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,r=>{const i=ot.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Rt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class kL{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=on(),i=on();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kL(e,t.fromCache,r,i)}}class uq{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(Wz(t))return ae.resolve(null);let r=Co(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=HP(t,null,"F"),r=Co(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=on(...s);return this.Ui.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.ji(t,d);return this.zi(t,_,u,f.readTime)?this.Ki(e,HP(t,null,"F")):this.Wi(e,_,t,f)}))})))}Gi(e,t,r,i){return Wz(t)||i.isEqual(Rt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const u=this.ji(t,s);return this.zi(t,u,r,i)?this.Qi(e,t):(qF()<=us.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uL(t)),this.Wi(e,u,t,function fz(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new Ur(t+1,0):new Ur(t,r));return new xa(i,ot.empty(),e)}(i,-1)))})}ji(e,t){let r=new yr(Qz(e));return t.forEach((i,s)=>{qA(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return qF()<=us.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",uL(t)),this.Ui.getDocumentsMatchingQuery(e,t,xa.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class bZ{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new dr(Wt),this.Yi=new hh(s=>u_(s),zA),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oq(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function lq(n,e){return OL.apply(this,arguments)}function OL(){return OL=(0,$.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let f=on();for(const _ of i){u.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}for(const _ of s){d.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}return t.localDocuments.getDocuments(r,f).next(_=>({er:_,removedBatchIds:u,addedBatchIds:d}))})})}),OL.apply(this,arguments)}function dq(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function nE(n,e,t){return FL.apply(this,arguments)}function FL(){return FL=(0,$.Z)(function*(n,e,t){const r=dt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!dp(u))throw u;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),FL.apply(this,arguments)}function ax(n,e,t){const r=dt(n);let i=Rt.min(),s=on();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,f,_){const I=dt(d),b=I.Yi.get(_);return void 0!==b?ae.resolve(I.Ji.get(b)):I.Bs.getTargetData(f,_)}(r,u,Co(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,d.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Rt.min(),t?s:on())).next(d=>(function gq(n,e,t){let r=n.Xi.get(e)||Rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function Zz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,ir:s})))}class $L{constructor(){this.activeTargetIds=function cL(){return R7}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yq{constructor(){this.Hr=new $L,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new $L,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xZ{Yr(e){}shutdown(){}}class vq{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lx=null;function jL(){return null===lx?lx=268435456+Math.round(2147483648*Math.random()):lx++,"0x"+lx.toString(16)}const MZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NZ{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ao="WebChannelConnection";class kZ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const u=jL(),d=this.To(e,t);qe("RestConnection",`Sending RPC '${e}' ${u}:`,d,r);const f={};return this.Eo(f,i,s),this.Ao(e,d,f,r).then(_=>(qe("RestConnection",`Received RPC '${e}' ${u}: `,_),_),_=>{throw pc("RestConnection",`RPC '${e}' ${u} failed with error: `,_,"url: ",d,"request:",r),_})}vo(e,t,r,i,s,u){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+BI,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${MZ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=jL();return new Promise((u,d)=>{const f=new hR;f.setWithCredentials(!0),f.listenOnce(Gt.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case De.NO_ERROR:const I=f.getResponseJson();qe(ao,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case De.TIMEOUT:qe(ao,`RPC '${e}' ${s} timed out`),d(new Ve(fe.DEADLINE_EXCEEDED,"Request time out"));break;case De.HTTP_ERROR:const b=f.getStatus();if(qe(ao,`RPC '${e}' ${s} failed with status:`,b,"response text:",f.getResponseText()),b>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x?.error;if(k&&k.status&&k.message){const B=function(Q){const Z=Q.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Z)>=0?Z:fe.UNKNOWN}(k.status);d(new Ve(B,k.message))}else d(new Ve(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ve(fe.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{qe(ao,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(i);qe(ao,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=jL(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=it(),d=Tt(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new Wi({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");qe(ao,`Creating RPC '${e}' stream ${i}: ${I}`,f);const b=u.createWebChannel(I,f);let x=!1,k=!1;const B=new NZ({ro:Z=>{k?qe(ao,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(x||(qe(ao,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),qe(ao,`RPC '${e}' stream ${i} sending:`,Z),b.send(Z))},oo:()=>b.close()}),Q=(Z,we,Pe)=>{Z.listen(we,be=>{try{Pe(be)}catch(Be){setTimeout(()=>{throw Be},0)}})};return Q(b,Ca.EventType.OPEN,()=>{k||qe(ao,`RPC '${e}' stream ${i} transport opened.`)}),Q(b,Ca.EventType.CLOSE,()=>{k||(k=!0,qe(ao,`RPC '${e}' stream ${i} transport closed`),B.wo())}),Q(b,Ca.EventType.ERROR,Z=>{k||(k=!0,pc(ao,`RPC '${e}' stream ${i} transport errored:`,Z),B.wo(new Ve(fe.UNAVAILABLE,"The operation could not be completed")))}),Q(b,Ca.EventType.MESSAGE,Z=>{var we;if(!k){const Pe=Z.data[0];Ct(!!Pe);const Be=Pe.error||(null===(we=Pe[0])||void 0===we?void 0:we.error);if(Be){qe(ao,`RPC '${e}' stream ${i} received error:`,Be);const gt=Be.status;let mt=function(Zr){const bu=Ci[Zr];if(void 0!==bu)return pH(bu)}(gt),fn=Be.message;void 0===mt&&(mt=fe.INTERNAL,fn="Unknown error status: "+gt+" with message "+Be.message),k=!0,B.wo(new Ve(mt,fn)),b.close()}else qe(ao,`RPC '${e}' stream ${i} received:`,Pe),B._o(Pe)}}),Q(d,an.STAT_EVENT,Z=>{Z.stat===un.PROXY?qe(ao,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===un.NOPROXY&&qe(ao,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function dx(){return typeof document<"u"?document:null}function db(n){return new j7(n,!0)}class zL{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class OZ{constructor(e,t,r,i,s,u,d,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zL(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,$.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,$.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,$.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ve(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,$.Z)(function*(){e.state=0,e.start()}))}tu(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FZ extends OZ{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function q7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:It(),i=e.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(Ct(void 0===_||"string"==typeof _),Yi.fromBase64String(_||"")):(Ct(void 0===_||_ instanceof Uint8Array),Yi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(f){const _=void 0===f.code?fe.UNKNOWN:pH(f.code);return new Ve(_,f.message||"")}(u);t=new vH(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Vl(n,r.document.name),s=pi(r.document.updateTime),u=r.document.createTime?pi(r.document.createTime):Rt.min(),d=new Fs({mapValue:{fields:r.document.fields}}),f=vr.newFoundDocument(i,s,u,d);t=new ZP(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Vl(n,r.document),s=r.readTime?pi(r.readTime):Rt.min(),u=vr.newNoDocument(i,s);t=new ZP([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Vl(n,r.document);t=new ZP([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new L7(i,s);t=new yH(r.targetId,u)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Rt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Rt.min():s.readTime?pi(s.readTime):Rt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=tb(this.serializer),t.addTarget=function(i,s){let u;const d=s.target;if(u=GP(d)?{documents:RH(i,d)}:{query:EL(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=function wH(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(i,s.resumeToken);const f=_L(i,s.expectedCount);null!==f&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Rt.min())>0){u.readTime=function YI(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(i,s.snapshotVersion.toTimestamp());const f=_L(i,s.expectedCount);null!==f&&(u.expectedCount=f)}return u}(this.serializer,e);const r=function K7(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=tb(this.serializer),t.removeTarget=e,this.Wo(t)}}class VZ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(fe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(fe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class BZ{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(hi(t),this.mu=!1):qe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class $Z{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{r.enqueueAndForget((0,$.Z)(function*(){var f;Tp(u)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,$.Z)(function*(_){const I=dt(_);I.vu.add(4),yield rE(I),I.bu.set("Unknown"),I.vu.delete(4),yield hb(I)}),function(_){return f.apply(this,arguments)})(u))}))}),this.bu=new BZ(r,i)}}function hb(n){return qL.apply(this,arguments)}function qL(){return qL=(0,$.Z)(function*(n){if(Tp(n))for(const e of n.Ru)yield e(!0)}),qL.apply(this,arguments)}function rE(n){return WL.apply(this,arguments)}function WL(){return WL=(0,$.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),WL.apply(this,arguments)}function hx(n,e){const t=dt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),QL(t)?ZL(t):sE(t).Ko()&&KL(t,e))}function fb(n,e){const t=dt(n),r=sE(t);t.Au.delete(e),r.Ko()&&Eq(t,e),0===t.Au.size&&(r.Ko()?r.jo():Tp(t)&&t.bu.set("Unknown"))}function KL(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sE(n).su(e)}function Eq(n,e){n.Vu.qt(e),sE(n).iu(e)}function ZL(n){n.Vu=new U7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),sE(n).start(),n.bu.gu()}function QL(n){return Tp(n)&&!sE(n).Uo()&&n.Au.size>0}function Tp(n){return 0===dt(n).vu.size}function Tq(n){n.Vu=void 0}function GZ(n){return YL.apply(this,arguments)}function YL(){return YL=(0,$.Z)(function*(n){n.Au.forEach((e,t)=>{KL(n,e)})}),YL.apply(this,arguments)}function jZ(n,e){return JL.apply(this,arguments)}function JL(){return JL=(0,$.Z)(function*(n,e){Tq(n),QL(n)?(n.bu.Iu(e),ZL(n)):n.bu.set("Unknown")}),JL.apply(this,arguments)}function zZ(n,e,t){return XL.apply(this,arguments)}function XL(){return XL=(0,$.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof vH&&2===e.state&&e.cause)try{yield(r=(0,$.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fx(n,r)}else if(e instanceof ZP?n.Vu.Ht(e):e instanceof yH?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Rt.min()))try{const r=yield dq(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Vu.ce(s);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.Au.get(f);_&&i.Au.set(f,_.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach((d,f)=>{const _=i.Au.get(d);if(!_)return;i.Au.set(d,_.withResumeToken(Yi.EMPTY_BYTE_STRING,_.snapshotVersion)),Eq(i,d);const I=new ph(_.target,d,f,_.sequenceNumber);KL(i,I)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield fx(n,r)}var r}),XL.apply(this,arguments)}function fx(n,e,t){return eV.apply(this,arguments)}function eV(){return eV=(0,$.Z)(function*(n,e,t){if(!dp(e))throw e;n.vu.add(1),yield rE(n),n.bu.set("Offline"),t||(t=()=>dq(n.localStore)),n.asyncQueue.enqueueRetryable((0,$.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield hb(n)}))}),eV.apply(this,arguments)}function Dq(n,e){return oV.apply(this,arguments)}function oV(){return oV=(0,$.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Tp(t);t.vu.add(3),yield rE(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield hb(t)}),oV.apply(this,arguments)}function uV(){return uV=(0,$.Z)(function*(n,e){const t=dt(n);e?(t.vu.delete(2),yield hb(t)):e||(t.vu.add(2),yield rE(t),t.bu.set("Unknown"))}),uV.apply(this,arguments)}function sE(n){return n.Su||(n.Su=function(e,t,r){const i=dt(e);return i.fu(),new FZ(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:GZ.bind(null,n),ao:jZ.bind(null,n),nu:zZ.bind(null,n)}),n.Ru.push(function(){var e=(0,$.Z)(function*(t){t?(n.Su.Qo(),QL(n)?ZL(n):n.bu.set("Unknown")):(yield n.Su.stop(),Tq(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}class cV{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new cV(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oE(n,e){if(hi("AsyncQueue",`${e}: ${n}`),dp(n))return new Ve(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class aE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=WA(),this.sortedSet=new dr(this.comparator)}static emptySet(e){return new aE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new aE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Cq{constructor(){this.Cu=new dr(ot.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):It():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uE{constructor(e,t,r,i,s,u,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new uE(e,t,aE.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class YZ{constructor(){this.Nu=void 0,this.listeners=[]}}class JZ{constructor(){this.queries=new hh(e=>Kz(e),HA),this.onlineState="Unknown",this.ku=new Set}}function dV(){return dV=(0,$.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new YZ),i)try{s.Nu=yield t.onListen(r)}catch(u){const d=oE(u,`Initialization of query '${uL(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&pV(t)}),dV.apply(this,arguments)}function fV(){return fV=(0,$.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),fV.apply(this,arguments)}function XZ(n,e){const t=dt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.$u(i)&&(r=!0);u.Nu=i}}r&&pV(t)}function eQ(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function pV(n){n.ku.forEach(e=>{e.next()})}class gV{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uE(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=uE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Pq{constructor(e){this.key=e}}class xq{constructor(e){this.key=e}}class Mq{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=on(),this.mutatedKeys=on(),this.tc=Qz(e),this.ec=new aE(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Cq,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,b)=>{const x=i.get(I),k=qA(this.query,b)?b:null,B=!!x&&this.mutatedKeys.has(x.key),Q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Z=!1;x&&k?x.data.isEqual(k.data)?B!==Q&&(r.track({type:3,doc:k}),Z=!0):this.rc(x,k)||(r.track({type:2,doc:k}),Z=!0,(f&&this.tc(k,f)>0||_&&this.tc(k,_)<0)&&(d=!0)):!x&&k?(r.track({type:0,doc:k}),Z=!0):x&&!k&&(r.track({type:1,doc:x}),Z=!0,(f||_)&&(d=!0)),Z&&(k?(u=u.add(k),s=Q?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ec:u,ic:r,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((_,I)=>function(b,x){const k=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return k(b)-k(x)}(_.type,I.type)||this.tc(_.doc,I.doc)),this.oc(r);const u=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new uE(this.query,e.ec,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Cq,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=on(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new xq(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Pq(r))}),t}hc(e){this.Yu=e.ir,this.Zu=on();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return uE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class rQ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iQ{constructor(e){this.key=e,this.fc=!1}}class sQ{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new hh(d=>Kz(d),HA),this._c=new Map,this.mc=new Set,this.gc=new dr(ot.comparator),this.yc=new Map,this.Ic=new RL,this.Tc={},this.Ec=new Map,this.Ac=__.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function oQ(n,e){return mV.apply(this,arguments)}function mV(){return mV=(0,$.Z)(function*(n,e){const t=function UV(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gQ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cQ.bind(null,e),e.dc.nu=XZ.bind(null,e.eventManager),e.dc.Pc=eQ.bind(null,e.eventManager),e}(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const u=yield function tE(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,ae.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new ph(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Co(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function _V(n,e,t,r,i){return yV.apply(this,arguments)}(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&hx(t.remoteStore,u)}return i}),mV.apply(this,arguments)}function yV(){return yV=(0,$.Z)(function*(n,e,t,r,i){n.Rc=(b,x,k)=>{return(B=(0,$.Z)(function*(Q,Z,we,Pe){let be=Z.view.sc(we);be.zi&&(be=yield ax(Q.localStore,Z.query,!1).then(({documents:mt})=>Z.view.sc(mt,be)));const Be=Pe&&Pe.targetChanges.get(Z.targetId),gt=Z.view.applyChanges(be,Q.isPrimaryClient,Be);return SV(Q,Z.targetId,gt.cc),gt.snapshot}),function(Q,Z,we,Pe){return B.apply(this,arguments)})(n,b,x,k);var B};const s=yield ax(n.localStore,e,!0),u=new Mq(e,s.ir),d=u.sc(s.documents),f=XA.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(d,n.isPrimaryClient,f);SV(n,t,_.cc);const I=new rQ(e,t,u);return n.wc.set(e,I),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),yV.apply(this,arguments)}function aQ(n,e){return vV.apply(this,arguments)}function vV(){return vV=(0,$.Z)(function*(n,e){const t=dt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!HA(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),fb(t.remoteStore,r.targetId),cE(t,r.targetId)}).catch(lp))):(cE(t,r.targetId),yield nE(t.localStore,r.targetId,!0))}),vV.apply(this,arguments)}function Nq(n,e){return EV.apply(this,arguments)}function EV(){return EV=(0,$.Z)(function*(n,e){const t=dt(n);try{const r=yield function CZ(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((I,b)=>{const x=i.get(b);if(!x)return;d.push(t.Bs.removeMatchingKeys(s,I.removedDocuments,b).next(()=>t.Bs.addMatchingKeys(s,I.addedDocuments,b)));let k=x.withSequenceNumber(s.currentSequenceNumber);var B,Q,Z;null!==e.targetMismatches.get(b)?k=k.withResumeToken(Yi.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):I.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(I.resumeToken,r)),i=i.insert(b,k),Q=k,Z=I,(0===(B=x).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,k))});let f=Jo(),_=on();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),d.push(function hq(n,e,t){let r=on(),i=on();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Jo();return t.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Rt.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{nr:u,sr:i}})}(s,u,e.documentUpdates).next(I=>{f=I.nr,_=I.sr})),!r.isEqual(Rt.min())){const I=t.Bs.getLastRemoteSnapshotVersion(s).next(b=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(I)}return ae.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.yc.get(s);u&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?Ct(u.fc):i.removedDocuments.size>0&&(Ct(u.fc),u.fc=!1))}),yield gh(t,r,e)}catch(r){yield lp(r)}}),EV.apply(this,arguments)}function kq(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,u)=>{const d=u.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=dt(s);d.onlineState=u;let f=!1;d.queries.forEach((_,I)=>{for(const b of I.listeners)b.Mu(u)&&(f=!0)}),f&&pV(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cQ(n,e,t){return TV.apply(this,arguments)}function TV(){return TV=(0,$.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let u=new dr(ot.comparator);u=u.insert(s,vr.newNoDocument(s,Rt.min()));const d=on().add(s),f=new JA(Rt.min(),new Map,new dr(Wt),u,d);yield Nq(r,f),r.gc=r.gc.remove(s),r.yc.delete(e),RV(r)}else yield nE(r.localStore,e,!1).then(()=>cE(r,e,t)).catch(lp)}),TV.apply(this,arguments)}function cE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Oq(n,r)})}function Oq(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(fb(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),RV(n))}function SV(n,e,t){for(const r of t)r instanceof Pq?(n.Ic.addReference(r.key,e),fQ(n,r)):r instanceof xq?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Oq(n,r.key)):It()}function fQ(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.mc.add(r),RV(n))}function RV(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ot(bn.fromString(e)),r=n.Ac.next();n.yc.set(r,new iQ(t)),n.gc=n.gc.insert(t,r),hx(n.remoteStore,new ph(Co(qI(t.path)),r,"TargetPurposeLimboResolution",Ma.ct))}}function gh(n,e,t){return PV.apply(this,arguments)}function PV(){return PV=(0,$.Z)(function*(n,e,t){const r=dt(n),i=[],s=[],u=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,f)=>{u.push(r.Rc(f,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const I=kL.Li(f.targetId,_);s.push(I)}}))}),yield Promise.all(u),r.dc.nu(i),yield(d=(0,$.Z)(function*(f,_){const I=dt(f);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ae.forEach(_,x=>ae.forEach(x.Fi,k=>I.persistence.referenceDelegate.addReference(b,x.targetId,k)).next(()=>ae.forEach(x.Bi,k=>I.persistence.referenceDelegate.removeReference(b,x.targetId,k)))))}catch(b){if(!dp(b))throw b;qe("LocalStore","Failed to update sequence numbers: "+b)}for(const b of _){const x=b.targetId;if(!b.fromCache){const k=I.Ji.get(x),Q=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);I.Ji=I.Ji.insert(x,Q)}}}),function(f,_){return d.apply(this,arguments)})(r.localStore,s))}),PV.apply(this,arguments)}function pQ(n,e){return xV.apply(this,arguments)}function xV(){return xV=(0,$.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield lq(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(d=>{d.reject(new Ve(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gh(t,r.er)}var i}),xV.apply(this,arguments)}function gQ(n,e){const t=dt(n),r=t.yc.get(e);if(r&&r.fc)return on().add(r.key);{let i=on();const s=t._c.get(e);if(!s)return i;for(const u of s){const d=t.wc.get(u);i=i.unionWith(d.view.nc)}return i}}class px{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,$.Z)(function*(){t.serializer=db(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function cq(n,e,t,r){return new bZ(n,e,t,r)}(this.persistence,new uq,e.initialUser,this.serializer)}createPersistence(e){return new PL(ix.zs,this.serializer)}createSharedClientState(e){return new yq}terminate(){var e=this;return(0,$.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lE{initialize(e,t){var r=this;return(0,$.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kq(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pQ.bind(null,r.syncEngine),yield function aV(n,e){return uV.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JZ}createDatastore(e){const t=db(e.databaseInfo.databaseId),r=new kZ(e.databaseInfo);return new VZ(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>kq(this.syncEngine,d,0),u=vq.D()?new vq:new xZ,new $Z(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,f,_){const I=new sQ(r,i,s,u,d,f);return _&&(I.vc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,$.Z)(function*(t){const r=dt(t);qe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield rE(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SQ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_s.UNAUTHENTICATED,this.clientId=dz.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,$.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(qe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,$.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=oE(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function mx(n,e){return $V.apply(this,arguments)}function $V(){return $V=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,$.Z)(function*(s){r.isEqual(s)||(yield lq(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),$V.apply(this,arguments)}function GV(n,e){return jV.apply(this,arguments)}function jV(){return jV=(0,$.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function zV(n){return HV.apply(this,arguments)}(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Dq(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Dq(e.remoteStore,s)),n._onlineComponents=e}),jV.apply(this,arguments)}function HV(){return HV=(0,$.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function $q(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;pc("Error using user provided cache. Falling back to memory cache: "+t),yield mx(n,new px)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield mx(n,new px);return n._offlineComponents}),HV.apply(this,arguments)}function qV(){return qV=(0,$.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield GV(n,n._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield GV(n,new lE))),n._onlineComponents}),qV.apply(this,arguments)}function dE(n){return KV.apply(this,arguments)}function KV(){return KV=(0,$.Z)(function*(n){const e=yield function _x(n){return qV.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=oQ.bind(null,e.syncEngine),t.onUnlisten=aQ.bind(null,e.syncEngine),t}),KV.apply(this,arguments)}function Wq(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Kq=new Map;function Qq(n){if(ot.isDocumentKey(n))throw new Ve(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function vx(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}(n);throw new Ve(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class Jq{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function LQ(n,e,t,r){if(!0===e&&!0===r)throw new Ve(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Wq(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jq({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jq(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new k8;switch(t.type){case"firstParty":return new V8(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ve(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kq.get(e);t&&(qe("ComponentProvider","Removing Datastore"),Kq.delete(e),t.terminate())}(this),Promise.resolve()}}class gi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gi(this.firestore,e,this._key)}}class Ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Ul extends Ls{constructor(e,t,r){super(e,t,qI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gi(this.firestore,null,new ot(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function UQ(n,e,...t){if(n=(0,rt.m9)(n),function ZV(n,e,t){if(!t)throw new Ve(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("collection","path",e),n instanceof pb){const r=bn.fromString(e,...t);return Qq(r),new Ul(n,null,r)}{if(!(n instanceof gi||n instanceof Ul))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return Qq(r),new Ul(n.firestore,null,r)}}class $Q{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zL(this,"async_queue_retry"),this.Xc=()=>{const t=dx();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Qi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,$.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!dp(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,hi("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=cV.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&It()}verifyOperationInProgress(){}sa(){var e=this;return(0,$.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function QV(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ir extends pb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new $Q,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||e3(this),this._firestoreClient.terminate()}}function jQ(n,e){const t="object"==typeof n?n:(0,In.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,In._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,rt.P0)("firestore");s&&function VQ(n,e,t,r={}){var i;const s=(n=Tn(n,pb))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=_s.MOCK_USER;else{d=(0,rt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ve(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new _s(_)}n._authCredentials=new O8(new cz(d,f))}}(i,...s)}return i}function e3(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new p7(n._databaseId,d,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Wq(_.experimentalLongPollingOptions),_.useFetchStreams));var d,_;n._firestoreClient=new SQ(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class v_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new v_(Yi.fromBase64String(e))}catch(t){throw new Ve(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new v_(Yi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hE{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class YV{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const YQ=new RegExp("[~\\*/\\[\\]]");function Tx(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Ve(fe.INVALID_ARGUMENT,d+n+f)}class tU{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JQ extends tU{data(){return super.data()}}function wx(n,e){return"string"==typeof e?function Ex(n,e,t){if(e.search(YQ)>=0)throw Tx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hE(...e.split("."))._internalPath}catch{throw Tx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof hE?e._internalPath:e._delegate._internalPath}class eY{convertValue(e,t="none"){switch(gp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new YV(Kr(e.latitude),Kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=VP(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(BA(e));default:return null}}convertTimestamp(e){const t=fp(e);return new Ur(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);Ct(NH(r));const i=new o_(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||hi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class E_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gE extends tU{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Cx extends gE{data(e={}){return super.data(e)}}class mE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new E_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cx(this._firestore,this._userDataWriter,r.key,r,new E_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Cx(r._firestore,r._userDataWriter,u.doc.key,u.doc,new E_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new Cx(r._firestore,r._userDataWriter,u.doc.key,u.doc,new E_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return 0!==u.type&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),_=s.indexOf(u.doc.key)),{type:nY(u.type),doc:d,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}class Ap extends eY{constructor(e){super(),this.firestore=e}convertBytes(e){return new v_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gi(this.firestore,null,t)}}!function(n,e=!0){BI=In.SDK_VERSION,(0,In._registerComponent)(new gl.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Ir(new F8(t.getProvider("auth-internal")),new U8(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ve(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new o_(d.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,In.registerVersion)(uz,"3.13.0",n),(0,In.registerVersion)(uz,"3.13.0","esm2017")}();var gY={includeMetadataChanges:!1};function sU(n,e){return void 0===e&&(e=gY),new zr.y(function(t){var r=function rY(n,...e){var t,r,i;n=(0,rt.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||QV(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(QV(e[u])){const b=e[u];e[u]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[u+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[u+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let f,_,I;if(n instanceof gi)_=Tn(n.firestore,Ir),I=qI(n._key.path),f={next:b=>{e[u]&&e[u](function iU(n,e,t){const r=t.docs.get(e._key),i=new Ap(n);return new gE(n,i,e._key,r,new E_(t.hasPendingWrites,t.fromCache),e.converter)}(_,n,b))},error:e[u+1],complete:e[u+2]};else{const b=Tn(n,Ls);_=Tn(b.firestore,Ir),I=b._query;const x=new Ap(_);f={next:k=>{e[u]&&e[u](new mE(_,x,b,k))},error:e[u+1],complete:e[u+2]},function f3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(b,x,k,B){const Q=new gx(B),Z=new gV(x,Q,k);return b.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function lV(n,e){return dV.apply(this,arguments)}(yield dE(b),Z)})),()=>{Q.Dc(),b.asyncQueue.enqueueAndForget((0,$.Z)(function*(){return function hV(n,e){return fV.apply(this,arguments)}(yield dE(b),Z)}))}}(function Si(n){return n._firestoreClient||e3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}(_),I,d,f)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function TY(n,e){return void 0===e&&(e={}),function EY(n){return sU(n,{includeMetadataChanges:!0}).pipe((0,nn.U)(function(e){return e.docs}))}(n).pipe((0,nn.U)(function(t){return t.map(function(r){return function E3(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class Rx{constructor(e){return e}}const b3="firestore",uU=new p.OlP("angularfire2.firestore-instances");function bY(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Rx(r)}}const DY={provide:class wY{constructor(){return(0,Lr.vb)(b3)}},deps:[[new p.FiY,uU]]},CY={provide:Rx,useFactory:function AY(n,e){const t=(0,Lr.JM)(b3,n,e);return t&&new Rx(t)},deps:[[new p.FiY,uU],NI]};let D3=(()=>{class n{constructor(){(0,n_.KN)("angularfire",Lr.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[CY,DY]}),n})();function SY(n,...e){return{ngModule:D3,providers:[{provide:uU,useFactory:bY(n),multi:!0,deps:[p.R0b,p.zs3,Lr.HU,ZG,[new p.FiY,az],[new p.FiY,wP],...e]}]}}const RY=(0,Lr.u3)(TY,!0),PY=(0,Lr.u3)(UQ,!0),xY=(0,Lr.u3)(jQ,!0);let MY=(()=>{var n;class e{constructor(r){this.fs=r}getNotes(){let r=PY(this.fs,"fines-reasons");return RY(r,{idField:"id"})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Rx))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const C3={apiKey:"AIzaSyBfZwTw3O0jW8Kl43QRLCGchzJ8ie-0Aic",authDomain:"proben-proekt.firebaseapp.com",projectId:"proben-proekt",storageBucket:"proben-proekt.appspot.com",messagingSenderId:"542405012456",appId:"1:542405012456:web:af6d14aaf9c85ad1d2d25d",measurementId:"G-RKQXZGPE67"};let NY=(()=>{var n;class e{constructor(r){this.frauth=r,this.frauth.setPersistence("local").then(()=>{console.log("Firebase initialized with persistence.")}).catch(i=>{console.error("Error setting persistence:",i)})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(PA))},n.\u0275mod=p.oAB({type:n,bootstrap:[P8]}),n.\u0275inj=p.cJS({providers:[MY],imports:[Uc,R8,b5(()=>D5(C3)),SY(()=>xY()),A9,hc.hO.initializeApp(C3),D3,Bb,$b]}),e})();Gp().bootstrapModule(NY).catch(n=>console.error(n))},5619:(Et,Se,O)=>{O.d(Se,{X:()=>U});var p=O(8645);class U extends p.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const ie=super._subscribe(re);return!ie.closed&&re.next(this._value),ie}getValue(){const{hasError:re,thrownError:ie,_value:Ie}=this;if(re)throw ie;return this._throwIfClosed(),Ie}next(re){super.next(this._value=re)}}},5592:(Et,Se,O)=>{O.d(Se,{y:()=>Ue});var p=O(1887),U=O(7394),W=O(4850),re=O(8407),ie=O(2653),Ie=O(4674),ve=O(1441);let Ue=(()=>{class ce{constructor(me){me&&(this._subscribe=me)}lift(me){const Xe=new ce;return Xe.source=this,Xe.operator=me,Xe}subscribe(me,Xe,nt){const et=function q(ce){return ce&&ce instanceof p.Lv||function H(ce){return ce&&(0,Ie.m)(ce.next)&&(0,Ie.m)(ce.error)&&(0,Ie.m)(ce.complete)}(ce)&&(0,U.Nn)(ce)}(me)?me:new p.Hp(me,Xe,nt);return(0,ve.x)(()=>{const{operator:je,source:At}=this;et.add(je?je.call(et,At):At?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(me){try{return this._subscribe(me)}catch(Xe){me.error(Xe)}}forEach(me,Xe){return new(Xe=_e(Xe))((nt,et)=>{const je=new p.Hp({next:At=>{try{me(At)}catch(xe){et(xe),je.unsubscribe()}},error:et,complete:nt});this.subscribe(je)})}_subscribe(me){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(me)}[W.L](){return this}pipe(...me){return(0,re.U)(me)(this)}toPromise(me){return new(me=_e(me))((Xe,nt)=>{let et;this.subscribe(je=>et=je,je=>nt(je),()=>Xe(et))})}}return ce.create=Ke=>new ce(Ke),ce})();function _e(ce){var Ke;return null!==(Ke=ce??ie.config.Promise)&&void 0!==Ke?Ke:Promise}},8645:(Et,Se,O)=>{O.d(Se,{x:()=>ve});var p=O(5592),U=O(7394);const re=(0,O(2306).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(9039),Ie=O(1441);let ve=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ce=new Ue(this,this);return ce.operator=q,ce}_throwIfClosed(){if(this.closed)throw new re}next(q){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(q)}})}error(q){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ce}=this;for(;ce.length;)ce.shift().error(q)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ce,isStopped:Ke,observers:me}=this;return ce||Ke?U.Lc:(this.currentObservers=null,me.push(q),new U.w0(()=>{this.currentObservers=null,(0,ie.P)(me,q)}))}_checkFinalizedStatuses(q){const{hasError:ce,thrownError:Ke,isStopped:me}=this;ce?q.error(Ke):me&&q.complete()}asObservable(){const q=new p.y;return q.source=this,q}}return _e.create=(H,q)=>new Ue(H,q),_e})();class Ue extends ve{constructor(H,q){super(),this.destination=H,this.source=q}next(H){var q,ce;null===(ce=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ce||ce.call(q,H)}error(H){var q,ce;null===(ce=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ce||ce.call(q,H)}complete(){var H,q;null===(q=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===q||q.call(H)}_subscribe(H){var q,ce;return null!==(ce=null===(q=this.source)||void 0===q?void 0:q.subscribe(H))&&void 0!==ce?ce:U.Lc}}},1887:(Et,Se,O)=>{O.d(Se,{Hp:()=>nt,Lv:()=>ce});var p=O(4674),U=O(7394),W=O(2653),re=O(3894);function ie(){}const Ie=_e("C",void 0,void 0);function _e($e,Ne,ke){return{kind:$e,value:Ne,error:ke}}var H=O(7599),q=O(1441);class ce extends U.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,U.Nn)(Ne)&&Ne.add(this)):this.destination=xe}static create(Ne,ke,Qe){return new nt(Ne,ke,Qe)}next(Ne){this.isStopped?At(function Ue($e){return _e("N",$e,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?At(function ve($e){return _e("E",void 0,$e)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?At(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function me($e,Ne){return Ke.call($e,Ne)}class Xe{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ne)}catch(Qe){et(Qe)}}error(Ne){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ne)}catch(Qe){et(Qe)}else et(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(ke){et(ke)}}}class nt extends ce{constructor(Ne,ke,Qe){let se;if(super(),(0,p.m)(Ne)||!Ne)se={next:Ne??void 0,error:ke??void 0,complete:Qe??void 0};else{let Je;this&&W.config.useDeprecatedNextContext?(Je=Object.create(Ne),Je.unsubscribe=()=>this.unsubscribe(),se={next:Ne.next&&me(Ne.next,Je),error:Ne.error&&me(Ne.error,Je),complete:Ne.complete&&me(Ne.complete,Je)}):se=Ne}this.destination=new Xe(se)}}function et($e){W.config.useDeprecatedSynchronousErrorHandling?(0,q.O)($e):(0,re.h)($e)}function At($e,Ne){const{onStoppedNotification:ke}=W.config;ke&&H.z.setTimeout(()=>ke($e,Ne))}const xe={closed:!0,next:ie,error:function je($e){throw $e},complete:ie}},7394:(Et,Se,O)=>{O.d(Se,{Lc:()=>Ie,w0:()=>ie,Nn:()=>ve});var p=O(4674);const W=(0,O(2306).d)(_e=>function(q){_e(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ce,Ke)=>`${Ke+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var re=O(9039);class ie{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const me of q)me.remove(this);else q.remove(this);const{initialTeardown:ce}=this;if((0,p.m)(ce))try{ce()}catch(me){H=me instanceof W?me.errors:[me]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const me of Ke)try{Ue(me)}catch(Xe){H=H??[],Xe instanceof W?H=[...H,...Xe.errors]:H.push(Xe)}}if(H)throw new W(H)}}add(H){var q;if(H&&H!==this)if(this.closed)Ue(H);else{if(H instanceof ie){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(H)}}_hasParent(H){const{_parentage:q}=this;return q===H||Array.isArray(q)&&q.includes(H)}_addParent(H){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(H),q):q?[q,H]:H}_removeParent(H){const{_parentage:q}=this;q===H?this._parentage=null:Array.isArray(q)&&(0,re.P)(q,H)}remove(H){const{_finalizers:q}=this;q&&(0,re.P)(q,H),H instanceof ie&&H._removeParent(this)}}ie.EMPTY=(()=>{const _e=new ie;return _e.closed=!0,_e})();const Ie=ie.EMPTY;function ve(_e){return _e instanceof ie||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function Ue(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2653:(Et,Se,O)=>{O.d(Se,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(Et,Se,O)=>{O.d(Se,{E:()=>U});const U=new(O(5592).y)(ie=>ie.complete())},2459:(Et,Se,O)=>{O.d(Se,{D:()=>Ne});var p=O(4829),U=O(3093),W=O(5137),Ie=O(5592),Ue=O(4971),_e=O(4674),H=O(7103);function ce(ke,Qe){if(!ke)throw new Error("Iterable cannot be null");return new Ie.y(se=>{(0,H.f)(se,Qe,()=>{const Je=ke[Symbol.asyncIterator]();(0,H.f)(se,Qe,()=>{Je.next().then(Ge=>{Ge.done?se.complete():se.next(Ge.value)})},0,!0)})})}var Ke=O(8382),me=O(4026),Xe=O(4266),nt=O(3664),et=O(5726),je=O(9853),At=O(541);function Ne(ke,Qe){return Qe?function $e(ke,Qe){if(null!=ke){if((0,Ke.c)(ke))return function re(ke,Qe){return(0,p.Xf)(ke).pipe((0,W.R)(Qe),(0,U.Q)(Qe))}(ke,Qe);if((0,Xe.z)(ke))return function ve(ke,Qe){return new Ie.y(se=>{let Je=0;return Qe.schedule(function(){Je===ke.length?se.complete():(se.next(ke[Je++]),se.closed||this.schedule())})})}(ke,Qe);if((0,me.t)(ke))return function ie(ke,Qe){return(0,p.Xf)(ke).pipe((0,W.R)(Qe),(0,U.Q)(Qe))}(ke,Qe);if((0,et.D)(ke))return ce(ke,Qe);if((0,nt.T)(ke))return function q(ke,Qe){return new Ie.y(se=>{let Je;return(0,H.f)(se,Qe,()=>{Je=ke[Ue.h](),(0,H.f)(se,Qe,()=>{let Ge,ht;try{({value:Ge,done:ht}=Je.next())}catch(Br){return void se.error(Br)}ht?se.complete():se.next(Ge)},0,!0)}),()=>(0,_e.m)(Je?.return)&&Je.return()})}(ke,Qe);if((0,At.L)(ke))return function xe(ke,Qe){return ce((0,At.Q)(ke),Qe)}(ke,Qe)}throw(0,je.z)(ke)}(ke,Qe):(0,p.Xf)(ke)}},4829:(Et,Se,O)=>{O.d(Se,{Xf:()=>Ke});var p=O(7582),U=O(4266),W=O(4026),re=O(5592),ie=O(8382),Ie=O(5726),ve=O(9853),Ue=O(3664),_e=O(541),H=O(4674),q=O(3894),ce=O(4850);function Ke($e){if($e instanceof re.y)return $e;if(null!=$e){if((0,ie.c)($e))return function me($e){return new re.y(Ne=>{const ke=$e[ce.L]();if((0,H.m)(ke.subscribe))return ke.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}($e);if((0,U.z)($e))return function Xe($e){return new re.y(Ne=>{for(let ke=0;ke<$e.length&&!Ne.closed;ke++)Ne.next($e[ke]);Ne.complete()})}($e);if((0,W.t)($e))return function nt($e){return new re.y(Ne=>{$e.then(ke=>{Ne.closed||(Ne.next(ke),Ne.complete())},ke=>Ne.error(ke)).then(null,q.h)})}($e);if((0,Ie.D)($e))return je($e);if((0,Ue.T)($e))return function et($e){return new re.y(Ne=>{for(const ke of $e)if(Ne.next(ke),Ne.closed)return;Ne.complete()})}($e);if((0,_e.L)($e))return function At($e){return je((0,_e.Q)($e))}($e)}throw(0,ve.z)($e)}function je($e){return new re.y(Ne=>{(function xe($e,Ne){var ke,Qe,se,Je;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ke=(0,p.KL)($e);!(Qe=yield ke.next()).done;)if(Ne.next(Qe.value),Ne.closed)return}catch(Ge){se={error:Ge}}finally{try{Qe&&!Qe.done&&(Je=ke.return)&&(yield Je.call(ke))}finally{if(se)throw se.error}}Ne.complete()})})($e,Ne).catch(ke=>Ne.error(ke))})}},3019:(Et,Se,O)=>{O.d(Se,{T:()=>Ie});var p=O(7537),U=O(4829),W=O(6232),re=O(4564),ie=O(2459);function Ie(...ve){const Ue=(0,re.yG)(ve),_e=(0,re._6)(ve,1/0),H=ve;return H.length?1===H.length?(0,U.Xf)(H[0]):(0,p.J)(_e)((0,ie.D)(H,Ue)):W.E}},2096:(Et,Se,O)=>{O.d(Se,{of:()=>W});var p=O(4564),U=O(2459);function W(...re){const ie=(0,p.yG)(re);return(0,U.D)(re,ie)}},8251:(Et,Se,O)=>{O.d(Se,{x:()=>U});var p=O(1887);function U(re,ie,Ie,ve,Ue){return new W(re,ie,Ie,ve,Ue)}class W extends p.Lv{constructor(ie,Ie,ve,Ue,_e,H){super(ie),this.onFinalize=_e,this.shouldUnsubscribe=H,this._next=Ie?function(q){try{Ie(q)}catch(ce){ie.error(ce)}}:super._next,this._error=Ue?function(q){try{Ue(q)}catch(ce){ie.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},7398:(Et,Se,O)=>{O.d(Se,{U:()=>W});var p=O(9360),U=O(8251);function W(re,ie){return(0,p.e)((Ie,ve)=>{let Ue=0;Ie.subscribe((0,U.x)(ve,_e=>{ve.next(re.call(ie,_e,Ue++))}))})}},7537:(Et,Se,O)=>{O.d(Se,{J:()=>W});var p=O(1631),U=O(2737);function W(re=1/0){return(0,p.z)(U.y,re)}},1631:(Et,Se,O)=>{O.d(Se,{z:()=>Ue});var p=O(7398),U=O(4829),W=O(9360),re=O(7103),ie=O(8251),ve=O(4674);function Ue(_e,H,q=1/0){return(0,ve.m)(H)?Ue((ce,Ke)=>(0,p.U)((me,Xe)=>H(ce,me,Ke,Xe))((0,U.Xf)(_e(ce,Ke))),q):("number"==typeof H&&(q=H),(0,W.e)((ce,Ke)=>function Ie(_e,H,q,ce,Ke,me,Xe,nt){const et=[];let je=0,At=0,xe=!1;const $e=()=>{xe&&!et.length&&!je&&H.complete()},Ne=Qe=>je<ce?ke(Qe):et.push(Qe),ke=Qe=>{me&&H.next(Qe),je++;let se=!1;(0,U.Xf)(q(Qe,At++)).subscribe((0,ie.x)(H,Je=>{Ke?.(Je),me?Ne(Je):H.next(Je)},()=>{se=!0},void 0,()=>{if(se)try{for(je--;et.length&&je<ce;){const Je=et.shift();Xe?(0,re.f)(H,Xe,()=>ke(Je)):ke(Je)}$e()}catch(Je){H.error(Je)}}))};return _e.subscribe((0,ie.x)(H,Ne,()=>{xe=!0,$e()})),()=>{nt?.()}}(ce,Ke,_e,q)))}},3093:(Et,Se,O)=>{O.d(Se,{Q:()=>re});var p=O(7103),U=O(9360),W=O(8251);function re(ie,Ie=0){return(0,U.e)((ve,Ue)=>{ve.subscribe((0,W.x)(Ue,_e=>(0,p.f)(Ue,ie,()=>Ue.next(_e),Ie),()=>(0,p.f)(Ue,ie,()=>Ue.complete(),Ie),_e=>(0,p.f)(Ue,ie,()=>Ue.error(_e),Ie)))})}},3020:(Et,Se,O)=>{O.d(Se,{B:()=>ie});var p=O(4829),U=O(8645),W=O(1887),re=O(9360);function ie(ve={}){const{connector:Ue=(()=>new U.x),resetOnError:_e=!0,resetOnComplete:H=!0,resetOnRefCountZero:q=!0}=ve;return ce=>{let Ke,me,Xe,nt=0,et=!1,je=!1;const At=()=>{me?.unsubscribe(),me=void 0},xe=()=>{At(),Ke=Xe=void 0,et=je=!1},$e=()=>{const Ne=Ke;xe(),Ne?.unsubscribe()};return(0,re.e)((Ne,ke)=>{nt++,!je&&!et&&At();const Qe=Xe=Xe??Ue();ke.add(()=>{nt--,0===nt&&!je&&!et&&(me=Ie($e,q))}),Qe.subscribe(ke),!Ke&&nt>0&&(Ke=new W.Hp({next:se=>Qe.next(se),error:se=>{je=!0,At(),me=Ie(xe,_e,se),Qe.error(se)},complete:()=>{et=!0,At(),me=Ie(xe,H),Qe.complete()}}),(0,p.Xf)(Ne).subscribe(Ke))})(ce)}}function Ie(ve,Ue,..._e){if(!0===Ue)return void ve();if(!1===Ue)return;const H=new W.Hp({next:()=>{H.unsubscribe(),ve()}});return(0,p.Xf)(Ue(..._e)).subscribe(H)}},5137:(Et,Se,O)=>{O.d(Se,{R:()=>U});var p=O(9360);function U(W,re=0){return(0,p.e)((ie,Ie)=>{Ie.add(W.schedule(()=>ie.subscribe(Ie),re))})}},4664:(Et,Se,O)=>{O.d(Se,{w:()=>re});var p=O(4829),U=O(9360),W=O(8251);function re(ie,Ie){return(0,U.e)((ve,Ue)=>{let _e=null,H=0,q=!1;const ce=()=>q&&!_e&&Ue.complete();ve.subscribe((0,W.x)(Ue,Ke=>{_e?.unsubscribe();let me=0;const Xe=H++;(0,p.Xf)(ie(Ke,Xe)).subscribe(_e=(0,W.x)(Ue,nt=>Ue.next(Ie?Ie(Ke,nt,Xe,me++):nt),()=>{_e=null,ce()}))},()=>{q=!0,ce()}))})}},9397:(Et,Se,O)=>{O.d(Se,{b:()=>ie});var p=O(4674),U=O(9360),W=O(8251),re=O(2737);function ie(Ie,ve,Ue){const _e=(0,p.m)(Ie)||ve||Ue?{next:Ie,error:ve,complete:Ue}:Ie;return _e?(0,U.e)((H,q)=>{var ce;null===(ce=_e.subscribe)||void 0===ce||ce.call(_e);let Ke=!0;H.subscribe((0,W.x)(q,me=>{var Xe;null===(Xe=_e.next)||void 0===Xe||Xe.call(_e,me),q.next(me)},()=>{var me;Ke=!1,null===(me=_e.complete)||void 0===me||me.call(_e),q.complete()},me=>{var Xe;Ke=!1,null===(Xe=_e.error)||void 0===Xe||Xe.call(_e,me),q.error(me)},()=>{var me,Xe;Ke&&(null===(me=_e.unsubscribe)||void 0===me||me.call(_e)),null===(Xe=_e.finalize)||void 0===Xe||Xe.call(_e)}))}):re.y}},1954:(Et,Se,O)=>{O.d(Se,{o:()=>ie});var p=O(7394);class U extends p.w0{constructor(ve,Ue){super()}schedule(ve,Ue=0){return this}}const W={setInterval(Ie,ve,...Ue){const{delegate:_e}=W;return _e?.setInterval?_e.setInterval(Ie,ve,...Ue):setInterval(Ie,ve,...Ue)},clearInterval(Ie){const{delegate:ve}=W;return(ve?.clearInterval||clearInterval)(Ie)},delegate:void 0};var re=O(9039);class ie extends U{constructor(ve,Ue){super(ve,Ue),this.scheduler=ve,this.work=Ue,this.pending=!1}schedule(ve,Ue=0){var _e;if(this.closed)return this;this.state=ve;const H=this.id,q=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(q,H,Ue)),this.pending=!0,this.delay=Ue,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(q,this.id,Ue),this}requestAsyncId(ve,Ue,_e=0){return W.setInterval(ve.flush.bind(ve,this),_e)}recycleAsyncId(ve,Ue,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ue;null!=Ue&&W.clearInterval(Ue)}execute(ve,Ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ve,Ue);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ue){let H,_e=!1;try{this.work(ve)}catch(q){_e=!0,H=q||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ue}=this,{actions:_e}=Ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(_e,this),null!=ve&&(this.id=this.recycleAsyncId(Ue,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(Et,Se,O)=>{O.d(Se,{v:()=>W});var p=O(4552);class U{constructor(ie,Ie=U.now){this.schedulerActionCtor=ie,this.now=Ie}schedule(ie,Ie=0,ve){return new this.schedulerActionCtor(this,ie).schedule(ve,Ie)}}U.now=p.l.now;class W extends U{constructor(ie,Ie=U.now){super(ie,Ie),this.actions=[],this._active=!1}flush(ie){const{actions:Ie}=this;if(this._active)return void Ie.push(ie);let ve;this._active=!0;do{if(ve=ie.execute(ie.state,ie.delay))break}while(ie=Ie.shift());if(this._active=!1,ve){for(;ie=Ie.shift();)ie.unsubscribe();throw ve}}}},6321:(Et,Se,O)=>{O.d(Se,{z:()=>W});var p=O(1954);const W=new(O(2631).v)(p.o)},4552:(Et,Se,O)=>{O.d(Se,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(Et,Se,O)=>{O.d(Se,{z:()=>p});const p={setTimeout(U,W,...re){const{delegate:ie}=p;return ie?.setTimeout?ie.setTimeout(U,W,...re):setTimeout(U,W,...re)},clearTimeout(U){const{delegate:W}=p;return(W?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(Et,Se,O)=>{O.d(Se,{h:()=>U});const U=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Et,Se,O)=>{O.d(Se,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(Et,Se,O)=>{O.d(Se,{_6:()=>Ie,jO:()=>re,yG:()=>ie});var p=O(4674);function W(ve){return ve[ve.length-1]}function re(ve){return(0,p.m)(W(ve))?ve.pop():void 0}function ie(ve){return function U(ve){return ve&&(0,p.m)(ve.schedule)}(W(ve))?ve.pop():void 0}function Ie(ve,Ue){return"number"==typeof W(ve)?ve.pop():Ue}},9039:(Et,Se,O)=>{function p(U,W){if(U){const re=U.indexOf(W);0<=re&&U.splice(re,1)}}O.d(Se,{P:()=>p})},2306:(Et,Se,O)=>{function p(U){const re=U(ie=>{Error.call(ie),ie.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}O.d(Se,{d:()=>p})},1441:(Et,Se,O)=>{O.d(Se,{O:()=>re,x:()=>W});var p=O(2653);let U=null;function W(ie){if(p.config.useDeprecatedSynchronousErrorHandling){const Ie=!U;if(Ie&&(U={errorThrown:!1,error:null}),ie(),Ie){const{errorThrown:ve,error:Ue}=U;if(U=null,ve)throw Ue}}else ie()}function re(ie){p.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ie)}},7103:(Et,Se,O)=>{function p(U,W,re,ie=0,Ie=!1){const ve=W.schedule(function(){re(),Ie?U.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(U.add(ve),!Ie)return ve}O.d(Se,{f:()=>p})},2737:(Et,Se,O)=>{function p(U){return U}O.d(Se,{y:()=>p})},4266:(Et,Se,O)=>{O.d(Se,{z:()=>p});const p=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(Et,Se,O)=>{O.d(Se,{D:()=>U});var p=O(4674);function U(W){return Symbol.asyncIterator&&(0,p.m)(W?.[Symbol.asyncIterator])}},4674:(Et,Se,O)=>{function p(U){return"function"==typeof U}O.d(Se,{m:()=>p})},8382:(Et,Se,O)=>{O.d(Se,{c:()=>W});var p=O(4850),U=O(4674);function W(re){return(0,U.m)(re[p.L])}},3664:(Et,Se,O)=>{O.d(Se,{T:()=>W});var p=O(4971),U=O(4674);function W(re){return(0,U.m)(re?.[p.h])}},4026:(Et,Se,O)=>{O.d(Se,{t:()=>U});var p=O(4674);function U(W){return(0,p.m)(W?.then)}},541:(Et,Se,O)=>{O.d(Se,{L:()=>re,Q:()=>W});var p=O(7582),U=O(4674);function W(ie){return(0,p.FC)(this,arguments,function*(){const ve=ie.getReader();try{for(;;){const{value:Ue,done:_e}=yield(0,p.qq)(ve.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ue)}}finally{ve.releaseLock()}})}function re(ie){return(0,U.m)(ie?.getReader)}},9360:(Et,Se,O)=>{O.d(Se,{A:()=>U,e:()=>W});var p=O(4674);function U(re){return(0,p.m)(re?.lift)}function W(re){return ie=>{if(U(ie))return ie.lift(function(Ie){try{return re(Ie,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},8407:(Et,Se,O)=>{O.d(Se,{U:()=>W,z:()=>U});var p=O(2737);function U(...re){return W(re)}function W(re){return 0===re.length?p.y:1===re.length?re[0]:function(Ie){return re.reduce((ve,Ue)=>Ue(ve),Ie)}}},3894:(Et,Se,O)=>{O.d(Se,{h:()=>W});var p=O(2653),U=O(7599);function W(re){U.z.setTimeout(()=>{const{onUnhandledError:ie}=p.config;if(!ie)throw re;ie(re)})}},9853:(Et,Se,O)=>{function p(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>p})},8926:(Et,Se,O)=>{O.d(Se,{tb:()=>vm,AFp:()=>aD,ip1:()=>kS,hGG:()=>Tu,z2F:()=>Gf,Ojb:()=>Yx,sBO:()=>Fk,Sil:()=>Pk,EJc:()=>Rk,Xts:()=>af,SBq:()=>cy,lqb:()=>dl,qLn:()=>hf,vpe:()=>Iu,XFs:()=>Ot,OlP:()=>xn,zs3:()=>pl,ZZ4:()=>Jv,aQg:()=>M0,soG:()=>Vv,YKP:()=>fv,h0i:()=>Of,PXZ:()=>zS,R0b:()=>Ps,FiY:()=>Ks,Lbi:()=>JE,g9A:()=>uD,Qsj:()=>iT,FYo:()=>pD,JOm:()=>Fe,tp0:()=>Ed,Rgc:()=>am,dDg:()=>mm,eoX:()=>_m,q4F:()=>aM,GfV:()=>df,s_b:()=>Lf,ifc:()=>Vn,VuI:()=>cR,MMx:()=>WN,Lck:()=>qN,eFA:()=>w0,Gpc:()=>At,f3M:()=>pe,X6Q:()=>WS,$WT:()=>xo,_c5:()=>rR,qFp:()=>Fn,rg0:()=>ua,c2e:()=>OS,zSh:()=>J_,HDt:()=>Bv,wAp:()=>Hd,vHH:()=>se,lri:()=>fs,rWj:()=>v0,cg1:()=>Yg,kL8:()=>ev,dqk:()=>Yt,Z0I:()=>Us,eJc:()=>um,QGY:()=>LT,F4k:()=>wC,RDi:()=>Qu,AaK:()=>nt,qOj:()=>JD,Xq5:()=>DT,TTD:()=>Sc,_Bn:()=>oS,jDz:()=>gv,xp6:()=>lT,uIk:()=>Ey,ekj:()=>Vy,Suo:()=>bv,Xpm:()=>Pu,lG2:()=>ei,Yz7:()=>ye,cJS:()=>Gn,oAB:()=>Ih,Yjl:()=>Eh,Y36:()=>gf,_UZ:()=>Cy,BQk:()=>Sy,ynx:()=>zg,qZA:()=>Df,TgZ:()=>jg,EpF:()=>Ry,n5z:()=>yd,LFG:()=>V,$8M:()=>pa,$Z:()=>Pg,NdJ:()=>Hr,CRH:()=>jt,oxw:()=>DC,Q6J:()=>Dy,s9C:()=>Py,MGl:()=>Cf,iGM:()=>qo,KtG:()=>Ph,CHM:()=>R_,LSH:()=>zE,P3R:()=>eD,YNc:()=>MT,_uU:()=>jy,Oqu:()=>Zg,hij:()=>Qg});var p=O(8645),U=O(7394),W=O(5619),re=O(5592),ie=O(3019),Ie=O(2096),ve=O(3020),Ue=O(4664),_e=O(2737),H=O(9360),q=O(8251);function Ke(o,a){return o===a}function me(o){for(let a in o)if(o[a]===me)return a;throw Error("Could not find renamed property on target object.")}function Xe(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function nt(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(nt).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function et(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const je=me({__forward_ref__:me});function At(o){return o.__forward_ref__=At,o.toString=function(){return nt(this())},o}function xe(o){return $e(o)?o():o}function $e(o){return"function"==typeof o&&o.hasOwnProperty(je)&&o.__forward_ref__===At}function Ne(o){return o&&!!o.\u0275providers}const Qe="https://g.co/ng/security#xss";class se extends Error{constructor(a,c){super(function Je(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function Ge(o){return"string"==typeof o?o:null==o?"":String(o)}function Vs(o,a){throw new se(-201,!1)}function wt(o,a){null==o&&function _t(o,a,c,l){throw new Error(`ASSERTION ERROR: ${o}`+(null==l?"":` [Expected=> ${c} ${l} ${a} <=Actual]`))}(a,o,null,"!=")}function ye(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Gn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Is(o){return uo(o,Nn)||uo(o,Bt)}function Us(o){return null!==Is(o)}function uo(o,a){return o.hasOwnProperty(a)?o[a]:null}function Na(o){return o&&(o.hasOwnProperty(Kt)||o.hasOwnProperty(mi))?o[Kt]:null}const Nn=me({\u0275prov:me}),Kt=me({\u0275inj:me}),Bt=me({ngInjectableDef:me}),mi=me({ngInjectorDef:me});var Ot=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Ot||{});let en;function ln(o){const a=en;return en=o,a}function Xo(o,a,c){const l=Is(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&Ot.Optional?null:void 0!==a?a:void Vs(nt(o))}const Yt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Pi={},Jr="__NG_DI_FLAG__",Ji="ngTempTokenPath",_i=/\n/gm,Xi="__source";let Xr;function yi(o){const a=Xr;return Xr=o,a}function z(o,a=Ot.Default){if(void 0===Xr)throw new se(-203,!1);return null===Xr?Xo(o,void 0,a):Xr.get(o,a&Ot.Optional?null:void 0,a)}function V(o,a=Ot.Default){return(function cn(){return en}()||z)(xe(o),a)}function pe(o,a=Ot.Default){return V(o,ne(a))}function ne(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function ft(o){const a=[];for(let c=0;c<o.length;c++){const l=xe(o[c]);if(Array.isArray(l)){if(0===l.length)throw new se(900,!1);let h,m=Ot.Default;for(let v=0;v<l.length;v++){const w=l[v],D=dn(w);"number"==typeof D?-1===D?h=w.token:m|=D:h=w}a.push(V(h,m))}else a.push(V(l))}return a}function xt(o,a){return o[Jr]=a,o.prototype[Jr]=a,o}function dn(o){return o[Jr]}function Ln(o){return{toString:o}.toString()}var tn=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(tn||{}),Vn=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Vn||{});const hr={},Qt=[],Po=me({\u0275cmp:me}),ge=me({\u0275dir:me}),te=me({\u0275pipe:me}),Me=me({\u0275mod:me}),at=me({\u0275fac:me}),Mt=me({__NG_ELEMENT_ID__:me}),kt=me({__NG_ENV_ID__:me});function mn(o,a,c){let l=o.length;for(;;){const h=o.indexOf(a,c);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const m=a.length;if(h+m===l||o.charCodeAt(h+m)<=32)return h}c=h+1}}function er(o,a,c){let l=0;for(;l<c.length;){const h=c[l];if("number"==typeof h){if(0!==h)break;l++;const m=c[l++],v=c[l++],w=c[l++];o.setAttribute(a,v,w,m)}else{const m=h,v=c[++l];Mi(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),l++}}return l}function Un(o){return 3===o||4===o||6===o}function Mi(o){return 64===o.charCodeAt(0)}function Bs(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let l=0;l<a.length;l++){const h=a[l];"number"==typeof h?c=h:0===c||ea(o,c,h,null,-1===c||2===c?a[++l]:null)}}return o}function ea(o,a,c,l,h){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const w=o[m++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=m-1;break}}}for(;m<o.length;){const w=o[m];if("number"==typeof w)break;if(w===c){if(null===l)return void(null!==h&&(o[m+1]=h));if(l===o[m+1])return void(o[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==l&&o.splice(m++,0,l),null!==h&&o.splice(m++,0,h)}const Su="ng-template";function _c(o,a,c){let l=0,h=!0;for(;l<o.length;){let m=o[l++];if("string"==typeof m&&h){const v=o[l++];if(c&&"class"===m&&-1!==mn(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;l<o.length&&"string"==typeof(m=o[l++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function Bl(o){return 4===o.type&&o.value!==Su}function Oa(o,a,c){return a===(4!==o.type||c?o.value:Su)}function mh(o,a,c){let l=4;const h=o.attrs||[],m=function w_(o){for(let a=0;a<o.length;a++)if(Un(o[a]))return a;return o.length}(h);let v=!1;for(let w=0;w<a.length;w++){const D=a[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!Oa(o,D,c)||""===D&&1===a.length){if(Rr(l))return!1;v=!0}}else{const S=8&l?D:a[++w];if(8&l&&null!==o.attrs){if(!_c(o.attrs,S,c)){if(Rr(l))return!1;v=!0}continue}const L=Fa(8&l?"class":D,h,Bl(o),c);if(-1===L){if(Rr(l))return!1;v=!0;continue}if(""!==S){let K;K=L>m?"":h[L+1].toLowerCase();const X=8&l?K:null;if(X&&-1!==mn(X,S,0)||2&l&&S!==K){if(Rr(l))return!1;v=!0}}}}else{if(!v&&!Rr(l)&&!Rr(D))return!1;if(v&&Rr(D))continue;v=!1,l=D|1&l}}return Rr(l)||v}function Rr(o){return 0==(1&o)}function Fa(o,a,c,l){if(null===a)return-1;let h=0;if(l||!c){let m=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let w=a[++h];for(;"string"==typeof w;)w=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function _h(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const l=o[c];if("number"==typeof l)return-1;if(l===a)return c;c++}return-1}(a,o)}function T_(o,a,c=!1){for(let l=0;l<a.length;l++)if(mh(o,a[l],c))return!0;return!1}function ta(o,a){return o?":not("+a.trim()+")":a}function yh(o){let a=o[0],c=1,l=2,h="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&l){const w=o[++c];h+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!Rr(v)&&(a+=ta(m,h),h=""),l=v,m=m||!Rr(l);c++}return""!==h&&(a+=ta(m,h)),a}function Pu(o){return Ln(()=>{const a=Cp(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===tn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Vn.Emulated,styles:o.styles||Qt,_:null,schemas:o.schemas||null,tView:null,id:""};tr(c);const l=o.dependencies;return c.directiveDefs=na(l,!1),c.pipeDefs=na(l,!0),c.id=function Rp(o){let a=0;const c=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const h of c)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function jl(o){return pn(o)||Pr(o)}function vh(o){return null!==o}function Ih(o){return Ln(()=>({type:o.type,bootstrap:o.bootstrap||Qt,declarations:o.declarations||Qt,imports:o.imports||Qt,exports:o.exports||Qt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function zl(o,a){if(null==o)return hr;const c={};for(const l in o)if(o.hasOwnProperty(l)){let h=o[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),c[h]=l,a&&(a[h]=m)}return c}function ei(o){return Ln(()=>{const a=Cp(o);return tr(a),a})}function Eh(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function pn(o){return o[Po]||null}function Pr(o){return o[ge]||null}function Zn(o){return o[te]||null}function xo(o){const a=pn(o)||Pr(o)||Zn(o);return null!==a&&a.standalone}function ti(o,a){const c=o[Me]||null;if(!c&&!0===a)throw new Error(`Type ${nt(o)} does not have '\u0275mod' property.`);return c}function Cp(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||hr,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||Qt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zl(o.inputs,a),outputs:zl(o.outputs)}}function tr(o){o.features?.forEach(a=>a(o))}function na(o,a){if(!o)return null;const c=a?Zn:jl;return()=>("function"==typeof o?o():o).map(l=>c(l)).filter(vh)}const Qn=0,pt=1,$t=2,jn=3,$s=4,Ni=5,xr=6,Mo=7,Yn=8,No=9,lo=10,Ft=11,La=12,Hl=13,ho=14,Bn=15,xu=16,Es=17,Er=18,Va=19,Ua=20,fo=21,ko=22,Mu=23,yc=24,Jt=25,Nu=1,ra=2,Tr=7,po=9,$r=11;function ni(o){return Array.isArray(o)&&"object"==typeof o[Nu]}function ar(o){return Array.isArray(o)&&!0===o[Nu]}function ku(o){return 0!=(4&o.flags)}function Gs(o){return o.componentOffset>-1}function vc(o){return 1==(1&o.flags)}function Ts(o){return!!o.template}function $a(o){return 0!=(512&o[$t])}function Oo(o,a){return o.hasOwnProperty(at)?o[at]:null}let Yl=Yt.WeakRef??class za{constructor(a){this.ref=a}deref(){return this.ref}},Fi=0,es=null,oa=!1;function nr(o){const a=es;return es=o,a}class aa{constructor(){this.id=Fi++,this.ref=function Jl(o){return new Yl(o)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const l=c.producerNode.deref();if(null!=l&&c.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=oa;oa=!0;try{for(const[c,l]of this.consumers){const h=l.consumerNode.deref();null!=h&&h.trackingVersion===l.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),h?.producers.delete(this.id))}}finally{oa=a}}producerAccessed(){if(oa)throw new Error("");if(null===es)return;let a=es.producers.get(this.id);void 0===a?(a={consumerNode:es.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:es.trackingVersion},es.producers.set(this.id,a),this.consumers.set(es.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=es.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==es?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let Mr=null;function ua(o){const a=nr(null);try{return o()}finally{nr(a)}}const Cc=()=>{};class Vu extends aa{constructor(a,c,l){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=Cc,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=nr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Cc,this.watch(this.registerOnCleanup)}finally{nr(a)}}cleanup(){this.cleanupFn()}}class Op{constructor(a,c,l){this.previousValue=a,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function Sc(){return Fp}function Fp(o){return o.type.prototype.ngOnChanges&&(o.setInput=bh),Rc}function Rc(){const o=Lp(this),a=o?.current;if(a){const c=o.previous;if(c===hr)o.previous=a;else for(let l in a)c[l]=a[l];o.current=null,this.ngOnChanges(a)}}function bh(o,a,c,l){const h=this.declaredInputs[c],m=Lp(o)||function Pc(o,a){return o[Uu]=a}(o,{previous:hr,current:null}),v=m.current||(m.current={}),w=m.previous,D=w[h];v[h]=new Op(D&&D.currentValue,a,w===hr),o[l]=a}Sc.ngInherit=!0;const Uu="__ngSimpleChanges__";function Lp(o){return o[Uu]||null}const Li=function(o,a,c){};function _n(o){for(;Array.isArray(o);)o=o[Qn];return o}function mo(o,a){return _n(a[o])}function Ii(o,a){return _n(a[o.index])}function nd(o,a){return o.data[a]}function Gr(o,a){const c=a[o];return ni(c)?c:c[Qn]}function qs(o,a){return null==a?null:o[a]}function Fo(o){o[Es]=0}function Dh(o){1024&o[$t]||(o[$t]|=1024,rd(o,1))}function Za(o){1024&o[$t]&&(o[$t]&=-1025,rd(o,-1))}function rd(o,a){let c=o[jn];if(null===c)return;c[Ni]+=a;let l=c;for(c=c[jn];null!==c&&(1===a&&1===l[Ni]||-1===a&&0===l[Ni]);)c[Ni]+=a,l=c,c=c[jn]}const Pt={lFrame:Jn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Up(){return Pt.bindingsEnabled}function Re(){return Pt.lFrame.lView}function hn(){return Pt.lFrame.tView}function R_(o){return Pt.lFrame.contextLView=o,o[Yn]}function Ph(o){return Pt.lFrame.contextLView=null,o}function Ei(){let o=Vc();for(;null!==o&&64===o.type;)o=o.parent;return o}function Vc(){return Pt.lFrame.currentTNode}function ts(o,a){const c=Pt.lFrame;c.currentTNode=o,c.isParent=a}function od(){return Pt.lFrame.isParent}function ad(){Pt.lFrame.isParent=!1}function Ya(){return Pt.lFrame.bindingIndex++}function Nh(o,a){const c=Pt.lFrame;c.bindingIndex=c.bindingRootIndex=o,_o(a)}function _o(o){Pt.lFrame.currentDirectiveIndex=o}function zp(){return Pt.lFrame.currentQueryIndex}function la(o){Pt.lFrame.currentQueryIndex=o}function kh(o){const a=o[pt];return 2===a.type?a.declTNode:1===a.type?o[xr]:null}function Hp(o,a,c){if(c&Ot.SkipSelf){let h=a,m=o;for(;!(h=h.parent,null!==h||c&Ot.Host||(h=kh(m),null===h||(m=m[ho],10&h.type))););if(null===h)return!1;a=h,o=m}const l=Pt.lFrame=qp();return l.currentTNode=a,l.lView=o,!0}function Xa(o){const a=qp(),c=o[pt];Pt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function qp(){const o=Pt.lFrame,a=null===o?null:o.child;return null===a?Jn(o):a}function Jn(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Wp(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ud=Wp;function $c(){const o=Wp();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ri(){return Pt.lFrame.selectedIndex}function yo(o){Pt.lFrame.selectedIndex=o}function Xn(){const o=Pt.lFrame;return nd(o.tView,o.selectedIndex)}let hd=!0;function tu(){return hd}function vo(o){hd=o}function Sn(o,a){for(let c=a.directiveStart,l=a.directiveEnd;c<l;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=m;v&&(o.contentHooks??=[]).push(-c,v),w&&((o.contentHooks??=[]).push(c,w),(o.contentCheckHooks??=[]).push(c,w)),D&&(o.viewHooks??=[]).push(-c,D),S&&((o.viewHooks??=[]).push(c,S),(o.viewCheckHooks??=[]).push(c,S)),null!=N&&(o.destroyHooks??=[]).push(c,N)}}function zr(o,a,c){Kp(o,a,3,c)}function jc(o,a,c,l){(3&o[$t])===c&&Kp(o,a,c,l)}function $u(o,a){let c=o[$t];(3&c)===a&&(c&=8191,c+=1,o[$t]=c)}function Kp(o,a,c,l){const m=l??-1,v=a.length-1;let w=0;for(let D=void 0!==l?65535&o[Es]:0;D<v;D++)if("number"==typeof a[D+1]){if(w=a[D],null!=l&&w>=l)break}else a[D]<0&&(o[Es]+=65536),(w<m||-1==m)&&(zc(o,c,a,D),o[Es]=(4294901760&o[Es])+D+2),D++}function Gu(o,a){Li(4,o,a);const c=nr(null);try{a.call(o)}finally{nr(c),Li(5,o,a)}}function zc(o,a,c,l){const h=c[l]<0,m=c[l+1],w=o[h?-c[l]:c[l]];h?o[$t]>>13<o[Es]>>16&&(3&o[$t])===a&&(o[$t]+=8192,Gu(w,m)):Gu(w,m)}const da=-1;class Lo{constructor(a,c,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function nu(o){return o!==da}function As(o){return 32767&o}function Bi(o,a){let c=function bs(o){return o>>16}(o),l=a;for(;c>0;)l=l[ho],c--;return l}let ha=!0;function fd(o){const a=ha;return ha=o,a}const Uh=255,Io=5;let Vo=0;const $i={};function rs(o,a){const c=rr(o,a);if(-1!==c)return c;const l=a[pt];l.firstCreatePass&&(o.injectorIndex=a.length,Bh(l.data,o),Bh(a,null),Bh(l.blueprint,null));const h=ru(o,a),m=o.injectorIndex;if(nu(h)){const v=As(h),w=Bi(h,a),D=w[pt].data;for(let S=0;S<8;S++)a[m+S]=w[v+S]|D[v+S]}return a[m+8]=h,m}function Bh(o,a){o.push(0,0,0,0,0,0,0,0,a)}function rr(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ru(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,l=null,h=a;for(;null!==h;){if(l=Go(h),null===l)return da;if(c++,h=h[ho],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return da}function zu(o,a,c){!function wr(o,a,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(Mt)&&(l=c[Mt]),null==l&&(l=c[Mt]=Vo++);const h=l&Uh;a.data[o+(h>>Io)]|=1<<h}(o,a,c)}function qc(o,a,c){if(c&Ot.Optional||void 0!==o)return o;Vs()}function pd(o,a,c,l){if(c&Ot.Optional&&void 0===l&&(l=null),!(c&(Ot.Self|Ot.Host))){const h=o[No],m=ln(void 0);try{return h?h.get(a,l,c&Ot.Optional):Xo(a,l,c&Ot.Optional)}finally{ln(m)}}return qc(l,0,c)}function Uo(o,a,c,l=Ot.Default,h){if(null!==o){if(2048&a[$t]&&!(l&Ot.Self)){const v=function $h(o,a,c,l,h){let m=o,v=a;for(;null!==m&&null!==v&&2048&v[$t]&&!(512&v[$t]);){const w=iu(m,v,c,l|Ot.Self,$i);if(w!==$i)return w;let D=m.parent;if(!D){const S=v[Ua];if(S){const N=S.get(c,$i,l);if(N!==$i)return N}D=Go(v),v=v[ho]}m=D}return h}(o,a,c,l,$i);if(v!==$i)return v}const m=iu(o,a,c,l,$i);if(m!==$i)return m}return pd(a,c,l,h)}function iu(o,a,c,l,h){const m=function Wc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Mt)?o[Mt]:void 0;return"number"==typeof a?a>=0?a&Uh:_d:a}(c);if("function"==typeof m){if(!Hp(a,o,l))return l&Ot.Host?qc(h,0,l):pd(a,c,l,h);try{const v=m(l);if(null!=v||l&Ot.Optional)return v;Vs()}finally{ud()}}else if("number"==typeof m){let v=null,w=rr(o,a),D=da,S=l&Ot.Host?a[Bn][xr]:null;for((-1===w||l&Ot.SkipSelf)&&(D=-1===w?ru(o,a):a[w+8],D!==da&&md(l,!1)?(v=a[pt],w=As(D),a=Bi(D,a)):w=-1);-1!==w;){const N=a[pt];if(Kc(m,w,N.data)){const L=gd(w,a,c,v,l,S);if(L!==$i)return L}D=a[w+8],D!==da&&md(l,a[pt].data[w+8]===S)&&Kc(m,w,a)?(v=N,w=As(D),a=Bi(D,a)):w=-1}}return h}function gd(o,a,c,l,h,m){const v=a[pt],w=v.data[o+8],N=fa(w,v,c,null==l?Gs(w)&&ha:l!=v&&0!=(3&w.type),h&Ot.Host&&m===w);return null!==N?Bo(a,v,N,w):$i}function fa(o,a,c,l,h){const m=o.providerIndexes,v=a.data,w=1048575&m,D=o.directiveStart,N=m>>20,K=h?w+N:o.directiveEnd;for(let X=l?w:w+N;X<K;X++){const Ae=v[X];if(X<D&&c===Ae||X>=D&&Ae.type===c)return X}if(h){const X=v[D];if(X&&Ts(X)&&X.type===c)return D}return null}function Bo(o,a,c,l){let h=o[c];const m=a.data;if(function ju(o){return o instanceof Lo}(h)){const v=h;v.resolving&&function Br(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new se(-200,`Circular dependency in DI detected for ${o}${c}`)}(function ht(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ge(o)}(m[c]));const w=fd(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?ln(v.injectImpl):null;Hp(o,l,Ot.Default);try{h=o[c]=v.factory(void 0,m,o,l),a.firstCreatePass&&c>=l.directiveStart&&function Lh(o,a,c){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(l){const v=Fp(a);(c.preOrderHooks??=[]).push(o,v),(c.preOrderCheckHooks??=[]).push(o,v)}h&&(c.preOrderHooks??=[]).push(0-o,h),m&&((c.preOrderHooks??=[]).push(o,m),(c.preOrderCheckHooks??=[]).push(o,m))}(c,m[c],a)}finally{null!==D&&ln(D),fd(w),v.resolving=!1,ud()}}return h}function Kc(o,a,c){return!!(c[a+(o>>Io)]&1<<o)}function md(o,a){return!(o&Ot.Self||o&Ot.Host&&a)}class su{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,l){return Uo(this._tNode,this._lView,a,ne(l),c)}}function _d(){return new su(Ei(),Re())}function yd(o){return Ln(()=>{const a=o.prototype.constructor,c=a[at]||$o(a),l=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==l;){const m=h[at]||$o(h);if(m&&m!==c)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function $o(o){return $e(o)?()=>{const a=$o(xe(o));return a&&a()}:Oo(o)}function Go(o){const a=o[pt],c=a.type;return 2===c?a.declTNode:1===c?o[xr]:null}function pa(o){return function Yp(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const l=c.length;let h=0;for(;h<l;){const m=c[h];if(Un(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof c[h];)h++;else{if(m===a)return c[h+1];h+=2}}}return null}(Ei(),o)}const Gi="__parameters__";function Ds(o,a,c){return Ln(()=>{const l=function jo(o){return function(...c){if(o){const l=o(...c);for(const h in l)this[h]=l[h]}}}(a);function h(...m){if(this instanceof h)return l.apply(this,m),this;const v=new h(...m);return w.annotation=v,w;function w(D,S,N){const L=D.hasOwnProperty(Gi)?D[Gi]:Object.defineProperty(D,Gi,{value:[]})[Gi];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(v),D}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}function ya(o,a){o.forEach(c=>Array.isArray(c)?ya(c,a):a(c))}function Id(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Yc(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function j(o,a,c){let l=ue(o,a);return l>=0?o[1|l]=c:(l=~l,function P(o,a,c,l){let h=o.length;if(h==a)o.push(c,l);else if(1===h)o.push(l,o[0]),o[0]=c;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=c,o[a+1]=l}}(o,l,a,c)),l}function J(o,a){const c=ue(o,a);if(c>=0)return o[1|c]}function ue(o,a){return function Ze(o,a,c){let l=0,h=o.length>>c;for(;h!==l;){const m=l+(h-l>>1),v=o[m<<c];if(a===v)return m<<c;v>a?h=m:l=m+1}return~(h<<c)}(o,a,1)}const Ks=xt(Ds("Optional"),8),Ed=xt(Ds("SkipSelf"),4);function G(o){return 128==(128&o.flags)}var Fe=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Fe||{});const Ce=/^>|^->|<!--|-->|--!>|<!-$/g,ut=/(<|>)/,zt="\u200b$1\u200b";const ii=new Map;let Ia=0;const nl="__ngContext__";function Ti(o,a){ni(a)?(o[nl]=a[Va],function Wh(o){ii.set(o[Va],o)}(a)):o[nl]=a}let wE;function Pb(o,a){return wE(o,a)}function bd(o){const a=o[jn];return ar(a)?a[jn]:a}function rl(o){return AE(o[La])}function Nb(o){return AE(o[$s])}function AE(o){for(;null!==o&&!ar(o);)o=o[$s];return o}function Yh(o,a,c,l,h){if(null!=l){let m,v=!1;ar(l)?m=l:ni(l)&&(v=!0,l=l[Qn]);const w=_n(l);0===o&&null!==c?null==h?Fx(a,c,w):Jh(a,c,w,h||null,!0):1===o&&null!==c?Jh(a,c,w,h||null,!0):2===o?function H_(o,a,c){const l=xE(o,a);l&&function Ub(o,a,c,l){o.removeChild(a,c,l)}(o,l,a,c)}(a,w,v):3===o&&a.destroyNode(w),null!=m&&function OE(o,a,c,l,h){const m=c[Tr];m!==_n(c)&&Yh(a,o,l,m,h);for(let w=$r;w<c.length;w++){const D=c[w];sl(D[pt],D,o,a,l,m)}}(a,o,m,c,h)}}function bE(o,a){return o.createComment(function gn(o){return o.replace(Ce,a=>a.replace(ut,zt))}(a))}function Dd(o,a,c){return o.createElement(a,c)}function DE(o,a){const c=o[po],l=c.indexOf(a);Za(a),c.splice(l,1)}function CE(o,a){if(o.length<=$r)return;const c=$r+a,l=o[c];if(l){const h=l[xu];null!==h&&h!==o&&DE(h,l),a>0&&(o[c-1][$s]=l[$s]);const m=Yc(o,$r+a);!function Ob(o,a){sl(o,a,a[Ft],2,null,null),a[Qn]=null,a[xr]=null}(l[pt],l);const v=m[Er];null!==v&&v.detachView(m[pt]),l[jn]=null,l[$s]=null,l[$t]&=-129}return l}function SE(o,a){if(!(256&a[$t])){const c=a[Ft];a[Mu]?.destroy(),a[yc]?.destroy(),c.destroyNode&&sl(o,a,c,3,null,null),function kx(o){let a=o[La];if(!a)return Vb(o[pt],o);for(;a;){let c=null;if(ni(a))c=a[La];else{const l=a[$r];l&&(c=l)}if(!c){for(;a&&!a[$s]&&a!==o;)ni(a)&&Vb(a[pt],a),a=a[jn];null===a&&(a=o),ni(a)&&Vb(a[pt],a),c=a&&a[$s]}a=c}}(a)}}function Vb(o,a){if(!(256&a[$t])){a[$t]&=-129,a[$t]|=256,function lU(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let l=0;l<c.length;l+=2){const h=a[c[l]];if(!(h instanceof Lo)){const m=c[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const w=h[m[v]],D=m[v+1];Li(4,w,D);try{D.call(w)}finally{Li(5,w,D)}}else{Li(4,h,m);try{m.call(h)}finally{Li(5,h,m)}}}}}(o,a),function cU(o,a){const c=o.cleanup,l=a[Mo];if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?l[v]():l[-v].unsubscribe(),m+=2}else c[m].call(l[c[m+1]]);null!==l&&(a[Mo]=null);const h=a[fo];if(null!==h){a[fo]=null;for(let m=0;m<h.length;m++)(0,h[m])()}}(o,a),1===a[pt].type&&a[Ft].destroy();const c=a[xu];if(null!==c&&ar(a[jn])){c!==a[jn]&&DE(c,a);const l=a[Er];null!==l&&l.detachView(o)}!function B_(o){ii.delete(o[Va])}(a)}}function z_(o,a,c){return function RE(o,a,c){let l=a;for(;null!==l&&40&l.type;)l=(a=l).parent;if(null===l)return c[Qn];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:m}=o.data[l.directiveStart+h];if(m===Vn.None||m===Vn.Emulated)return null}return Ii(l,c)}}(o,a.parent,c)}function Jh(o,a,c,l,h){o.insertBefore(a,c,l,h)}function Fx(o,a,c){o.appendChild(a,c)}function PE(o,a,c,l,h){null!==l?Jh(o,a,c,l,h):Fx(o,a,c)}function xE(o,a){return o.parentNode(a)}let ME,FE,Sd,Xh=function $b(o,a,c){return 40&o.type?Ii(o,c):null};function Zs(o,a,c,l){const h=z_(o,l,a),m=a[Ft],w=function Bb(o,a,c){return Xh(o,a,c)}(l.parent||a[xr],l,a);if(null!=h)if(Array.isArray(c))for(let D=0;D<c.length;D++)PE(m,h,c[D],w,!1);else PE(m,h,c,w,!1);void 0!==ME&&ME(m,l,a,c,h)}function il(o,a){if(null!==a){const c=a.type;if(3&c)return Ii(a,o);if(4&c)return cg(-1,o[a.index]);if(8&c){const l=a.child;if(null!==l)return il(o,l);{const h=o[a.index];return ar(h)?cg(-1,h):_n(h)}}if(32&c)return Pb(a,o)()||_n(o[a.index]);{const l=Gb(o,a);return null!==l?Array.isArray(l)?l[0]:il(bd(o[Bn]),l):il(o,a.next)}}return null}function Gb(o,a){return null!==a?o[Bn][xr].projection[a.projection]:null}function cg(o,a){const c=$r+o+1;if(c<a.length){const l=a[c],h=l[pt].firstChild;if(null!==h)return il(l,h)}return a[Tr]}function kE(o,a,c,l,h,m,v){for(;null!=c;){const w=l[c.index],D=c.type;if(v&&0===a&&(w&&Ti(_n(w),l),c.flags|=2),32!=(32&c.flags))if(8&D)kE(o,a,c.child,l,h,m,!1),Yh(a,o,h,w,m);else if(32&D){const S=Pb(c,l);let N;for(;N=S();)Yh(a,o,h,N,m);Yh(a,o,h,w,m)}else 16&D?jb(o,a,l,c,h,m):Yh(a,o,h,w,m);c=v?c.projectionNext:c.next}}function sl(o,a,c,l,h,m){kE(c,l,o.firstChild,a,h,m,!1)}function jb(o,a,c,l,h,m){const v=c[Bn],D=v[xr].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Yh(a,o,h,D[S],m);else{let S=D;const N=v[jn];G(l)&&(S.flags|=128),kE(o,a,S,N,h,m,!0)}}function ef(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Zu(o,a,c){const{mergedAttrs:l,classes:h,styles:m}=c;null!==l&&er(o,a,l),null!==h&&ef(o,a,h),null!==m&&function Lx(o,a,c){o.setAttribute(a,"style",c)}(o,a,m)}function Qu(o){FE=o}function nf(o){return function q_(){if(void 0===Sd&&(Sd=null,Yt.trustedTypes))try{Sd=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Sd}()?.createScriptURL(o)||o}class as{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}function al(o){return o instanceof as?o.changingThisBreaksApplicationSecurity:o}function Pd(o,a){const c=function Xt(o){return o instanceof as&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${Qe})`)}return c===a}const $x=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ju=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(Ju||{});function zE(o){const a=_g();return a?a.sanitize(Ju.URL,o)||"":Pd(o,"URL")?al(o):function K_(o){return(o=String(o)).match($x)?o:"unsafe:"+o}(Ge(o))}function Xb(o){const a=_g();if(a)return nf(a.sanitize(Ju.RESOURCE_URL,o)||"");if(Pd(o,"ResourceURL"))return nf(al(o));throw new se(904,!1)}function eD(o,a,c){return function qx(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Xb:zE}(a,c)(o)}function _g(){const o=Re();return o&&o[lo].sanitizer}class xn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ye({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const af=new xn("ENVIRONMENT_INITIALIZER"),qE=new xn("INJECTOR",-1),tD=new xn("INJECTOR_DEF_TYPES");class cl{get(a,c=Pi){if(c===Pi){const l=new Error(`NullInjectorError: No provider for ${nt(a)}!`);throw l.name="NullInjectorError",l}return c}}function rD(...o){return{\u0275providers:WE(0,o),\u0275fromNgModule:!0}}function WE(o,...a){const c=[],l=new Set;let h;return ya(a,m=>{const v=m;Md(v,c,[],l)&&(h||=[],h.push(v))}),void 0!==h&&yg(h,c),c}function yg(o,a){for(let c=0;c<o.length;c++){const{providers:h}=o[c];Y_(h,m=>{a.push(m)})}}function Md(o,a,c,l){if(!(o=xe(o)))return!1;let h=null,m=Na(o);const v=!m&&pn(o);if(m||v){if(v&&!v.standalone)return!1;h=o}else{const D=o.ngModule;if(m=Na(D),!m)return!1;h=D}const w=l.has(h);if(v){if(w)return!1;if(l.add(h),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of D)Md(S,a,c,l)}}else{if(!m)return!1;{if(null!=m.imports&&!w){let S;l.add(h);try{ya(m.imports,N=>{Md(N,a,c,l)&&(S||=[],S.push(N))})}finally{}void 0!==S&&yg(S,a)}if(!w){const S=Oo(h)||(()=>new h);a.push({provide:h,useFactory:S,deps:Qt},{provide:tD,useValue:h,multi:!0},{provide:af,useValue:()=>V(h),multi:!0})}const D=m.providers;null==D||w||Y_(D,N=>{a.push(N)})}}return h!==o&&void 0!==o.providers}function Y_(o,a){for(let c of o)Ne(c)&&(c=c.\u0275providers),Array.isArray(c)?Y_(c,a):a(c)}const sD=me({provide:String,useValue:me});function KE(o){return null!==o&&"object"==typeof o&&sD in o}function Nd(o){return"function"==typeof o}const J_=new xn("Set Injector scope."),ll={},Kx={};let Ig;function X_(){return void 0===Ig&&(Ig=new cl),Ig}class dl{}class ey extends dl{get destroyed(){return this._destroyed}constructor(a,c,l,h){super(),this.parent=c,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,YE(a,v=>this.processProvider(v)),this.records.set(qE,Xu(void 0,this)),h.has("environment")&&this.records.set(dl,Xu(void 0,this));const m=this.records.get(J_);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(tD.multi,Qt,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=yi(this),l=ln(void 0);try{return a()}finally{yi(c),ln(l)}}get(a,c=Pi,l=Ot.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(kt))return a[kt](this);l=ne(l);const h=yi(this),m=ln(void 0);try{if(!(l&Ot.SkipSelf)){let w=this.records.get(a);if(void 0===w){const D=function Zx(o){return"function"==typeof o||"object"==typeof o&&o instanceof xn}(a)&&Is(a);w=D&&this.injectableDefInScope(D)?Xu(kd(a),ll):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(l&Ot.Self?X_():this.parent).get(a,c=l&Ot.Optional&&c===Pi?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Ji]=v[Ji]||[]).unshift(nt(a)),h)throw v;return function Sr(o,a,c,l){const h=o[Ji];throw a[Xi]&&h.unshift(a[Xi]),o.message=function Kn(o,a,c,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=nt(a);if(Array.isArray(a))h=a.map(nt).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];m.push(v+":"+("string"==typeof w?JSON.stringify(w):nt(w)))}h=`{${m.join(", ")}}`}return`${c}${l?"("+l+")":""}[${h}]: ${o.replace(_i,"\n  ")}`}("\n"+o.message,h,c,l),o.ngTokenPath=h,o[Ji]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{ln(m),yi(h)}}resolveInjectorInitializers(){const a=yi(this),c=ln(void 0);try{const l=this.get(af.multi,Qt,Ot.Self);for(const h of l)h()}finally{yi(a),ln(c)}}toString(){const a=[],c=this.records;for(const l of c.keys())a.push(nt(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(a){let c=Nd(a=xe(a))?a:xe(a&&a.provide);const l=function ZE(o){return KE(o)?Xu(void 0,o.useValue):Xu(hl(o),ll)}(a);if(Nd(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=Xu(void 0,ll,!0),h.factory=()=>ft(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,l)}hydrate(a,c){return c.value===ll&&(c.value=Kx,c.value=c.factory()),"object"==typeof c.value&&c.value&&function QE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=xe(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function kd(o){const a=Is(o),c=null!==a?a.factory:Oo(o);if(null!==c)return c;if(o instanceof xn)throw new se(204,!1);if(o instanceof Function)return function cu(o){const a=o.length;if(a>0)throw function ou(o,a){const c=[];for(let l=0;l<o;l++)c.push(a);return c}(a,"?"),new se(204,!1);const c=function So(o){return o&&(o[Nn]||o[Bt])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new se(204,!1)}function hl(o,a,c){let l;if(Nd(o)){const h=xe(o);return Oo(h)||kd(h)}if(KE(o))l=()=>xe(o.useValue);else if(function oD(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...ft(o.deps||[]));else if(function vg(o){return!(!o||!o.useExisting)}(o))l=()=>V(xe(o.useExisting));else{const h=xe(o&&(o.useClass||o.provide));if(!function Eg(o){return!!o.deps}(o))return Oo(h)||kd(h);l=()=>new h(...ft(o.deps))}return l}function Xu(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function YE(o,a){for(const c of o)Array.isArray(c)?YE(c,a):c&&Ne(c)?YE(c.\u0275providers,a):a(c)}const aD=new xn("AppId",{providedIn:"root",factory:()=>Qx}),Qx="ng",uD=new xn("Platform Initializer"),JE=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yx=new xn("CSP nonce",{providedIn:"root",factory:()=>function si(){if(void 0!==FE)return FE;if(typeof document<"u")return document;throw new se(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ry=(o,a)=>null;function iy(o,a){return ry(o,a)}class dD{}class nT{}class TU{resolveComponentFactory(a){throw function hD(o){const a=Error(`No component factory found for ${nt(o)}.`);return a.ngComponent=o,a}(a)}}let rT=(()=>{class a{}return a.NULL=new TU,a})();function wU(){return lf(Ei(),Re())}function lf(o,a){return new cy(Ii(o,a))}let cy=(()=>{class a{constructor(l){this.nativeElement=l}}return a.__NG_ELEMENT_ID__=wU,a})();function sM(o){return o instanceof cy?o.nativeElement:o}class pD{}let iT=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function Aa(){const o=Re(),c=Gr(Ei().index,o);return(ni(c)?c:o)[Ft]}(),a})(),oM=(()=>{var o;class a{}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:()=>null}),a})();class df{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const aM=new df("16.1.8"),sT={};function Dg(o){for(;o;){o[$t]|=64;const a=bd(o);if($a(o)&&!a)return o;o=a}return null}function uT(o){return o.ngOriginalError}class hf{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&uT(a);for(;c&&uT(c);)c=uT(c);return c||null}}const gD=new xn("",{providedIn:"root",factory:()=>!1});function nc(o){return o instanceof Function?o():o}class ID extends aa{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Dg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,l){const h=nr(this);this.trackingVersion++;try{a(c,l)}finally{nr(h)}}destroy(){this.trackingVersion++}}let ly=null;function ED(){return ly??=new ID,ly}function TD(o,a){return o[a]??ED()}function wD(o,a){const c=ED();c.hasReadASignal&&(o[a]=ly,c.lView=o,ly=new ID)}const Ht={};function lT(o){AD(hn(),Re(),ri()+o,!1)}function AD(o,a,c,l){if(!l)if(3==(3&a[$t])){const m=o.preOrderCheckHooks;null!==m&&zr(a,m,c)}else{const m=o.preOrderHooks;null!==m&&jc(a,m,0,c)}yo(c)}function SD(o,a=null,c=null,l){const h=RD(o,a,c,l);return h.resolveInjectorInitializers(),h}function RD(o,a=null,c=null,l,h=new Set){const m=[c||Qt,rD(o)];return l=l||("object"==typeof o?void 0:nt(o)),new ey(m,a||X_(),l||null,h)}let pl=(()=>{var o;class a{static create(l,h){if(Array.isArray(l))return SD({name:""},h,l,"");{const m=l.name??"";return SD({name:m},l.parent,l.providers,m)}}}return(o=a).THROW_IF_NOT_FOUND=Pi,o.NULL=new cl,o.\u0275prov=ye({token:o,providedIn:"any",factory:()=>V(qE)}),o.__NG_ELEMENT_ID__=-1,a})();function gf(o,a=Ot.Default){const c=Re();return null===c?V(o,a):Uo(Ei(),c,xe(o),a)}function Pg(){throw new Error("invalid")}function hy(o,a,c,l,h,m,v,w,D,S,N){const L=a.blueprint.slice();return L[Qn]=h,L[$t]=140|l,(null!==S||o&&2048&o[$t])&&(L[$t]|=2048),Fo(L),L[jn]=L[ho]=o,L[Yn]=c,L[lo]=v||o&&o[lo],L[Ft]=w||o&&o[Ft],L[No]=D||o&&o[No]||null,L[xr]=m,L[Va]=function qh(){return Ia++}(),L[ko]=N,L[Ua]=S,L[Bn]=2==a.type?o[Bn]:L,L}function mf(o,a,c,l,h){let m=o.data[a];if(null===m)m=function fT(o,a,c,l,h){const m=Vc(),v=od(),D=o.data[a]=function _f(o,a,c,l,h,m){let v=a?a.injectorIndex:-1,w=0;return function ca(){return null!==Pt.skipHydrationRootTNode}()&&(w|=128),{type:c,index:l,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,l,h);return null===o.firstChild&&(o.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}(o,a,c,l,h),function jp(){return Pt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=l,m.attrs=h;const v=function Vi(){const o=Pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return ts(m,!0),m}function xg(o,a,c,l){if(0===c)return-1;const h=a.length;for(let m=0;m<c;m++)a.push(l),o.blueprint.push(l),o.data.push(null);return h}function PD(o,a,c,l,h){const m=TD(a,Mu),v=ri(),w=2&l;try{if(yo(-1),w&&a.length>Jt&&AD(o,a,Jt,!1),Li(w?2:0,h),w)m.runInContext(c,l,h);else{const S=nr(null);try{c(l,h)}finally{nr(S)}}}finally{w&&null===a[Mu]&&wD(a,Mu),yo(v),Li(w?3:1,h)}}function fy(o,a,c){if(ku(a)){const l=nr(null);try{const m=a.directiveEnd;for(let v=a.directiveStart;v<m;v++){const w=o.data[v];w.contentQueries&&w.contentQueries(1,c[v],v)}}finally{nr(l)}}}function xD(o,a,c){Up()&&(function AM(o,a,c,l){const h=c.directiveStart,m=c.directiveEnd;Gs(c)&&function vf(o,a,c){const l=Ii(a,o),h=pT(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const w=Mg(o,hy(o,h,null,v,l,a,null,o[lo].rendererFactory.createRenderer(l,c),null,null,null));o[a.index]=w}(a,c,o.data[h+c.componentOffset]),o.firstCreatePass||rs(c,a),Ti(l,a);const v=c.initialInputs;for(let w=h;w<m;w++){const D=o.data[w],S=Bo(a,o,w,c);Ti(S,a),null!==v&&UD(0,w-h,S,D,0,v),Ts(D)&&(Gr(c.index,a)[Yn]=Bo(a,o,w,c))}}(o,a,c,Ii(c,a)),64==(64&c.flags)&&yf(o,a,c))}function py(o,a,c=Ii){const l=a.localNames;if(null!==l){let h=a.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],w=-1===v?c(a,o):o[v];o[h++]=w}}}function pT(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=gT(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function gT(o,a,c,l,h,m,v,w,D,S,N){const L=Jt+l,K=L+h,X=function yM(o,a){const c=[];for(let l=0;l<a;l++)c.push(l<o?null:Ht);return c}(L,K),Ae="function"==typeof S?S():S;return X[pt]={type:o,blueprint:X,template:c,queries:null,viewQuery:w,declTNode:a,data:X.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Ae,incompleteFirstPass:!1,ssrId:N}}let MD=o=>null;function gy(o,a,c,l){for(let h in o)if(o.hasOwnProperty(h)){c=null===c?{}:c;const m=o[h];null===l?kD(c,a,h,m):l.hasOwnProperty(h)&&kD(c,a,l[h],m)}return c}function kD(o,a,c,l){o.hasOwnProperty(c)?o[c].push(a,l):o[c]=[a,l]}function Ys(o,a,c,l,h,m,v,w){const D=Ii(a,c);let N,S=a.inputs;!w&&null!=S&&(N=S[l])?(jD(o,c,N,l,h),Gs(a)&&function FD(o,a){const c=Gr(a,o);16&c[$t]||(c[$t]|=64)}(c,a.index)):3&a.type&&(l=function my(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(l),h=null!=v?v(h,a.value||"",l):h,m.setProperty(D,l,h))}function _T(o,a,c,l){if(Up()){const h=null===l?null:{"":-1},m=function bM(o,a){const c=o.directiveRegistry;let l=null,h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(T_(a,v.selectors,!1))if(l||(l=[]),Ts(v))if(null!==v.findHostDirectiveDefs){const w=[];h=h||new Map,v.findHostDirectiveDefs(v,w,h),l.unshift(...w,v),yT(o,a,w.length)}else l.unshift(v),yT(o,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,l,h),l.push(v)}return null===l?null:[l,h]}(o,c);let v,w;null===m?v=w=null:[v,w]=m,null!==v&&LD(o,a,c,v,h,w),h&&function DM(o,a,c){if(a){const l=o.localNames=[];for(let h=0;h<a.length;h+=2){const m=c[a[h+1]];if(null==m)throw new se(-301,!1);l.push(a[h],m)}}}(c,l,h)}c.mergedAttrs=Bs(c.mergedAttrs,c.attrs)}function LD(o,a,c,l,h,m){for(let S=0;S<l.length;S++)zu(rs(c,a),o,l[S].type);!function zi(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,l.length);for(let S=0;S<l.length;S++){const N=l[S];N.providersResolver&&N.providersResolver(N)}let v=!1,w=!1,D=xg(o,a,l.length,null);for(let S=0;S<l.length;S++){const N=l[S];c.mergedAttrs=Bs(c.mergedAttrs,N.hostAttrs),SM(o,c,a,D,N),CM(D,N,h),null!==N.contentQueries&&(c.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(c.flags|=64);const L=N.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((o.preOrderHooks??=[]).push(c.index),v=!0),!w&&(L.ngOnChanges||L.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(c.index),w=!0),D++}!function OD(o,a,c){const h=a.directiveEnd,m=o.data,v=a.attrs,w=[];let D=null,S=null;for(let N=a.directiveStart;N<h;N++){const L=m[N],K=c?c.get(L):null,Ae=K?K.outputs:null;D=gy(L.inputs,N,D,K?K.inputs:null),S=gy(L.outputs,N,S,Ae);const Oe=null===D||null===v||Bl(a)?null:CU(D,N,v);w.push(Oe)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=w,a.inputs=D,a.outputs=S}(o,c,m)}function yf(o,a,c){const l=c.directiveStart,h=c.directiveEnd,m=c.index,v=function Bc(){return Pt.lFrame.currentDirectiveIndex}();try{yo(m);for(let w=l;w<h;w++){const D=o.data[w],S=a[w];_o(w),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&VD(D,S)}}finally{yo(-1),_o(v)}}function VD(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function yT(o,a,c){a.componentOffset=c,(o.components??=[]).push(a.index)}function CM(o,a,c){if(c){if(a.exportAs)for(let l=0;l<a.exportAs.length;l++)c[a.exportAs[l]]=o;Ts(a)&&(c[""]=o)}}function SM(o,a,c,l,h){o.data[l]=h;const m=h.factory||(h.factory=Oo(h.type)),v=new Lo(m,Ts(h),gf);o.blueprint[l]=v,c[l]=v,function _y(o,a,c,l,h){const m=h.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const w=~a.index;(function wM(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=w&&v.push(w),v.push(c,l,m)}}(o,a,l,xg(o,c,h.hostVars,Ht),h)}function du(o,a,c,l,h,m){const v=Ii(o,a);!function vT(o,a,c,l,h,m,v){if(null==m)o.removeAttribute(a,h,c);else{const w=null==v?Ge(m):v(m,l||"",h);o.setAttribute(a,h,w,c)}}(a[Ft],v,m,o.value,c,l,h)}function UD(o,a,c,l,h,m){const v=m[a];if(null!==v)for(let w=0;w<v.length;)RM(l,c,v[w++],v[w++],v[w++])}function RM(o,a,c,l,h){const m=nr(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(l)&&(h=v[l].call(a,h)),null!==o.setInput?o.setInput(a,h,c,l):a[l]=h}finally{nr(m)}}function CU(o,a,c){let l=null,h=0;for(;h<c.length;){const m=c[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===l&&(l=[]);const v=o[m];for(let w=0;w<v.length;w+=2)if(v[w]===a){l.push(m,v[w+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function BD(o,a,c,l){return[o,!0,!1,a,null,0,l,c,null,null,null]}function yy(o,a){const c=o.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const m=c[l+1];if(-1!==m){const v=o.data[m];la(c[l]),v.contentQueries(2,a[m],m)}}}function Mg(o,a){return o[La]?o[Hl][$s]=a:o[La]=a,o[Hl]=a,a}function $D(o,a,c){la(0);const l=nr(null);try{a(o,c)}finally{nr(l)}}function hu(o){return o[Mo]||(o[Mo]=[])}function GD(o){return o.cleanup||(o.cleanup=[])}function MM(o,a){const c=o[No],l=c?c.get(hf,null):null;l&&l.handleError(a)}function jD(o,a,c,l,h){for(let m=0;m<c.length;){const v=c[m++],w=c[m++];RM(o.data[v],a[v],l,w,h)}}function zD(o,a){const c=Gr(a,o),l=c[pt];!function IT(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])}(l,c);const h=c[Qn];null!==h&&null===c[ko]&&(c[ko]=iy(h,c[No])),ET(l,c,c[Yn])}function ET(o,a,c){Xa(a);try{const l=o.viewQuery;null!==l&&$D(1,l,c);const h=o.template;null!==h&&PD(o,a,h,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&yy(o,a),o.staticViewQueries&&$D(2,o.viewQuery,c);const m=o.components;null!==m&&function NM(o,a){for(let c=0;c<a.length;c++)zD(o,a[c])}(a,m)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{a[$t]&=-5,$c()}}let kM=(()=>{var o;class a{constructor(){this.all=new Set,this.queue=new Map}create(l,h,m){const v=typeof Zone>"u"?null:Zone.current,w=new Vu(l,N=>{this.all.has(N)&&this.queue.set(N,v)},m);let D;this.all.add(w),w.notify();const S=()=>{w.cleanup(),D?.(),this.all.delete(w),this.queue.delete(w)};return D=h?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[l,h]of this.queue)this.queue.delete(l),h?h.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:()=>new o}),a})();function TT(o,a,c){let l=c?o.styles:null,h=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?m=w:1==m?h=et(h,w):2==m&&(l=et(l,w+": "+a[++v]+";"))}c?o.styles=l:o.stylesWithoutHost=l,c?o.classes=h:o.classesWithoutHost=h}function Ng(o,a,c,l,h=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&l.push(_n(m)),ar(m)){for(let w=$r;w<m.length;w++){const D=m[w],S=D[pt].firstChild;null!==S&&Ng(D[pt],D,S,l)}m[Tr]!==m[Qn]&&l.push(m[Tr])}const v=c.type;if(8&v)Ng(o,a,c.child,l);else if(32&v){const w=Pb(c,a);let D;for(;D=w();)l.push(D)}else if(16&v){const w=Gb(a,c);if(Array.isArray(w))l.push(...w);else{const D=bd(a[Bn]);Ng(D[pt],D,w,l,!0)}}c=h?c.projectionNext:c.next}return l}function wT(o,a,c,l=!0){const h=a[lo].rendererFactory;h.begin&&h.begin();try{qD(o,a,o.template,c)}catch(v){throw l&&MM(a,v),v}finally{h.end&&h.end(),a[lo].effectManager?.flush()}}function qD(o,a,c,l){const h=a[$t];if(256!=(256&h)){a[lo].effectManager?.flush(),Xa(a);try{Fo(a),function Uc(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&PD(o,a,c,2,l);const v=3==(3&h);if(v){const S=o.preOrderCheckHooks;null!==S&&zr(a,S,null)}else{const S=o.preOrderHooks;null!==S&&jc(a,S,0,null),$u(a,0)}if(function LM(o){for(let a=rl(o);null!==a;a=Nb(a)){if(!a[ra])continue;const c=a[po];for(let l=0;l<c.length;l++){Dh(c[l])}}}(a),AT(a,2),null!==o.contentQueries&&yy(o,a),v){const S=o.contentCheckHooks;null!==S&&zr(a,S)}else{const S=o.contentHooks;null!==S&&jc(a,S,1),$u(a,1)}!function _M(o,a){const c=o.hostBindingOpCodes;if(null===c)return;const l=TD(a,yc);try{for(let h=0;h<c.length;h++){const m=c[h];if(m<0)yo(~m);else{const v=m,w=c[++h],D=c[++h];Nh(w,v),l.runInContext(D,2,a[v])}}}finally{null===a[yc]&&wD(a,yc),yo(-1)}}(o,a);const w=o.components;null!==w&&KD(a,w,0);const D=o.viewQuery;if(null!==D&&$D(2,D,l),v){const S=o.viewCheckHooks;null!==S&&zr(a,S)}else{const S=o.viewHooks;null!==S&&jc(a,S,2),$u(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[$t]&=-73,Za(a)}finally{$c()}}}function AT(o,a){for(let c=rl(o);null!==c;c=Nb(c))for(let l=$r;l<c.length;l++)WD(c[l],a)}function VM(o,a,c){WD(Gr(a,o),c)}function WD(o,a){if(!function kc(o){return 128==(128&o[$t])}(o))return;const c=o[pt];if(80&o[$t]&&0===a||1024&o[$t]||2===a)qD(c,o,c.template,o[Yn]);else if(o[Ni]>0){AT(o,1);const h=o[pt].components;null!==h&&KD(o,h,1)}}function KD(o,a,c){for(let l=0;l<a.length;l++)VM(o,a[l],c)}class kg{get rootNodes(){const a=this._lView,c=a[pt];return Ng(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(a){this._lView[Yn]=a}get destroyed(){return 256==(256&this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[jn];if(ar(a)){const c=a[8],l=c?c.indexOf(this):-1;l>-1&&(CE(a,l),Yc(c,l))}this._attachedToViewContainer=!1}SE(this._lView[pt],this._lView)}onDestroy(a){!function Oc(o,a){if(256==(256&o[$t]))throw new se(911,!1);null===o[fo]&&(o[fo]=[]),o[fo].push(a)}(this._lView,a)}markForCheck(){Dg(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-129}reattach(){this._lView[$t]|=128}detectChanges(){wT(this._lView[pt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fb(o,a){sl(o,a,a[Ft],2,null,null)}(this._lView[pt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=a}}class ZD extends kg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;wT(a[pt],a,a[Yn],!1)}checkNoChanges(){}get context(){return null}}class QD extends rT{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=pn(a);return new vy(c,this.ngModule)}}function UM(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class MU{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,l){l=ne(l);const h=this.injector.get(a,sT,l);return h!==sT||c===sT?h:this.parentInjector.get(a,c,l)}}class vy extends nT{get inputs(){const a=this.componentDef,c=a.inputTransforms,l=UM(a.inputs);if(null!==c)for(const h of l)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return l}get outputs(){return UM(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Gl(o){return o.map(yh).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,l,h){let m=(h=h||this.ngModule)instanceof dl?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new MU(a,m):a,w=v.get(pD,null);if(null===w)throw new se(407,!1);const N={rendererFactory:w,sanitizer:v.get(oM,null),effectManager:v.get(kM,null)},L=w.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",X=l?function vM(o,a,c,l){const m=l.get(gD,!1)||c===Vn.ShadowDom,v=o.selectRootElement(a,m);return function IM(o){MD(o)}(v),v}(L,l,this.componentDef.encapsulation,v):Dd(L,K,function xU(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(K)),it=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Tt=gT(0,null,null,1,0,null,null,null,null,null,null),De=hy(null,Tt,null,it,null,null,N,L,v,null,null);let Gt,an;Xa(De);try{const un=this.componentDef;let Wi,Ca=null;un.findHostDirectiveDefs?(Wi=[],Ca=new Map,un.findHostDirectiveDefs(un,Wi,Ca),Wi.push(un)):Wi=[un];const hR=function kU(o,a){const c=o[pt],l=Jt;return o[l]=a,mf(c,l,2,"#host",null)}(De,X),fR=function $(o,a,c,l,h,m,v){const w=h[pt];!function rt(o,a,c,l){for(const h of o)a.mergedAttrs=Bs(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(TT(a,a.mergedAttrs,!0),null!==c&&Zu(l,c,a))}(l,o,a,v);let D=null;null!==a&&(D=iy(a,h[No]));const S=m.rendererFactory.createRenderer(a,c);let N=16;c.signals?N=4096:c.onPush&&(N=64);const L=hy(h,pT(c),null,N,h[o.index],o,m,S,null,null,D);return w.firstCreatePass&&yT(w,o,l.length-1),Mg(h,L),h[o.index]=L}(hR,X,un,Wi,De,N,L);an=nd(Tt,Jt),X&&function YD(o,a,c,l){if(l)er(o,c,["ng-version",aM.full]);else{const{attrs:h,classes:m}=function bp(o){const a=[],c=[];let l=1,h=2;for(;l<o.length;){let m=o[l];if("string"==typeof m)2===h?""!==m&&a.push(m,o[++l]):8===h&&c.push(m);else{if(!Rr(h))break;h=m}l++}return{attrs:a,classes:c}}(a.selectors[0]);h&&er(o,c,h),m&&m.length>0&&ef(o,c,m.join(" "))}}(L,un,X,l),void 0!==c&&function us(o,a,c){const l=o.projection=[];for(let h=0;h<a.length;h++){const m=c[h];l.push(null!=m?Array.from(m):null)}}(an,this.ngContentSelectors,c),Gt=function In(o,a,c,l,h,m){const v=Ei(),w=h[pt],D=Ii(v,h);LD(w,h,v,c,null,l);for(let N=0;N<c.length;N++)Ti(Bo(h,w,v.directiveStart+N,v),h);yf(w,h,v),D&&Ti(D,h);const S=Bo(h,w,v.directiveStart+v.componentOffset,v);if(o[Yn]=h[Yn]=S,null!==m)for(const N of m)N(S,a);return fy(w,v,o),S}(fR,un,Wi,Ca,De,[gl]),ET(Tt,De,null)}finally{$c()}return new NU(this.componentType,Gt,lf(an,De),De,an)}}class NU extends dD{constructor(a,c,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new ZD(h),this.componentType=a}setInput(a,c){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const m=this._rootLView;jD(m[pt],m,h,a,c),this.previousInputValues.set(a,c),Dg(Gr(this._tNode.index,m))}}get injector(){return new su(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function gl(){const o=Ei();Sn(Re()[pt],o)}function JD(o){let a=function BM(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const l=[o];for(;a;){let h;if(Ts(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new se(903,!1);h=a.\u0275dir}if(h){if(c){l.push(h);const v=o;v.inputs=bT(o.inputs),v.inputTransforms=bT(o.inputTransforms),v.declaredInputs=bT(o.declaredInputs),v.outputs=bT(o.outputs);const w=h.hostBindings;w&&XD(o,w);const D=h.viewQuery,S=h.contentQueries;if(D&&FU(o,D),S&&LU(o,S),Xe(o.inputs,h.inputs),Xe(o.declaredInputs,h.declaredInputs),Xe(o.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),Xe(v.inputTransforms,h.inputTransforms)),Ts(h)&&h.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const w=m[v];w&&w.ngInherit&&w(o),w===JD&&(c=!1)}}a=Object.getPrototypeOf(a)}!function OU(o){let a=0,c=null;for(let l=o.length-1;l>=0;l--){const h=o[l];h.hostVars=a+=h.hostVars,h.hostAttrs=Bs(h.hostAttrs,c=Bs(c,h.hostAttrs))}}(l)}function bT(o){return o===hr?{}:o===Qt?[]:o}function FU(o,a){const c=o.viewQuery;o.viewQuery=c?(l,h)=>{a(l,h),c(l,h)}:a}function LU(o,a){const c=o.contentQueries;o.contentQueries=c?(l,h,m)=>{a(l,h,m),c(l,h,m)}:a}function XD(o,a){const c=o.hostBindings;o.hostBindings=c?(l,h)=>{a(l,h),c(l,h)}:a}function DT(o){const a=o.inputConfig,c={};for(const l in a)if(a.hasOwnProperty(l)){const h=a[l];Array.isArray(h)&&h[2]&&(c[l]=h[2])}o.inputTransforms=c}function If(o){return!!gu(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function gu(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function cs(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Ey(o,a,c,l){const h=Re();return cs(h,Ya(),a)&&(hn(),du(Xn(),h,o,a,c,l)),Ey}function wf(o,a,c,l){return cs(o,Ya(),c)?a+Ge(c)+l:Ht}function MT(o,a,c,l,h,m,v,w){const D=Re(),S=hn(),N=o+Jt,L=S.firstCreatePass?function _C(o,a,c,l,h,m,v,w,D){const S=a.consts,N=mf(a,o,4,v||null,qs(S,w));_T(a,c,N,qs(S,D)),Sn(a,N);const L=N.tView=gT(2,N,l,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,S,null);return null!==a.queries&&(a.queries.template(a,N),L.queries=a.queries.embeddedTView(N)),N}(N,S,D,a,c,l,h,m,v):S.data[N];ts(L,!1);const K=Gg(S,D,L,o);tu()&&Zs(S,D,K,L),Ti(K,D),Mg(D,D[N]=BD(K,D,K,L)),vc(L)&&xD(S,D,L),null!=v&&py(D,L,w)}let Gg=function zM(o,a,c,l){return vo(!0),a[Ft].createComment("")};function Dy(o,a,c){const l=Re();return cs(l,Ya(),a)&&Ys(hn(),Xn(),l,o,a,l[Ft],c,!1),Dy}function NT(o,a,c,l,h){const v=h?"class":"style";jD(o,c,a.inputs[v],v,l)}function jg(o,a,c,l){const h=Re(),m=hn(),v=Jt+o,w=h[Ft],D=m.firstCreatePass?function kT(o,a,c,l,h,m){const v=a.consts,D=mf(a,o,2,l,qs(v,h));return _T(a,c,D,qs(v,m)),null!==D.attrs&&TT(D,D.attrs,!1),null!==D.mergedAttrs&&TT(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(v,m,h,a,c,l):m.data[v],S=OT(m,h,D,w,a,o);h[v]=S;const N=vc(D);return ts(D,!0),Zu(w,S,D),32!=(32&D.flags)&&tu()&&Zs(m,h,S,D),0===function Bu(){return Pt.lFrame.elementDepthCount}()&&Ti(S,h),function Fc(){Pt.lFrame.elementDepthCount++}(),N&&(xD(m,h,D),fy(m,D,h)),null!==l&&py(h,D),jg}function Df(){let o=Ei();od()?ad():(o=o.parent,ts(o,!1));const a=o;(function Bp(o){return Pt.skipHydrationRootTNode===o})(a)&&function Lc(){Pt.skipHydrationRootTNode=null}(),function Rh(){Pt.lFrame.elementDepthCount--}();const c=hn();return c.firstCreatePass&&(Sn(c,o),ku(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Zp(o){return 0!=(8&o.flags)}(a)&&NT(c,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ws(o){return 0!=(16&o.flags)}(a)&&NT(c,a,Re(),a.stylesWithoutHost,!1),Df}function Cy(o,a,c,l){return jg(o,a,c,l),Df(),Cy}let OT=(o,a,c,l,h,m)=>(vo(!0),Dd(l,h,function dd(){return Pt.lFrame.currentNamespace}()));function zg(o,a,c){const l=Re(),h=hn(),m=o+Jt,v=h.firstCreatePass?function FT(o,a,c,l,h){const m=a.consts,v=qs(m,l),w=mf(a,o,8,"ng-container",v);return null!==v&&TT(w,v,!0),_T(a,c,w,qs(m,h)),null!==a.queries&&a.queries.elementStart(a,w),w}(m,h,l,a,c):h.data[m];ts(v,!0);const w=EC(h,l,v,o);return l[m]=w,tu()&&Zs(h,l,w,v),Ti(w,l),vc(v)&&(xD(h,l,v),fy(h,v,l)),null!=c&&py(l,v),zg}function Sy(){let o=Ei();const a=hn();return od()?ad():(o=o.parent,ts(o,!1)),a.firstCreatePass&&(Sn(a,o),ku(o)&&a.queries.elementEnd(o)),Sy}let EC=(o,a,c,l)=>(vo(!0),bE(a[Ft],""));function Ry(){return Re()}function LT(o){return!!o&&"function"==typeof o.then}function wC(o){return!!o&&"function"==typeof o.subscribe}function Hr(o,a,c,l){const h=Re(),m=hn(),v=Ei();return function AC(o,a,c,l,h,m,v){const w=vc(l),S=o.firstCreatePass&&GD(o),N=a[Yn],L=hu(a);let K=!0;if(3&l.type||v){const Oe=Ii(l,a),it=v?v(Oe):Oe,Tt=L.length,De=v?an=>v(_n(an[l.index])):l.index;let Gt=null;if(!v&&w&&(Gt=function ZM(o,a,c,l){const h=o.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===c&&h[m+1]===l){const w=a[Mo],D=h[m+2];return w.length>D?w[D]:null}"string"==typeof v&&(m+=2)}return null}(o,a,h,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=m,Gt.__ngLastListenerFn__=m,K=!1;else{m=UT(l,a,N,m,!1);const an=c.listen(it,h,m);L.push(m,an),S&&S.push(h,De,Tt,Tt+1)}}else m=UT(l,a,N,m,!1);const X=l.outputs;let Ae;if(K&&null!==X&&(Ae=X[h])){const Oe=Ae.length;if(Oe)for(let it=0;it<Oe;it+=2){const un=a[Ae[it]][Ae[it+1]].subscribe(m),Wi=L.length;L.push(m,un),S&&S.push(h,l.index,Wi,-(Wi+1))}}}(m,h,h[Ft],v,o,a,l),Hr}function bC(o,a,c,l){try{return Li(6,a,c),!1!==c(l)}catch(h){return MM(o,h),!1}finally{Li(7,a,c)}}function UT(o,a,c,l,h){return function m(v){if(v===Function)return l;Dg(o.componentOffset>-1?Gr(o.index,a):a);let D=bC(a,c,l,v),S=m.__ngNextListenerFn__;for(;S;)D=bC(a,c,S,v)&&D,S=S.__ngNextListenerFn__;return h&&!1===D&&v.preventDefault(),D}}function DC(o=1){return function Oh(o){return(Pt.lFrame.contextLView=function Fh(o,a){for(;o>0;)a=a[ho],o--;return a}(o,Pt.lFrame.contextLView))[Yn]}(o)}function Py(o,a,c){return Cf(o,"",a,"",c),Py}function Cf(o,a,c,l,h){const m=Re(),v=wf(m,a,c,l);return v!==Ht&&Ys(hn(),Xn(),m,o,v,m[Ft],h,!1),Cf}function Fy(o,a){return o<<17|a<<2}function mu(o){return o>>17&32767}function qg(o){return 2|o}function oc(o){return(131068&o)>>2}function jT(o,a){return-131069&o|a<<2}function HT(o){return 1|o}function _u(o,a,c,l,h){const m=o[c+1],v=null===a;let w=l?mu(m):oc(m),D=!1;for(;0!==w&&(!1===D||v);){const N=o[w+1];KT(o[w],a)&&(D=!0,o[w+1]=l?HT(N):qg(N)),w=l?mu(N):oc(N)}D&&(o[c+1]=l?qg(m):HT(m))}function KT(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ue(o,a)>=0}function Vy(o,a){return function yu(o,a,c,l){const h=Re(),m=hn(),v=function ns(o){const a=Pt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function xf(o,a,c,l){const h=o.data;if(null===h[c+1]){const m=h[ri()],v=function NC(o,a){return a>=o.expandoStartIndex}(o,c);(function Gy(o,a){return 0!=(o.flags&(a?8:16))})(m,l)&&null===a&&!v&&(a=!1),a=function rN(o,a,c,l){const h=function Ja(o){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=l?a.residualClasses:a.residualStyles;if(null===h)0===(l?a.classBindings:a.styleBindings)&&(c=ls(c=Wg(null,o,a,c,l),a.attrs,l),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(c=Wg(h,o,a,c,l),null===m){let D=function XT(o,a,c){const l=c?a.classBindings:a.styleBindings;if(0!==oc(l))return o[mu(l)]}(o,a,l);void 0!==D&&Array.isArray(D)&&(D=Wg(null,o,a,D[1],l),D=ls(D,a.attrs,l),function zU(o,a,c,l){o[mu(c?a.classBindings:a.styleBindings)]=l}(o,a,l,D))}else m=function By(o,a,c){let l;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)l=ls(l,o[m].hostAttrs,c);return ls(l,a.attrs,c)}(o,a,l)}return void 0!==m&&(l?a.residualClasses=m:a.residualStyles=m),c}(h,m,a,l),function qT(o,a,c,l,h,m){let v=m?a.classBindings:a.styleBindings,w=mu(v),D=oc(v);o[l]=c;let N,S=!1;if(Array.isArray(c)?(N=c[1],(null===N||ue(c,N)>0)&&(S=!0)):N=c,h)if(0!==D){const K=mu(o[w+1]);o[l+1]=Fy(K,w),0!==K&&(o[K+1]=jT(o[K+1],l)),o[w+1]=function GT(o,a){return 131071&o|a<<17}(o[w+1],l)}else o[l+1]=Fy(w,0),0!==w&&(o[w+1]=jT(o[w+1],l)),w=l;else o[l+1]=Fy(D,0),0===w?w=l:o[D+1]=jT(o[D+1],l),D=l;S&&(o[l+1]=qg(o[l+1])),_u(o,N,l,!0),_u(o,N,l,!1),function WT(o,a,c,l,h){const m=h?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&ue(m,a)>=0&&(c[l+1]=HT(c[l+1]))}(a,N,o,l,m),v=Fy(w,D),m?a.classBindings=v:a.styleBindings=v}(h,m,a,c,v,l)}}(m,o,v,l),a!==Ht&&cs(h,v,a)&&function tw(o,a,c,l,h,m,v,w){if(!(3&a.type))return;const D=o.data,S=D[w+1],N=function zT(o){return 1==(1&o)}(S)?nw(D,a,c,h,oc(S),v):void 0;rw(N)||(rw(m)||function $T(o){return 2==(2&o)}(S)&&(m=nw(D,null,c,h,w,v)),function zb(o,a,c,l,h){if(a)h?o.addClass(c,l):o.removeClass(c,l);else{let m=-1===l.indexOf("-")?void 0:Fe.DashCase;null==h?o.removeStyle(c,l,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Fe.Important),o.setStyle(c,l,h,m))}}(l,v,mo(ri(),c),h,m))}(m,m.data[ri()],h,h[Ft],o,h[v+1]=function iw(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=nt(al(o)))),o}(a,c),l,v)}(o,a,null,!0),Vy}function Wg(o,a,c,l,h){let m=null;const v=c.directiveEnd;let w=c.directiveStylingLast;for(-1===w?w=c.directiveStart:w++;w<v&&(m=a[w],l=ls(l,m.hostAttrs,h),m!==o);)w++;return null!==o&&(c.directiveStylingLast=w),l}function ls(o,a,c){const l=c?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?h=v:h===l&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),j(o,v,!!c||a[++m]))}return void 0===o?null:o}function nw(o,a,c,l,h,m){const v=null===a;let w;for(;h>0;){const D=o[h],S=Array.isArray(D),N=S?D[1]:D,L=null===N;let K=c[h+1];K===Ht&&(K=L?Qt:void 0);let X=L?J(K,l):N===l?K:void 0;if(S&&!rw(X)&&(X=J(D,l)),rw(X)&&(w=X,v))return w;const Ae=o[h+1];h=v?mu(Ae):oc(Ae)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(w=J(D,l))}return w}function rw(o){return void 0!==o}function jy(o,a=""){const c=Re(),l=hn(),h=o+Jt,m=l.firstCreatePass?mf(l,h,1,a,null):l.data[h],v=Kg(l,c,m,a,o);c[h]=v,tu()&&Zs(l,c,v,m),ts(m,!1)}let Kg=(o,a,c,l,h)=>(vo(!0),function ug(o,a){return o.createText(a)}(a[Ft],l));function Zg(o){return Qg("",o,""),Zg}function Qg(o,a,c){const l=Re(),h=wf(l,o,a,c);return h!==Ht&&function fu(o,a,c){const l=mo(a,o);!function kb(o,a,c){o.setValue(a,c)}(o[Ft],l,c)}(l,ri(),h),Qg}const Nf=void 0;var YU=["en",[["a","p"],["AM","PM"],Nf],[["AM","PM"],Nf,Nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nf,"{1} 'at' {0}",Nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mw(o){const c=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let Tl={};function Yg(o){const a=function _w(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=dN(a);if(c)return c;const l=a.split("-")[0];if(c=dN(l),c)return c;if("en"===l)return YU;throw new se(701,!1)}function ev(o){return Yg(o)[Hd.PluralCase]}function dN(o){return o in Tl||(Tl[o]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[o]),Tl[o]}var Hd=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(Hd||{});const Jg="en-US";let pN=Jg;function em(o,a,c,l,h){if(o=xe(o),Array.isArray(o))for(let m=0;m<o.length;m++)em(o[m],a,c,l,h);else{const m=hn(),v=Re();let w=Nd(o)?o:xe(o.provide),D=hl(o);const S=Ei(),N=1048575&S.providerIndexes,L=S.directiveStart,K=S.providerIndexes>>20;if(Nd(o)||!o.multi){const X=new Lo(D,h,gf),Ae=nm(w,a,h?N:N+K,L);-1===Ae?(zu(rs(S,v),m,w),tm(m,o,a.length),a.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),c.push(X),v.push(X)):(c[Ae]=X,v[Ae]=X)}else{const X=nm(w,a,N+K,L),Ae=nm(w,a,N,N+K),it=Ae>=0&&c[Ae];if(h&&!it||!h&&!(X>=0&&c[X])){zu(rs(S,v),m,w);const Tt=function HN(o,a,c,l,h){const m=new Lo(o,c,gf);return m.multi=[],m.index=a,m.componentProviders=0,zN(m,h,l&&!c),m}(h?Kd:a2,c.length,h,l,D);!h&&it&&(c[Ae].providerFactory=Tt),tm(m,o,a.length,0),a.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),c.push(Tt),v.push(Tt)}else tm(m,o,X>-1?X:Ae,zN(c[h?Ae:X],D,!h&&l));!h&&l&&it&&c[Ae].componentProviders++}}}function tm(o,a,c,l){const h=Nd(a),m=function Wx(o){return!!o.useClass}(a);if(h||m){const D=(m?xe(a.useClass):a).prototype.ngOnDestroy;if(D){const S=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const N=S.indexOf(c);-1===N?S.push(c,[l,D]):S[N+1].push(l,D)}else S.push(c,D)}}}function zN(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function nm(o,a,c,l){for(let h=c;h<l;h++)if(a[h]===o)return h;return-1}function a2(o,a,c,l){return rm(this.multi,[])}function Kd(o,a,c,l){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Bo(c,c[pt],this.providerFactory.index,l);m=w.slice(0,v),rm(h,m);for(let D=v;D<w.length;D++)m.push(w[D])}else m=[],rm(h,m);return m}function rm(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function oS(o,a=[]){return c=>{c.providersResolver=(l,h)=>function Sw(o,a,c){const l=hn();if(l.firstCreatePass){const h=Ts(o);em(c,l.data,l.blueprint,h,!0),em(a,l.data,l.blueprint,h,!1)}}(l,h?h(o):o,a)}}class Of{}class fv{}function qN(o,a){return new aS(o,a??null,[])}class aS extends Of{constructor(a,c,l){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QD(this);const h=ti(a);this._bootstrapComponents=nc(h.bootstrap),this._r3Injector=RD(a,c,[{provide:Of,useValue:this},{provide:rT,useValue:this.componentFactoryResolver},...l],nt(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class im extends fv{constructor(a){super(),this.moduleType=a}create(a){return new aS(this.moduleType,a,[])}}class pv extends Of{constructor(a){super(),this.componentFactoryResolver=new QD(this),this.instance=null;const c=new ey([...a.providers,{provide:Of,useValue:this},{provide:rT,useValue:this.componentFactoryResolver}],a.parent||X_(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function WN(o,a,c=null){return new pv({providers:o,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let Rw=(()=>{var o;class a{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const h=WE(0,l.type),m=h.length>0?WN([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,m)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return(o=a).\u0275prov=ye({token:o,providedIn:"environment",factory:()=>new o(V(dl))}),a})();function gv(o){o.getStandaloneInjector=a=>a.get(Rw).getOrCreateStandaloneInjector(o)}function Gw(o){return a=>{setTimeout(o,void 0,a)}}const Iu=class ok extends p.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,l){let h=a,m=c||(()=>null),v=l;if(a&&"object"==typeof a){const D=a;h=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=Gw(m),h&&(h=Gw(h)),v&&(v=Gw(v)));const w=super.subscribe({next:h,error:m,complete:v});return a instanceof U.w0&&a.add(w),w}};function ak(){return this._results[Symbol.iterator]()}class jw{get changes(){return this._changes||(this._changes=new Iu)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=jw.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=ak)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const l=this;l.dirty=!1;const h=function ss(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function x_(o,a,c){if(o.length!==a.length)return!1;for(let l=0;l<o.length;l++){let h=o[l],m=a[l];if(c&&(h=c(h),m=c(m)),m!==h)return!1}return!0}(l._results,h,c))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let am=(()=>{class a{}return a.__NG_ELEMENT_ID__=ck,a})();const uk=am,zw=class extends uk{constructor(a,c,l){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c,null)}createEmbeddedViewImpl(a,c,l){const v=this._declarationTContainer.tView,w=hy(this._declarationLView,v,a,4096&this._declarationLView[$t]?4096:16,null,v.declTNode,null,null,null,c||null,l||null);w[xu]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[Er];return null!==S&&(w[Er]=S.createEmbeddedView(v)),ET(v,w,a),new kg(w)}};function ck(){return vv(Ei(),Re())}function vv(o,a){return 4&o.type?new zw(a,o,lf(o,a)):null}let Lf=(()=>{class a{}return a.__NG_ELEMENT_ID__=mk,a})();function mk(){return Ww(Ei(),Re())}const qw=Lf,yS=class extends qw{constructor(a,c,l){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=l}get element(){return lf(this._hostTNode,this._hostLView)}get injector(){return new su(this._hostTNode,this._hostLView)}get parentInjector(){const a=ru(this._hostTNode,this._hostLView);if(nu(a)){const c=Bi(a,this._hostLView),l=As(a);return new su(c[pt].data[l+8],c)}return new su(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=vS(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-$r}createEmbeddedView(a,c,l){let h,m;"number"==typeof l?h=l:null!=l&&(h=l.index,m=l.injector);const w=a.createEmbeddedViewImpl(c||{},m,null);return this.insertImpl(w,h,false),w}createComponent(a,c,l,h,m){const v=a&&!function is(o){return"function"==typeof o}(a);let w;if(v)w=c;else{const Oe=c||{};w=Oe.index,l=Oe.injector,h=Oe.projectableNodes,m=Oe.environmentInjector||Oe.ngModuleRef}const D=v?a:new vy(pn(a)),S=l||this.parentInjector;if(!m&&null==D.ngModule){const it=(v?S:this.parentInjector).get(dl,null);it&&(m=it)}pn(D.componentType??{});const X=D.create(S,h,null,m);return this.insertImpl(X.hostView,w,false),X}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,l){const h=a._lView,m=h[pt];if(function Ka(o){return ar(o[jn])}(h)){const D=this.indexOf(a);if(-1!==D)this.detach(D);else{const S=h[jn],N=new yS(S,S[xr],S[jn]);N.detach(N.indexOf(a))}}const v=this._adjustIndex(c),w=this._lContainer;if(function Lb(o,a,c,l){const h=$r+l,m=c.length;l>0&&(c[h-1][$s]=a),l<m-$r?(a[$s]=c[h],Id(c,$r+l,a)):(c.push(a),a[$s]=null),a[jn]=c;const v=a[xu];null!==v&&c!==v&&function Ox(o,a){const c=o[po];a[Bn]!==a[jn][jn][Bn]&&(o[ra]=!0),null===c?o[po]=[a]:c.push(a)}(v,a);const w=a[Er];null!==w&&w.insertView(o),a[$t]|=128}(m,h,w,v),!l){const D=cg(v,w),S=h[Ft],N=xE(S,w[Tr]);null!==N&&function Nx(o,a,c,l,h,m){l[Qn]=h,l[xr]=a,sl(o,l,c,1,h,m)}(m,w[xr],S,h,N,D)}return a.attachToViewContainerRef(),Id(IS(w),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=vS(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),l=CE(this._lContainer,c);l&&(Yc(IS(this._lContainer),c),SE(l[pt],l))}detach(a){const c=this._adjustIndex(a,-1),l=CE(this._lContainer,c);return l&&null!=Yc(IS(this._lContainer),c)?new kg(l):null}_adjustIndex(a,c=0){return a??this.length+c}};function vS(o){return o[8]}function IS(o){return o[8]||(o[8]=[])}function Ww(o,a){let c;const l=a[o.index];return ar(l)?c=l:(c=BD(l,a,null,o),a[o.index]=c,Mg(a,c)),_k(c,a,o,l),new yS(c,o,a)}let _k=function Ev(o,a,c,l){if(o[Tr])return;let h;h=8&c.type?_n(l):function f2(o,a){const c=o[Ft],l=c.createComment(""),h=Ii(a,o);return Jh(c,xE(c,h),l,function dU(o,a){return o.nextSibling(a)}(c,h),!1),l}(a,c),o[Tr]=h};class wv{constructor(a){this.queryList=a,this.matches=null}clone(){return new wv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Av{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const l=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let m=0;m<l;m++){const v=c.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new Av(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==DS(a,c).matches&&this.queries[c].setDirty()}}class TS{constructor(a,c,l=null){this.predicate=a,this.flags=c,this.read=l}}class Kw{constructor(a=[]){this.queries=a}elementStart(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let l=0;l<this.length;l++){const h=null!==c?c.length:0,m=this.getByIndex(l).embeddedTView(a,h);m&&(m.indexInDeclarationView=l,null!==c?c.push(m):c=[m])}return null!==c?new Kw(c):null}template(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Zw{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Zw(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=a.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(a,c,yk(c,m)),this.matchTNodeWithReadOption(a,c,fa(c,a,m,!1,!1))}else l===am?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,fa(c,a,l,!1,!1))}matchTNodeWithReadOption(a,c,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===cy||h===Lf||h===am&&4&c.type)this.addMatch(c.index,-2);else{const m=fa(c,a,h,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,l)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function yk(o,a){const c=o.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===a)return c[l+1];return null}function wS(o,a,c,l){return-1===c?function vk(o,a){return 11&o.type?lf(o,a):4&o.type?vv(o,a):null}(a,o):-2===c?function Ik(o,a,c){return c===cy?lf(a,o):c===am?vv(a,o):c===Lf?Ww(a,o):void 0}(o,a,l):Bo(o,o[pt],c,a)}function AS(o,a,c,l){const h=a[Er].queries[l];if(null===h.matches){const m=o.data,v=c.matches,w=[];for(let D=0;D<v.length;D+=2){const S=v[D];w.push(S<0?null:wS(a,m[S],v[D+1],c.metadata.read))}h.matches=w}return h.matches}function Qw(o,a,c,l){const h=o.queries.getByIndex(c),m=h.matches;if(null!==m){const v=AS(o,a,h,c);for(let w=0;w<m.length;w+=2){const D=m[w];if(D>0)l.push(v[w/2]);else{const S=m[w+1],N=a[-D];for(let L=$r;L<N.length;L++){const K=N[L];K[xu]===K[jn]&&Qw(K[pt],K,S,l)}if(null!==N[po]){const L=N[po];for(let K=0;K<L.length;K++){const X=L[K];Qw(X[pt],X,S,l)}}}}}return l}function qo(o){const a=Re(),c=hn(),l=zp();la(l+1);const h=DS(c,l);if(o.dirty&&function Nc(o){return 4==(4&o[$t])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const m=h.crossesNgTemplate?Qw(c,a,l,[]):AS(c,a,h,l);o.reset(m,sM),o.notifyOnChanges()}return!0}return!1}function bv(o,a,c,l){const h=hn();if(h.firstCreatePass){const m=Ei();(function bS(o,a,c){null===o.queries&&(o.queries=new Kw),o.queries.track(new Zw(a,c))})(h,new TS(a,c,l),m.index),function Yw(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(h,o),2==(2&c)&&(h.staticContentQueries=!0)}!function Vf(o,a,c){const l=new jw(4==(4&c));(function mT(o,a,c,l){const h=hu(a);h.push(c),o.firstCreatePass&&GD(o).push(l,h.length-1)})(o,a,l,l.destroy),null===a[Er]&&(a[Er]=new Av),a[Er].queries.push(new wv(l))}(h,Re(),c)}function jt(){return function Dv(o,a){return o[Er].queries[a].queryList}(Re(),zp())}function DS(o,a){return o.queries.getByIndex(a)}function um(o){return!!ti(o)}const kS=new xn("Application Initializer");let h0=(()=>{var o;class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h}),this.appInits=pe(kS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const m of this.appInits){const v=m();if(LT(v))l.push(v);else if(wC(v)){const w=new Promise((D,S)=>{v.subscribe({complete:D,error:S})});l.push(w)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{h()}).catch(m=>{this.reject(m)}),0===l.length&&h(),this.initialized=!0}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})(),OS=(()=>{var o;class a{log(l){console.log(l)}warn(l){console.warn(l)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();const Vv=new xn("LocaleId",{providedIn:"root",factory:()=>pe(Vv,Ot.Optional|Ot.SkipSelf)||function FS(){return typeof $localize<"u"&&$localize.locale||Jg}()}),Rk=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Bv=(()=>{var o;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new W.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();class LS{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Pk=(()=>{var o;class a{compileModuleSync(l){return new im(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),v=nc(ti(l).declarations).reduce((w,D)=>{const S=pn(D);return S&&w.push(new vy(S)),w},[]);return new LS(h,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function g0(...o){}class Ps{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Iu(!1),this.onMicrotaskEmpty=new Iu(!1),this.onStable=new Iu(!1),this.onError=new Iu(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&c,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function BS(){const o="function"==typeof Yt.requestAnimationFrame;let a=Yt[o?"requestAnimationFrame":"setTimeout"],c=Yt[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Nk(o){const a=()=>{!function Mk(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Yt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,uc(o),o.isCheckStableRunning=!0,Al(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),uc(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,h,m,v,w)=>{try{return _0(o),c.invokeTask(h,m,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),gm(o)}},onInvoke:(c,l,h,m,v,w,D)=>{try{return _0(o),c.invoke(h,m,v,w,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),gm(o)}},onHasTask:(c,l,h,m)=>{c.hasTask(h,m),l===h&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,uc(o),Al(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,l,h,m)=>(c.handleError(h,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new se(909,!1)}run(a,c,l){return this._inner.run(a,c,l)}runTask(a,c,l,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,a,xk,g0,g0);try{return m.runTask(v,c,l)}finally{m.cancelTask(v)}}runGuarded(a,c,l){return this._inner.runGuarded(a,c,l)}runOutsideAngular(a){return this._outer.run(a)}}const xk={};function Al(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function uc(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function _0(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function gm(o){o._nesting--,Al(o)}class $S{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Iu,this.onMicrotaskEmpty=new Iu,this.onStable=new Iu,this.onError=new Iu}run(a,c,l){return a.apply(c,l)}runGuarded(a,c,l){return a.apply(c,l)}runOutsideAngular(a){return a()}runTask(a,c,l,h){return a.apply(c,l)}}const $f=new xn("",{providedIn:"root",factory:y0});function y0(){const o=pe(Ps);let a=!0;const c=new re.y(h=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{h.next(a),h.complete()})}),l=new re.y(h=>{let m;o.runOutsideAngular(()=>{m=o.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=o.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{h.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});return(0,ie.T)(c,l.pipe((0,ve.B)()))}const fs=new xn(""),v0=new xn("");let ym,mm=(()=>{var o;class a{constructor(l,h,m){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ym||(function GS(o){ym=o}(m),m.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,m){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==v),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:m})}whenStable(l,h,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,m){return[]}}return(o=a).\u0275fac=function(l){return new(l||o)(V(Ps),V(_m),V(v0))},o.\u0275prov=ye({token:o,factory:o.\u0275fac}),a})(),_m=(()=>{var o;class a{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return ym?.findTestabilityInTree(this,l,h)??null}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})(),cc=null;const I0=new xn("AllowMultipleToken"),Yd=new xn("PlatformDestroyListeners"),vm=new xn("appBootstrapListener");class zS{constructor(a,c){this.name=a,this.token=c}}function w0(o,a,c=[]){const l=`Platform: ${a}`,h=new xn(l);return(m=[])=>{let v=Jd();if(!v||v.injector.get(I0,!1)){const w=[...c,...m,{provide:h,useValue:!0}];o?o(w):function kk(o){if(cc&&!cc.get(I0,!1))throw new se(400,!1);(function Im(){!function wh(o){Mr=o}(()=>{throw new se(600,!1)})})(),cc=o;const a=o.get(b0);(function Tm(o){o.get(uD,null)?.forEach(c=>c())})(o)}(function A0(o=[],a){return pl.create({name:a,providers:[{provide:J_,useValue:"platform"},{provide:Yd,useValue:new Set([()=>cc=null])},...o]})}(w,l))}return function qS(o){const a=Jd();if(!a)throw new se(401,!1);return a}()}}function Jd(){return cc?.get(b0)??null}let b0=(()=>{var o;class a{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const m=function Am(o="zone.js",a){return"noop"===o?new $S:"zone.js"===o?new Ps(a):o}(h?.ngZone,function wm(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return m.run(()=>{const v=function u2(o,a,c){return new aS(o,a,c)}(l.moduleType,this.injector,function bm(o){return[{provide:Ps,useFactory:o},{provide:af,multi:!0,useFactory:()=>{const a=pe(Xd,{optional:!0});return()=>a.initialize()}},{provide:C0,useFactory:Ok},{provide:$f,useFactory:y0}]}(()=>m)),w=v.injector.get(hf,null);return m.runOutsideAngular(()=>{const D=m.onError.subscribe({next:S=>{w.handleError(S)}});v.onDestroy(()=>{zv(this._modules,v),D.unsubscribe()})}),function bl(o,a,c){try{const l=c();return LT(l)?l.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):l}catch(l){throw a.runOutsideAngular(()=>o.handleError(l)),l}}(w,m,()=>{const D=v.injector.get(h0);return D.runInitializers(),D.donePromise.then(()=>(function gN(o){wt(o,"Expected localeId to be defined"),"string"==typeof o&&(pN=o.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Vv,Jg)||Jg),this._moduleDoBootstrap(v),v))})})}bootstrapModule(l,h=[]){const m=jv({},h);return function E0(o,a,c){const l=new im(c);return Promise.resolve(l)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,m))}_moduleDoBootstrap(l){const h=l.injector.get(Gf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(m=>h.bootstrap(m));else{if(!l.instance.ngDoBootstrap)throw new se(-403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(Yd,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(o=a).\u0275fac=function(l){return new(l||o)(V(pl))},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();function jv(o,a){return Array.isArray(a)?a.reduce(jv,o):{...o,...a}}let Gf=(()=>{var o;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(C0),this.zoneIsStable=pe($f),this.componentTypes=[],this.components=[],this.isStable=pe(Bv).hasPendingTasks.pipe((0,Ue.w)(l=>l?(0,Ie.of)(!1):this.zoneIsStable),function ce(o,a=_e.y){return o=o??Ke,(0,H.e)((c,l)=>{let h,m=!0;c.subscribe((0,q.x)(l,v=>{const w=a(v);(m||!o(h,w))&&(m=!1,h=w,l.next(v))}))})}(),(0,ve.B)()),this._injector=pe(dl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const m=l instanceof nT;if(!this._injector.get(h0).done)throw!m&&xo(l),new se(405,!1);let w;w=m?l:this._injector.get(rT).resolveComponentFactory(l),this.componentTypes.push(w.componentType);const D=function Em(o){return o.isBoundToModule}(w)?void 0:this._injector.get(Of),N=w.create(pl.NULL,[],h||w.selector,D),L=N.location.nativeElement,K=N.injector.get(fs,null);return K?.registerApplication(L),N.onDestroy(()=>{this.detachView(N.hostView),zv(this.components,N),K?.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;zv(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(vm,[]);h.push(...this._bootstrapListeners),h.forEach(m=>m(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>zv(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new se(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function zv(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}const C0=new xn("",{providedIn:"root",factory:()=>pe(hf).handleError.bind(void 0)});function Ok(){const o=pe(Ps),a=pe(hf);return c=>o.runOutsideAngular(()=>a.handleError(c))}let Xd=(()=>{var o;class a{constructor(){this.zone=pe(Ps),this.applicationRef=pe(Gf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function WS(){return!1}let Fk=(()=>{class a{}return a.__NG_ELEMENT_ID__=KS,a})();function KS(o){return function Lk(o,a,c){if(Gs(o)&&!c){const l=Gr(o.index,a);return new kg(l,l)}return 47&o.type?new kg(a[Bn],a):null}(Ei(),Re(),16==(16&o))}class XS{constructor(){}supports(a){return If(a)}create(a){return new Zv(a)}}const Uk=(o,a)=>a;class Zv{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Uk}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,l=this._removalsHead,h=0,m=null;for(;c||l;){const v=!l||c&&c.currentIndex<x0(l,h,m)?c:l,w=x0(v,h,m),D=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{m||(m=[]);const S=w-h,N=D-h;if(S!=N){for(let K=0;K<S;K++){const X=K<m.length?m[K]:m[K]=0,Ae=X+K;N<=Ae&&Ae<S&&(m[K]=X+1)}m[v.previousIndex]=N-S}}w!==D&&a(v,w,D)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!If(a))throw new se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,v,c=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)m=a[w],v=this._trackByFn(w,m),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,m,v,w)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,w),l=!0),c=c._next}else h=0,function pu(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let l;for(;!(l=c.next()).done;)a(l.value)}}(a,w=>{v=this._trackByFn(h,w),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,w,v,h)),Object.is(c.item,w)||this._addIdentityChange(c,w)):(c=this._mismatch(c,w,v,h),l=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,l,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,h)):a=this._addAfter(new Pm(c,l),m,h),a}_verifyReinsertion(a,c,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,c,l),this._addToMoves(a,l),a}_moveAfter(a,c,l){return this._unlink(a),this._insertAfter(a,c,l),this._addToMoves(a,l),a}_addAfter(a,c,l){return this._insertAfter(a,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,l){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Yv),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,l=a._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yv),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Pm{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qv{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const c=a._prevDup,l=a._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class Yv{constructor(){this.map=new Map}put(a){const c=a.trackById;let l=this.map.get(c);l||(l=new Qv,this.map.set(c,l)),l.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function x0(o,a,c){const l=o.previousIndex;if(null===l)return l;let h=0;return c&&l<c.length&&(h=c[l]),l+a+h}class Hf{constructor(){}supports(a){return a instanceof Map||gu(a)}create(){return new xm}}class xm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||gu(a)))throw new se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(h,l);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const l=a._prev;return c._next=a,c._prev=l,a._prev=c,l&&(l._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const l=new Bk(a);return this._records.set(a,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(l=>c(a[l],l))}}class Bk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function pr(){return new Jv([new XS])}let Jv=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(null!=h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||pr()),deps:[[a,new Ed,new Ks]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(null!=h)return h;throw new se(901,!1)}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:pr}),a})();function eR(){return new M0([new Hf])}let M0=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||eR()),deps:[[a,new Ed,new Ks]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(h)return h;throw new se(901,!1)}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:eR}),a})();const rR=w0(null,"core",[]);let Tu=(()=>{var o;class a{constructor(l){}}return(o=a).\u0275fac=function(l){return new(l||o)(V(Gf))},o.\u0275mod=Ih({type:o}),o.\u0275inj=Gn({}),a})();function cR(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function Fn(o){const a=pn(o);if(!a)return null;const c=new vy(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},4097:(Et,Se,O)=>{O.d(Se,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=O(534);(0,p.registerVersion)("firebase","9.23.0","app")},120:(Et,Se,O)=>{O.d(Se,{Z:()=>p.Z});var p=O(3106);p.Z.registerVersion("firebase","9.23.0","app-compat")},3106:(Et,Se,O)=>{O.d(Se,{Z:()=>Xe});var p=O(9058),U=O(4537),W=O(534),re=O(7879);class ie{constructor(et,je){this._delegate=et,this.firebase=je,(0,W._addComponent)(et,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(et,je=W._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const xe=this._delegate.container.getProvider(et);return!xe.isInitialized()&&"EXPLICIT"===(null===(At=xe.getComponent())||void 0===At?void 0:At.instantiationMode)&&xe.initialize(),xe.getImmediate({identifier:je})}_removeServiceInstance(et,je=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(je)}_addComponent(et){(0,W._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,W._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function _e(){const nt=function Ue(nt){const et={},je={__esModule:!0,initializeApp:function $e(se,Je={}){const Ge=W.initializeApp(se,Je);if((0,p.r3)(et,Ge.name))return et[Ge.name];const ht=new nt(Ge,je);return et[Ge.name]=ht,ht},app:xe,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function ke(se){const Je=se.name,Ge=Je.replace("-compat","");if(W._registerComponent(se)&&"PUBLIC"===se.type){const ht=(Br=xe())=>{if("function"!=typeof Br[Ge])throw ve.create("invalid-app-argument",{appName:Je});return Br[Ge]()};void 0!==se.serviceProps&&(0,p.ZB)(ht,se.serviceProps),je[Ge]=ht,nt.prototype[Ge]=function(...Br){return this._getService.bind(this,Je).apply(this,se.multipleInstances?Br:[])}}return"PUBLIC"===se.type?je[Ge]:null},removeApp:function At(se){delete et[se]},useAsService:function Qe(se,Je){return"serverAuth"===Je?null:Je},modularAPIs:W}};function xe(se){if(!(0,p.r3)(et,se=se||W._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:se});return et[se]}return je.default=je,Object.defineProperty(je,"apps",{get:function Ne(){return Object.keys(et).map(se=>et[se])}}),xe.App=nt,je}(ie);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function et(je){(0,p.ZB)(nt,je)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),nt}(),q=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=H;!function me(nt){(0,W.registerVersion)("@firebase/app-compat","0.2.13",nt)}()},534:(Et,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>ka,_DEFAULT_ENTRY_NAME:()=>Nn,_addComponent:()=>Ot,_addOrOverwriteComponent:()=>en,_apps:()=>Bt,_clearComponents:()=>Cn,_components:()=>mi,_getProvider:()=>ln,_registerComponent:()=>cn,_removeServiceInstance:()=>Xo,deleteApp:()=>Ro,getApp:()=>Jr,getApps:()=>Ji,initializeApp:()=>Pi,onLog:()=>Xi,registerVersion:()=>xi,setLogLevel:()=>Xr});var p=O(5861),U=O(4537),W=O(7879),re=O(9058);const ie=(ge,te)=>te.some(Me=>ge instanceof Me);let Ie,ve;const H=new WeakMap,q=new WeakMap,ce=new WeakMap,Ke=new WeakMap,me=new WeakMap;let et={get(ge,te,Me){if(ge instanceof IDBTransaction){if("done"===te)return q.get(ge);if("objectStoreNames"===te)return ge.objectStoreNames||ce.get(ge);if("store"===te)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return $e(ge[te])},set:(ge,te,Me)=>(ge[te]=Me,!0),has:(ge,te)=>ge instanceof IDBTransaction&&("done"===te||"store"===te)||te in ge};function xe(ge){return"function"==typeof ge?function At(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...te){return ge.apply(Ne(this),te),$e(H.get(this))}:function(...te){return $e(ge.apply(Ne(this),te))}:function(te,...Me){const at=ge.call(Ne(this),te,...Me);return ce.set(at,te.sort?te.sort():[te]),$e(at)}}(ge):(ge instanceof IDBTransaction&&function nt(ge){if(q.has(ge))return;const te=new Promise((Me,at)=>{const Mt=()=>{ge.removeEventListener("complete",kt),ge.removeEventListener("error",mn),ge.removeEventListener("abort",mn)},kt=()=>{Me(),Mt()},mn=()=>{at(ge.error||new DOMException("AbortError","AbortError")),Mt()};ge.addEventListener("complete",kt),ge.addEventListener("error",mn),ge.addEventListener("abort",mn)});q.set(ge,te)}(ge),ie(ge,function Ue(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,et):ge)}function $e(ge){if(ge instanceof IDBRequest)return function Xe(ge){const te=new Promise((Me,at)=>{const Mt=()=>{ge.removeEventListener("success",kt),ge.removeEventListener("error",mn)},kt=()=>{Me($e(ge.result)),Mt()},mn=()=>{at(ge.error),Mt()};ge.addEventListener("success",kt),ge.addEventListener("error",mn)});return te.then(Me=>{Me instanceof IDBCursor&&H.set(Me,ge)}).catch(()=>{}),me.set(te,ge),te}(ge);if(Ke.has(ge))return Ke.get(ge);const te=xe(ge);return te!==ge&&(Ke.set(ge,te),me.set(te,ge)),te}const Ne=ge=>me.get(ge),se=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],Ge=new Map;function ht(ge,te){if(!(ge instanceof IDBDatabase)||te in ge||"string"!=typeof te)return;if(Ge.get(te))return Ge.get(te);const Me=te.replace(/FromIndex$/,""),at=te!==Me,Mt=Je.includes(Me);if(!(Me in(at?IDBIndex:IDBObjectStore).prototype)||!Mt&&!se.includes(Me))return;const kt=function(){var mn=(0,p.Z)(function*(er,...Un){const Mi=this.transaction(er,Mt?"readwrite":"readonly");let Bs=Mi.store;return at&&(Bs=Bs.index(Un.shift())),(yield Promise.all([Bs[Me](...Un),Mt&&Mi.done]))[0]});return function(Un){return mn.apply(this,arguments)}}();return Ge.set(te,kt),kt}!function je(ge){et=ge(et)}(ge=>({...ge,get:(te,Me,at)=>ht(te,Me)||ge.get(te,Me,at),has:(te,Me)=>!!ht(te,Me)||ge.has(te,Me)}));class Br{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function Qr(ge){const te=ge.getComponent();return"VERSION"===te?.type}(Me)){const at=Me.getImmediate();return`${at.library}/${at.version}`}return null}).filter(Me=>Me).join(" ")}}const Ri="@firebase/app",Mn=new W.Yd("@firebase/app"),Nn="[DEFAULT]",Kt={[Ri]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bt=new Map,mi=new Map;function Ot(ge,te){try{ge.container.addComponent(te)}catch(Me){Mn.debug(`Component ${te.name} failed to register with FirebaseApp ${ge.name}`,Me)}}function en(ge,te){ge.container.addOrOverwriteComponent(te)}function cn(ge){const te=ge.name;if(mi.has(te))return Mn.debug(`There were multiple attempts to register component ${te}.`),!1;mi.set(te,ge);for(const Me of Bt.values())Ot(Me,ge);return!0}function ln(ge,te){const Me=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),ge.container.getProvider(te)}function Xo(ge,te,Me=Nn){ln(ge,te).clearInstance(Me)}function Cn(){mi.clear()}const Zt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Cu{constructor(te,Me,at){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const ka="9.23.0";function Pi(ge,te={}){let Me=ge;"object"!=typeof te&&(te={name:te});const at=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},te),Mt=at.name;if("string"!=typeof Mt||!Mt)throw Zt.create("bad-app-name",{appName:String(Mt)});if(Me||(Me=(0,re.aH)()),!Me)throw Zt.create("no-options");const kt=Bt.get(Mt);if(kt){if((0,re.vZ)(Me,kt.options)&&(0,re.vZ)(at,kt.config))return kt;throw Zt.create("duplicate-app",{appName:Mt})}const mn=new U.H0(Mt);for(const Un of mi.values())mn.addComponent(Un);const er=new Cu(Me,at,mn);return Bt.set(Mt,er),er}function Jr(ge=Nn){const te=Bt.get(ge);if(!te&&ge===Nn&&(0,re.aH)())return Pi();if(!te)throw Zt.create("no-app",{appName:ge});return te}function Ji(){return Array.from(Bt.values())}function Ro(ge){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(ge){const te=ge.name;Bt.has(te)&&(Bt.delete(te),yield Promise.all(ge.container.getProviders().map(Me=>Me.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function xi(ge,te,Me){var at;let Mt=null!==(at=Kt[ge])&&void 0!==at?at:ge;Me&&(Mt+=`-${Me}`);const kt=Mt.match(/\s|\//),mn=te.match(/\s|\//);if(kt||mn){const er=[`Unable to register library "${Mt}" with version "${te}":`];return kt&&er.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),kt&&mn&&er.push("and"),mn&&er.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Mn.warn(er.join(" "))}cn(new U.wA(`${Mt}-version`,()=>({library:Mt,version:te}),"VERSION"))}function Xi(ge,te){if(null!==ge&&"function"!=typeof ge)throw Zt.create("invalid-log-argument");(0,W.Am)(ge,te)}function Xr(ge){(0,W.Ub)(ge)}const co="firebase-heartbeat-database",yi=1,z="firebase-heartbeat-store";let V=null;function Y(){return V||(V=function ke(ge,te,{blocked:Me,upgrade:at,blocking:Mt,terminated:kt}={}){const mn=indexedDB.open(ge,te),er=$e(mn);return at&&mn.addEventListener("upgradeneeded",Un=>{at($e(mn.result),Un.oldVersion,Un.newVersion,$e(mn.transaction),Un)}),Me&&mn.addEventListener("blocked",Un=>Me(Un.oldVersion,Un.newVersion,Un)),er.then(Un=>{kt&&Un.addEventListener("close",()=>kt()),Mt&&Un.addEventListener("versionchange",Mi=>Mt(Mi.oldVersion,Mi.newVersion,Mi))}).catch(()=>{}),er}(co,yi,{upgrade:(ge,te)=>{0===te&&ge.createObjectStore(z)}}).catch(ge=>{throw Zt.create("idb-open",{originalErrorMessage:ge.message})})),V}function ne(){return(ne=(0,p.Z)(function*(ge){try{return yield(yield Y()).transaction(z).objectStore(z).get(dn(ge))}catch(te){if(te instanceof re.ZR)Mn.warn(te.message);else{const Me=Zt.create("idb-get",{originalErrorMessage:te?.message});Mn.warn(Me.message)}}})).apply(this,arguments)}function ft(ge,te){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(ge,te){try{const at=(yield Y()).transaction(z,"readwrite");yield at.objectStore(z).put(te,dn(ge)),yield at.done}catch(Me){if(Me instanceof re.ZR)Mn.warn(Me.message);else{const at=Zt.create("idb-set",{originalErrorMessage:Me?.message});Mn.warn(at.message)}}})).apply(this,arguments)}function dn(ge){return`${ge.name}!${ge.options.appId}`}class Ln{constructor(te){this.container=te,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new hr(Me),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var te=this;return(0,p.Z)(function*(){const at=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=tn();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!te._heartbeatsCache.heartbeats.some(kt=>kt.date===Mt))return te._heartbeatsCache.heartbeats.push({date:Mt,agent:at}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(kt=>{const mn=new Date(kt.date).valueOf();return Date.now()-mn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,p.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Me=tn(),{heartbeatsToSend:at,unsentEntries:Mt}=function Vn(ge,te=1024){const Me=[];let at=ge.slice();for(const Mt of ge){const kt=Me.find(mn=>mn.agent===Mt.agent);if(kt){if(kt.dates.push(Mt.date),Qt(Me)>te){kt.dates.pop();break}}else if(Me.push({agent:Mt.agent,dates:[Mt.date]}),Qt(Me)>te){Me.pop();break}at=at.slice(1)}return{heartbeatsToSend:Me,unsentEntries:at}}(te._heartbeatsCache.heartbeats),kt=(0,re.L)(JSON.stringify({version:2,heartbeats:at}));return te._heartbeatsCache.lastSentHeartbeatDate=Me,Mt.length>0?(te._heartbeatsCache.heartbeats=Mt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),kt})()}}function tn(){return(new Date).toISOString().substring(0,10)}class hr{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,p.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function pe(ge){return ne.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Me=this;return(0,p.Z)(function*(){var at;if(yield Me._canUseIndexedDBPromise){const kt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(at=te.lastSentHeartbeatDate)&&void 0!==at?at:kt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Me=this;return(0,p.Z)(function*(){var at;if(yield Me._canUseIndexedDBPromise){const kt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(at=te.lastSentHeartbeatDate)&&void 0!==at?at:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...te.heartbeats]})}})()}}function Qt(ge){return(0,re.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function Po(ge){cn(new U.wA("platform-logger",te=>new Br(te),"PRIVATE")),cn(new U.wA("heartbeat",te=>new Ln(te),"PRIVATE")),xi(Ri,"0.9.13",ge),xi(Ri,"0.9.13","esm2017"),xi("fire-js","")}("")},4537:(Et,Se,O)=>{O.d(Se,{H0:()=>Ue,wA:()=>W});var p=O(5861),U=O(9058);class W{constructor(H,q,ce){this.name=H,this.instanceFactory=q,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const re="[DEFAULT]";class ie{constructor(H,q){this.name=H,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const q=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(q)){const ce=new U.BH;if(this.instancesDeferred.set(q,ce),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:q});Ke&&ce.resolve(Ke)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(H){var q;const ce=this.normalizeInstanceIdentifier(H?.identifier),Ke=null!==(q=H?.optional)&&void 0!==q&&q;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(me){if(Ke)return null;throw me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ve(_e){return"EAGER"===_e.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[q,ce]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(q);try{const me=this.getOrInitializeService({instanceIdentifier:Ke});ce.resolve(me)}catch{}}}}clearInstance(H=re){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,p.Z)(function*(){const q=Array.from(H.instances.values());yield Promise.all([...q.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...q.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=re){return this.instances.has(H)}getOptions(H=re){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:q={}}=H,ce=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ce,options:q});for(const[me,Xe]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(me)&&Xe.resolve(Ke);return Ke}onInit(H,q){var ce;const Ke=this.normalizeInstanceIdentifier(q),me=null!==(ce=this.onInitCallbacks.get(Ke))&&void 0!==ce?ce:new Set;me.add(H),this.onInitCallbacks.set(Ke,me);const Xe=this.instances.get(Ke);return Xe&&H(Xe,Ke),()=>{me.delete(H)}}invokeOnInitCallbacks(H,q){const ce=this.onInitCallbacks.get(q);if(ce)for(const Ke of ce)try{Ke(H,q)}catch{}}getOrInitializeService({instanceIdentifier:H,options:q={}}){let ce=this.instances.get(H);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=H,_e===re?void 0:_e),options:q}),this.instances.set(H,ce),this.instancesOptions.set(H,q),this.invokeOnInitCallbacks(ce,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ce)}catch{}var _e;return ce||null}normalizeInstanceIdentifier(H=re){return this.component?this.component.multipleInstances?H:re:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ue{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const q=this.getProvider(H.name);if(q.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);q.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const q=new ie(H,this);return this.providers.set(H,q),q}getProviders(){return Array.from(this.providers.values())}}},7879:(Et,Se,O)=>{O.d(Se,{Am:()=>_e,Ub:()=>Ue,Yd:()=>ve,in:()=>U});const p=[];var U=function(H){return H[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",H}(U||{});const W={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},re=U.INFO,ie={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Ie=(H,q,...ce)=>{if(q<H.logLevel)return;const Ke=(new Date).toISOString(),me=ie[q];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[me](`[${Ke}]  ${H.name}:`,...ce)};class ve{constructor(q){this.name=q,this._logLevel=re,this._logHandler=Ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in U))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?W[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...q),this._logHandler(this,U.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...q),this._logHandler(this,U.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,U.INFO,...q),this._logHandler(this,U.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,U.WARN,...q),this._logHandler(this,U.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...q),this._logHandler(this,U.ERROR,...q)}}function Ue(H){p.forEach(q=>{q.setLogLevel(H)})}function _e(H,q){for(const ce of p){let Ke=null;q&&q.level&&(Ke=W[q.level]),ce.userLogHandler=null===H?null:(me,Xe,...nt)=>{const et=nt.map(je=>{if(null==je)return null;if("string"==typeof je)return je;if("number"==typeof je||"boolean"==typeof je)return je.toString();if(je instanceof Error)return je.message;try{return JSON.stringify(je)}catch{return null}}).filter(je=>je).join(" ");Xe>=(Ke??me.logLevel)&&H({level:U[Xe].toLowerCase(),message:et,args:nt,type:me.name})}}}},5861:(Et,Se,O)=>{function p(W,re,ie,Ie,ve,Ue,_e){try{var H=W[Ue](_e),q=H.value}catch(ce){return void ie(ce)}H.done?re(q):Promise.resolve(q).then(Ie,ve)}function U(W){return function(){var re=this,ie=arguments;return new Promise(function(Ie,ve){var Ue=W.apply(re,ie);function _e(q){p(Ue,Ie,ve,_e,H,"next",q)}function H(q){p(Ue,Ie,ve,_e,H,"throw",q)}_e(void 0)})}}O.d(Se,{Z:()=>U})},7582:(Et,Se,O)=>{function re(de,le){var Ee={};for(var Te in de)Object.prototype.hasOwnProperty.call(de,Te)&&le.indexOf(Te)<0&&(Ee[Te]=de[Te]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(Te=Object.getOwnPropertySymbols(de);ze<Te.length;ze++)le.indexOf(Te[ze])<0&&Object.prototype.propertyIsEnumerable.call(de,Te[ze])&&(Ee[Te[ze]]=de[Te[ze]])}return Ee}function ce(de,le,Ee,Te){return new(Ee||(Ee=Promise))(function(We,bt){function rn(wt){try{Nt(Te.next(wt))}catch(_t){bt(_t)}}function sr(wt){try{Nt(Te.throw(wt))}catch(_t){bt(_t)}}function Nt(wt){wt.done?We(wt.value):function ze(We){return We instanceof Ee?We:new Ee(function(bt){bt(We)})}(wt.value).then(rn,sr)}Nt((Te=Te.apply(de,le||[])).next())})}function $e(de){return this instanceof $e?(this.v=de,this):new $e(de)}function Ne(de,le,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,Te=Ee.apply(de,le||[]),We=[];return ze={},bt("next"),bt("throw"),bt("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function bt(On){Te[On]&&(ze[On]=function(or){return new Promise(function(Yr,ye){We.push([On,or,Yr,ye])>1||rn(On,or)})})}function rn(On,or){try{!function sr(On){On.value instanceof $e?Promise.resolve(On.value.v).then(Nt,wt):_t(We[0][2],On)}(Te[On](or))}catch(Yr){_t(We[0][3],Yr)}}function Nt(On){rn("next",On)}function wt(On){rn("throw",On)}function _t(On,or){On(or),We.shift(),We.length&&rn(We[0][0],We[0][1])}}function Qe(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,le=de[Symbol.asyncIterator];return le?le.call(de):(de=function nt(de){var le="function"==typeof Symbol&&Symbol.iterator,Ee=le&&de[le],Te=0;if(Ee)return Ee.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Te>=de.length&&(de=void 0),{value:de&&de[Te++],done:!de}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),Ee={},Te("next"),Te("throw"),Te("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function Te(We){Ee[We]=de[We]&&function(bt){return new Promise(function(rn,sr){!function ze(We,bt,rn,sr){Promise.resolve(sr).then(function(Nt){We({value:Nt,done:rn})},bt)}(rn,sr,(bt=de[We](bt)).done,bt.value)})}}}O.d(Se,{FC:()=>Ne,KL:()=>Qe,_T:()=>re,mG:()=>ce,qq:()=>$e}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=9624)}]);