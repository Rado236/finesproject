"use strict";(self.webpackChunkfinesproject=self.webpackChunkfinesproject||[]).push([[179],{6304:(wt,Se,O)=>{O.d(Se,{Dh:()=>Ve,GT:()=>Ie,cc:()=>me,hO:()=>Ke,on:()=>H,pX:()=>se,xv:()=>_e});var p=O(8926),U=O(120),W=O(2793);wt=O.hmd(wt);const re=["ngOnDestroy"],se=(ze,At,xe,Be={})=>new Proxy(ze,{get:(Ne,Oe)=>xe.runOutsideAngular(()=>{var Qe;if(ze[Oe])return!(null===(Qe=Be?.spy)||void 0===Qe)&&Qe.get&&Be.spy.get(Oe,ze[Oe]),ze[Oe];if(re.indexOf(Oe)>-1)return()=>{};const oe=At.toPromise().then(Je=>{const Ge=Je&&Je[Oe];return"function"==typeof Ge?Ge.bind(Je):Ge&&Ge.then?Ge.then(ht=>xe.run(()=>ht)):xe.run(()=>Ge)});return new Proxy(()=>{},{get:(Je,Ge)=>oe[Ge],apply:(Je,Ge,ht)=>oe.then(Hr=>{var ti;const Vi=Hr&&Hr(...ht);return!(null===(ti=Be?.spy)||void 0===ti)&&ti.apply&&Be.spy.apply(Oe,ht,Vi),Vi})})})}),Ie=(ze,At)=>{At.forEach(xe=>{Object.getOwnPropertyNames(xe.prototype||xe).forEach(Be=>{Object.defineProperty(ze.prototype,Be,Object.getOwnPropertyDescriptor(xe.prototype||xe,Be))})})};class ve{constructor(At){return At}}const Ve=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function H(ze,At,xe){const Ne="object"==typeof xe&&xe||{};Ne.name=Ne.name||"string"==typeof xe&&xe||"[DEFAULT]";const Qe=U.Z.apps.filter(oe=>oe&&oe.name===Ne.name)[0]||At.runOutsideAngular(()=>U.Z.initializeApp(ze,Ne));try{JSON.stringify(ze)!==JSON.stringify(Qe.options)&&q("error",`${Qe.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Qe)}const q=(ze,...At)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ze](...At)},ce={provide:ve,useFactory:H,deps:[Ve,p.R0b,[new p.FiY,_e]]};let Ke=(()=>{class ze{constructor(xe){U.Z.registerVersion("angularfire",W.q4.full,"core"),U.Z.registerVersion("angularfire",W.q4.full,"app-compat"),U.Z.registerVersion("angular",p.q4F.full,xe.toString())}static initializeApp(xe,Be){return{ngModule:ze,providers:[{provide:Ve,useValue:xe},{provide:_e,useValue:Be}]}}}return ze.\u0275fac=function(xe){return new(xe||ze)(p.LFG(p.Lbi))},ze.\u0275mod=p.oAB({type:ze}),ze.\u0275inj=p.cJS({providers:[ce]}),ze})();function me(ze,At,xe,Be,Ne){const[,Oe,Qe]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===ze)||[];if(Oe)return function Xe(ze,At){try{return ze.toString()===At.toString()}catch{return ze===At}}(Ne,Qe)||(et("error",`${At} was already initialized on the ${xe} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),et("warn",{is:Ne,was:Qe})),Oe;{const oe=Be();return globalThis.\u0275AngularfireInstanceCache.push([ze,oe,Ne]),oe}}const nt=!!wt.hot,et=(ze,...At)=>{(0,p.X6Q)()&&typeof console<"u"&&console[ze](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(wt,Se,O)=>{O.d(Se,{q4:()=>ba,iC:()=>Sa,fc:()=>ny,HU:()=>Zd,vb:()=>dl,JM:()=>vE,u3:()=>pu});var p=O(8926),U=O(4097),W=O(5861),re=O(534),se=O(9058),Ie=O(4537),ve=O(7879);const Ve=(A,C)=>C.some(P=>A instanceof P);let _e,H;const Ke=new WeakMap,me=new WeakMap,Xe=new WeakMap,nt=new WeakMap,et=new WeakMap;let xe={get(A,C,P){if(A instanceof IDBTransaction){if("done"===C)return me.get(A);if("objectStoreNames"===C)return A.objectStoreNames||Xe.get(A);if("store"===C)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return Qe(A[C])},set:(A,C,P)=>(A[C]=P,!0),has:(A,C)=>A instanceof IDBTransaction&&("done"===C||"store"===C)||C in A};function Oe(A){return"function"==typeof A?function Ne(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...C){return A.apply(oe(this),C),Qe(Ke.get(this))}:function(...C){return Qe(A.apply(oe(this),C))}:function(C,...P){const F=A.call(oe(this),C,...P);return Xe.set(F,C.sort?C.sort():[C]),Qe(F)}}(A):(A instanceof IDBTransaction&&function At(A){if(me.has(A))return;const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("complete",J),A.removeEventListener("error",ue),A.removeEventListener("abort",ue)},J=()=>{P(),j()},ue=()=>{F(A.error||new DOMException("AbortError","AbortError")),j()};A.addEventListener("complete",J),A.addEventListener("error",ue),A.addEventListener("abort",ue)});me.set(A,C)}(A),Ve(A,function q(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,xe):A)}function Qe(A){if(A instanceof IDBRequest)return function ze(A){const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("success",J),A.removeEventListener("error",ue)},J=()=>{P(Qe(A.result)),j()},ue=()=>{F(A.error),j()};A.addEventListener("success",J),A.addEventListener("error",ue)});return C.then(P=>{P instanceof IDBCursor&&Ke.set(P,A)}).catch(()=>{}),et.set(C,A),C}(A);if(nt.has(A))return nt.get(A);const C=Oe(A);return C!==A&&(nt.set(A,C),et.set(C,A)),C}const oe=A=>et.get(A),ht=["get","getKey","getAll","getAllKeys","count"],Hr=["put","add","delete","clear"],ti=new Map;function Vi(A,C){if(!(A instanceof IDBDatabase)||C in A||"string"!=typeof C)return;if(ti.get(C))return ti.get(C);const P=C.replace(/FromIndex$/,""),F=C!==P,j=Hr.includes(P);if(!(P in(F?IDBIndex:IDBObjectStore).prototype)||!j&&!ht.includes(P))return;const J=function(){var ue=(0,W.Z)(function*(Ye,...Ze){const yt=this.transaction(Ye,j?"readwrite":"readonly");let Lt=yt.store;return F&&(Lt=Lt.index(Ze.shift())),(yield Promise.all([Lt[P](...Ze),j&&yt.done]))[0]});return function(Ze){return ue.apply(this,arguments)}}();return ti.set(C,J),J}!function Be(A){xe=A(xe)}(A=>({...A,get:(C,P,F)=>Vi(C,P)||A.get(C,P,F),has:(C,P)=>!!Vi(C,P)||A.has(C,P)}));const $s="@firebase/installations",Nn="0.6.4",Ou=1e4,Mc=`w:${Nn}`,he="FIS_v2",le="https://firebaseinstallations.googleapis.com/v1",Ee=36e5,bt=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function sn(A){return A instanceof se.ZR&&A.code.includes("request-failed")}function cr({projectId:A}){return`${le}/projects/${A}/installations`}function Nt(A){return{token:A.token,requestStatus:2,expiresIn:Kn(A.expiresIn),creationTime:Date.now()}}function Tt(A,C){return _t.apply(this,arguments)}function _t(){return(_t=(0,W.Z)(function*(A,C){const F=(yield C.json()).error;return bt.create("request-failed",{requestName:A,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ln({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function ni(A){return ye.apply(this,arguments)}function ye(){return(ye=(0,W.Z)(function*(A){const C=yield A();return C.status>=500&&C.status<600?A():C})).apply(this,arguments)}function Kn(A){return Number(A.replace("s","000"))}function Gs(){return(Gs=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:C},{fid:P}){const F=cr(A),j=Ln(A),J=C.getImmediate({optional:!0});if(J){const yt=yield J.getHeartbeatsHeader();yt&&j.append("x-firebase-client",yt)}const Ye={method:"POST",headers:j,body:JSON.stringify({fid:P,authVersion:he,appId:A.appId,sdkVersion:Mc})},Ze=yield ni(()=>fetch(F,Ye));if(Ze.ok){const yt=yield Ze.json();return{fid:yt.fid||P,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Nt(yt.authToken)}}throw yield Tt("Create Installation",Ze)})).apply(this,arguments)}function lo(A){return new Promise(C=>{setTimeout(C,A)})}const Ba=/^[cdef][\w-]{21}$/,kn="";function Kt(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const P=function Gt(A){return function Fo(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}(A).substr(0,22)}(A);return Ba.test(P)?P:kn}catch{return kn}}function wi(A){return`${A.appName}!${A.appId}`}const Ot=new Map;function tn(A,C){const P=wi(A);ca(P,C),function Sn(A,C){const P=function Zt(){return!Yt&&"BroadcastChannel"in self&&(Yt=new BroadcastChannel("[Firebase] FID Change"),Yt.onmessage=A=>{ca(A.data.key,A.data.fid)}),Yt}();P&&P.postMessage({key:A,fid:C}),function Fu(){0===Ot.size&&Yt&&(Yt.close(),Yt=null)}()}(P,C)}function ca(A,C){const P=Ot.get(A);if(P)for(const F of P)F(C)}let Yt=null;const $a="firebase-installations-database",Ui=1,ri="firebase-installations-store";let os=null;function Lo(){return os||(os=function Je(A,C,{blocked:P,upgrade:F,blocking:j,terminated:J}={}){const ue=indexedDB.open(A,C),Ye=Qe(ue);return F&&ue.addEventListener("upgradeneeded",Ze=>{F(Qe(ue.result),Ze.oldVersion,Ze.newVersion,Qe(ue.transaction))}),P&&ue.addEventListener("blocked",()=>P()),Ye.then(Ze=>{J&&Ze.addEventListener("close",()=>J()),j&&Ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ye}($a,Ui,{upgrade:(A,C)=>{0===C&&A.createObjectStore(ri)}})),os}function Ti(A,C){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,W.Z)(function*(A,C){const P=wi(A),j=(yield Lo()).transaction(ri,"readwrite"),J=j.objectStore(ri),ue=yield J.get(P);return yield J.put(C,P),yield j.done,(!ue||ue.fid!==C.fid)&&tn(A,C.fid),C})).apply(this,arguments)}function as(A){return ii.apply(this,arguments)}function ii(){return(ii=(0,W.Z)(function*(A){const C=wi(A),F=(yield Lo()).transaction(ri,"readwrite");yield F.objectStore(ri).delete(C),yield F.done})).apply(this,arguments)}function ho(A,C){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,W.Z)(function*(A,C){const P=wi(A),j=(yield Lo()).transaction(ri,"readwrite"),J=j.objectStore(ri),ue=yield J.get(P),Ye=C(ue);return void 0===Ye?yield J.delete(P):yield J.put(Ye,P),yield j.done,Ye&&(!ue||ue.fid!==Ye.fid)&&tn(A,Ye.fid),Ye})).apply(this,arguments)}function z(A){return V.apply(this,arguments)}function V(){return V=(0,W.Z)(function*(A){let C;const P=yield ho(A.appConfig,F=>{const j=function Y(A){return Zn(A||{fid:Kt(),registrationStatus:0})}(F),J=function pe(A,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(bt.create("app-offline"))};const P={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function ne(A,C){return ft.apply(this,arguments)}(A,P);return{installationEntry:P,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:xt(A)}:{installationEntry:C}}(A,j);return C=J.registrationPromise,J.installationEntry});return P.fid===kn?{installationEntry:yield C}:{installationEntry:P,registrationPromise:C}}),V.apply(this,arguments)}function ft(){return ft=(0,W.Z)(function*(A,C){try{const P=yield function Cs(A,C){return Gs.apply(this,arguments)}(A,C);return Ti(A.appConfig,P)}catch(P){throw sn(P)&&409===P.customData.serverCode?yield as(A.appConfig):yield Ti(A.appConfig,{fid:C.fid,registrationStatus:0}),P}}),ft.apply(this,arguments)}function xt(A){return dn.apply(this,arguments)}function dn(){return(dn=(0,W.Z)(function*(A){let C=yield Mr(A.appConfig);for(;1===C.registrationStatus;)yield lo(100),C=yield Mr(A.appConfig);if(0===C.registrationStatus){const{installationEntry:P,registrationPromise:F}=yield z(A);return F||P}return C})).apply(this,arguments)}function Mr(A){return ho(A,C=>{if(!C)throw bt.create("installation-not-found");return Zn(C)})}function Zn(A){return function Un(A){return 1===A.registrationStatus&&A.registrationTime+Ou<Date.now()}(A)?{fid:A.fid,registrationStatus:0}:A}function Bn(){return(Bn=(0,W.Z)(function*({appConfig:A,heartbeatServiceProvider:C},P){const F=function mr(A,{fid:C}){return`${cr(A)}/${C}/authTokens:generate`}(A,P),j=function lr(A,{refreshToken:C}){const P=Ln(A);return P.append("Authorization",function jn(A){return`${he} ${A}`}(C)),P}(A,P),J=C.getImmediate({optional:!0});if(J){const yt=yield J.getHeartbeatsHeader();yt&&j.append("x-firebase-client",yt)}const Ye={method:"POST",headers:j,body:JSON.stringify({installation:{sdkVersion:Mc,appId:A.appId}})},Ze=yield ni(()=>fetch(F,Ye));if(Ze.ok)return Nt(yield Ze.json());throw yield Tt("Generate Auth Token",Ze)})).apply(this,arguments)}function Qt(A){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,W.Z)(function*(A,C=!1){let P;const F=yield ho(A.appConfig,J=>{if(!kt(J))throw bt.create("not-registered");const ue=J.authToken;if(!C&&function yn(A){return 2===A.requestStatus&&!function rr(A){const C=Date.now();return C<A.creationTime||A.creationTime+A.expiresIn<C+Ee}(A)}(ue))return J;if(1===ue.requestStatus)return P=function ge(A,C){return te.apply(this,arguments)}(A,C),J;{if(!navigator.onLine)throw bt.create("app-offline");const Ye=function $n(A){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:C})}(J);return P=function ct(A,C){return Mt.apply(this,arguments)}(A,Ye),Ye}});return P?yield P:F.authToken}),Vo.apply(this,arguments)}function te(){return(te=(0,W.Z)(function*(A,C){let P=yield Me(A.appConfig);for(;1===P.authToken.requestStatus;)yield lo(100),P=yield Me(A.appConfig);const F=P.authToken;return 0===F.requestStatus?Qt(A,C):F})).apply(this,arguments)}function Me(A){return ho(A,C=>{if(!kt(C))throw bt.create("not-registered");return function $i(A){return 1===A.requestStatus&&A.requestTime+Ou<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Mt(){return Mt=(0,W.Z)(function*(A,C){try{const P=yield function nn(A,C){return Bn.apply(this,arguments)}(A,C),F=Object.assign(Object.assign({},C),{authToken:P});return yield Ti(A.appConfig,F),P}catch(P){if(!sn(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ti(A.appConfig,F)}else yield as(A.appConfig);throw P}}),Mt.apply(this,arguments)}function kt(A){return void 0!==A&&2===A.registrationStatus}function la(){return(la=(0,W.Z)(function*(A){const C=A,{installationEntry:P,registrationPromise:F}=yield z(C);return F?F.catch(console.error):Qt(C).catch(console.error),P.fid})).apply(this,arguments)}function Nc(){return Nc=(0,W.Z)(function*(A,C=!1){const P=A;return yield function md(A){return Ga.apply(this,arguments)}(P),(yield Qt(P,C)).token}),Nc.apply(this,arguments)}function Ga(){return(Ga=(0,W.Z)(function*(A){const{registrationPromise:C}=yield z(A);C&&(yield C)})).apply(this,arguments)}function da(A){return bt.create("missing-app-config-values",{valueName:A})}const mf="installations",hg=A=>{const C=A.getProvider("app").getImmediate(),P=function _d(A){if(!A||!A.options)throw da("App Configuration");if(!A.name)throw da("App Name");const C=["projectId","apiKey","appId"];for(const P of C)if(!A.options[P])throw da(P);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}(C);return{app:C,appConfig:P,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Vu=A=>{const C=A.getProvider("app").getImmediate(),P=(0,re._getProvider)(C,mf).getImmediate();return{getId:()=>function js(A){return la.apply(this,arguments)}(P),getToken:j=>function Lu(A){return Nc.apply(this,arguments)}(P,j)}};(function fg(){(0,re._registerComponent)(new Ie.wA(mf,hg,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("installations-internal",Vu,"PRIVATE"))})(),(0,re.registerVersion)($s,Nn),(0,re.registerVersion)($s,Nn,"esm2017");const vd="@firebase/remote-config",si=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jn{constructor(C,P,F,j){this.client=C,this.storage=P,this.storageCache=F,this.logger=j}isCachedDataFresh(C,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-P,j=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${j}.`),j}fetch(C){var P=this;return(0,W.Z)(function*(){const[F,j]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(j&&P.isCachedDataFresh(C.cacheMaxAgeMillis,F))return j;C.eTag=j&&j.eTag;const J=yield P.client.fetch(C),ue=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&ue.push(P.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(ue),J})()}}function $o(A=navigator){return A.languages&&A.languages[0]||A.language}class fo{constructor(C,P,F,j,J,ue){this.firebaseInstallations=C,this.sdkVersion=P,this.namespace=F,this.projectId=j,this.apiKey=J,this.appId=ue}fetch(C){var P=this;return(0,W.Z)(function*(){const[F,j]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ze={sdk_version:P.sdkVersion,app_instance_id:F,app_instance_id_token:j,app_id:P.appId,language_code:$o()},yt={method:"POST",headers:Ye,body:JSON.stringify(Ze)},Lt=fetch(ue,yt),Ut=new Promise((Sr,Ys)=>{C.signal.addEventListener(()=>{const $g=new Error("The operation was aborted.");$g.name="AbortError",Ys($g)})});let ps;try{yield Promise.race([Lt,Ut]),ps=yield Lt}catch(Sr){let Ys="fetch-client-network";throw"AbortError"===Sr?.name&&(Ys="fetch-timeout"),si.create(Ys,{originalErrorMessage:Sr?.message})}let ar=ps.status;const ec=ps.headers.get("ETag")||void 0;let Ao,Os;if(200===ps.status){let Sr;try{Sr=yield ps.json()}catch(Ys){throw si.create("fetch-client-parse",{originalErrorMessage:Ys?.message})}Ao=Sr.entries,Os=Sr.state}if("INSTANCE_STATE_UNSPECIFIED"===Os?ar=500:"NO_CHANGE"===Os?ar=304:("NO_TEMPLATE"===Os||"EMPTY_CONFIG"===Os)&&(Ao={}),304!==ar&&200!==ar)throw si.create("fetch-status",{httpStatus:ar});return{status:ar,eTag:ec,config:Ao}})()}}class Ed{constructor(C,P){this.client=C,this.storage=P}fetch(C){var P=this;return(0,W.Z)(function*(){const F=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:P,backoffCount:F}){var j=this;return(0,W.Z)(function*(){yield function Ft(A,C){return new Promise((P,F)=>{const j=Math.max(C-Date.now(),0),J=setTimeout(P,j);A.addEventListener(()=>{clearTimeout(J),F(si.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,P);try{const J=yield j.client.fetch(C);return yield j.storage.deleteThrottleMetadata(),J}catch(J){if(!function Ha(A){if(!(A instanceof se.ZR&&A.customData))return!1;const C=Number(A.customData.httpStatus);return 429===C||500===C||503===C||504===C}(J))throw J;const ue={throttleEndTimeMillis:Date.now()+(0,se.$s)(F),backoffCount:F+1};return yield j.storage.setThrottleMetadata(ue),j.attemptFetch(C,ue)}})()}}class Uu{constructor(C,P,F,j,J){this.app=C,this._client=P,this._storageCache=F,this._storage=j,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ss(A,C){const P=A.target.error||void 0;return si.create(C,{originalErrorMessage:P&&P?.message})}const br="app_namespace_store";class Go{constructor(C,P,F,j=function go(){return new Promise((A,C)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=F=>{C(Ss(F,"storage-open"))},P.onsuccess=F=>{A(F.target.result)},P.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(br,{keyPath:"compositeKey"})}}catch(P){C(si.create("storage-open",{originalErrorMessage:P?.message}))}})}()){this.appId=C,this.appName=P,this.namespace=F,this.openDbPromise=j}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var P=this;return(0,W.Z)(function*(){const F=yield P.openDbPromise;return new Promise((j,J)=>{const Ye=F.transaction([br],"readonly").objectStore(br),Ze=P.createCompositeKey(C);try{const yt=Ye.get(Ze);yt.onerror=Lt=>{J(Ss(Lt,"storage-get"))},yt.onsuccess=Lt=>{const Ut=Lt.target.result;j(Ut?Ut.value:void 0)}}catch(yt){J(si.create("storage-get",{originalErrorMessage:yt?.message}))}})})()}set(C,P){var F=this;return(0,W.Z)(function*(){const j=yield F.openDbPromise;return new Promise((J,ue)=>{const Ze=j.transaction([br],"readwrite").objectStore(br),yt=F.createCompositeKey(C);try{const Lt=Ze.put({compositeKey:yt,value:P});Lt.onerror=Ut=>{ue(Ss(Ut,"storage-set"))},Lt.onsuccess=()=>{J()}}catch(Lt){ue(si.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(C){var P=this;return(0,W.Z)(function*(){const F=yield P.openDbPromise;return new Promise((j,J)=>{const Ye=F.transaction([br],"readwrite").objectStore(br),Ze=P.createCompositeKey(C);try{const yt=Ye.delete(Ze);yt.onerror=Lt=>{J(Ss(Lt,"storage-delete"))},yt.onsuccess=()=>{j()}}catch(yt){J(si.create("storage-delete",{originalErrorMessage:yt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Bu{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,W.Z)(function*(){const P=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),j=C.storage.getActiveConfig(),J=yield P;J&&(C.lastFetchStatus=J);const ue=yield F;ue&&(C.lastSuccessfulFetchTimestampMillis=ue);const Ye=yield j;Ye&&(C.activeConfig=Ye)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function $u(){return fa.apply(this,arguments)}function fa(){return(fa=(0,W.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}!function kc(){(0,re._registerComponent)(new Ie.wA("remote-config",function A(C,{instanceIdentifier:P}){const F=C.getProvider("app").getImmediate(),j=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw si.create("registration-window");if(!(0,se.hl)())throw si.create("indexed-db-unavailable");const{projectId:J,apiKey:ue,appId:Ye}=F.options;if(!J)throw si.create("registration-project-id");if(!ue)throw si.create("registration-api-key");if(!Ye)throw si.create("registration-app-id");const Ze=new Go(Ye,F.name,P=P||"firebase"),yt=new Bu(Ze),Lt=new ve.Yd(vd);Lt.logLevel=ve.in.ERROR;const Ut=new fo(j,re.SDK_VERSION,P,J,ue,Ye),ps=new Ed(Ut,Ze),ar=new Jn(ps,Ze,yt,Lt),ec=new Uu(F,ar,yt,Ze,Lt);return function gg(A){const C=(0,se.m9)(A);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ec),ec},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(vd,"0.4.4"),(0,re.registerVersion)(vd,"0.4.4","esm2017")}();const Dr=(A,C)=>C.some(P=>A instanceof P);let Ka,mo;const Td=new WeakMap,ai=new WeakMap,dr=new WeakMap,Gu=new WeakMap,Hs=new WeakMap;let Za={get(A,C,P){if(A instanceof IDBTransaction){if("done"===C)return ai.get(A);if("objectStoreNames"===C)return A.objectStoreNames||dr.get(A);if("store"===C)return P.objectStoreNames[1]?void 0:P.objectStore(P.objectStoreNames[0])}return zi(A[C])},set:(A,C,P)=>(A[C]=P,!0),has:(A,C)=>A instanceof IDBTransaction&&("done"===C||"store"===C)||C in A};function Z_(A){return"function"==typeof A?function _g(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qr(){return mo||(mo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...C){return A.apply(yg(this),C),zi(Td.get(this))}:function(...C){return zi(A.apply(yg(this),C))}:function(C,...P){const F=A.call(yg(this),C,...P);return dr.set(F,C.sort?C.sort():[C]),zi(F)}}(A):(A instanceof IDBTransaction&&function Rs(A){if(ai.has(A))return;const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("complete",J),A.removeEventListener("error",ue),A.removeEventListener("abort",ue)},J=()=>{P(),j()},ue=()=>{F(A.error||new DOMException("AbortError","AbortError")),j()};A.addEventListener("complete",J),A.addEventListener("error",ue),A.addEventListener("abort",ue)});ai.set(A,C)}(A),Dr(A,function ji(){return Ka||(Ka=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,Za):A)}function zi(A){if(A instanceof IDBRequest)return function Oc(A){const C=new Promise((P,F)=>{const j=()=>{A.removeEventListener("success",J),A.removeEventListener("error",ue)},J=()=>{P(zi(A.result)),j()},ue=()=>{F(A.error),j()};A.addEventListener("success",J),A.addEventListener("error",ue)});return C.then(P=>{P instanceof IDBCursor&&Td.set(P,A)}).catch(()=>{}),Hs.set(C,A),C}(A);if(Gu.has(A))return Gu.get(A);const C=Z_(A);return C!==A&&(Gu.set(A,C),Hs.set(C,A)),C}const yg=A=>Hs.get(A);function If(A,C,{blocked:P,upgrade:F,blocking:j,terminated:J}={}){const ue=indexedDB.open(A,C),Ye=zi(ue);return F&&ue.addEventListener("upgradeneeded",Ze=>{F(zi(ue.result),Ze.oldVersion,Ze.newVersion,zi(ue.transaction))}),P&&ue.addEventListener("blocked",()=>P()),Ye.then(Ze=>{J&&Ze.addEventListener("close",()=>J()),j&&Ze.addEventListener("versionchange",()=>j())}).catch(()=>{}),Ye}function qs(A,{blocked:C}={}){const P=indexedDB.deleteDatabase(A);return C&&P.addEventListener("blocked",()=>C()),zi(P).then(()=>{})}const ju=["get","getKey","getAll","getAllKeys","count"],Fc=["put","add","delete","clear"],vg=new Map;function Q_(A,C){if(!(A instanceof IDBDatabase)||C in A||"string"!=typeof C)return;if(vg.get(C))return vg.get(C);const P=C.replace(/FromIndex$/,""),F=C!==P,j=Fc.includes(P);if(!(P in(F?IDBIndex:IDBObjectStore).prototype)||!j&&!ju.includes(P))return;const J=function(){var ue=(0,W.Z)(function*(Ye,...Ze){const yt=this.transaction(Ye,j?"readwrite":"readonly");let Lt=yt.store;return F&&(Lt=Lt.index(Ze.shift())),(yield Promise.all([Lt[P](...Ze),j&&yt.done]))[0]});return function(Ze){return ue.apply(this,arguments)}}();return vg.set(C,J),J}!function Qa(A){Za=A(Za)}(A=>({...A,get:(C,P,F)=>Q_(C,P)||A.get(C,P,F),has:(C,P)=>!!Q_(C,P)||A.has(C,P)}));const Y_="/firebase-messaging-sw.js",J_="/firebase-cloud-messaging-push-scope",Ya="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_E="https://fcmregistrations.googleapis.com/v1",Ad="google.c.a.c_id",hr="google.c.a.c_l",Lc="google.c.a.ts";var Dd=function(A){return A.PUSH_RECEIVED="push-received",A.NOTIFICATION_CLICKED="notification-clicked",A}(Dd||{});function pa(A){const C=new Uint8Array(A);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jo(A){const P=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(P),j=new Uint8Array(F.length);for(let J=0;J<F.length;++J)j[J]=F.charCodeAt(J);return j}const ga="fcm_token_details_db",X_=5,Vc="fcm_token_object_Store";function Ja(){return Ja=(0,W.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(ga))return null;let C=null;return(yield If(ga,X_,{upgrade:(F=(0,W.Z)(function*(j,J,ue,Ye){var Ze;if(J<2||!j.objectStoreNames.contains(Vc))return;const yt=Ye.objectStore(Vc),Lt=yield yt.index("fcmSenderId").get(A);if(yield yt.clear(),Lt)if(2===J){const Ut=Lt;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;C={token:Ut.fcmToken,createTime:null!==(Ze=Ut.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:pa(Ut.vapidKey)}}}else if(3===J){const Ut=Lt;C={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:pa(Ut.auth),p256dh:pa(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:pa(Ut.vapidKey)}}}else if(4===J){const Ut=Lt;C={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:pa(Ut.auth),p256dh:pa(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:pa(Ut.vapidKey)}}}}),function(J,ue,Ye,Ze){return F.apply(this,arguments)})})).close(),yield qs(ga),yield qs("fcm_vapid_details_db"),yield qs("undefined"),function Cd(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:C}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var F}),Ja.apply(this,arguments)}const Sd="firebase-messaging-database",zu=1,Hi="firebase-messaging-store";let us=null;function ma(){return us||(us=If(Sd,zu,{upgrade:(A,C)=>{0===C&&A.createObjectStore(Hi)}})),us}function sr(A){return _a.apply(this,arguments)}function _a(){return _a=(0,W.Z)(function*(A){const C=Rd(A),F=yield(yield ma()).transaction(Hi).objectStore(Hi).get(C);if(F)return F;{const j=yield function Ig(A){return Ja.apply(this,arguments)}(A.appConfig.senderId);if(j)return yield Uc(A,j),j}}),_a.apply(this,arguments)}function Uc(A,C){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,W.Z)(function*(A,C){const P=Rd(A),j=(yield ma()).transaction(Hi,"readwrite");return yield j.objectStore(Hi).put(C,P),yield j.done,C})).apply(this,arguments)}function _o(){return(_o=(0,W.Z)(function*(A){const C=Rd(A),F=(yield ma()).transaction(Hi,"readwrite");yield F.objectStore(Hi).delete(C),yield F.done})).apply(this,arguments)}function Rd({appConfig:A}){return A.appId}const Fr=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $c(A,C){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,W.Z)(function*(A,C){const P=yield jc(A),F=wg(C),j={method:"POST",headers:P,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(ya(A.appConfig),j)).json()}catch(ue){throw Fr.create("token-subscribe-failed",{errorInfo:ue?.toString()})}if(J.error)throw Fr.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Fr.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function eu(){return(eu=(0,W.Z)(function*(A,C){const P=yield jc(A),F=wg(C.subscriptionOptions),j={method:"PATCH",headers:P,body:JSON.stringify(F)};let J;try{J=yield(yield fetch(`${ya(A.appConfig)}/${C.token}`,j)).json()}catch(ue){throw Fr.create("token-update-failed",{errorInfo:ue?.toString()})}if(J.error)throw Fr.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Fr.create("token-update-no-token");return J.token})).apply(this,arguments)}function wf(A,C){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,W.Z)(function*(A,C){const F={method:"DELETE",headers:yield jc(A)};try{const J=yield(yield fetch(`${ya(A.appConfig)}/${C}`,F)).json();if(J.error)throw Fr.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(j){throw Fr.create("token-unsubscribe-failed",{errorInfo:j?.toString()})}})).apply(this,arguments)}function ya({projectId:A}){return`${_E}/projects/${A}/registrations`}function jc(A){return qu.apply(this,arguments)}function qu(){return(qu=(0,W.Z)(function*({appConfig:A,installations:C}){const P=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function wg({p256dh:A,auth:C,endpoint:P,vapidKey:F}){const j={web:{endpoint:P,auth:C,p256dh:A}};return F!==Ya&&(j.web.applicationPubKey=F),j}const zc=6048e5;function Hc(){return Hc=(0,W.Z)(function*(A){const C=yield function qi(A,C){return Kc.apply(this,arguments)}(A.swRegistration,A.vapidKey),P={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:C.endpoint,auth:pa(C.getKey("auth")),p256dh:pa(C.getKey("p256dh"))},F=yield sr(A.firebaseDependencies);if(F){if(function tu(A,C){return C.vapidKey===A.vapidKey&&C.endpoint===A.endpoint&&C.auth===A.auth&&C.p256dh===A.p256dh}(F.subscriptionOptions,P))return Date.now()>=F.createTime+zc?function Ag(A,C){return qc.apply(this,arguments)}(A,{token:F.token,createTime:Date.now(),subscriptionOptions:P}):F.token;try{yield wf(A.firebaseDependencies,F.token)}catch(j){console.warn(j)}return Pd(A.firebaseDependencies,P)}return Pd(A.firebaseDependencies,P)}),Hc.apply(this,arguments)}function Wu(){return Wu=(0,W.Z)(function*(A){const C=yield sr(A.firebaseDependencies);C&&(yield wf(A.firebaseDependencies,C.token),yield function Bc(A){return _o.apply(this,arguments)}(A.firebaseDependencies));const P=yield A.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()}),Wu.apply(this,arguments)}function qc(){return qc=(0,W.Z)(function*(A,C){try{const P=yield function Hu(A,C){return eu.apply(this,arguments)}(A.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:P,createTime:Date.now()});return yield Uc(A.firebaseDependencies,F),P}catch(P){throw yield function Tf(A){return Wu.apply(this,arguments)}(A),P}}),qc.apply(this,arguments)}function Pd(A,C){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,W.Z)(function*(A,C){const F={token:yield $c(A,C),createTime:Date.now(),subscriptionOptions:C};return yield Uc(A,F),F.token})).apply(this,arguments)}function Kc(){return(Kc=(0,W.Z)(function*(A,C){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jo(C)})})).apply(this,arguments)}function vn(A){const C={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function bg(A,C){if(!C.notification)return;A.notification={};const P=C.notification.title;P&&(A.notification.title=P);const F=C.notification.body;F&&(A.notification.body=F);const j=C.notification.image;j&&(A.notification.image=j);const J=C.notification.icon;J&&(A.notification.icon=J)}(C,A),function yo(A,C){C.data&&(A.data=C.data)}(C,A),function Di(A,C){var P,F,j,J,ue;if(!(C.fcmOptions||null!==(P=C.notification)&&void 0!==P&&P.click_action))return;A.fcmOptions={};const Ye=null!==(j=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==j?j:null===(J=C.notification)||void 0===J?void 0:J.click_action;Ye&&(A.fcmOptions.link=Ye);const Ze=null===(ue=C.fcmOptions)||void 0===ue?void 0:ue.analytics_label;Ze&&(A.fcmOptions.analyticsLabel=Ze)}(C,A),C}function Md(A,C){const P=[];for(let F=0;F<A.length;F++)P.push(A.charAt(F)),F<C.length&&P.push(C.charAt(F));return P.join("")}function Wr(A){return Fr.create("missing-app-config-values",{valueName:A})}Md("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Md("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Zc{constructor(C,P,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const j=function Ks(A){if(!A||!A.options)throw Wr("App Configuration Object");if(!A.name)throw Wr("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:P}=A;for(const F of C)if(!P[F])throw Wr(F);return{appName:A.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:j,installations:P,analyticsProvider:F}}_delete(){return Promise.resolve()}}function nu(){return(nu=(0,W.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Y_,{scope:J_}),A.swRegistration.update().catch(()=>{})}catch(C){throw Fr.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function zo(){return(zo=(0,W.Z)(function*(A,C){if(!C&&!A.swRegistration&&(yield function Qc(A){return nu.apply(this,arguments)}(A)),C||!A.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Fr.create("invalid-sw-registration");A.swRegistration=C}})).apply(this,arguments)}function ru(){return(ru=(0,W.Z)(function*(A,C){C?A.vapidKey=C:A.vapidKey||(A.vapidKey=Ya)})).apply(this,arguments)}function Yc(){return Yc=(0,W.Z)(function*(A,C){if(!navigator)throw Fr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fr.create("permission-blocked");return yield function Af(A,C){return ru.apply(this,arguments)}(A,C?.vapidKey),yield function Zs(A,C){return zo.apply(this,arguments)}(A,C?.serviceWorkerRegistration),function Tg(A){return Hc.apply(this,arguments)}(A)}),Yc.apply(this,arguments)}function Pt(){return(Pt=(0,W.Z)(function*(A,C,P){const F=function Df(A){switch(A){case Dd.NOTIFICATION_CLICKED:return"notification_open";case Dd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:P[Ad],message_name:P[hr],message_time:P[Lc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ku(){return Ku=(0,W.Z)(function*(A,C){const P=C.data;if(!P.isFirebaseMessaging)return;A.onMessageHandler&&P.messageType===Dd.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(vn(P)):A.onMessageHandler.next(vn(P)));const F=P.data;(function xd(A){return"object"==typeof A&&!!A&&Ad in A})(F)&&"1"===F["google.c.a.e"]&&(yield function bf(A,C,P){return Pt.apply(this,arguments)}(A,P.messageType,F))}),Ku.apply(this,arguments)}const Jc="@firebase/messaging",Dg=A=>{const C=new Zc(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function iu(A,C){return Ku.apply(this,arguments)}(C,P)),C},va=A=>{const C=A.getProvider("messaging").getImmediate();return{getToken:F=>function Nd(A,C){return Yc.apply(this,arguments)}(C,F)}};function kd(){return Od.apply(this,arguments)}function Od(){return(Od=(0,W.Z)(function*(){try{yield(0,se.eu)()}catch{return!1}return typeof window<"u"&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cg(){(0,re._registerComponent)(new Ie.wA("messaging",Dg,"PUBLIC")),(0,re._registerComponent)(new Ie.wA("messaging-internal",va,"PRIVATE")),(0,re.registerVersion)(Jc,"0.12.4"),(0,re.registerVersion)(Jc,"0.12.4","esm2017")}();const Wi="analytics",cs="firebase_id",Fd="origin",Ld=6e4,Rf="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rg="https://www.googletagmanager.com/gtag/js",_r=new ve.Yd("@firebase/analytics"),On=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function tl(A){if(!A.startsWith(Rg)){const C=On.create("invalid-gtag-resource",{gtagURL:A});return _r.warn(C.message),""}return A}function su(A){return Promise.all(A.map(C=>C.catch(P=>P)))}function nl(){return(nl=(0,W.Z)(function*(A,C,P,F,j,J){const ue=F[j];try{if(ue)yield C[ue];else{const Ze=(yield su(P)).find(yt=>yt.measurementId===j);Ze&&(yield C[Ze.appId])}}catch(Ye){_r.error(Ye)}A("config",j,J)})).apply(this,arguments)}function ou(){return(ou=(0,W.Z)(function*(A,C,P,F,j){try{let J=[];if(j&&j.send_to){let ue=j.send_to;Array.isArray(ue)||(ue=[ue]);const Ye=yield su(P);for(const Ze of ue){const yt=Ye.find(Ut=>Ut.measurementId===Ze),Lt=yt&&C[yt.appId];if(!Lt){J=[];break}J.push(Lt)}}0===J.length&&(J=Object.values(C)),yield Promise.all(J),A("event",F,j||{})}catch(J){_r.error(J)}})).apply(this,arguments)}const Mg=30,Xn=new class Ng{constructor(C={},P=1e3){this.throttleMetadata=C,this.intervalMillis=P}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,P){this.throttleMetadata[C]=P}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function kg(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}function rl(){return(rl=(0,W.Z)(function*(A){var C;const{appId:P,apiKey:F}=A,j={method:"GET",headers:kg(F)},J=Rf.replace("{app-id}",P),ue=yield fetch(J,j);if(200!==ue.status&&304!==ue.status){let Ye="";try{const Ze=yield ue.json();null!==(C=Ze.error)&&void 0!==C&&C.message&&(Ye=Ze.error.message)}catch{}throw On.create("config-fetch-failed",{httpStatus:ue.status,responseMessage:Ye})}return ue.json()})).apply(this,arguments)}function kf(){return(kf=(0,W.Z)(function*(A,C=Xn,P){const{appId:F,apiKey:j,measurementId:J}=A.options;if(!F)throw On.create("no-app-id");if(!j){if(J)return{measurementId:J,appId:F};throw On.create("no-api-key")}const ue=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Ud;return setTimeout((0,W.Z)(function*(){Ye.abort()}),void 0!==P?P:Ld),ui({appId:F,apiKey:j,measurementId:J},ue,Ye,C)})).apply(this,arguments)}function ui(A,C,P){return Io.apply(this,arguments)}function Io(){return Io=(0,W.Z)(function*(A,{throttleEndTimeMillis:C,backoffCount:P},F,j=Xn){var J;const{appId:ue,measurementId:Ye}=A;try{yield function er(A,C){return new Promise((P,F)=>{const j=Math.max(C-Date.now(),0),J=setTimeout(P,j);A.addEventListener(()=>{clearTimeout(J),F(On.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(F,C)}catch(Ze){if(Ye)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:ue,measurementId:Ye};throw Ze}try{const Ze=yield function Vd(A){return rl.apply(this,arguments)}(A);return j.deleteThrottleMetadata(ue),Ze}catch(Ze){const yt=Ze;if(!function il(A){if(!(A instanceof se.ZR&&A.customData))return!1;const C=Number(A.customData.httpStatus);return 429===C||500===C||503===C||504===C}(yt)){if(j.deleteThrottleMetadata(ue),Ye)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:ue,measurementId:Ye};throw Ze}const Lt=503===Number(null===(J=yt?.customData)||void 0===J?void 0:J.httpStatus)?(0,se.$s)(P,j.intervalMillis,Mg):(0,se.$s)(P,j.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Lt,backoffCount:P+1};return j.setThrottleMetadata(ue,Ut),_r.debug(`Calling attemptFetch again in ${Lt} millis`),ui(A,Ut,F,j)}}),Io.apply(this,arguments)}class Ud{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let uu,ol;function $d(){return($d=(0,W.Z)(function*(A,C,P,F,j){if(j&&j.global)A("event",P,F);else{const J=yield C;A("event",P,Object.assign(Object.assign({},F),{send_to:J}))}})).apply(this,arguments)}function Ki(){return(Ki=(0,W.Z)(function*(){if(!(0,se.hl)())return _r.warn(On.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(A){return _r.warn(On.create("indexeddb-unavailable",{errorInfo:A?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ff(){return Ff=(0,W.Z)(function*(A,C,P,F,j,J,ue){var Ye;const Ze=function Nf(A){return kf.apply(this,arguments)}(A);Ze.then(ar=>{P[ar.measurementId]=ar.appId,A.options.measurementId&&ar.measurementId!==A.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>_r.error(ar)),C.push(Ze);const yt=function Yu(){return Ki.apply(this,arguments)}().then(ar=>{if(ar)return F.getId()}),[Lt,Ut]=yield Promise.all([Ze,yt]);(function Mf(A){const C=window.document.getElementsByTagName("script");for(const P of Object.values(C))if(P.src&&P.src.includes(Rg)&&P.src.includes(A))return P;return null})(J)||function Pg(A,C){const P=function ls(A,C){let P;return window.trustedTypes&&(P=window.trustedTypes.createPolicy(A,C)),P}("firebase-js-sdk-policy",{createScriptURL:tl}),F=document.createElement("script"),j=`${Rg}?l=${A}&id=${C}`;F.src=P?P?.createScriptURL(j):j,F.async=!0,document.head.appendChild(F)}(J,Lt.measurementId),ol&&(j("consent","default",ol),function Ea(A){ol=A}(void 0)),j("js",new Date);const ps=null!==(Ye=ue?.config)&&void 0!==Ye?Ye:{};return ps[Fd]="firebase",ps.update=!0,null!=Ut&&(ps[cs]=Ut),j("config",Lt.measurementId,ps),uu&&(j("set",uu),function Ho(A){uu=A}(void 0)),Lt.measurementId}),Ff.apply(this,arguments)}class Fg{constructor(C){this.app=C}_delete(){return delete Ps[this.app.options.appId],Promise.resolve()}}let Ps={},al=[];const Lg={};let Ms,Zi,lu="dataLayer",wa=!1;function Lf(A,C,P){!function ty(){const A=[];if((0,se.ru)()&&A.push("This is a browser extension environment."),(0,se.zI)()||A.push("Cookies are not available."),A.length>0){const C=A.map((F,j)=>`(${j+1}) ${F}`).join(" "),P=On.create("invalid-analytics-context",{errorInfo:C});_r.warn(P.message)}}();const F=A.options.appId;if(!F)throw On.create("no-app-id");if(!A.options.apiKey){if(!A.options.measurementId)throw On.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ps[F])throw On.create("already-exists",{id:F});if(!wa){!function Pf(A){let C=[];Array.isArray(window[A])?C=window[A]:window[A]=C}(lu);const{wrappedGtag:J,gtagCore:ue}=function Ia(A,C,P,F,j){let J=function(...ue){window[F].push(arguments)};return window[j]&&"function"==typeof window[j]&&(J=window[j]),window[j]=function xg(A,C,P,F){function J(){return J=(0,W.Z)(function*(ue,...Ye){try{if("event"===ue){const[Ze,yt]=Ye;yield function vo(A,C,P,F,j){return ou.apply(this,arguments)}(A,C,P,Ze,yt)}else if("config"===ue){const[Ze,yt]=Ye;yield function xf(A,C,P,F,j,J){return nl.apply(this,arguments)}(A,C,P,F,Ze,yt)}else if("consent"===ue){const[Ze]=Ye;A("consent","update",Ze)}else if("get"===ue){const[Ze,yt,Lt]=Ye;A("get",Ze,yt,Lt)}else if("set"===ue){const[Ze]=Ye;A("set",Ze)}else A(ue,...Ye)}catch(Ze){_r.error(Ze)}}),J.apply(this,arguments)}return function j(ue){return J.apply(this,arguments)}}(J,A,C,P),{gtagCore:J,wrappedGtag:window[j]}}(Ps,al,Lg,lu,"gtag");Zi=J,Ms=ue,wa=!0}return Ps[F]=function rn(A,C,P,F,j,J,ue){return Ff.apply(this,arguments)}(A,al,Lg,C,Ms,lu,P),new Fg(A)}function Qi(){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,W.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch{return!1}})).apply(this,arguments)}const hu="@firebase/analytics";!function Ta(){(0,re._registerComponent)(new Ie.wA(Wi,(C,{options:P})=>Lf(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,re._registerComponent)(new Ie.wA("analytics-internal",function A(C){try{const P=C.getProvider(Wi).getImmediate();return{logEvent:(F,j,J)=>function zd(A,C,P,F){A=(0,se.m9)(A),function Bd(A,C,P,F,j){return $d.apply(this,arguments)}(Zi,Ps[A.app.options.appId],C,P,F).catch(j=>_r.error(j))}(P,F,j,J)}}catch(P){throw On.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,re.registerVersion)(hu,"0.10.0"),(0,re.registerVersion)(hu,"0.10.0","esm2017")}();var Ko=O(1954),ll=O(2631);const fu=new class qd extends ll.v{}(class cl extends Ko.o{constructor(C,P){super(C,P),this.scheduler=C,this.work=P}schedule(C,P=0){return P>0?super.schedule(C,P):(this.delay=P,this.state=C,this.scheduler.flush(this),this)}execute(C,P){return P>0||this.closed?super.execute(C,P):this._execute(C,P)}requestAsyncId(C,P,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,P,F):(C.flush(this),0)}});var Kd=O(6321),Zo=O(5592),Uf=O(9397),Qo=O(3093),Aa=O(5137);const ba=new p.GfV("7.6.1"),Yi="__angularfire_symbol__analyticsIsSupportedValue",Qs="__angularfire_symbol__analyticsIsSupported",Da="__angularfire_symbol__remoteConfigIsSupportedValue",Yo="__angularfire_symbol__remoteConfigIsSupported",Ns="__angularfire_symbol__messagingIsSupportedValue",Xu="__angularfire_symbol__messagingIsSupported";function vE(A,C,P){if(C){if(1===C.length)return C[0];const J=C.filter(ue=>ue.app===P);if(1===J.length)return J[0]}return P.container.getProvider(A).getImmediate({optional:!0})}globalThis[Qs]||(globalThis[Qs]=Qi().then(A=>globalThis[Yi]=A).catch(()=>globalThis[Yi]=!1)),globalThis[Xu]||(globalThis[Xu]=kd().then(A=>globalThis[Ns]=A).catch(()=>globalThis[Ns]=!1)),globalThis[Yo]||(globalThis[Yo]=$u().then(A=>globalThis[Da]=A).catch(()=>globalThis[Da]=!1));const dl=(A,C)=>{const P=C?[C]:(0,U.C6)(),F=[];return P.forEach(j=>{j.container.getProvider(A).instances.forEach(ue=>{F.includes(ue)||F.push(ue)})}),F};function ks(){}class To{constructor(C,P=fu){this.zone=C,this.delegate=P}now(){return this.delegate.now()}schedule(C,P,F){const j=this.zone;return this.delegate.schedule(function(ue){j.runGuarded(()=>{C.apply(this,[ue])})},P,F)}}class hl{constructor(C){this.zone=C,this.task=null}call(C,P){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)),P.pipe((0,Uf.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zd=(()=>{class A{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new To(Zone.current)),this.insideAngular=P.run(()=>new To(Zone.current,Kd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(P){return new(P||A)(p.LFG(p.R0b))},A.\u0275prov=p.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Pn(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function hs(A){return Pn().ngZone.run(()=>A())}function ny(A){return A.pipe((0,Qo.Q)(Pn().outsideAngular))}function Sa(A){return Pn(),function Qd(A){return function(P){return(P=P.lift(new hl(A.ngZone))).pipe((0,Aa.R)(A.outsideAngular),(0,Qo.Q)(A.insideAngular))}}(Pn())(A)}const fl=(A,C)=>function(){const F=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),hs(()=>A.apply(void 0,F))},pu=(A,C)=>function(){let P;const F=arguments;for(let J=0;J<arguments.length;J++)"function"==typeof F[J]&&(C&&(P||(P=hs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)))),F[J]=fl(F[J],P));const j=function Bg(A){return Pn().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,F));if(!C){if(j instanceof Zo.y){const J=Pn();return j.pipe((0,Aa.R)(J.outsideAngular),(0,Qo.Q)(J.insideAngular))}return hs(()=>j)}return j instanceof Zo.y?j.pipe(Sa):j instanceof Promise?hs(()=>new Promise((J,ue)=>j.then(Ye=>hs(()=>J(Ye)),Ye=>hs(()=>ue(Ye))))):"function"==typeof j&&P?function(){return setTimeout(()=>{P&&"scheduled"===P.state&&P.invoke()},10),j.apply(this,arguments)}:hs(()=>j)}},2659:(wt,Se,O)=>{O.d(Se,{$:()=>Uc,A:()=>he,D:()=>we,I:()=>Yn,J:()=>Gi,L:()=>ji,N:()=>rr,P:()=>zd,Q:()=>If,R:()=>ty,U:()=>vg,V:()=>Q_,W:()=>Y_,X:()=>Fc,Y:()=>Ad,Z:()=>hr,_:()=>pa,a:()=>Ia,a0:()=>Bc,a1:()=>Rd,a2:()=>Ef,a3:()=>jc,a4:()=>wg,a5:()=>Tg,a6:()=>Tf,a7:()=>Ag,a8:()=>Pd,a9:()=>qi,aA:()=>ye,aB:()=>C,aC:()=>kt,aD:()=>$n,aE:()=>Sa,aF:()=>Ca,aG:()=>Lr,aH:()=>ir,aL:()=>au,aO:()=>Ya,aa:()=>Kc,ab:()=>vn,ac:()=>bg,ad:()=>Md,ae:()=>Wr,af:()=>Qc,ai:()=>Af,aj:()=>Nd,ak:()=>Yc,an:()=>Ig,ao:()=>Cg,aq:()=>Fd,ar:()=>su,as:()=>jn,at:()=>ja,au:()=>Ga,av:()=>Tt,aw:()=>Gg,ax:()=>J,ay:()=>W_,az:()=>_t,b:()=>ou,c:()=>fu,d:()=>Uf,e:()=>Kd,f:()=>vE,g:()=>Pn,h:()=>To,i:()=>Qu,j:()=>ny,k:()=>ay,l:()=>Cr,m:()=>IE,p:()=>Nn,r:()=>Vf,s:()=>qo,u:()=>Vg});var p=O(5861),U=O(9058),W=O(534);function ve(E,g){var y={};for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&g.indexOf(w)<0&&(y[w]=E[w]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var S=0;for(w=Object.getOwnPropertySymbols(E);S<w.length;S++)g.indexOf(w[S])<0&&Object.prototype.propertyIsEnumerable.call(E,w[S])&&(y[w[S]]=E[w[S]])}return y}var ti=O(7879),Vi=O(4537);const Nn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},he={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const we=function le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},He=function Ee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sn=new ti.Yd("@firebase/auth");function Nt(E,...g){sn.logLevel<=ti.in.ERROR&&sn.error(`Auth (${W.SDK_VERSION}): ${E}`,...g)}function Tt(E,...g){throw ni(E,...g)}function _t(E,...g){return ni(E,...g)}function Ln(E,g,y){const w=Object.assign(Object.assign({},He()),{[g]:y});return new U.LL("auth","Firebase",w).create(g,{appName:E.name})}function lr(E,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Tt(E,"argument-error"),Ln(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ni(E,...g){if("string"!=typeof E){const y=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=E.name),E._errorFactory.create(y,...w)}return We.create(E,...g)}function ye(E,g,...y){if(!E)throw ni(g,...y)}function Kn(E){const g="INTERNAL ASSERTION FAILED: "+E;throw Nt(g),new Error(g)}function jn(E,g){E||Kn(g)}function Cs(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Gs(){return"http:"===lo()||"https:"===lo()}function lo(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class kn{constructor(g,y){this.shortDelay=g,this.longDelay=y,jn(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Fo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gs()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Kt(E,g){jn(E.emulator,"Emulator should always be set here");const{url:y}=E.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Gt{static initialize(g,y,w){this.fetchImpl=g,y&&(this.headersImpl=y),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ot=new kn(3e4,6e4);function tn(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function un(E,g,y,w){return cn.apply(this,arguments)}function cn(){return(cn=(0,p.Z)(function*(E,g,y,w,S={}){return ca(E,S,(0,p.Z)(function*(){let M={},G={};w&&("GET"===g?G=w:M={body:JSON.stringify(w)});const ee=(0,U.xO)(Object.assign({key:E.config.apiKey},G)).slice(1),Fe=yield E._getAdditionalHeaders();return Fe["Content-Type"]="application/json",E.languageCode&&(Fe["X-Firebase-Locale"]=E.languageCode),Gt.fetch()(Fu(E,E.config.apiHost,y,ee),Object.assign({method:g,headers:Fe,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function ca(E,g,y){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(E,g,y){E._canInitEmulator=!1;const w=Object.assign(Object.assign({},wi),g);try{const S=new $a(E),M=yield Promise.race([y(),S.promise]);S.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw Ui(E,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const ee=M.ok?G.errorMessage:G.error.message,[Fe,Ce]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw Ui(E,"credential-already-in-use",G);if("EMAIL_EXISTS"===Fe)throw Ui(E,"email-already-in-use",G);if("USER_DISABLED"===Fe)throw Ui(E,"user-disabled",G);const lt=w[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw Ln(E,lt,Ce);Tt(E,lt)}}catch(S){if(S instanceof U.ZR)throw S;Tt(E,"network-request-failed",{message:String(S)})}})).apply(this,arguments)}function Yt(E,g,y,w){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,p.Z)(function*(E,g,y,w,S={}){const M=yield un(E,g,y,w,S);return"mfaPendingCredential"in M&&Tt(E,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Fu(E,g,y,w){const S=`${g}${y}?${w}`;return E.config.emulator?Kt(E.config,S):`${E.config.apiScheme}://${S}`}class $a{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,w)=>{this.timer=setTimeout(()=>w(_t(this.auth,"network-request-failed")),Ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ui(E,g,y){const w={appName:E.name};y.email&&(w.email=y.email),y.phoneNumber&&(w.phoneNumber=y.phoneNumber);const S=_t(E,g,w);return S.customData._tokenResponse=y,S}function os(){return(os=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ti(){return(Ti=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ii(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function z(){return(z=(0,p.Z)(function*(E,g=!1){const y=(0,U.m9)(E),w=yield y.getIdToken(g),S=Y(w);ye(S&&S.exp&&S.auth_time&&S.iat,y.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,G=M?.sign_in_provider;return{claims:S,token:w,authTime:ii(V(S.auth_time)),issuedAtTime:ii(V(S.iat)),expirationTime:ii(V(S.exp)),signInProvider:G||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function V(E){return 1e3*Number(E)}function Y(E){const[g,y,w]=E.split(".");if(void 0===g||void 0===y||void 0===w)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,U.tV)(y);return S?JSON.parse(S):(Nt("Failed to decode base64 JWT payload"),null)}catch(S){return Nt("Caught error parsing JWT payload as JSON",S?.toString()),null}}function ne(E,g){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(E,g,y=!1){if(y)return g;try{return yield g}catch(w){throw w instanceof U.ZR&&function xt({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(w)&&E.auth.currentUser===E&&(yield E.auth.signOut()),w}})).apply(this,arguments)}class dn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield y.iteration()}),w)}iteration(){var g=this;return(0,p.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class Mr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zn(E){return Un.apply(this,arguments)}function Un(){return Un=(0,p.Z)(function*(E){var g;const y=E.auth,w=yield E.getIdToken(),S=yield ne(E,function Bi(E,g){return as.apply(this,arguments)}(y,{idToken:w}));ye(S?.users.length,y,"internal-error");const M=S.users[0];E._notifyReloadListener(M);const G=null!==(g=M.providerUserInfo)&&void 0!==g&&g.length?function Qt(E){return E.map(g=>{var{providerId:y}=g,w=ve(g,["providerId"]);return{providerId:y,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(M.providerUserInfo):[],ee=function mr(E,g){return[...E.filter(w=>!g.some(S=>S.providerId===w.providerId)),...g]}(E.providerData,G),lt=!!E.isAnonymous&&!(E.email&&M.passwordHash||ee?.length),Ht={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ee,metadata:new Mr(M.createdAt,M.lastLoginAt),isAnonymous:lt};Object.assign(E,Ht)}),Un.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(E){const g=(0,U.m9)(E);yield Zn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ge(){return(ge=(0,p.Z)(function*(E,g){const y=yield ca(E,{},(0,p.Z)(function*(){const w=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:M}=E.config,G=Fu(E,S,"/v1/token",`key=${M}`),ee=yield E._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",Gt.fetch()(G,{method:"POST",headers:ee,body:w})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ye(g.idToken,"internal-error"),ye(typeof g.idToken<"u","internal-error"),ye(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function pe(E){const g=Y(E);return ye(g,"internal-error"),ye(typeof g.exp<"u","internal-error"),ye(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var w=this;return(0,p.Z)(function*(){return ye(!w.accessToken||w.refreshToken,g,"user-token-expired"),y||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var w=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:G}=yield function Vo(E,g){return ge.apply(this,arguments)}(g,y);w.updateTokensAndExpiration(S,M,Number(G))})()}updateTokensAndExpiration(g,y,w){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,y){const{refreshToken:w,accessToken:S,expirationTime:M}=y,G=new te;return w&&(ye("string"==typeof w,"internal-error",{appName:g}),G.refreshToken=w),S&&(ye("string"==typeof S,"internal-error",{appName:g}),G.accessToken=S),M&&(ye("number"==typeof M,"internal-error",{appName:g}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return Kn("not implemented")}}function Me(E,g){ye("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class ct{constructor(g){var{uid:y,auth:w,stsTokenManager:S}=g,M=ve(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Mr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,p.Z)(function*(){const w=yield ne(y,y.stsTokenManager.getToken(y.auth,g));return ye(w,y.auth,"internal-error"),y.accessToken!==w&&(y.accessToken=w,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),w})()}getIdTokenResult(g){return function Ai(E){return z.apply(this,arguments)}(this,g)}reload(){return function nn(E){return Bn.apply(this,arguments)}(this)}_assign(g){this!==g&&(ye(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new ct(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var w=this;return(0,p.Z)(function*(){let S=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),S=!0),y&&(yield Zn(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,p.Z)(function*(){const y=yield g.getIdToken();return yield ne(g,function ri(E,g){return os.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var w,S,M,G,ee,Fe,Ce,lt;const Ht=null!==(w=y.displayName)&&void 0!==w?w:void 0,mn=null!==(S=y.email)&&void 0!==S?S:void 0,ci=null!==(M=y.phoneNumber)&&void 0!==M?M:void 0,Pa=null!==(G=y.photoURL)&&void 0!==G?G:void 0,zf=null!==(ee=y.tenantId)&&void 0!==ee?ee:void 0,Hf=null!==(Fe=y._redirectEventId)&&void 0!==Fe?Fe:void 0,eh=null!==(Ce=y.createdAt)&&void 0!==Ce?Ce:void 0,dy=null!==(lt=y.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:qf,emailVerified:Ji,isAnonymous:Jo,providerData:Wf,stsTokenManager:yl}=y;ye(qf&&yl,g,"internal-error");const Si=te.fromJSON(this.name,yl);ye("string"==typeof qf,g,"internal-error"),Me(Ht,g.name),Me(mn,g.name),ye("boolean"==typeof Ji,g,"internal-error"),ye("boolean"==typeof Jo,g,"internal-error"),Me(ci,g.name),Me(Pa,g.name),Me(zf,g.name),Me(Hf,g.name),Me(eh,g.name),Me(dy,g.name);const xa=new ct({uid:qf,auth:g,email:mn,emailVerified:Ji,displayName:Ht,isAnonymous:Jo,photoURL:Pa,phoneNumber:ci,tenantId:zf,stsTokenManager:Si,createdAt:eh,lastLoginAt:dy});return Wf&&Array.isArray(Wf)&&(xa.providerData=Wf.map(Kg=>Object.assign({},Kg))),Hf&&(xa._redirectEventId=Hf),xa}static _fromIdTokenResponse(g,y,w=!1){return(0,p.Z)(function*(){const S=new te;S.updateFromServerResponse(y);const M=new ct({uid:y.localId,auth:g,stsTokenManager:S,isAnonymous:w});return yield Zn(M),M})()}}const Mt=new Map;function kt(E){jn(E instanceof Function,"Expected a class definition");let g=Mt.get(E);return g?(jn(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,Mt.set(E,g),g)}const rr=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(y,w){var S=this;return(0,p.Z)(function*(){S.storage[y]=w})()}_get(y){var w=this;return(0,p.Z)(function*(){const S=w.storage[y];return void 0===S?null:S})()}_remove(y){var w=this;return(0,p.Z)(function*(){delete w.storage[y]})()}_addListener(y,w){}_removeListener(y,w){}}return E.type="NONE",E})();function $n(E,g,y){return`firebase:${E}:${g}:${y}`}class $i{constructor(g,y,w){this.persistence=g,this.auth=y,this.userKey=w;const{config:S,name:M}=this.auth;this.fullUserKey=$n(this.userKey,S.apiKey,M),this.fullPersistenceKey=$n("persistence",S.apiKey,M),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?ct._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,p.Z)(function*(){if(y.persistence===g)return;const w=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,w?y.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,w="authUser"){return(0,p.Z)(function*(){if(!y.length)return new $i(kt(rr),g,w);const S=(yield Promise.all(y.map(function(){var Ce=(0,p.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let M=S[0]||kt(rr);const G=$n(w,g.config.apiKey,g.name);let ee=null;for(const Ce of y)try{const lt=yield Ce._get(G);if(lt){const Ht=ct._fromJSON(g,lt);Ce!==M&&(ee=Ht),M=Ce;break}}catch{}const Fe=S.filter(Ce=>Ce._shouldAllowMigration);return M._shouldAllowMigration&&Fe.length?(M=Fe[0],ee&&(yield M._set(G,ee.toJSON())),yield Promise.all(y.map(function(){var Ce=(0,p.Z)(function*(lt){if(lt!==M)try{yield lt._remove(G)}catch{}});return function(lt){return Ce.apply(this,arguments)}}())),new $i(M,g,w)):new $i(M,g,w)})()}}function js(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(md(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(la(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(pf(g))return"Blackberry";if(Nr(g))return"Webos";if(Lu(g))return"Safari";if((g.includes("chrome/")||Nc(g))&&!g.includes("edge/"))return"Chrome";if(Ga(g))return"Android";{const w=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function la(E=(0,U.z$)()){return/firefox\//i.test(E)}function Lu(E=(0,U.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Nc(E=(0,U.z$)()){return/crios\//i.test(E)}function md(E=(0,U.z$)()){return/iemobile/i.test(E)}function Ga(E=(0,U.z$)()){return/android/i.test(E)}function pf(E=(0,U.z$)()){return/blackberry/i.test(E)}function Nr(E=(0,U.z$)()){return/webos/i.test(E)}function ja(E=(0,U.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function W_(E=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function gf(E=(0,U.z$)()){return ja(E)||Ga(E)||Nr(E)||pf(E)||/windows phone/i.test(E)||md(E)}function da(E,g=[]){let y;switch(E){case"Browser":y=js((0,U.z$)());break;case"Worker":y=`${js((0,U.z$)())}-${E}`;break;default:y=E}const w=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${W.SDK_VERSION}/${w}`}function yd(){return(yd=(0,p.Z)(function*(E){return(yield un(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function hg(E,g){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,p.Z)(function*(E,g){return un(E,"GET","/v2/recaptchaConfig",tn(E,g))})).apply(this,arguments)}function fg(E){return void 0!==E&&void 0!==E.getResponse}function vd(E){return void 0!==E&&void 0!==E.enterprise}class _f{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function bi(E){return new Promise((g,y)=>{const w=document.createElement("script");w.setAttribute("src",E),w.onload=g,w.onerror=S=>{const M=_t("internal-error");M.customData=S,y(M)},w.type="text/javascript",w.charset="UTF-8",function yf(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(w)})}function Id(E){return`__${E}${Math.floor(1e6*Math.random())}`}class kr{constructor(g){this.type="recaptcha-enterprise",this.auth=ir(g)}verify(g="verify",y=!1){var w=this;return(0,p.Z)(function*(){function M(){return M=(0,p.Z)(function*(ee){if(!y){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Fe=(0,p.Z)(function*(Ce,lt){hg(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ht=>{if(void 0!==Ht.recaptchaKey){const mn=new _f(Ht);return null==ee.tenantId?ee._agentRecaptchaConfig=mn:ee._tenantRecaptchaConfigs[ee.tenantId]=mn,Ce(mn.siteKey)}lt(new Error("recaptcha Enterprise site key undefined"))}).catch(Ht=>{lt(Ht)})});return function(Ce,lt){return Fe.apply(this,arguments)}}())}),M.apply(this,arguments)}function G(ee,Fe,Ce){const lt=window.grecaptcha;vd(lt)?lt.enterprise.ready(()=>{lt.enterprise.execute(ee,{action:g}).then(Ht=>{Fe(Ht)}).catch(()=>{Fe("NO_RECAPTCHA")})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Fe)=>{(function S(ee){return M.apply(this,arguments)})(w.auth).then(Ce=>{if(!y&&vd(window.grecaptcha))G(Ce,ee,Fe);else{if(typeof window>"u")return void Fe(new Error("RecaptchaVerifier is only supported in browser"));bi("https://www.google.com/recaptcha/enterprise.js?render="+Ce).then(()=>{G(Ce,ee,Fe)}).catch(lt=>{Fe(lt)})}}).catch(Ce=>{Fe(Ce)})})})()}}function Qn(E,g,y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,p.Z)(function*(E,g,y,w=!1){const S=new kr(E);let M;try{M=yield S.verify(y)}catch{M=yield S.verify(y,!0)}const G=Object.assign({},g);return Object.assign(G,w?{captchaResp:M}:{captchaResponse:M}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class oi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const w=M=>new Promise((G,ee)=>{try{G(g(M))}catch(Fe){ee(Fe)}});w.onAbort=y,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,p.Z)(function*(){if(y.auth.currentUser===g)return;const w=[];try{for(const S of y.queue)yield S(g),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const M of w)try{M()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class pg{constructor(g,y,w,S){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=w,this.config=S,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ha(this),this.idTokenSubscription=new ha(this),this.beforeStateQueue=new oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=S.sdkClientVersion}_initializeWithPersistence(g,y){var w=this;return y&&(this._popupRedirectResolver=kt(y)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,M;if(!w._deleted&&(w.persistenceManager=yield $i.create(w,g),!w._deleted)){if(null!==(S=w._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(y),w.lastNotifiedUid=(null===(M=w.currentUser)||void 0===M?void 0:M.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,p.Z)(function*(){var w;const S=yield y.assertedPersistence.getCurrentUser();let M=S,G=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const ee=null===(w=y.redirectUser)||void 0===w?void 0:w._redirectEventId,Fe=M?._redirectEventId,Ce=yield y.tryRedirectSignIn(g);(!ee||ee===Fe)&&Ce?.user&&(M=Ce.user,G=!0)}if(!M)return y.directlySetCurrentUser(null);if(!M._redirectEventId){if(G)try{yield y.beforeStateQueue.runMiddleware(M)}catch(ee){M=S,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(ee))}return M?y.reloadAndSetCurrentUserOrClear(M):y.directlySetCurrentUser(null)}return ye(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===M._redirectEventId?y.directlySetCurrentUser(M):y.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(g){var y=this;return(0,p.Z)(function*(){let w=null;try{w=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,p.Z)(function*(){try{yield Zn(g)}catch(w){if("auth/network-request-failed"!==w?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ba(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,p.Z)(function*(){const w=g?(0,U.m9)(g):null;return w&&ye(w.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(w&&w._clone(y))})()}_updateCurrentUser(g,y=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return g&&ye(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),y||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,p.Z)(function*(){yield y.assertedPersistence.setPersistence(kt(g))}))}initializeRecaptchaConfig(){var g=this;return(0,p.Z)(function*(){const y=yield hg(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new _f(y);null==g.tenantId?g._agentRecaptchaConfig=w:g._tenantRecaptchaConfigs[g.tenantId]=w,w.emailPasswordEnabled&&new kr(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,y,w){return this.registerStateListener(this.authStateSubscription,g,y,w)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,w){return this.registerStateListener(this.idTokenSubscription,g,y,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var w=this;return(0,p.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(y);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,p.Z)(function*(){if(!y.redirectPersistenceManager){const w=g&&kt(g)||y._popupRedirectResolver;ye(w,y,"argument-error"),y.redirectPersistenceManager=yield $i.create(y,[kt(w._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,p.Z)(function*(){var w,S;return y._isInitialized&&(yield y.queue((0,p.Z)(function*(){}))),(null===(w=y._currentUser)||void 0===w?void 0:w._redirectEventId)===g?y._currentUser:(null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,p.Z)(function*(){if(g===y.currentUser)return y.queue((0,p.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,w,S){if(this._deleted)return()=>{};const M="function"==typeof y?y:y.next.bind(y),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof y?g.addObserver(y,w,S):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,p.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=da(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){var y;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();S&&(w["X-Firebase-Client"]=S);const M=yield g._getAppCheckToken();return M&&(w["X-Firebase-AppCheck"]=M),w})()}_getAppCheckToken(){var g=this;return(0,p.Z)(function*(){var y;const w=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return w?.error&&function cr(E,...g){sn.logLevel<=ti.in.WARN&&sn.warn(`Auth (${W.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function ir(E){return(0,U.m9)(E)}class ha{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yn(E,g,y){const w=ir(E);ye(w._canInitEmulator,w,"emulator-config-failed"),ye(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const S=!!y?.disableWarnings,M=pt(g),{host:G,port:ee}=function jt(E){const g=pt(E),y=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!y)return{host:"",port:null};const w=y[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const M=S[1];return{host:M,port:zn(w.substr(M.length+1))}}{const[M,G]=w.split(":");return{host:M,port:zn(G)}}}(g);w.config.emulator={url:`${M}//${G}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ee,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function zs(){function E(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function pt(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function zn(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class Gi{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Kn("not implemented")}_getIdTokenResponse(g){return Kn("not implemented")}_linkToIdToken(g,y){return Kn("not implemented")}_getReauthenticationResolver(g){return Kn("not implemented")}}function Or(E,g){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:resetPassword",tn(E,g))})).apply(this,arguments)}function Jn(E,g){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:update",tn(E,g))})).apply(this,arguments)}function Ha(E,g){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPassword",tn(E,g))})).apply(this,arguments)}function po(E,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:sendOobCode",tn(E,g))})).apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(E,g){return po(E,g)})).apply(this,arguments)}function br(E,g){return qa.apply(this,arguments)}function qa(){return(qa=(0,p.Z)(function*(E,g){return po(E,g)})).apply(this,arguments)}function Wa(E,g){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(E,g){return po(E,g)})).apply(this,arguments)}function Bu(){return(Bu=(0,p.Z)(function*(E,g){return po(E,g)})).apply(this,arguments)}function Jt(){return(Jt=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",tn(E,g))})).apply(this,arguments)}function $u(){return($u=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithEmailLink",tn(E,g))})).apply(this,arguments)}class fa extends Gi{constructor(g,y,w,S=null){super("password",w),this._email=g,this._password=y,this._tenantId=S}static _fromEmailAndPassword(g,y){return new fa(g,y,"password")}static _fromEmailAndCode(g,y,w=null){return new fa(g,y,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,p.Z)(function*(){var w;switch(y.signInMethod){case"password":const S={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const M=yield Qn(g,S,"signInWithPassword");return Ha(g,M)}return Ha(g,S).catch(function(){var M=(0,p.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield Qn(g,S,"signInWithPassword");return Ha(g,ee)}return Promise.reject(G)});return function(G){return M.apply(this,arguments)}}());case"emailLink":return function kc(E,g){return Jt.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Tt(g,"internal-error")}})()}_linkToIdToken(g,y){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return Jn(g,{idToken:y,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function wd(E,g){return $u.apply(this,arguments)}(g,{idToken:y,email:w._email,oobCode:w._password});default:Tt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Dr(E,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithIdp",tn(E,g))})).apply(this,arguments)}class ji extends Gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new ji(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Tt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S}=y,M=ve(y,["providerId","signInMethod"]);if(!w||!S)return null;const G=new ji(w,S);return G.idToken=M.idToken||void 0,G.accessToken=M.accessToken||void 0,G.secret=M.secret,G.nonce=M.nonce,G.pendingToken=M.pendingToken||null,G}_getIdTokenResponse(g){return Dr(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,Dr(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Dr(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,U.xO)(y)}return g}}function Td(){return(Td=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:sendVerificationCode",tn(E,g))})).apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",tn(E,g))})).apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(E,g){const y=yield Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",tn(E,g));if(y.temporaryProof)throw Ui(E,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Oc={USER_NOT_FOUND:"user-not-found"};function Za(){return(Za=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithPhoneNumber",tn(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Oc)})).apply(this,arguments)}class Qa extends Gi{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Qa({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Qa({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function ai(E,g){return dr.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Gu(E,g){return Hs.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Rs(E,g){return Za.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:w,verificationCode:S}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:w,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:w,phoneNumber:S,temporaryProof:M}=g;return w||y||S||M?new Qa({verificationId:y,verificationCode:w,phoneNumber:S,temporaryProof:M}):null}}class zi{constructor(g){var y,w,S,M,G,ee;const Fe=(0,U.zd)((0,U.pd)(g)),Ce=null!==(y=Fe.apiKey)&&void 0!==y?y:null,lt=null!==(w=Fe.oobCode)&&void 0!==w?w:null,Ht=function _g(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);ye(Ce&&lt&&Ht,"argument-error"),this.apiKey=Ce,this.operation=Ht,this.code=lt,this.continueUrl=null!==(M=Fe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=Fe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ee=Fe.tenantId)&&void 0!==ee?ee:null}static parseLink(g){const y=function Z_(E){const g=(0,U.zd)((0,U.pd)(E)).link,y=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,w=(0,U.zd)((0,U.pd)(E)).deep_link_id;return(w?(0,U.zd)((0,U.pd)(w)).link:null)||w||y||g||E}(g);try{return new zi(y)}catch{return null}}}let If=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(y,w){return fa._fromEmailAndPassword(y,w)}static credentialWithLink(y,w){const S=zi.parseLink(w);return ye(S,"argument-error"),fa._fromEmailAndCode(y,S.code,S.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class qs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ju extends qs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Fc extends ju{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ye("providerId"in y&&"signInMethod"in y,"argument-error"),ji._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ye(g.idToken||g.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Fc.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Fc.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:M,nonce:G,providerId:ee}=g;if(!w&&!S&&!y&&!M||!ee)return null;try{return new Fc(ee)._credential({idToken:y,accessToken:w,nonce:G,pendingToken:M})}catch{return null}}}let vg=(()=>{class E extends ju{constructor(){super("facebook.com")}static credential(y){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Q_=(()=>{class E extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(y,w){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:w})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:w,oauthAccessToken:S}=y;if(!w&&!S)return null;try{return E.credential(w,S)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Y_=(()=>{class E extends ju{constructor(){super("github.com")}static credential(y){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return E.credential(y.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ya extends Gi{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Dr(g,this.buildRequest())}_linkToIdToken(g,y){const w=this.buildRequest();return w.idToken=y,Dr(g,w)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Dr(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S,pendingToken:M}=y;return w&&S&&M&&w===S?new Ya(w,M):null}static _create(g,y){return new Ya(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ad extends qs{constructor(g){ye(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ad.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ad.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Ya.fromJSON(g);return ye(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:w}=g;if(!y||!w)return null;try{return Ya._create(w,y)}catch{return null}}}let hr=(()=>{class E extends ju{constructor(){super("twitter.com")}static credential(y,w){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:w})}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=y;if(!w||!S)return null;try{return E.credential(w,S)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Lc(E,g){return bd.apply(this,arguments)}function bd(){return(bd=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signUp",tn(E,g))})).apply(this,arguments)}class Ws{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,w,S=!1){return(0,p.Z)(function*(){const M=yield ct._fromIdTokenResponse(g,w,S),G=Dd(w);return new Ws({user:M,providerId:G,_tokenResponse:w,operationType:y})})()}static _forOperation(g,y,w){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const S=Dd(w);return new Ws({user:g,providerId:S,_tokenResponse:w,operationType:y})})()}}function Dd(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function pa(E){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(E){var g;const y=ir(E);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Ws({user:y.currentUser,providerId:null,operationType:"signIn"});const w=yield Lc(y,{returnSecureToken:!0}),S=yield Ws._fromIdTokenResponse(y,"signIn",w,!0);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class ga extends U.ZR{constructor(g,y,w,S){var M;super(y.code,y.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:g.name,tenantId:null!==(M=g.tenantId)&&void 0!==M?M:void 0,_serverResponse:y.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,y,w,S){return new ga(g,y,w,S)}}function X_(E,g,y,w){return("reauthenticate"===g?y._getReauthenticationResolver(E):y._getIdTokenResponse(E)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ga._fromErrorAndOperation(E,M,g,w):M})}function Vc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Ig(E,g){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E);yield zu(!0,y,g);const{providerUserInfo:w}=yield function Lo(E,g){return Ti.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),S=Vc(w||[]);return y.providerData=y.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Ja.apply(this,arguments)}function Cd(E,g){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,p.Z)(function*(E,g,y=!1){const w=yield ne(E,g._linkToIdToken(E.auth,yield E.getIdToken()),y);return Ws._forOperation(E,"link",w)})).apply(this,arguments)}function zu(E,g,y){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(E,g,y){yield Zn(g);const S=!1===E?"provider-already-linked":"no-such-provider";ye(Vc(g.providerData).has(y)===E,g.auth,S)})).apply(this,arguments)}function us(E,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,p.Z)(function*(E,g,y=!1){const{auth:w}=E,S="reauthenticate";try{const M=yield ne(E,X_(w,S,g,E),y);ye(M.idToken,w,"internal-error");const G=Y(M.idToken);ye(G,w,"internal-error");const{sub:ee}=G;return ye(E.uid===ee,w,"user-mismatch"),Ws._forOperation(E,S,M)}catch(M){throw"auth/user-not-found"===M?.code&&Tt(w,"user-mismatch"),M}})).apply(this,arguments)}function sr(E,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(E,g,y=!1){const w="signIn",S=yield X_(E,w,g),M=yield Ws._fromIdTokenResponse(E,w,S);return y||(yield E._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Uc(E,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(E,g){return sr(ir(E),g)})).apply(this,arguments)}function Bc(E,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E);return yield zu(!1,y,g.providerId),Cd(y,g)})).apply(this,arguments)}function Rd(E,g){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,p.Z)(function*(E,g){return us((0,U.m9)(E),g)})).apply(this,arguments)}function $c(){return($c=(0,p.Z)(function*(E,g){return Yt(E,"POST","/v1/accounts:signInWithCustomToken",tn(E,g))})).apply(this,arguments)}function Ef(E,g){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,p.Z)(function*(E,g){const y=ir(E),w=yield function Fr(E,g){return $c.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),S=yield Ws._fromIdTokenResponse(y,"signIn",w);return yield y._updateCurrentUser(S.user),S}),Hu.apply(this,arguments)}class eu{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?wf._fromServerResponse(g,y):"totpInfo"in y?Gc._fromServerResponse(g,y):Tt(g,"internal-error")}}class wf extends eu{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new wf(y)}}class Gc extends eu{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new Gc(y)}}function ya(E,g,y){var w;ye((null===(w=y.url)||void 0===w?void 0:w.length)>0,E,"invalid-continue-uri"),ye(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ye(y.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ye(y.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function jc(E,g,y){return qu.apply(this,arguments)}function qu(){return qu=(0,p.Z)(function*(E,g,y){var w;const S=ir(E),M={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const G=yield Qn(S,M,"getOobCode",!0);y&&ya(S,G,y),yield br(S,G)}else y&&ya(S,M,y),yield br(S,M).catch(function(){var G=(0,p.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Fe=yield Qn(S,M,"getOobCode",!0);y&&ya(S,Fe,y),yield br(S,Fe)}});return function(ee){return G.apply(this,arguments)}}())}),qu.apply(this,arguments)}function wg(E,g,y){return zc.apply(this,arguments)}function zc(){return(zc=(0,p.Z)(function*(E,g,y){yield Or((0,U.m9)(E),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Tg(E,g){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,p.Z)(function*(E,g){yield function fo(E,g){return Ft.apply(this,arguments)}((0,U.m9)(E),{oobCode:g})}),Hc.apply(this,arguments)}function Tf(E,g){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E),w=yield Or(y,{oobCode:g}),S=w.requestType;switch(ye(S,y,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(w.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(w.mfaInfo,y,"internal-error");default:ye(w.email,y,"internal-error")}let M=null;return w.mfaInfo&&(M=eu._fromServerResponse(ir(y),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function Ag(E,g){return qc.apply(this,arguments)}function qc(){return(qc=(0,p.Z)(function*(E,g){const{data:y}=yield Tf((0,U.m9)(E),g);return y.email})).apply(this,arguments)}function Pd(E,g,y){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,p.Z)(function*(E,g,y){var w;const S=ir(E),M={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ce=yield Qn(S,M,"signUpPassword");G=Lc(S,Ce)}else G=Lc(S,M).catch(function(){var Ce=(0,p.Z)(function*(lt){if("auth/missing-recaptcha-token"===lt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Ht=yield Qn(S,M,"signUpPassword");return Lc(S,Ht)}return Promise.reject(lt)});return function(lt){return Ce.apply(this,arguments)}}());const ee=yield G.catch(Ce=>Promise.reject(Ce)),Fe=yield Ws._fromIdTokenResponse(S,"signIn",ee);return yield S._updateCurrentUser(Fe.user),Fe}),Wc.apply(this,arguments)}function qi(E,g,y){return Uc((0,U.m9)(E),If.credential(g,y))}function Kc(E,g,y){return tu.apply(this,arguments)}function tu(){return tu=(0,p.Z)(function*(E,g,y){var w;const S=ir(E),M={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function G(ee,Fe){ye(Fe.handleCodeInApp,S,"argument-error"),Fe&&ya(S,ee,Fe)}if(null!==(w=S._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ee=yield Qn(S,M,"getOobCode",!0);G(ee,y),yield Wa(S,ee)}else G(M,y),yield Wa(S,M).catch(function(){var ee=(0,p.Z)(function*(Fe){if("auth/missing-recaptcha-token"!==Fe.code)return Promise.reject(Fe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ce=yield Qn(S,M,"getOobCode",!0);G(Ce,y),yield Wa(S,Ce)}});return function(Fe){return ee.apply(this,arguments)}}())}),tu.apply(this,arguments)}function vn(E,g){const y=zi.parseLink(g);return"EMAIL_SIGNIN"===y?.operation}function bg(E,g,y){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E),S=If.credentialWithLink(g,y||Cs());return ye(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Uc(w,S)})).apply(this,arguments)}function xd(){return(xd=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:createAuthUri",tn(E,g))})).apply(this,arguments)}function Md(E,g){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,p.Z)(function*(E,g){const w={identifier:g,continueUri:Gs()?Cs():"http://localhost"},{signinMethods:S}=yield function Di(E,g){return xd.apply(this,arguments)}((0,U.m9)(E),w);return S||[]}),Ks.apply(this,arguments)}function Wr(E,g){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,p.Z)(function*(E,g){const y=(0,U.m9)(E),S={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&ya(y.auth,S,g);const{email:M}=yield function Uu(E,g){return Ss.apply(this,arguments)}(y.auth,S);M!==E.email&&(yield E.reload())}),Zc.apply(this,arguments)}function Qc(E,g,y){return nu.apply(this,arguments)}function nu(){return nu=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};y&&ya(w.auth,M,y);const{email:G}=yield function Go(E,g){return Bu.apply(this,arguments)}(w.auth,M);G!==E.email&&(yield E.reload())}),nu.apply(this,arguments)}function zo(){return(zo=(0,p.Z)(function*(E,g){return un(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Af(E,g){return ru.apply(this,arguments)}function ru(){return ru=(0,p.Z)(function*(E,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const w=(0,U.m9)(E),M={idToken:yield w.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},G=yield ne(w,function Zs(E,g){return zo.apply(this,arguments)}(w.auth,M));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ee=w.providerData.find(({providerId:Fe})=>"password"===Fe);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)}),ru.apply(this,arguments)}function Nd(E,g){return bf((0,U.m9)(E),g,null)}function Yc(E,g){return bf((0,U.m9)(E),null,g)}function bf(E,g,y){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(E,g,y){const{auth:w}=E,M={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(M.email=g),y&&(M.password=y);const G=yield ne(E,Jn(w,M));yield E._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class iu{constructor(g,y,w={}){this.isNewUser=g,this.providerId=y,this.profile=w}}class Ku extends iu{constructor(g,y,w,S){super(g,y,w),this.username=S}}class Jc extends iu{constructor(g,y){super(g,"facebook.com",y)}}class Cf extends Ku{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Dg extends iu{constructor(g,y){super(g,"google.com",y)}}class va extends Ku{constructor(g,y,w){super(g,"twitter.com",y,w)}}function Cg(E){const{user:g,_tokenResponse:y}=E;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Df(E){var g,y;if(!E)return null;const{providerId:w}=E,S=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},M=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!w&&E?.idToken){const G=null===(y=null===(g=Y(E.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(G)return new iu(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new Jc(M,S);case"github.com":return new Cf(M,S);case"google.com":return new Dg(M,S);case"twitter.com":return new va(M,S,E.screenName||null);case"custom":case"anonymous":return new iu(M,null);default:return new iu(M,w,S)}}(y)}class Wi{constructor(g,y,w){this.type=g,this.credential=y,this.auth=w}static _fromIdtoken(g,y){return new Wi("enroll",g,y)}static _fromMfaPendingCredential(g){return new Wi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,w;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Wi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return Wi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class cs{constructor(g,y,w){this.session=g,this.hints=y,this.signInResolver=w}static _fromError(g,y){const w=ir(g),S=y.customData._serverResponse,M=(S.mfaInfo||[]).map(ee=>eu._fromServerResponse(w,ee));ye(S.mfaPendingCredential,w,"internal-error");const G=Wi._fromMfaPendingCredential(S.mfaPendingCredential);return new cs(G,M,function(){var ee=(0,p.Z)(function*(Fe){const Ce=yield Fe._process(w,G);delete S.mfaInfo,delete S.mfaPendingCredential;const lt=Object.assign(Object.assign({},S),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(y.operationType){case"signIn":const Ht=yield Ws._fromIdTokenResponse(w,y.operationType,lt);return yield w._updateCurrentUser(Ht.user),Ht;case"reauthenticate":return ye(y.user,w,"internal-error"),Ws._forOperation(y.user,y.operationType,lt);default:Tt(w,"internal-error")}});return function(Fe){return ee.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,p.Z)(function*(){return y.signInResolver(g)})()}}function Fd(E,g){var y;const w=(0,U.m9)(E),S=g;return ye(g.customData.operationType,w,"argument-error"),ye(null===(y=S.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,w,"argument-error"),cs._fromError(w,S)}class On{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(w=>eu._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new On(g)}getSession(){var g=this;return(0,p.Z)(function*(){return Wi._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var w=this;return(0,p.Z)(function*(){const S=g,M=yield w.getSession(),G=yield ne(w.user,S._process(w.user.auth,M,y));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(g){var y=this;return(0,p.Z)(function*(){const w="string"==typeof g?g:g.uid,S=yield y.user.getIdToken();try{const M=yield ne(y.user,function Kr(E,g){return un(E,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(E,g))}(y.user.auth,{idToken:S,mfaEnrollmentId:w}));y.enrolledFactors=y.enrolledFactors.filter(({uid:G})=>G!==w),yield y.user._updateTokensIfNecessary(M),yield y.user.reload()}catch(M){throw M}})()}}const tl=new WeakMap;function su(E){const g=(0,U.m9)(E);return tl.has(g)||tl.set(g,On._fromUser(g)),tl.get(g)}const ls="__sak";class Pg{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ls,"1"),this.storage.removeItem(ls),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ou=(()=>{class E extends Pg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,w)=>this.onStorageEvent(y,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pf(){const E=(0,U.z$)();return Lu(E)||ja(E)}()&&function _d(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=gf(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),M=this.localCache[w];S!==M&&y(w,M,S)}}onStorageEvent(y,w=!1){if(!y.key)return void this.forAllChangedKeys((ee,Fe,Ce)=>{this.notifyListeners(ee,Ce)});const S=y.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(S);if(y.newValue!==ee)null!==y.newValue?this.storage.setItem(S,y.newValue):this.storage.removeItem(S);else if(this.localCache[S]===y.newValue&&!w)return}const M=()=>{const ee=this.storage.getItem(S);!w&&this.localCache[S]===ee||this.notifyListeners(S,ee)},G=this.storage.getItem(S);!function K_(){return(0,U.w1)()&&10===document.documentMode}()||G===y.newValue||y.newValue===y.oldValue?M():setTimeout(M,10)}notifyListeners(y,w){this.localCache[y]=w;const S=this.listeners[y];if(S)for(const M of Array.from(S))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,w){var S=()=>super._set,M=this;return(0,p.Z)(function*(){yield S().call(M,y,w),M.localCache[y]=JSON.stringify(w)})()}_get(y){var w=()=>super._get,S=this;return(0,p.Z)(function*(){const M=yield w().call(S,y);return S.localCache[y]=JSON.stringify(M),M})()}_remove(y){var w=()=>super._remove,S=this;return(0,p.Z)(function*(){yield w().call(S,y),delete S.localCache[y]})()}}return E.type="LOCAL",E})(),Ia=(()=>{class E extends Pg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,w){}_removeListener(y,w){}}return E.type="SESSION",E})();let Mg=(()=>{class E{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const w=this.receivers.find(M=>M.isListeningto(y));if(w)return w;const S=new E(y);return this.receivers.push(S),S}isListeningto(y){return this.eventTarget===y}handleEvent(y){var w=this;return(0,p.Z)(function*(){const S=y,{eventId:M,eventType:G,data:ee}=S.data,Fe=w.handlersMap[G];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const Ce=Array.from(Fe).map(function(){var Ht=(0,p.Z)(function*(mn){return mn(S.origin,ee)});return function(mn){return Ht.apply(this,arguments)}}()),lt=yield function Mf(E){return Promise.all(E.map(function(){var g=(0,p.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(w){return{fulfilled:!1,reason:w}}});return function(y){return g.apply(this,arguments)}}()))}(Ce);S.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:lt})})()}_subscribe(y,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(w)}_unsubscribe(y,w){this.handlersMap[y]&&w&&this.handlersMap[y].delete(w),(!w||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function au(E="",g=10){let y="";for(let w=0;w<g;w++)y+=Math.floor(10*Math.random());return E+y}class Ng{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,w=50){var S=this;return(0,p.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,ee;return new Promise((Fe,Ce)=>{const lt=au("",20);M.port1.start();const Ht=setTimeout(()=>{Ce(new Error("unsupported_event"))},w);ee={messageChannel:M,onMessage(mn){const ci=mn;if(ci.data.eventId===lt)switch(ci.data.status){case"ack":clearTimeout(Ht),G=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Fe(ci.data.response);break;default:clearTimeout(Ht),clearTimeout(G),Ce(new Error("invalid_response"))}}},S.handlers.add(ee),M.port1.addEventListener("message",ee.onMessage),S.target.postMessage({eventType:g,eventId:lt,data:y},[M.port2])}).finally(()=>{ee&&S.removeMessageHandler(ee)})})()}}function Xn(){return window}function Vd(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function Nf(){return(Nf=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Io="firebaseLocalStorageDb",il="firebaseLocalStorage",Ud="fbase_key";class uu{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Bd(E,g){return E.transaction([il],g?"readwrite":"readonly").objectStore(il)}function Gd(){const E=indexedDB.open(Io,1);return new Promise((g,y)=>{E.addEventListener("error",()=>{y(E.error)}),E.addEventListener("upgradeneeded",()=>{const w=E.result;try{w.createObjectStore(il,{keyPath:Ud})}catch(S){y(S)}}),E.addEventListener("success",(0,p.Z)(function*(){const w=E.result;w.objectStoreNames.contains(il)?g(w):(w.close(),yield function $d(){const E=indexedDB.deleteDatabase(Io);return new uu(E).toPromise()}(),g(yield Gd()))}))})}function cu(E,g,y){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,p.Z)(function*(E,g,y){const w=Bd(E,!0).put({[Ud]:g,value:y});return new uu(w).toPromise()})).apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(E,g){const y=Bd(E,!1).get(g),w=yield new uu(y).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Zr(E,g){const y=Bd(E,!0).delete(g);return new uu(y).toPromise()}const Qu=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,p.Z)(function*(){return y.db||(y.db=yield Gd()),y.db})()}_withRetries(y){var w=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const M=yield w._openDb();return yield y(M)}catch(M){if(S++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,p.Z)(function*(){return Vd()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,p.Z)(function*(){y.receiver=Mg._getInstance(function ui(){return Vd()?self:null}()),y.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(S,M){return{keyProcessed:(yield y._poll()).includes(M.key)}});return function(S,M){return w.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return w.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,p.Z)(function*(){var w,S;if(y.activeServiceWorker=yield function rl(){return Nf.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Ng(y.activeServiceWorker);const M=yield y.sender._send("ping",{},800);M&&null!==(w=M[0])&&void 0!==w&&w.fulfilled&&null!==(S=M[0])&&void 0!==S&&S.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function kf(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:y},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Gd();return yield cu(y,ls,"1"),yield Zr(y,ls),!0}catch{}return!1})()}_withPendingWrite(y){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield y()}finally{w.pendingWrites--}})()}_set(y,w){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(M=>cu(M,y,w)),S.localCache[y]=w,S.notifyServiceWorker(y)}))})()}_get(y){var w=this;return(0,p.Z)(function*(){const S=yield w._withRetries(M=>function Of(E,g){return Rn.apply(this,arguments)}(M,y));return w.localCache[y]=S,S})()}_remove(y){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(S=>Zr(S,y)),delete w.localCache[y],w.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,p.Z)(function*(){const w=yield y._withRetries(G=>{const ee=Bd(G,!1).getAll();return new uu(ee).toPromise()});if(!w)return[];if(0!==y.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:G,value:ee}of w)M.add(G),JSON.stringify(y.localCache[G])!==JSON.stringify(ee)&&(y.notifyListeners(G,ee),S.push(G));for(const G of Object.keys(y.localCache))y.localCache[G]&&!M.has(G)&&(y.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(y,w){this.localCache[y]=w;const S=this.listeners[y];if(S)for(const M of Array.from(S))M(w)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(w)}_removeListener(y,w){this.listeners[y]&&(this.listeners[y].delete(w),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),rn=1e12;class Ff{constructor(g){this.auth=g,this.counter=rn,this._widgets=new Map}render(g,y){const w=this.counter;return this._widgets.set(w,new Fg(g,this.auth.name,y||{})),this.counter++,w}reset(g){var y;const w=g||rn;null===(y=this._widgets.get(w))||void 0===y||y.delete(),this._widgets.delete(w)}getResponse(g){var y;return(null===(y=this._widgets.get(g||rn))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,p.Z)(function*(){var w;return null===(w=y._widgets.get(g||rn))||void 0===w||w.execute(),""})()}}class Fg{constructor(g,y,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;ye(S,"argument-error",{appName:y}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ps(E){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<E;w++)g.push(y.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const al=Id("rcb"),Lg=new kn(3e4,6e4);class xs{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Xn().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return ye(function Ms(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&fg(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((w,S)=>{const M=Xn().setTimeout(()=>{S(_t(g,"network-request-failed"))},Lg.get());Xn()[al]=()=>{Xn().clearTimeout(M),delete Xn()[al];const ee=Xn().grecaptcha;if(!ee||!fg(ee))return void S(_t(g,"internal-error"));const Fe=ee.render;ee.render=(Ce,lt)=>{const Ht=Fe(Ce,lt);return this.counter++,Ht},this.hostLanguage=y,w(ee)},bi(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:al,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(M),S(_t(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Xn().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Zi{load(g){return(0,p.Z)(function*(){return new Ff(g)})()}clearedOneInstance(){}}const wa="recaptcha",jd={theme:"light",type:"image"};class ty{constructor(g,y=Object.assign({},jd),w){this.parameters=y,this.type=wa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ir(w),this.isInvisible="invisible"===this.parameters.size,ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;ye(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zi:new xs,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(y)||new Promise(M=>{const G=ee=>{ee&&(g.tokenChangeListeners.delete(G),M(ee))};g.tokenChangeListeners.add(G),g.isInvisible&&w.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(w=>w(y)),"function"==typeof g)g(y);else if("string"==typeof g){const w=Xn()[g];"function"==typeof w&&w(y)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const w=document.createElement("div");y.appendChild(w),y=w}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){ye(Gs()&&!Vd(),g.auth,"internal-error"),yield function Lf(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function mf(E){return yd.apply(this,arguments)}(g.auth);ye(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wo{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Qa._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function qo(E,g,y){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(E,g,y){const w=ir(E),S=yield du(w,g,(0,U.m9)(y));return new wo(S,M=>Uc(w,M))})).apply(this,arguments)}function Cr(E,g,y){return ds.apply(this,arguments)}function ds(){return(ds=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E);yield zu(!1,w,"phone");const S=yield du(w.auth,g,(0,U.m9)(y));return new wo(S,M=>Bc(w,M))})).apply(this,arguments)}function Vf(E,g,y){return or.apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E),S=yield du(w.auth,g,(0,U.m9)(y));return new wo(S,M=>Rd(w,M))})).apply(this,arguments)}function du(E,g,y){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,p.Z)(function*(E,g,y){var w;const S=yield y.verify();try{let M;if(ye("string"==typeof S,E,"argument-error"),ye(y.type===wa,E,"argument-error"),M="string"==typeof g?{phoneNumber:g}:g,"session"in M){const G=M.session;if("phoneNumber"in M)return ye("enroll"===G.type,E,"internal-error"),(yield function Ld(E,g){return un(E,"POST","/v2/accounts/mfaEnrollment:start",tn(E,g))}(E,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ye("signin"===G.type,E,"internal-error");const ee=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return ye(ee,E,"missing-multi-factor-info"),(yield function ol(E,g){return un(E,"POST","/v2/accounts/mfaSignIn:start",tn(E,g))}(E,{mfaPendingCredential:G.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function qr(E,g){return Td.apply(this,arguments)}(E,{phoneNumber:M.phoneNumber,recaptchaToken:S});return G}}finally{y._reset()}}),Ju.apply(this,arguments)}function Vg(E,g){return ul.apply(this,arguments)}function ul(){return(ul=(0,p.Z)(function*(E,g){yield Cd((0,U.m9)(E),g)})).apply(this,arguments)}let zd=(()=>{class E{constructor(y){this.providerId=E.PROVIDER_ID,this.auth=ir(y)}verifyPhoneNumber(y,w){return du(this.auth,y,(0,U.m9)(w))}static credential(y,w){return Qa._fromVerification(y,w)}static credentialFromResult(y){return E.credentialFromTaggedObject(y)}static credentialFromError(y){return E.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:w,temporaryProof:S}=y;return w&&S?Qa._fromTokenResponse(w,S):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Wo(E,g){return g?kt(g):(ye(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class hu extends Gi{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Dr(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Dr(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Dr(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Hd(E){return sr(E.auth,new hu(E),E.bypassAuthState)}function Ta(E){const{auth:g,user:y}=E;return ye(y,g,"internal-error"),us(y,new hu(E),E.bypassAuthState)}function Ko(E){return cl.apply(this,arguments)}function cl(){return(cl=(0,p.Z)(function*(E){const{auth:g,user:y}=E;return ye(y,g,"internal-error"),Cd(y,new hu(E),E.bypassAuthState)})).apply(this,arguments)}class ll{constructor(g,y,w,S,M=!1){this.auth=g,this.resolver=w,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,p.Z)(function*(w,S){g.pendingPromise={resolve:w,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(M){g.reject(M)}});return function(w,S){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:M,tenantId:G,error:ee,type:Fe}=g;if(ee)return void y.reject(ee);const Ce={auth:y.auth,requestUri:w,sessionId:S,tenantId:G||void 0,postBody:M||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Fe)(Ce))}catch(lt){y.reject(lt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Hd;case"linkViaPopup":case"linkViaRedirect":return Ko;case"reauthViaPopup":case"reauthViaRedirect":return Ta;default:Tt(this.auth,"internal-error")}}resolve(g){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qd=new kn(2e3,1e4);function fu(E,g,y){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,p.Z)(function*(E,g,y){const w=ir(E);lr(E,g,qs);const S=Wo(w,y);return new Aa(w,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function Kd(E,g,y){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E);lr(w.auth,g,qs);const S=Wo(w.auth,y);return new Aa(w.auth,"reauthViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}function Uf(E,g,y){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E);lr(w.auth,g,qs);const S=Wo(w.auth,y);return new Aa(w.auth,"linkViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}let Aa=(()=>{class E extends ll{constructor(y,w,S,M,G){super(y,w,M,G),this.provider=S,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var y=this;return(0,p.Z)(function*(){const w=yield y.execute();return ye(w,y.auth,"internal-error"),w})()}onExecution(){var y=this;return(0,p.Z)(function*(){jn(1===y.filter.length,"Popup operations only handle one event");const w=au();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],w),y.authWindow.associatedEvent=w,y.resolver._originValidation(y.auth).catch(S=>{y.reject(S)}),y.resolver._isIframeWebStorageSupported(y.auth,S=>{S||y.reject(_t(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(_t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const y=()=>{var w,S;this.pollId=null!==(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_t(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,qd.get())};y()}}return E.currentPopupAction=null,E})();const ba="pendingRedirect",Yi=new Map;class Qs extends ll{constructor(g,y,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,p.Z)(function*(){let w=Yi.get(y.auth._key());if(!w){try{const M=(yield function Da(E,g){return Yo.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;w=()=>Promise.resolve(M)}catch(S){w=()=>Promise.reject(S)}Yi.set(y.auth._key(),w)}return y.bypassAuthState||Yi.set(y.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(w,g);if("unknown"!==g.type){if(g.eventId){const S=yield w.auth._redirectUserForId(g.eventId);if(S)return w.user=S,y().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function Yo(){return(Yo=(0,p.Z)(function*(E,g){const y=yE(g),w=Ug(E);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(y));return yield w._remove(y),S})).apply(this,arguments)}function Ns(E,g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,p.Z)(function*(E,g){return Ug(E)._set(yE(g),"true")})).apply(this,arguments)}function Lr(){Yi.clear()}function Ca(E,g){Yi.set(E._key(),g)}function Ug(E){return kt(E._redirectPersistence)}function yE(E){return $n(ba,E.config.apiKey,E.name)}function vE(E,g,y){return function dl(E,g,y){return ks.apply(this,arguments)}(E,g,y)}function ks(){return(ks=(0,p.Z)(function*(E,g,y){const w=ir(E);lr(E,g,qs),yield w._initializationPromise;const S=Wo(w,y);return yield Ns(S,w),S._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function To(E,g,y){return function hl(E,g,y){return Zd.apply(this,arguments)}(E,g,y)}function Zd(){return(Zd=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E);lr(w.auth,g,qs),yield w.auth._initializationPromise;const S=Wo(w.auth,y);yield Ns(S,w.auth);const M=yield fl(w);return S._openRedirect(w.auth,g,"reauthViaRedirect",M)})).apply(this,arguments)}function Pn(E,g,y){return function Bg(E,g,y){return hs.apply(this,arguments)}(E,g,y)}function hs(){return(hs=(0,p.Z)(function*(E,g,y){const w=(0,U.m9)(E);lr(w.auth,g,qs),yield w.auth._initializationPromise;const S=Wo(w.auth,y);yield zu(!1,w,g.providerId),yield Ns(S,w.auth);const M=yield fl(w);return S._openRedirect(w.auth,g,"linkViaRedirect",M)})).apply(this,arguments)}function ny(E,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(E,g){return yield ir(E)._initializationPromise,Sa(E,g,!1)})).apply(this,arguments)}function Sa(E,g){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,p.Z)(function*(E,g,y=!1){const w=ir(E),S=Wo(w,g),G=yield new Qs(w,S,y).execute();return G&&!y&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,g)),G})).apply(this,arguments)}function fl(E){return pu.apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(E){const g=au(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class C{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(y=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function j(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var w;if(g.error&&!F(g)){const S=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";y.onError(_t(this.auth,S))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const w=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(P(g))}saveEventToCache(g){this.cachedEventUids.add(P(g)),this.lastProcessedEventTime=Date.now()}}function P(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function F({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function J(E){return ue.apply(this,arguments)}function ue(){return(ue=(0,p.Z)(function*(E,g={}){return un(E,"GET","/v1/projects",g)})).apply(this,arguments)}const Ye=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ze=/^https?/;function Lt(){return(Lt=(0,p.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield J(E);for(const y of g)try{if(Ut(y))return}catch{}Tt(E,"unauthorized-domain")})).apply(this,arguments)}function Ut(E){const g=Cs(),{protocol:y,hostname:w}=new URL(g);if(E.startsWith("chrome-extension://")){const G=new URL(E);return""===G.hostname&&""===w?"chrome-extension:"===y&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&G.hostname===w}if(!Ze.test(y))return!1;if(Ye.test(E))return w===E;const S=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const ps=new kn(3e4,6e4);function ar(){const E=Xn().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let y=0;y<E.CP.length;y++)E.CP[y]=null}let Ao=null;const Sr=new kn(5e3,15e3),Ys="__/auth/iframe",$g="emulator/auth/iframe",Yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gu(E){const g=E.config;ye(g.authDomain,E,"auth-domain-config-required");const y=g.emulator?Kt(g,$g):`https://${E.config.authDomain}/${Ys}`,w={apiKey:g.apiKey,appName:E.name,v:W.SDK_VERSION},S=qA.get(E.config.apiHost);S&&(w.eid=S);const M=E._getFrameworks();return M.length&&(w.fw=M.join(",")),`${y}?${(0,U.xO)(w).slice(1)}`}function Ra(){return Ra=(0,p.Z)(function*(E){const g=yield function Os(E){return Ao=Ao||function ec(E){return new Promise((g,y)=>{var w,S,M;function G(){ar(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ar(),y(_t(E,"network-request-failed"))},timeout:ps.get()})}if(null!==(S=null===(w=Xn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==S&&S.Iframe)g(gapi.iframes.getContext());else{if(null===(M=Xn().gapi)||void 0===M||!M.load){const ee=Id("iframefcb");return Xn()[ee]=()=>{gapi.load?G():y(_t(E,"network-request-failed"))},bi(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Fe=>y(Fe))}G()}}).catch(g=>{throw Ao=null,g})}(E),Ao}(E),y=Xn().gapi;return ye(y,E,"internal-error"),g.open({where:document.body,url:gu(E),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yd,dontclear:!0},w=>new Promise(function(){var S=(0,p.Z)(function*(M,G){yield w.restyle({setHideOnLeave:!1});const ee=_t(E,"network-request-failed"),Fe=Xn().setTimeout(()=>{G(ee)},Sr.get());function Ce(){Xn().clearTimeout(Fe),M(w)}w.ping(Ce).then(Ce,()=>{G(ee)})});return function(M,G){return S.apply(this,arguments)}}()))}),Ra.apply(this,arguments)}const pl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const iy="__/auth/handler",KA="emulator/auth/handler",sy=encodeURIComponent("fac");function Gg(E,g,y,w,S,M){return oy.apply(this,arguments)}function oy(){return(oy=(0,p.Z)(function*(E,g,y,w,S,M){ye(E.config.authDomain,E,"auth-domain-config-required"),ye(E.config.apiKey,E,"invalid-api-key");const G={apiKey:E.config.apiKey,appName:E.name,authType:y,redirectUrl:w,v:W.SDK_VERSION,eventId:S};if(g instanceof qs){g.setDefaultLanguage(E.languageCode),G.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(G.customParameters=JSON.stringify(g.getCustomParameters()));for(const[lt,Ht]of Object.entries(M||{}))G[lt]=Ht}if(g instanceof ju){const lt=g.getScopes().filter(Ht=>""!==Ht);lt.length>0&&(G.scopes=lt.join(","))}E.tenantId&&(G.tid=E.tenantId);const ee=G;for(const lt of Object.keys(ee))void 0===ee[lt]&&delete ee[lt];const Fe=yield E._getAppCheckToken(),Ce=Fe?`#${sy}=${encodeURIComponent(Fe)}`:"";return`${function Gf({config:E}){return E.emulator?Kt(E,KA):`https://${E.authDomain}/${iy}`}(E)}?${(0,U.xO)(ee).slice(1)}${Ce}`})).apply(this,arguments)}const ml="webStorageSupport",ay=class ZA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ia,this._completeRedirectFn=Sa,this._overrideRedirectResult=Ca}_openPopup(g,y,w,S){var M=this;return(0,p.Z)(function*(){var G;jn(null===(G=M.eventManagers[g._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ee=yield Gg(g,y,w,Cs(),S);return function WA(E,g,y,w=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Fe=Object.assign(Object.assign({},pl),{width:w.toString(),height:S.toString(),top:M,left:G}),Ce=(0,U.z$)().toLowerCase();y&&(ee=Nc(Ce)?"_blank":y),la(Ce)&&(g=g||"http://localhost",Fe.scrollbars="yes");const lt=Object.entries(Fe).reduce((mn,[ci,Pa])=>`${mn}${ci}=${Pa},`,"");if(function za(E=(0,U.z$)()){var g;return ja(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Ce)&&"_self"!==ee)return function ry(E,g){const y=document.createElement("a");y.href=E,y.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(w)}(g||"",ee),new Jd(null);const Ht=window.open(g||"",ee,lt);ye(Ht,E,"popup-blocked");try{Ht.focus()}catch{}return new Jd(Ht)}(g,ee,au())})()}_openRedirect(g,y,w,S){var M=this;return(0,p.Z)(function*(){return yield M._originValidation(g),function kg(E){Xn().location.href=E}(yield Gg(g,y,w,Cs(),S)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:S,promise:M}=this.eventManagers[y];return S?Promise.resolve(S):(jn(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(g);return this.eventManagers[y]={promise:w},w.catch(()=>{delete this.eventManagers[y]}),w}initAndGetManager(g){var y=this;return(0,p.Z)(function*(){const w=yield function tc(E){return Ra.apply(this,arguments)}(g),S=new C(g);return w.register("authEvent",M=>(ye(M?.authEvent,g,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:S},y.iframes[g._key()]=w,S})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(ml,{type:ml},S=>{var M;const G=null===(M=S?.[0])||void 0===M?void 0:M[ml];void 0!==G&&y(!!G),Tt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function yt(E){return Lt.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return gf()||Lu()||ja()}};class uy{constructor(g){this.factorId=g}_process(g,y,w){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,w);case"signin":return this._finalizeSignIn(g,y.credential);default:return Kn("unexpected MultiFactorSessionType")}}}class jf extends uy{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new jf(g)}_finalizeEnroll(g,y,w){return function Rf(E,g){return un(E,"POST","/v2/accounts/mfaEnrollment:finalize",tn(E,g))}(g,{idToken:y,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Ea(E,g){return un(E,"POST","/v2/accounts/mfaSignIn:finalize",tn(E,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let IE=(()=>{class E{constructor(){}static assertion(y){return jf._fromCredential(y)}}return E.FACTOR_ID="phone",E})();var Xd="@firebase/auth";class EE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,p.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(w=>{g(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,U.Pz)("authIdTokenMaxAge"),function Vr(E){(0,W._registerComponent)(new Vi.wA("auth",(g,{options:y})=>{const w=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),M=g.getProvider("app-check-internal"),{apiKey:G,authDomain:ee}=w.options;ye(G&&!G.includes(":"),"invalid-api-key",{appName:w.name});const Fe={apiKey:G,authDomain:ee,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:da(E)},Ce=new pg(w,S,M,Fe);return function mg(E,g){const y=g?.persistence||[],w=(Array.isArray(y)?y:[y]).map(kt);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(w,g?.popupRedirectResolver)}(Ce,y),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,w)=>{g.getProvider("auth-internal").initialize()})),(0,W._registerComponent)(new Vi.wA("auth-internal",g=>{const y=ir(g.getProvider("auth").getImmediate());return new EE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)(Xd,"0.23.2",function wE(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,W.registerVersion)(Xd,"0.23.2","esm2017")}("Browser")},9058:(wt,Se,O)=>{O.d(Se,{$s:()=>as,BH:()=>Oe,L:()=>_e,LL:()=>We,P0:()=>xe,Pz:()=>Ne,Sg:()=>Qe,UG:()=>Ge,US:()=>Ie,ZB:()=>ce,ZR:()=>He,aH:()=>Be,b$:()=>ti,eu:()=>le,hl:()=>he,jU:()=>ht,m9:()=>Ai,ne:()=>wi,pd:()=>Kt,q4:()=>At,r3:()=>ye,ru:()=>Hr,tV:()=>H,uI:()=>Je,vZ:()=>Gs,w1:()=>$s,xO:()=>Ba,xb:()=>jn,z$:()=>oe,zI:()=>Ee,zd:()=>kn});const re=function(z){const V=[];let Y=0;for(let pe=0;pe<z.length;pe++){let ne=z.charCodeAt(pe);ne<128?V[Y++]=ne:ne<2048?(V[Y++]=ne>>6|192,V[Y++]=63&ne|128):55296==(64512&ne)&&pe+1<z.length&&56320==(64512&z.charCodeAt(pe+1))?(ne=65536+((1023&ne)<<10)+(1023&z.charCodeAt(++pe)),V[Y++]=ne>>18|240,V[Y++]=ne>>12&63|128,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128):(V[Y++]=ne>>12|224,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128)}return V},Ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,V){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let ne=0;ne<z.length;ne+=3){const ft=z[ne],xt=ne+1<z.length,dn=xt?z[ne+1]:0,Mr=ne+2<z.length,Zn=Mr?z[ne+2]:0;let Bn=(15&dn)<<2|Zn>>6,mr=63&Zn;Mr||(mr=64,xt||(Bn=64)),pe.push(Y[ft>>2],Y[(3&ft)<<4|dn>>4],Y[Bn],Y[mr])}return pe.join("")},encodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(z):this.encodeByteArray(re(z),V)},decodeString(z,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(z):function(z){const V=[];let Y=0,pe=0;for(;Y<z.length;){const ne=z[Y++];if(ne<128)V[pe++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const ft=z[Y++];V[pe++]=String.fromCharCode((31&ne)<<6|63&ft)}else if(ne>239&&ne<365){const Mr=((7&ne)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;V[pe++]=String.fromCharCode(55296+(Mr>>10)),V[pe++]=String.fromCharCode(56320+(1023&Mr))}else{const ft=z[Y++],xt=z[Y++];V[pe++]=String.fromCharCode((15&ne)<<12|(63&ft)<<6|63&xt)}}return V.join("")}(this.decodeStringToByteArray(z,V))},decodeStringToByteArray(z,V){this.init_();const Y=V?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let ne=0;ne<z.length;){const ft=Y[z.charAt(ne++)],dn=ne<z.length?Y[z.charAt(ne)]:0;++ne;const Zn=ne<z.length?Y[z.charAt(ne)]:64;++ne;const nn=ne<z.length?Y[z.charAt(ne)]:64;if(++ne,null==ft||null==dn||null==Zn||null==nn)throw new ve;pe.push(ft<<2|dn>>4),64!==Zn&&(pe.push(dn<<4&240|Zn>>2),64!==nn&&pe.push(Zn<<6&192|nn))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(z){return function(z){const V=re(z);return Ie.encodeByteArray(V,!0)}(z).replace(/\./g,"")},H=function(z){try{return Ie.decodeString(z,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function ce(z,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return V}for(const Y in V)!V.hasOwnProperty(Y)||!Ke(Y)||(z[Y]=ce(z[Y],V[Y]));return z}function Ke(z){return"__proto__"!==z}const ze=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=z&&H(z[1]);return V&&JSON.parse(V)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},At=z=>{var V,Y;return null===(Y=null===(V=ze())||void 0===V?void 0:V.emulatorHosts)||void 0===Y?void 0:Y[z]},xe=z=>{const V=At(z);if(!V)return;const Y=V.lastIndexOf(":");if(Y<=0||Y+1===V.length)throw new Error(`Invalid host ${V} with no separate hostname and port!`);const pe=parseInt(V.substring(Y+1),10);return"["===V[0]?[V.substring(1,Y-1),pe]:[V.substring(0,Y),pe]},Be=()=>{var z;return null===(z=ze())||void 0===z?void 0:z.config},Ne=z=>{var V;return null===(V=ze())||void 0===V?void 0:V[`_${z}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,Y)=>{this.resolve=V,this.reject=Y})}wrapCallback(V){return(Y,pe)=>{Y?this.reject(Y):this.resolve(pe),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(Y):V(Y,pe))}}}function Qe(z,V){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=V||"demo-project",ne=z.iat||0,ft=z.sub||z.user_id;if(!ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:ne,exp:ne+3600,auth_time:ne,sub:ft,user_id:ft,firebase:{sign_in_provider:"custom",identities:{}}},z);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(xt)),""].join(".")}function oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oe())}function Ge(){var z;const V=null===(z=ze())||void 0===z?void 0:z.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ht(){return"object"==typeof self&&self.self===self}function Hr(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function ti(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $s(){const z=oe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function le(){return new Promise((z,V)=>{try{let Y=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(pe);ne.onsuccess=()=>{ne.result.close(),Y||self.indexedDB.deleteDatabase(pe),z(!0)},ne.onupgradeneeded=()=>{Y=!1},ne.onerror=()=>{var ft;V((null===(ft=ne.error)||void 0===ft?void 0:ft.message)||"")}}catch(Y){V(Y)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class He extends Error{constructor(V,Y,pe){super(Y),this.code=V,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,We.prototype.create)}}class We{constructor(V,Y,pe){this.service=V,this.serviceName=Y,this.errors=pe}create(V,...Y){const pe=Y[0]||{},ne=`${this.service}/${V}`,ft=this.errors[V],xt=ft?function bt(z,V){return z.replace(sn,(Y,pe)=>{const ne=V[pe];return null!=ne?String(ne):`<${pe}?>`})}(ft,pe):"Error";return new He(ne,`${this.serviceName}: ${xt} (${ne}).`,pe)}}const sn=/\{\$([^}]+)}/g;function ye(z,V){return Object.prototype.hasOwnProperty.call(z,V)}function jn(z){for(const V in z)if(Object.prototype.hasOwnProperty.call(z,V))return!1;return!0}function Gs(z,V){if(z===V)return!0;const Y=Object.keys(z),pe=Object.keys(V);for(const ne of Y){if(!pe.includes(ne))return!1;const ft=z[ne],xt=V[ne];if(lo(ft)&&lo(xt)){if(!Gs(ft,xt))return!1}else if(ft!==xt)return!1}for(const ne of pe)if(!Y.includes(ne))return!1;return!0}function lo(z){return null!==z&&"object"==typeof z}function Ba(z){const V=[];for(const[Y,pe]of Object.entries(z))Array.isArray(pe)?pe.forEach(ne=>{V.push(encodeURIComponent(Y)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(Y)+"="+encodeURIComponent(pe));return V.length?"&"+V.join("&"):""}function kn(z){const V={};return z.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[ne,ft]=pe.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(ft)}}),V}function Kt(z){const V=z.indexOf("?");if(!V)return"";const Y=z.indexOf("#",V);return z.substring(V,Y>0?Y:void 0)}function wi(z,V){const Y=new Ot(z,V);return Y.subscribe.bind(Y)}class Ot{constructor(V,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{V(this)}).catch(pe=>{this.error(pe)})}next(V){this.forEachObserver(Y=>{Y.next(V)})}error(V){this.forEachObserver(Y=>{Y.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,Y,pe){let ne;if(void 0===V&&void 0===Y&&void 0===pe)throw new Error("Missing Observer.");ne=function un(z,V){if("object"!=typeof z||null===z)return!1;for(const Y of V)if(Y in z&&"function"==typeof z[Y])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:Y,complete:pe},void 0===ne.next&&(ne.next=cn),void 0===ne.error&&(ne.error=cn),void 0===ne.complete&&(ne.complete=cn);const ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),ft}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,V)}sendOne(V,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{Y(this.observers[V])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cn(){}const os=1e3,Lo=2,Ti=144e5,Bi=.5;function as(z,V=os,Y=Lo){const pe=V*Math.pow(Y,z),ne=Math.round(Bi*pe*(Math.random()-.5)*2);return Math.min(Ti,pe+ne)}function Ai(z){return z&&z._delegate?z._delegate:z}},9624:(wt,Se,O)=>{var p=O(8926);let U=null;function W(){return U}class se{}const Ie=new p.OlP("DocumentToken");let ve=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(_e)},providedIn:"platform"}),e})();const Ve=new p.OlP("Location Initialized");let _e=(()=>{var n;class e extends ve{constructor(){super(),this._doc=(0,p.f3M)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(r){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){const i=W().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function H(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function q(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ce(n){return n&&"?"!==n[0]?"?"+n:n}let Ke=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Xe)},providedIn:"root"}),e})();const me=new p.OlP("appBaseHref");let Xe=(()=>{var n;class e extends Ke{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return H(this._baseHref,r)}path(r=!1){const i=this._platformLocation.pathname+ce(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,u){const d=this.prepareExternalUrl(s+ce(u));this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){const d=this.prepareExternalUrl(s+ce(u));this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(ve),p.LFG(me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),nt=(()=>{var n;class e extends Ke{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){const i=H(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,u){let d=this.prepareExternalUrl(s+ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(r,i,d)}replaceState(r,i,s,u){let d=this.prepareExternalUrl(s+ce(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(ve),p.LFG(me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})(),et=(()=>{var n;class e{constructor(r){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const i=this._locationStrategy.getBaseHref();this._basePath=function Be(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(q(xe(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ce(i))}normalize(r){return e.stripTrailingSlash(function At(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,xe(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ce(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ce(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}}return(n=e).normalizeQueryParams=ce,n.joinWithSlash=H,n.stripTrailingSlash=q,n.\u0275fac=function(r){return new(r||n)(p.LFG(Ke))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ze(){return new et((0,p.LFG)(Ke))}()},providedIn:"root"}),e})();function xe(n){return n.replace(/\/index.html$/,"")}class pf{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nr=(()=>{var n;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const i=this._viewContainer;r.forEachOperation((s,u,d)=>{if(null==s.previousIndex)i.createEmbeddedView(this._template,new pf(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===u?void 0:u);else if(null!==u){const f=i.get(u);i.move(f,d),ja(f,s)}});for(let s=0,u=i.length;s<u;s++){const f=i.get(s).context;f.index=s,f.count=u,f.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{ja(i.get(s.currentIndex),s)})}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function ja(n,e){n.context.$implicit=e.item}let za=(()=>{var n;class e{constructor(r,i){this._viewContainer=r,this._context=new K_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){gf("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){gf("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class K_{constructor(){this.$implicit=null,this.ngIf=null}}function gf(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let po=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();function Wa(n){return"server"===n}let kc=(()=>{var n;class e{}return(n=e).\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Jt((0,p.LFG)(Ie),window)}),e})();class Jt{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $u(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wd(this.window.history)||wd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function wd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Kc extends se{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tu extends Kc{static makeCurrent(){!function re(n){U||(U=n)}(new tu)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bg(){return vn=vn||document.querySelector("base"),vn?vn.getAttribute("href"):null}();return null==t?null:function Di(n){yo=yo||document.createElement("a"),yo.setAttribute("href",n);const e=yo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){vn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function js(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let yo,vn=null,Md=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Ks=new p.OlP("EventManagerPlugins");let Wr=(()=>{var n;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(u=>u.supports(r)),!i)throw new p.vHH(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ks),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();class Zc{constructor(e){this._doc=e}}const Qc="ng-app-id";let nu=(()=>{var n;class e{constructor(r,i,s,u={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wa(u),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${Qc}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const u=s.get(r);return u.usage+=i,u.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,u=s?.get(i);if(u?.parentNode===r)return s.delete(i),u.removeAttribute(Qc),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(Qc,this.appId),d}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const u=this.styleRef,d=u.get(i)?.elements;d?d.push(s):u.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie),p.LFG(p.AFp),p.LFG(p.Ojb,8),p.LFG(p.Lbi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Zs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zo=/%COMP%/g,bf=new p.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function iu(n,e){return e.map(t=>t.replace(zo,n))}let Ku=(()=>{var n;class e{constructor(r,i,s,u,d,f,_,I=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=f,this.ngZone=_,this.nonce=I,this.rendererByCompId=new Map,this.platformIsServer=Wa(f),this.defaultRenderer=new Jc(r,d,_,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===p.ifc.ShadowDom&&(i={...i,encapsulation:p.ifc.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof Od?s.applyToHost(r):s instanceof kd&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let u=s.get(i.id);if(!u){const d=this.doc,f=this.ngZone,_=this.eventManager,I=this.sharedStylesHost,b=this.removeStylesOnCompDestroy,x=this.platformIsServer;switch(i.encapsulation){case p.ifc.Emulated:u=new Od(_,I,i,this.appId,b,d,f,x);break;case p.ifc.ShadowDom:return new Cg(_,I,r,i,d,f,this.nonce,x);default:u=new kd(_,I,i,b,d,f,x)}s.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Wr),p.LFG(nu),p.LFG(p.AFp),p.LFG(bf),p.LFG(Ie),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(p.Ojb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();class Jc{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Zs[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(va(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(va(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Zs[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Zs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=W().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function va(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Cg extends Jc{constructor(e,t,r,i,s,u,d,f){super(e,s,u,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _=iu(i.id,i.styles);for(const I of _){const b=document.createElement("style");d&&b.setAttribute("nonce",d),b.textContent=I,this.shadowRoot.appendChild(b)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class kd extends Jc{constructor(e,t,r,i,s,u,d,f){super(e,s,u,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=f?iu(f,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Od extends kd{constructor(e,t,r,i,s,u,d,f){const _=i+"-"+r.id;super(e,t,r,s,u,d,f,_),this.contentAttr=function Pt(n){return"_ngcontent-%COMP%".replace(zo,n)}(_),this.hostAttr=function Df(n){return"_nghost-%COMP%".replace(zo,n)}(_)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Sg=(()=>{var n;class e extends Zc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Xc=["alt","control","meta","shift"],Re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ey=(()=>{var n;class e extends Zc{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const u=e.parseEventName(i),d=e.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>W().onAndCancel(r,u.domEventName,d))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const u=e._normalizeKey(i.pop());let d="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),d="code."),Xc.forEach(I=>{const b=i.indexOf(I);b>-1&&(i.splice(b,1),d+=I+".")}),d+=u,0!=i.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=d,_}static matchEventFullKeyCode(r,i){let s=Re[r.key]||r.key,u="";return i.indexOf("code.")>-1&&(s=r.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Xc.forEach(d=>{d!==s&&(0,hn[d])(r)&&(u+=d+".")}),u+=s,u===i)}static eventCallback(r,i,s){return u=>{e.matchEventFullKeyCode(u,r)&&s.runGuarded(()=>i(u))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();const Rg=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function cs(){tu.makeCurrent()},multi:!0},{provide:Ie,useFactory:function Ld(){return(0,p.RDi)(document),document},deps:[]}]),_r=new p.OlP(""),Kr=[{provide:p.rWj,useClass:class xd{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new p.vHH(5103,!1);return s},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(f){u=u||f,s--,0==s&&r(u)};i.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?W().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],On=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Fd(){return new p.qLn},deps:[]},{provide:Ks,useClass:Sg,multi:!0,deps:[Ie,p.R0b,p.Lbi]},{provide:Ks,useClass:ey,multi:!0,deps:[Ie]},Ku,nu,Wr,{provide:p.FYo,useExisting:Ku},{provide:class Dr{},useClass:Md,deps:[]},[]];let tl=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:p.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(_r,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...On,...Kr],imports:[po,p.hGG]}),e})(),xf=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Ie))},n.\u0275prov=p.Yz7({token:n,factory:function(r){let i=null;return i=r?new r:function Pf(){return new xf((0,p.LFG)(Ie))}(),i},providedIn:"root"}),e})();typeof window<"u"&&window;var Rn=O(2459),Zr=O(5592);const{isArray:sl}=Array,{getPrototypeOf:Zu,prototype:Og,keys:Qu}=Object;function ol(n){if(1===n.length){const e=n[0];if(sl(e))return{args:e,keys:null};if(function Ea(n){return n&&"object"==typeof n&&Zu(n)===Og}(e)){const t=Qu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ho=O(4829),Yu=O(4564),Ki=O(8251),rn=O(7398);const{isArray:Ff}=Array;function Ps(n){return(0,rn.U)(e=>function Fg(n,e){return Ff(e)?n(...e):n(e)}(n,e))}function al(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let lu=(()=>{var n;class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),e})(),xs=(()=>{var n;class e extends lu{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),e})();const Ms=new p.OlP("NgValueAccessor"),jd={provide:Ms,useExisting:(0,p.Gpc)(()=>wo),multi:!0},Lf=new p.OlP("CompositionEventMode");let wo=(()=>{var n;class e extends lu{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ty(){const n=W()?W().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(r){this.setProperty("value",r??"")}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Lf,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i._handleInput(u.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(u){return i._compositionEnd(u.target.value)})},features:[p._Bn([jd]),p.qOj]}),e})();function qo(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Qi(n){return null!=n&&"number"==typeof n.length}const Cr=new p.OlP("NgValidators"),ds=new p.OlP("NgAsyncValidators"),Vf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class or{static min(e){return function du(n){return e=>{if(qo(e.value)||qo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ju(n){return e=>{if(qo(e.value)||qo(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Vg(e)}static requiredTrue(e){return function ul(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function zd(n){return qo(n.value)||Vf.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Wo(n){return e=>qo(e.value)||!Qi(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hu(n){return e=>Qi(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Hd(n){if(!n)return Ta;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qo(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Kd(e)}static composeAsync(e){return Uf(e)}}function Vg(n){return qo(n.value)?{required:!0}:null}function Ta(n){return null}function Ko(n){return null!=n}function cl(n){return(0,p.QGY)(n)?(0,Rn.D)(n):n}function ll(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qd(n,e){return e.map(t=>t(n))}function Wd(n){return n.map(e=>function fu(n){return!n.validate}(e)?e:t=>e.validate(t))}function Kd(n){if(!n)return null;const e=n.filter(Ko);return 0==e.length?null:function(t){return ll(qd(t,e))}}function Zo(n){return null!=n?Kd(Wd(n)):null}function Uf(n){if(!n)return null;const e=n.filter(Ko);return 0==e.length?null:function(t){return function Lg(...n){const e=(0,Yu.jO)(n),{args:t,keys:r}=ol(n),i=new Zr.y(s=>{const{length:u}=t;if(!u)return void s.complete();const d=new Array(u);let f=u,_=u;for(let I=0;I<u;I++){let b=!1;(0,Ho.Xf)(t[I]).subscribe((0,Ki.x)(s,x=>{b||(b=!0,_--),d[I]=x},()=>f--,void 0,()=>{(!f||!b)&&(_||s.next(r?al(r,d):d),s.complete())}))}});return e?i.pipe(Ps(e)):i}(qd(t,e).map(cl)).pipe((0,rn.U)(ll))}}function Qo(n){return null!=n?Uf(Wd(n)):null}function Aa(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ba(n){return n._rawValidators}function Yi(n){return n._rawAsyncValidators}function Qs(n){return n?Array.isArray(n)?n:[n]:[]}function Da(n,e){return Array.isArray(n)?n.includes(e):n===e}function Yo(n,e){const t=Qs(e);return Qs(n).forEach(i=>{Da(t,i)||t.push(i)}),t}function Ns(n,e){return Qs(e).filter(t=>!Da(n,t))}class Xu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Qo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Lr extends Xu{get formDirective(){return null}get path(){return null}}class Ca extends Xu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ug{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dl=(()=>{var n;class e extends Ug{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Ca,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[p.qOj]}),e})(),ks=(()=>{var n;class e extends Ug{constructor(r){super(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Lr,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&p.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[p.qOj]}),e})();const J="VALID",ue="INVALID",Ye="PENDING",Ze="DISABLED";function yt(n){return(ar(n)?n.validators:n)||null}function Ut(n,e){return(ar(e)?e.asyncValidators:n)||null}function ar(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ec(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")}function Ao(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})}class Os{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===J}get invalid(){return this.status===ue}get pending(){return this.status==Ye}get disabled(){return this.status===Ze}get enabled(){return this.status!==Ze}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ns(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ns(e,this._rawAsyncValidators))}hasValidator(e){return Da(this._rawValidators,e)}hasAsyncValidator(e){return Da(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ye,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ze,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=J,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===J||this.status===Ye)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ze:J}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ye,this._hasOwnPendingAsyncValidator=!0;const t=cl(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Ze:this.errors?ue:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ye)?Ye:this._anyControlsHaveStatus(ue)?ue:J}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ar(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Lt(n){return Array.isArray(n)?Zo(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ps(n){return Array.isArray(n)?Qo(n):n||null}(this._rawAsyncValidators)}}class Sr extends Os{constructor(e,t,r){super(yt(t),Ut(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ao(this,0,e),Object.keys(e).forEach(r=>{ec(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Yd extends Sr{}const gu=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>tc}),tc="always";function pl(n,e,t=tc){nc(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function WA(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&iy(n,e)})}(n,e),function KA(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ry(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&iy(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Bf(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Jd(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $f(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nc(n,e){const t=ba(n);null!==e.validator?n.setValidators(Aa(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Yi(n);null!==e.asyncValidator?n.setAsyncValidators(Aa(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$f(e._rawValidators,i),$f(e._rawAsyncValidators,i)}function Jd(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=ba(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Yi(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return $f(e._rawValidators,r),$f(e._rawAsyncValidators,r),t}function iy(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function wE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Vr=class extends Os{constructor(e=null,t,r){super(yt(t),Ut(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ar(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=wE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){EE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){EE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){wE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ee=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})();const Fe={provide:Ms,useExisting:(0,p.Gpc)(()=>Ce),multi:!0};let Ce=(()=>{var n;class e extends xs{writeValue(r){this.setProperty("value",r??"")}registerOnChange(r){this.onChange=i=>{r(""==i?null:parseFloat(i))}}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("input",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},features:[p._Bn([Fe]),p.qOj]}),e})(),mn=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();const eh=new p.OlP("NgModelWithFormControlWarning"),Ji={provide:Lr,useExisting:(0,p.Gpc)(()=>Jo)};let Jo=(()=>{var n;class e extends Lr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){const i=this.form.get(r.path);return pl(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Bf(r.control||null,r,!1),function jg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,function IE(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(r),"dialog"===r?.target?.method}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{const i=r.control,s=this.form.get(r.path);i!==s&&(Bf(i||null,r),(n=>n instanceof Vr)(s)&&(pl(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){const i=this.form.get(r.path);(function sy(n,e){nc(n,e)})(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){const i=this.form.get(r.path);i&&function Gg(n,e){return Jd(n,e)}(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nc(this.form,this),this._oldForm&&Jd(this._oldForm,this)}_checkFormPresent(){}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Cr,10),p.Y36(ds,10),p.Y36(gu,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&p.NdJ("submit",function(u){return i.onSubmit(u)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Ji]),p.qOj,p.TTD]}),e})();const YA={provide:Ca,useExisting:(0,p.Gpc)(()=>Kf)};let Kf=(()=>{var n;class e extends Ca{set isDisabled(r){}constructor(r,i,s,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=function cy(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===wo?t=s:function jf(n){return Object.getPrototypeOf(n.constructor)===xs}(s)?r=s:i=s}),i||r||t||null}(0,u)}ngOnChanges(r){this._added||this._setUpControl(),function uy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return function Ra(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(n=e)._ngModelWarningSentOnce=!1,n.\u0275fac=function(r){return new(r||n)(p.Y36(Lr,13),p.Y36(Cr,10),p.Y36(ds,10),p.Y36(Ms,10),p.Y36(eh,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([YA]),p.qOj,p.TTD]}),e})();const JA={provide:Ms,useExisting:(0,p.Gpc)(()=>hy),multi:!0};function XA(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let hy=(()=>{var n;class e extends xs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;const s=XA(this._getOptionId(r),r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){const i=function eb(n){return n.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i):r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([JA]),p.qOj]}),e})(),fy=(()=>{var n;class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){null!=this._select&&(this._select._optionMap.set(this.id,r),this._setElementValue(XA(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(hy,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const OP={provide:Ms,useExisting:(0,p.Gpc)(()=>py),multi:!0};function tb(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let py=(()=>{var n;class e extends xs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){let i;if(this.value=r,Array.isArray(r)){const s=r.map(u=>this._getOptionId(u));i=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else i=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{const s=[],u=i.selectedOptions;if(void 0!==u){const d=u;for(let f=0;f<d.length;f++){const I=this._getOptionValue(d[f].value);s.push(I)}}else{const d=i.options;for(let f=0;f<d.length;f++){const _=d[f];if(_.selected){const I=this._getOptionValue(_.value);s.push(I)}}}this.value=s,r(s)}}_registerOption(r){const i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(const i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){const i=function TE(n){return n.split(":")[0]}(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&p.NdJ("change",function(u){return i.onChange(u.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([OP]),p.qOj]}),e})(),th=(()=>{var n;class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){null!=this._select&&(this._value=r,this._setElementValue(tb(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(tb(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(py,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),vl=(()=>{var n;class e{constructor(){this._validator=Ta}ngOnChanges(r){if(this.inputName in r){const i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ta,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return null!=r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),e})();const ob={provide:Cr,useExisting:(0,p.Gpc)(()=>nh),multi:!0};let nh=(()=>{var n;class e extends vl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.VuI,this.createValidator=r=>Vg}enabled(r){return r}}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&p.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([ob]),p.qOj]}),e})(),gy=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[mn]}),e})();class RE extends Os{constructor(e,t,r){super(yt(t),Ut(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ao(this,0,e),e.forEach((r,i)=>{ec(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function PE(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let db=(()=>{var n;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const r=new e;return r.useNonNullable=!0,r}group(r,i=null){const s=this._reduceControls(r);let u={};return PE(i)?u=i:null!==i&&(u.validators=i.validator,u.asyncValidators=i.asyncValidator),new Sr(s,u)}record(r,i=null){const s=this._reduceControls(r);return new Yd(s,i)}control(r,i,s){let u={};return this.useNonNullable?(PE(i)?u=i:(u.validators=i,u.asyncValidators=s),new Vr(r,{...u,nonNullable:!0})):new Vr(r,i,s)}array(r,i,s){const u=r.map(d=>this._createControl(d));return new RE(u,i,s)}_reduceControls(r){const i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){return r instanceof Vr||r instanceof Os?r:Array.isArray(r)?this.control(r[0],r.length>1?r[1]:null,r.length>2?r[2]:null):this.control(r)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),hb=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:gu,useValue:r.callSetDisabledState??tc}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[gy]}),e})(),fb=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:[{provide:eh,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:gu,useValue:r.callSetDisabledState??tc}]}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[gy]}),e})();var Yf=O(4674),Vt=O(2096),Js=O(5619),Il=O(2737),pb=O(7103);function Qg(...n){const e=(0,Yu.yG)(n),t=(0,Yu.jO)(n),{args:r,keys:i}=ol(n);if(0===r.length)return(0,Rn.D)([],e);const s=new Zr.y(function my(n,e,t=Il.y){return r=>{NE(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let f=0;f<i;f++)NE(e,()=>{const _=(0,Rn.D)(n[f],e);let I=!1;_.subscribe((0,Ki.x)(r,b=>{s[f]=b,I||(I=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>al(i,u):Il.y));return t?s.pipe(Ps(t)):s}function NE(n,e,t){n?(0,pb.f)(t,n,e):e()}const El=(0,O(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yg=O(7537);function OE(...n){return function gb(){return(0,Yg.J)(1)}()((0,Rn.D)(n,(0,Yu.yG)(n)))}function mb(n){return new Zr.y(e=>{(0,Ho.Xf)(n()).subscribe(e)})}var BP=O(8407);function Jf(n,e){const t=(0,Yf.m)(n)?n:()=>n,r=i=>i.error(t());return new Zr.y(e?i=>e.schedule(r,0,i):r)}var rc=O(6232),Jg=O(7394),Xs=O(9360);function wl(){return(0,Xs.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ki.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _b extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xs.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Jg.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ki.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Jg.w0.EMPTY)}return e}refCount(){return wl()(this)}}var rh=O(8645),Ri=O(4664);function Xf(n){return n<=0?()=>rc.E:(0,Xs.e)((e,t)=>{let r=0;e.subscribe((0,Ki.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ic(n,e){return(0,Xs.e)((t,r)=>{let i=0;t.subscribe((0,Ki.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var li=O(1631);function ih(n){return(0,Xs.e)((e,t)=>{let r=!1;e.subscribe((0,Ki.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function _y(n=yb){return(0,Xs.e)((e,t)=>{let r=!1;e.subscribe((0,Ki.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yb(){return new El}function sc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ic((i,s)=>n(i,s,r)):Il.y,Xf(1),t?ih(e):_y(()=>new El))}function ep(n,e){return(0,Yf.m)(e)?(0,li.z)(n,e,1):(0,li.z)(n,1)}var gs=O(9397);function sh(n){return(0,Xs.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Ki.x)(t,void 0,void 0,u=>{s=(0,Ho.Xf)(n(u,sh(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function LE(n){return n<=0?()=>rc.E:(0,Xs.e)((e,t)=>{let r=[];e.subscribe((0,Ki.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function oh(n){return(0,Xs.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",yy=Symbol("RouteTitle");class XV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xg(n){return new XV(n)}function eU(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ma(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!vb(n[i],e[i]))return!1;return!0}function vb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Ib(n){return n.length>0?n[n.length-1]:null}function Al(n){return function ME(n){return!!n&&(n instanceof Zr.y||(0,Yf.m)(n.lift)&&(0,Yf.m)(n.subscribe))}(n)?n:(0,p.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):(0,Vt.of)(n)}const zP={exact:function VE(n,e,t){if(!tp(n.segments,e.segments)||!BE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!VE(n.children[r],e.children[r],t))return!1;return!0},subset:UE},vy={exact:function em(n,e){return Ma(n,e)},subset:function Eb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vb(n[t],e[t]))},ignored:()=>!0};function mu(n,e,t){return zP[t.paths](n.root,e.root,t.matrixParams)&&vy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function UE(n,e,t){return HP(n,e,e.segments,t)}function HP(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!tp(i,t)||e.hasChildren()||!BE(i,t,r))}if(n.segments.length===t.length){if(!tp(n.segments,t)||!BE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!UE(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(tp(n.segments,i)&&BE(n.segments,i,r)&&n.children[Xt])&&HP(n.children[Xt],e,s,r)}}function BE(n,e,t){return e.every((r,i)=>vy[t](n[i].parameters,r.parameters))}class tm{constructor(e=new xn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xg(this.queryParams)),this._queryParamMap}toString(){return qP.serialize(this)}}class xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Iy(this)}}class ah{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xg(this.parameters)),this._parameterMap}toString(){return Ab(this)}}function tp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let nm=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new $E},providedIn:"root"}),e})();class $E{parse(e){const t=new Mn(e);return new tm(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${np(e.root,!0)}`,r=function bb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ey(t)}=${Ey(i)}`).join("&"):`${Ey(t)}=${Ey(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function GE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qP=new $E;function Iy(n){return n.segments.map(e=>Ab(e)).join("/")}function np(n,e){if(!n.hasChildren())return Iy(n);if(e){const t=n.children[Xt]?np(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Xt&&r.push(`${i}:${np(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wb(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Xt?[np(n.children[Xt],!1)]:[`${i}:${np(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${Iy(n)}/${t[0]}`:`${Iy(n)}/(${t.join("//")})`}}function rm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ey(n){return rm(n).replace(/%3B/gi,";")}function jE(n){return rm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oc(n){return decodeURIComponent(n)}function Tb(n){return oc(n.replace(/\+/g,"%20"))}function Ab(n){return`${jE(n.path)}${function zE(n){return Object.keys(n).map(e=>`;${jE(e)}=${jE(n[e])}`).join("")}(n.parameters)}`}const WP=/^[^\/()?;#]+/;function HE(n){const e=n.match(WP);return e?e[0]:""}const KP=/^[^\/()?;=#]+/,Db=/^[^=?&#]+/,iU=/^[^&#]+/;class Mn{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xn([],{}):new xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new xn(e,t)),r}parseSegment(){const e=HE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new ah(oc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function ZP(n){const e=n.match(KP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=HE(this.remaining);i&&(r=i,this.capture(r))}e[oc(t)]=oc(r)}parseQueryParam(e){const t=function rU(n){const e=n.match(Db);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function im(n){const e=n.match(iU);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Tb(t),s=Tb(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=HE(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Xt]:new xn([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function rp(n){return n.segments.length>0?new xn([],{[Xt]:n}):n}function qE(n){const e={};for(const r of Object.keys(n.children)){const s=qE(n.children[r]);if(r===Xt&&0===s.segments.length&&s.hasChildren())for(const[u,d]of Object.entries(s.children))e[u]=d;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Cb(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new xn(n.segments.concat(e.segments),e.children)}return n}(new xn(n.segments,e))}function bl(n){return n instanceof tm}function Rb(n){let e;const i=rp(function t(s){const u={};for(const f of s.children){const _=t(f);u[f.outlet]=_}const d=new xn(s.url,u);return s===n&&(e=d),d}(n.root));return e??i}function WE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return Pb(i,i,i,t,r);const s=function KE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xb(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([f,_])=>{d[f]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new xb(t,e,r)}(e);if(s.toRoot())return Pb(i,i,new xn([],{}),t,r);const u=function Mb(n,e,t){if(n.isAbsolute)return new om(e,!0,0);if(!t)return new om(e,!1,NaN);if(null===t.parent)return new om(t,!0,0);const r=sm(n.commands[0])?0:1;return function ch(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new om(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),d=u.processChildren?Dl(u.segmentGroup,u.index,s.commands):Ty(u.segmentGroup,u.index,s.commands);return Pb(i,u.segmentGroup,d,t,r)}function sm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uh(n){return"object"==typeof n&&null!=n&&n.outlets}function Pb(n,e,t,r,i){let u,s={};r&&Object.entries(r).forEach(([f,_])=>{s[f]=Array.isArray(_)?_.map(I=>`${I}`):`${_}`}),u=n===e?t:wy(n,e,t);const d=rp(qE(u));return new tm(d,s,i)}function wy(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:wy(s,e,t)}),new xn(n.segments,r)}class xb{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&sm(r[0]))throw new p.vHH(4003,!1);const i=r.find(uh);if(i&&i!==Ib(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class om{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ty(n,e,t){if(n||(n=new xn([],{})),0===n.segments.length&&n.hasChildren())return Dl(n,e,t);const r=function YP(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(uh(d))break;const f=`${d}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&_&&"object"==typeof _&&void 0===_.outlets){if(!by(f,_,u))return s;r+=2}else{if(!by(f,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new xn(n.segments.slice(0,r.pathIndex),{});return s.children[Xt]=new xn(n.segments.slice(r.pathIndex),n.children),Dl(s,0,i)}return r.match&&0===i.length?new xn(n.segments,{}):r.match&&!n.hasChildren()?am(n,e,t):r.match?Dl(n,0,i):am(n,e,t)}function Dl(n,e,t){if(0===t.length)return new xn(n.segments,{});{const r=function QP(n){return uh(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(!r[Xt]&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const s=Dl(n.children[Xt],e,t);return new xn(n.segments,s.children)}return Object.entries(r).forEach(([s,u])=>{"string"==typeof u&&(u=[u]),null!==u&&(i[s]=Ty(n.children[s],e,u))}),Object.entries(n.children).forEach(([s,u])=>{void 0===r[s]&&(i[s]=u)}),new xn(n.segments,i)}}function am(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(uh(s)){const f=Ay(s.outlets);return new xn(r,f)}if(0===i&&sm(t[0])){r.push(new ah(n.segments[e].path,Cl(t[0]))),i++;continue}const u=uh(s)?s.outlets[Xt]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&sm(d)?(r.push(new ah(u,Cl(d))),i+=2):(r.push(new ah(u,{})),i++)}return new xn(r,{})}function Ay(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=am(new xn([],{}),0,r))}),e}function Cl(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function by(n,e,t){return n==t.path&&Ma(e,t.parameters)}const lh="imperative";class _u{constructor(e,t){this.id=e,this.url=t}}class ZE extends _u{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sl extends _u{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ac extends _u{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class um extends _u{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class QE extends _u{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class JP extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YE extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nb extends _u{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XP extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kb extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sU{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oU{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ex{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tx{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aU{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nx{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rx{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new dh,this.attachRef=null}}let dh=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){const s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){const i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new rx,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class Dy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Rl(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Rl(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cm(e,this._root).map(t=>t.value)}}function Rl(n,e){if(n===e.value)return e;for(const t of e.children){const r=Rl(n,t);if(r)return r}return null}function cm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cm(n,t);if(r.length)return r.unshift(e),r}return[]}class Na{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class lm extends Dy{constructor(e,t){super(e),this.snapshot=t,Sy(this,e)}toString(){return this.snapshot.toString()}}function ip(n,e){const t=function Ob(n,e){const u=new sp([],{},{},"",{},Xt,e,null,{});return new Cy("",new Na(u,[]))}(0,e),r=new Js.X([new ah("",{})]),i=new Js.X({}),s=new Js.X({}),u=new Js.X({}),d=new Js.X(""),f=new uc(r,i,u,d,s,Xt,e,t.root);return f.snapshot=t.root,new lm(new Na(f,[]),t)}class uc{constructor(e,t,r,i,s,u,d,f){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=u,this.component=d,this._futureSnapshot=f,this.title=this.dataSubject?.pipe((0,rn.U)(_=>_[yy]))??(0,Vt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rn.U)(e=>Xg(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rn.U)(e=>Xg(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function uU(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class sp{get title(){return this.data?.[yy]}constructor(e,t,r,i,s,u,d,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.routeConfig=f,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xg(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xg(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cy extends Dy{constructor(e,t){super(t),this.url=e,Sy(this,t)}toString(){return Fb(this._root)}}function Sy(n,e){e.value._routerState=n,e.children.forEach(t=>Sy(n,t))}function Fb(n){const e=n.children.length>0?` { ${n.children.map(Fb).join(", ")} } `:"";return`${n.value}${e}`}function ew(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ma(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ma(e.params,t.params)||n.paramsSubject.next(t.params),function tU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ma(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ma(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ry(n,e){const t=Ma(n.params,e.params)&&function nU(n,e){return tp(n,e)&&n.every((t,r)=>Ma(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ry(n.parent,e.parent))}let Py=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(dh),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb),this.inputBinder=(0,p.f3M)(xy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new p.vHH(4013,!1);this._activatedRoute=r;const s=this.location,d=r.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new ix(r,f,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:_,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),e})();class ix{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uc?this.route:e===dh?this.childContexts:this.parent.get(e,t)}}const xy=new p.OlP("");let sx=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:i}=r,s=Qg([i.queryParams,i.params,i.data]).pipe((0,Ri.w)(([u,d,f],_)=>(f={...u,...d,...f},0===_?(0,Vt.of)(f):Promise.resolve(f)))).subscribe(u=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(r);const d=(0,p.qFp)(i.component);if(d)for(const{templateName:f}of d.inputs)r.activatedComponentRef.setInput(f,u[f]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,s)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();function hh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tw(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hh(n,r,i);return hh(n,r)})}(n,e,t);return new Na(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>hh(n,d)),u}}const r=function ax(n){return new uc(new Js.X(n.url),new Js.X(n.params),new Js.X(n.queryParams),new Js.X(n.fragment),new Js.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>hh(n,s));return new Na(r,i)}}const My="ngNavigationCancelingError";function Ny(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=bl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hm(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function hm(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[My]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Lb(n){return nw(n)&&bl(n.url)}function nw(n){return n&&n[My]}let Vb=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[Py],encapsulation:2}),e})();function iw(n){const e=n.children&&n.children.map(iw),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=Vb),t}function ka(n){return n.outlet||Xt}function ap(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class fm{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ew(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=yu(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=yu(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=yu(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=yu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new aU(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ex(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ew(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),ew(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=ap(i.snapshot);u.attachRef=null,u.route=i,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class ow{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aw{constructor(e,t){this.component=e,this.route=t}}function uw(n,e,t){const r=n._root;return cp(r,e?e._root:null,t,[r.value])}function cc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function cp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=yu(e);return n.children.forEach(u=>{(function $b(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const f=function dx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!tp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!tp(n.url,e.url)||!Ma(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ry(n,e)||!Ma(n.queryParams,e.queryParams);default:return!Ry(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new ow(r)):(s.data=u.data,s._resolvedData=u._resolvedData),cp(n,e,s.component?d?d.children:null:t,r,i),f&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new aw(d.outlet.component,u))}else u&&pm(e,d,i),i.canActivateChecks.push(new ow(r)),cp(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Object.entries(s).forEach(([u,d])=>pm(d,t.getContext(u),i)),i}function pm(n,e,t){const r=yu(n),i=n.value;Object.entries(r).forEach(([s,u])=>{pm(u,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new aw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gm(n){return"function"==typeof n}function jb(n){return n instanceof El||"EmptyError"===n?.name}const cw=Symbol("INITIAL_VALUE");function mm(){return(0,Ri.w)(n=>Qg(n.map(e=>e.pipe(Xf(1),function FE(...n){const e=(0,Yu.yG)(n);return(0,Xs.e)((t,r)=>{(e?OE(n,t,e):OE(n,t)).subscribe(r)})}(cw)))).pipe((0,rn.U)(e=>{for(const t of e)if(!0!==t){if(t===cw)return cw;if(!1===t||t instanceof tm)return t}return!0}),ic(e=>e!==cw),Xf(1)))}function lw(n){return(0,BP.z)((0,gs.b)(e=>{if(bl(e))throw Ny(0,e)}),(0,rn.U)(e=>!0===e))}class dw{constructor(e){this.segmentGroup=e||null}}class Yb{constructor(e){this.urlTree=e}}function fh(n){return Jf(new dw(n))}function Jb(n){return Jf(new Yb(n))}class _x{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new p.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Vt.of)(r);if(i.numberOfChildren>1||!i.children[Xt])return Jf(new p.vHH(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new tm(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);r[i]=t[d]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Object.entries(t.children).forEach(([d,f])=>{u[d]=this.createSegmentGroup(e,f,r,i)}),new xn(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yx(n,e,t,r,i){const s=hw(n,e,t);return s.matched?(r=function Ub(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Qb(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,Vt.of)(!0);const s=i.map(u=>{const d=cc(u,n);return Al(function lc(n){return n&&gm(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))});return(0,Vt.of)(s).pipe(mm(),lw())}(r,e,t).pipe((0,rn.U)(u=>!0===u?s:{...Fy}))):(0,Vt.of)(s)}function hw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Fy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||eU)(t,n,e);if(!i)return{...Fy};const s={};Object.entries(i.posParams??{}).forEach(([d,f])=>{s[d]=f.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function vx(n,e,t,r){return t.length>0&&function Pl(n,e,t){return t.some(r=>_m(n,e,r)&&ka(r)!==Xt)}(n,t,r)?{segmentGroup:new xn(e,tD(r,new xn(t,n.children))),slicedSegments:[]}:0===t.length&&function dp(n,e,t){return t.some(r=>_m(n,e,r))}(n,t,r)?{segmentGroup:new xn(n.segments,eD(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xn(n.segments,n.children),slicedSegments:t}}function eD(n,e,t,r,i){const s={};for(const u of r)if(_m(n,t,u)&&!i[ka(u)]){const d=new xn([],{});s[ka(u)]=d}return{...i,...s}}function tD(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&ka(r)!==Xt){const i=new xn([],{});t[ka(r)]=i}return t}function _m(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class fw{constructor(e,t,r,i,s,u,d){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=u,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new _x(this.urlSerializer,this.urlTree)}noMatchError(e){return new p.vHH(4002,!1)}recognize(){const e=vx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe(sh(t=>{if(t instanceof Yb)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof dw?this.noMatchError(t):t}),(0,rn.U)(t=>{const r=new sp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),i=new Na(r,t),s=new Cy("",i),u=function Sb(n,e,t=null,r=null){return WE(Rb(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return u.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(u),this.inheritParamsAndData(s._root),{state:s,tree:u}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Xt).pipe(sh(r=>{throw r instanceof dw?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=dm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Rn.D)(i).pipe(ep(s=>{const u=r.children[s],d=function cx(n,e){const t=n.filter(r=>ka(r)===e);return t.push(...n.filter(r=>ka(r)!==e)),t}(t,s);return this.processSegmentGroup(e,d,u,s)}),function GP(n,e){return(0,Xs.e)(function $P(n,e,t,r,i){return(s,u)=>{let d=t,f=e,_=0;s.subscribe((0,Ki.x)(u,I=>{const b=_++;f=d?n(f,I,b):(d=!0,I),r&&u.next(f)},i&&(()=>{d&&u.next(f),u.complete()})))}}(n,e,arguments.length>=2,!0))}((s,u)=>(s.push(...u),s)),ih(null),function jP(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ic((i,s)=>n(i,s,r)):Il.y,LE(1),t?ih(e):_y(()=>new El))}(),(0,li.z)(s=>{if(null===s)return fh(r);const u=Vy(s);return function ym(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),(0,Vt.of)(u)}))}processSegment(e,t,r,i,s,u){return(0,Rn.D)(t).pipe(ep(d=>this.processSegmentAgainstRoute(d._injector??e,t,d,r,i,s,u).pipe(sh(f=>{if(f instanceof dw)return(0,Vt.of)(null);throw f}))),sc(d=>!!d),sh(d=>{if(jb(d))return function Ly(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?(0,Vt.of)([]):fh(r);throw d}))}processSegmentAgainstRoute(e,t,r,i,s,u,d){return function Ix(n,e,t,r){return!!(ka(n)===r||r!==Xt&&_m(e,t,n))&&("**"===n.path||hw(e,n,t).matched)}(r,i,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,u,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,u):fh(i):fh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Jb(s):this.applyRedirects.lineralizeSegments(r,s).pipe((0,li.z)(u=>{const d=new xn(u,{});return this.processSegment(e,t,d,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:f,remainingSegments:_,positionalParamSegments:I}=hw(t,i,s);if(!d)return fh(t);const b=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,I);return i.redirectTo.startsWith("/")?Jb(b):this.applyRedirects.lineralizeSegments(i,b).pipe((0,li.z)(x=>this.processSegment(e,r,t,x.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,u){let d;if("**"===r.path){const f=i.length>0?Ib(i).parameters:{},_=new sp(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uy(r),ka(r),r.component??r._loadedComponent??null,r,pw(r));d=(0,Vt.of)({snapshot:_,consumedSegments:[],remainingSegments:[]}),t.children={}}else d=yx(t,r,i,e).pipe((0,rn.U)(({matched:f,consumedSegments:_,remainingSegments:I,parameters:b})=>f?{snapshot:new sp(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Uy(r),ka(r),r.component??r._loadedComponent??null,r,pw(r)),consumedSegments:_,remainingSegments:I}:null));return d.pipe((0,Ri.w)(f=>null===f?fh(t):this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ri.w)(({routes:_})=>{const I=r._loadedInjector??e,{snapshot:b,consumedSegments:x,remainingSegments:k}=f,{segmentGroup:$,slicedSegments:Q}=vx(t,x,k,_);if(0===Q.length&&$.hasChildren())return this.processChildren(I,_,$).pipe((0,rn.U)(Ae=>null===Ae?null:[new Na(b,Ae)]));if(0===_.length&&0===Q.length)return(0,Vt.of)([new Na(b,[])]);const Z=ka(r)===s;return this.processSegment(I,_,$,Q,Z?Xt:s,!0).pipe((0,rn.U)(Ae=>[new Na(b,Ae)]))}))))}getChildConfig(e,t,r){return t.children?(0,Vt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,Vt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function qt(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,Vt.of)(!0);const s=i.map(u=>{const d=cc(u,n);return Al(function fx(n){return n&&gm(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))});return(0,Vt.of)(s).pipe(mm(),lw())}(e,t,r).pipe((0,li.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gs.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Xb(n){return Jf(hm(!1,3))}())):(0,Vt.of)({routes:[],injector:e})}}function nD(n){const e=n.value.routeConfig;return e&&""===e.path}function Vy(n){const e=[],t=new Set;for(const r of n){if(!nD(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Vy(r.children);e.push(new Na(r.value,i))}return e.filter(r=>!t.has(r))}function Uy(n){return n.data||{}}function pw(n){return n.resolve||{}}function sD(n){return"string"==typeof n.title||null===n.title}function mw(n){return(0,Ri.w)(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,rn.U)(()=>e)):(0,Vt.of)(e)})}const fp=new p.OlP("ROUTES");let By=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.f3M)(p.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,Vt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Al(r.loadComponent()).pipe((0,rn.U)(aD),(0,gs.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=u}),oh(()=>{this.componentLoaders.delete(r)})),s=new _b(i,()=>new rh.x).pipe(wl());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,Vt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const u=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,rn.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(i);let _,I;return Array.isArray(f)?I=f:(_=f.create(r).injector,I=_.get(fp,[],p.XFs.Self|p.XFs.Optional).flat()),{routes:I.map(iw),injector:_}}),oh(()=>{this.childrenLoaders.delete(i)})),d=new _b(u,()=>new rh.x).pipe(wl());return this.childrenLoaders.set(i,d),d}loadModuleFactoryOrRoutes(r){return Al(r()).pipe((0,rn.U)(aD),(0,li.z)(i=>i instanceof p.YKP||Array.isArray(i)?(0,Vt.of)(i):(0,Rn.D)(this.compiler.compileModuleAsync(i))))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function aD(n){return function oD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $y=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new rh.x,this.configLoader=(0,p.f3M)(By),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(nm),this.rootContexts=(0,p.f3M)(dh),this.inputBindingEnabled=null!==(0,p.f3M)(xy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Vt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new sU(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new JE(s))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:i})}setupNavigations(r){return this.transitions=new Js.X({id:0,currentUrlTree:r.currentUrlTree,currentRawUrl:r.currentUrlTree,extractedUrl:r.urlHandlingStrategy.extract(r.currentUrlTree),urlAfterRedirects:r.urlHandlingStrategy.extract(r.currentUrlTree),rawUrl:r.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:lh,restoredState:null,currentSnapshot:r.routerState.snapshot,targetSnapshot:null,currentRouterState:r.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ic(i=>0!==i.id),(0,rn.U)(i=>({...i,extractedUrl:r.urlHandlingStrategy.extract(i.rawUrl)})),(0,Ri.w)(i=>{let s=!1,u=!1;return(0,Vt.of)(i).pipe((0,gs.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ri.w)(d=>{const f=r.browserUrlTree.toString(),_=!r.navigated||d.extractedUrl.toString()!==f||f!==r.currentUrlTree.toString();if(!_&&"reload"!==(d.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const b="";return this.events.next(new um(d.id,r.serializeUrl(i.rawUrl),b,0)),r.rawUrlTree=d.rawUrl,d.resolve(null),rc.E}if(r.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return eo(d.source)&&(r.browserUrlTree=d.extractedUrl),(0,Vt.of)(d).pipe((0,Ri.w)(b=>{const x=this.transitions?.getValue();return this.events.next(new ZE(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),x!==this.transitions?.getValue()?rc.E:Promise.resolve(b)}),function gw(n,e,t,r,i,s){return(0,li.z)(u=>function hp(n,e,t,r,i,s,u="emptyOnly"){return new fw(n,e,t,r,i,u,s).recognize()}(n,e,t,r,u.extractedUrl,i,s).pipe((0,rn.U)(({state:d,tree:f})=>({...u,targetSnapshot:d,urlAfterRedirects:f}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,gs.b)(b=>{if(i.targetSnapshot=b.targetSnapshot,i.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===r.urlUpdateStrategy){if(!b.extras.skipLocationChange){const k=r.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);r.setBrowserUrl(k,b)}r.browserUrlTree=b.urlAfterRedirects}const x=new JP(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(x)}));if(_&&r.urlHandlingStrategy.shouldProcessUrl(r.rawUrlTree)){const{id:b,extractedUrl:x,source:k,restoredState:$,extras:Q}=d,Z=new ZE(b,this.urlSerializer.serialize(x),k,$);this.events.next(Z);const Ae=ip(0,this.rootComponentType).snapshot;return i={...d,targetSnapshot:Ae,urlAfterRedirects:x,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}},(0,Vt.of)(i)}{const b="";return this.events.next(new um(d.id,r.serializeUrl(i.extractedUrl),b,1)),r.rawUrlTree=d.rawUrl,d.resolve(null),rc.E}}),(0,gs.b)(d=>{const f=new YE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),(0,rn.U)(d=>i={...d,guards:uw(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function zb(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?(0,Vt.of)({...t,guardsResult:!0}):function Hb(n,e,t,r){return(0,Rn.D)(n).pipe((0,li.z)(i=>function Zb(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,Vt.of)(!0);const u=s.map(d=>{const f=ap(e)??i,_=cc(d,f);return Al(function lp(n){return n&&gm(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):f.runInContext(()=>_(n,e,t,r))).pipe(sc())});return(0,Vt.of)(u).pipe(mm())}(i.component,i.route,t,e,r)),sc(i=>!0!==i,!0))}(u,r,i,n).pipe((0,li.z)(d=>d&&function hx(n){return"boolean"==typeof n}(d)?function hU(n,e,t,r){return(0,Rn.D)(e).pipe(ep(i=>OE(function Oy(n,e){return null!==n&&e&&e(new oU(n)),(0,Vt.of)(!0)}(i.route.parent,r),function qb(n,e){return null!==n&&e&&e(new tx(n)),(0,Vt.of)(!0)}(i.route,r),function Kb(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function up(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>mb(()=>{const d=u.guards.map(f=>{const _=ap(u.node)??t,I=cc(f,_);return Al(function Gb(n){return n&&gm(n.canActivateChild)}(I)?I.canActivateChild(r,n):_.runInContext(()=>I(r,n))).pipe(sc())});return(0,Vt.of)(d).pipe(mm())}));return(0,Vt.of)(s).pipe(mm())}(n,i.path,t),function Wb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Vt.of)(!0);const i=r.map(s=>mb(()=>{const u=ap(e)??t,d=cc(s,u);return Al(function px(n){return n&&gm(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(sc())}));return(0,Vt.of)(i).pipe(mm())}(n,i.route,t))),sc(i=>!0!==i,!0))}(r,s,n,e):(0,Vt.of)(d)),(0,rn.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,d=>this.events.next(d)),(0,gs.b)(d=>{if(i.guardsResult=d.guardsResult,bl(d.guardsResult))throw Ny(0,d.guardsResult);const f=new Nb(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),ic(d=>!!d.guardsResult||(r.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),mw(d=>{if(d.guards.canActivateChecks.length)return(0,Vt.of)(d).pipe((0,gs.b)(f=>{const _=new XP(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}),(0,Ri.w)(f=>{let _=!1;return(0,Vt.of)(f).pipe(function Ex(n,e){return(0,li.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,Vt.of)(t);let s=0;return(0,Rn.D)(i).pipe(ep(u=>function wx(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!sD(i)&&(s[yy]=i.title),function Tx(n,e,t,r){const i=function iD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,Vt.of)({});const s={};return(0,Rn.D)(i).pipe((0,li.z)(u=>function Ax(n,e,t,r){const i=ap(e)??r,s=cc(n,i);return Al(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(sc(),(0,gs.b)(d=>{s[u]=d}))),LE(1),function Tl(n){return(0,rn.U)(()=>n)}(s),sh(u=>jb(u)?rc.E:Jf(u)))}(s,n,e,r).pipe((0,rn.U)(u=>(n._resolvedData=u,n.data=dm(n,t).resolve,i&&sD(i)&&(n.data[yy]=i.title),null)))}(u.route,r,n,e)),(0,gs.b)(()=>s++),LE(1),(0,li.z)(u=>s===i.length?(0,Vt.of)(t):rc.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,gs.b)({next:()=>_=!0,complete:()=>{_||(r.restoreHistory(f),this.cancelNavigationTransition(f,"",2))}}))}),(0,gs.b)(f=>{const _=new kb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(_)}))}),mw(d=>{const f=_=>{const I=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,gs.b)(b=>{_.component=b}),(0,rn.U)(()=>{})));for(const b of _.children)I.push(...f(b));return I};return Qg(f(d.targetSnapshot.root)).pipe(ih(),Xf(1))}),mw(()=>this.afterPreactivation()),(0,rn.U)(d=>{const f=function ox(n,e,t){const r=hh(n,e._root,t?t._root:void 0);return new lm(r,e)}(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:f}}),(0,gs.b)(d=>{r.currentUrlTree=d.urlAfterRedirects,r.rawUrlTree=r.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),r.routerState=d.targetRouterState,"deferred"===r.urlUpdateStrategy&&(d.extras.skipLocationChange||r.setBrowserUrl(r.rawUrlTree,d),r.browserUrlTree=d.urlAfterRedirects)}),((n,e,t,r)=>(0,rn.U)(i=>(new fm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Xf(1),(0,gs.b)({next:d=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,r.navigated=!0,this.events.next(new Sl(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(r.currentUrlTree))),r.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{s=!0}}),oh(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),sh(d=>{if(u=!0,nw(d)){Lb(d)||(r.navigated=!0,r.restoreHistory(i,!0));const f=new ac(i.id,this.urlSerializer.serialize(i.extractedUrl),d.message,d.cancellationCode);if(this.events.next(f),Lb(d)){const _=r.urlHandlingStrategy.merge(d.url,r.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===r.urlUpdateStrategy||eo(i.source)};r.scheduleNavigation(_,lh,null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{r.restoreHistory(i,!0);const f=new QE(i.id,this.urlSerializer.serialize(i.extractedUrl),d,i.targetSnapshot??void 0);this.events.next(f);try{i.resolve(r.errorHandler(d))}catch(_){i.reject(_)}}return rc.E}))}))}cancelNavigationTransition(r,i,s){const u=new ac(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(u),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function eo(n){return n!==lh}let uD=(()=>{var n;class e{buildTitle(r){let i,s=r.root;for(;void 0!==s;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(u=>u.outlet===Xt);return i}getResolvedTitleForRoute(r){return r.data[yy]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(bx)},providedIn:"root"}),e})(),bx=(()=>{var n;class e extends uD{constructor(r){super(),this.title=r}updateTitle(r){const i=this.buildTitle(r);void 0!==i&&this.title.setTitle(i)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(xf))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),fU=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(cD)},providedIn:"root"}),e})();class _w{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let cD=(()=>{var n;class e extends _w{}return(n=e).\u0275fac=function(){let t;return function(i){return(t||(t=p.n5z(n)))(i||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const Gy=new p.OlP("",{providedIn:"root",factory:()=>({})});let Dx=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Cx)},providedIn:"root"}),e})(),Cx=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var pp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(pp||{});function lD(n,e){n.events.pipe(ic(t=>t instanceof Sl||t instanceof ac||t instanceof QE||t instanceof um),(0,rn.U)(t=>t instanceof Sl||t instanceof um?pp.COMPLETE:t instanceof ac&&(0===t.code||1===t.code)?pp.REDIRECTING:pp.FAILED),ic(t=>t!==pp.REDIRECTING),Xf(1)).subscribe(()=>{e()})}function Sx(n){throw n}function yw(n,e,t){return e.parse("/")}const Rx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Px={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Xi=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(Gy,{optional:!0})||{},this.pendingTasks=(0,p.f3M)(p.HDt),this.errorHandler=this.options.errorHandler||Sx,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||yw,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(Dx),this.routeReuseStrategy=(0,p.f3M)(fU),this.titleStrategy=(0,p.f3M)(uD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,p.f3M)(fp,{optional:!0})?.flat()??[],this.navigationTransitions=(0,p.f3M)($y),this.urlSerializer=(0,p.f3M)(nm),this.location=(0,p.f3M)(et),this.componentInputBindingEnabled=!!(0,p.f3M)(xy,{optional:!0}),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new tm,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ip(0,null),this.navigationTransitions.setupNavigations(this).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId??0},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),lh,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const i="popstate"===r.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,i,r.state)},0)}))}navigateToSyncWithBrowser(r,i,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const f=this.parseUrl(r);this.scheduleNavigation(f,i,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(iw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,i={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:f,preserveFragment:_}=i,I=_?this.currentUrlTree.fragment:d;let x,b=null;switch(f){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{x=Rb(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),x=this.currentUrlTree.root}return WE(x,r,b,I??null)}navigateByUrl(r,i={skipLocationChange:!1}){const s=bl(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,lh,null,i)}navigate(r,i={skipLocationChange:!1}){return function xx(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let i;try{i=this.urlSerializer.parse(r)}catch(s){i=this.malformedUriErrorHandler(s,this.urlSerializer,r)}return i}isActive(r,i){let s;if(s=!0===i?{...Rx}:!1===i?{...Px}:i,bl(r))return mu(this.currentUrlTree,r,s);const u=this.parseUrl(r);return mu(this.currentUrlTree,u,s)}removeEmptyProps(r){return Object.keys(r).reduce((i,s)=>{const u=r[s];return null!=u&&(i[s]=u),i},{})}scheduleNavigation(r,i,s,u,d){if(this.disposed)return Promise.resolve(!1);let f,_,I;d?(f=d.resolve,_=d.reject,I=d.promise):I=new Promise((x,k)=>{f=x,_=k});const b=this.pendingTasks.add();return lD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:u,resolve:f,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(x=>Promise.reject(x))}setBrowserUrl(r,i){const s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const u={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(s,"",u)}}restoreHistory(r,i=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),gp=(()=>{var n;class e{constructor(r,i,s,u,d,f){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.locationStrategy=f,this.href=null,this.commands=null,this.onChanges=new rh.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const _=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_,this.isAnchorElement?this.subscription=r.events.subscribe(I=>{I instanceof Sl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,u,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==r||i||s||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const r=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(r,i){const s=this.renderer,u=this.el.nativeElement;null!==i?s.setAttribute(u,r,i):s.removeAttribute(u,r)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(Xi),p.Y36(uc),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Ke))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&p.NdJ("click",function(u){return i.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&r&&p.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",p.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",p.VuI],replaceUrl:["replaceUrl","replaceUrl",p.VuI],routerLink:"routerLink"},standalone:!0,features:[p.Xq5,p.TTD]}),e})();class dD{}let hD=(()=>{var n;class e{constructor(r,i,s,u,d){this.router=r,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(ic(r=>r instanceof Sl),ep(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){const s=[];for(const u of i){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,r,`Route: ${u.path}`));const d=u._injector??r,f=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,Rn.D)(s).pipe((0,Yg.J)())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;s=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(r,i):(0,Vt.of)(null);const u=s.pipe((0,li.z)(d=>null===d?(0,Vt.of)(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??r,d.routes))));if(i.loadComponent&&!i._loadedComponent){const d=this.loader.loadComponent(i);return(0,Rn.D)([u,d]).pipe((0,Yg.J)())}return u})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Xi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(dD),p.LFG(By))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const jy=new p.OlP("");let vm=(()=>{var n;class e{constructor(r,i,s,u,d={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ZE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Sl?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof um&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof nx&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nx(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(r){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),e})();function Iu(n,e){return{\u0275kind:n,\u0275providers:e}}function Eu(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Xi),i=n.get(mD);1===n.get(Iw)&&r.initialNavigation(),n.get(_D,null,p.XFs.Optional)?.setUpPreloading(),n.get(jy,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const mD=new p.OlP("",{factory:()=>new rh.x}),Iw=new p.OlP("",{providedIn:"root",factory:()=>1}),_D=new p.OlP("");function mU(n){return Iu(0,[{provide:_D,useExisting:hD},{provide:dD,useExisting:n}])}const Vx=new p.OlP("ROUTER_FORROOT_GUARD"),Ux=[et,{provide:nm,useClass:$E},Xi,dh,{provide:uc,useFactory:function Nx(n){return n.routerState.root},deps:[Xi]},By,[]];function yD(){return new p.PXZ("Router",Xi)}let Aw=(()=>{var n;class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Ux,[],{provide:fp,multi:!0,useValue:r},{provide:Vx,useFactory:ID,deps:[[Xi,new p.FiY,new p.tp0]]},{provide:Gy,useValue:i||{}},i?.useHash?{provide:Ke,useClass:nt}:{provide:Ke,useClass:Xe},{provide:jy,useFactory:()=>{const n=(0,p.f3M)(kc),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(Gy),r=(0,p.f3M)($y),i=(0,p.f3M)(nm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new vm(i,r,n,e,t)}},i?.preloadingStrategy?mU(i.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:yD},i?.initialNavigation?Em(i):[],i?.bindToComponentInputs?Iu(8,[sx,{provide:xy,useExisting:sx}]).\u0275providers:[],[{provide:ED,useFactory:Eu},{provide:p.tb,multi:!0,useExisting:ED}]]}}static forChild(r){return{ngModule:e,providers:[{provide:fp,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(Vx,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),e})();function ID(n){return"guarded"}function Em(n){return["disabled"===n.initialNavigation?Iu(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Xi);return()=>{e.setUpLocationChangeListener()}}},{provide:Iw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Iu(2,[{provide:Iw,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(Ve,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Xi),s=e.get(mD);lD(i,()=>{r(!0)}),e.get($y).afterPreactivation=()=>(r(!0),s.closed?(0,Vt.of)(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ED=new p.OlP("");var at,B=O(5861),wn=O(534),xl=O(4537),ms=O(7879),it=O(9058),jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xo={},bw=bw||{},$t=jx||self;function Hy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Dw="closure_uid_"+(1e9*Math.random()>>>0),Hx=0;function qx(n,e,t){return n.call.apply(n.bind,arguments)}function Wx(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function es(n,e,t){return(es=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qx:Wx).apply(null,arguments)}function Tm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function ph(){this.s=this.s,this.o=this.o}ph.prototype.s=!1,ph.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function zx(n){Object.prototype.hasOwnProperty.call(n,Dw)&&n[Dw]||(n[Dw]=++Hx)}(this)},ph.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function AD(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Am(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Hy(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function _s(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}_s.prototype.h=function(){this.defaultPrevented=!0};var Kx=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",()=>{},e),$t.removeEventListener("test",()=>{},e)}catch{}return n}();function gh(n){return/^[\s\xa0]*$/.test(n)}function qy(){var n=$t.navigator;return n&&(n=n.userAgent)?n:""}function di(n){return-1!=qy().indexOf(n)}function mh(n){return mh[" "](n),n}mh[" "]=function(){};var Ml,n,_h=di("Opera"),dc=di("Trident")||di("MSIE"),bo=di("Edge"),bm=bo||dc,yh=di("Gecko")&&!(-1!=qy().toLowerCase().indexOf("webkit")&&!di("Edge"))&&!(di("Trident")||di("MSIE"))&&!di("Edge"),mp=-1!=qy().toLowerCase().indexOf("webkit")&&!di("Edge");function vh(){var n=$t.document;return n?n.documentMode:void 0}e:{var Nl="",kl=(n=qy(),yh?/rv:([^\);]+)(\)|;)/.exec(n):bo?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mp?/WebKit\/(\S+)/.exec(n):_h?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kl&&(Nl=kl?kl[1]:""),dc){var Ol=vh();if(null!=Ol&&Ol>parseFloat(Nl)){Ml=String(Ol);break e}}Ml=Nl}var bD=$t.document&&dc&&(vh()||parseInt(Ml,10))||void 0;function _p(n,e){if(_s.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yh){e:{try{mh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:DD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_p.$.h.call(this)}}Pi(_p,_s);var DD={2:"touch",3:"pen",4:"mouse"};_p.prototype.h=function(){_p.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yp="closure_listenable_"+(1e6*Math.random()|0),CD=0;function SD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++CD,this.fa=this.ia=!1}function Dm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Wy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ky(n){const e={};for(const t in n)e[t]=n[t];return e}const PD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zx(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<PD.length;s++)t=PD[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Sw(n){this.src=n,this.g={},this.h=0}function Rw(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Cw(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Dm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Pw(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Sw.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Pw(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new SD(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var xD="closure_lm_"+(1e6*Math.random()|0),xw={};function Qx(n,e,t,r,i){if(r&&r.once)return ND(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Qx(n,e[s],t,r,i);return null}return t=Xy(t),n&&n[yp]?n.O(e,t,wm(r)?!!r.capture:!!r,i):MD(n,e,t,!1,r,i)}function MD(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=wm(i)?!!i.capture:!!i,d=Jy(n);if(d||(n[xD]=d=new Sw(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function Yx(){const e=Yy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Kx||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Qy(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ND(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ND(n,e[s],t,r,i);return null}return t=Xy(t),n&&n[yp]?n.P(e,t,wm(r)?!!r.capture:!!r,i):MD(n,e,t,!0,r,i)}function Zy(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Zy(n,e[s],t,r,i);else r=wm(r)?!!r.capture:!!r,t=Xy(t),n&&n[yp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Pw(s=n.g[e],t,r,i))&&(Dm(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Jy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Pw(e,t,r,i)),(t=-1<n?e[n]:null)&&Eh(t))}function Eh(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[yp])Rw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Qy(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Jy(e))?(Rw(t,n),0==t.h&&(t.src=null,e[xD]=null)):Dm(n)}}}function Qy(n){return n in xw?xw[n]:xw[n]="on"+n}function Yy(n,e){if(n.fa)n=!0;else{e=new _p(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Eh(n),n=t.call(r,e)}return n}function Jy(n){return(n=n[xD])instanceof Sw?n:null}var wh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xy(n){return"function"==typeof n?n:(n[wh]||(n[wh]=function(e){return n.handleEvent(e)}),n[wh])}function xi(){ph.call(this),this.i=new Sw(this),this.S=this,this.J=null}function Ur(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new _s(e,n);else if(e instanceof _s)e.target=e.target||n;else{var i=e;Zx(e=new _s(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=ev(u,r,!0,e)&&i}if(i=ev(u=e.g=n,r,!0,e)&&i,i=ev(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=ev(u=e.g=t[s],r,!1,e)&&i}function ev(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.fa&&u.capture==t){var d=u.listener,f=u.la||u.src;u.ia&&Rw(n.i,u),i=!1!==d.call(f,r)&&i}}return i&&!r.defaultPrevented}Pi(xi,ph),xi.prototype[yp]=!0,xi.prototype.removeEventListener=function(n,e,t,r){Zy(this,n,e,t,r)},xi.prototype.N=function(){if(xi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dm(t[r]);delete n.g[e],n.h--}}this.J=null},xi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Mw=$t.JSON.stringify;function Xx(){var n=kw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Cm=new class Jx{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new tv,n=>n.reset());class tv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wU(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function eM(n){$t.setTimeout(()=>{throw n},0)}let Sm,Th=!1,kw=new class Nw{constructor(){this.h=this.g=null}add(e,t){const r=Cm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Ow=()=>{const n=$t.Promise.resolve(void 0);Sm=()=>{n.then(tM)}};var tM=()=>{for(var n;n=Xx();){try{n.h.call(n.g)}catch(t){eM(t)}var e=Cm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Th=!1};function nv(n,e){xi.call(this),this.h=n||1,this.g=e||$t,this.j=es(this.qb,this),this.l=Date.now()}function rv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function iv(n,e,t){if("function"==typeof n)t&&(n=es(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=es(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function Fw(n){n.g=iv(()=>{n.g=null,n.i&&(n.i=!1,Fw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(nv,xi),(at=nv.prototype).ga=!1,at.T=null,at.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ur(this,"tick"),this.ga&&(rv(this),this.start()))}},at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.N=function(){nv.$.N.call(this),rv(this),delete this.g};class nM extends ph{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fw(this)}N(){super.N(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rm(n){ph.call(this),this.h=n,this.g={}}Pi(Rm,ph);var kD=[];function OD(n,e,t,r){Array.isArray(t)||(t&&(kD[0]=t.toString()),t=kD);for(var i=0;i<t.length;i++){var s=Qx(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function sv(n){Wy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Eh(e)},n),n.g={}}function vp(){this.g=!0}function hc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return Mw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Rm.prototype.N=function(){Rm.$.N.call(this),sv(this)},Rm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vp.prototype.Ea=function(){this.g=!1},vp.prototype.info=function(){};var Ah={},LD=null;function av(){return LD=LD||new xi}function Pm(n){_s.call(this,Ah.Ta,n)}function Ll(n){const e=av();Ur(e,new Pm(e))}function Vw(n,e){_s.call(this,Ah.STAT_EVENT,n),this.stat=e}function vs(n){const e=av();Ur(e,new Vw(e,n))}function VD(n,e){_s.call(this,Ah.Ua,n),this.size=e}function xm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Ah.Ta="serverreachability",Pi(Pm,_s),Ah.STAT_EVENT="statevent",Pi(Vw,_s),Ah.Ua="timingevent",Pi(VD,_s);var Mm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},uv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cv(){}function Uw(){}cv.prototype.h=null;var fv,Nm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dv(){_s.call(this,"d")}function hv(){_s.call(this,"c")}function km(){}function Om(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Rm(this),this.P=iM,this.V=new nv(n=bm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new UD}function UD(){this.i=null,this.g="",this.h=!1}Pi(dv,_s),Pi(hv,_s),Pi(km,cv),km.prototype.g=function(){return new XMLHttpRequest},km.prototype.i=function(){return{}},fv=new km;var iM=45e3,Fm={},bh={};function pv(n,e,t){n.L=1,n.v=_v(Bl(e)),n.s=t,n.S=!0,Bw(n,null)}function Bw(n,e){n.G=Date.now(),Ip(n),n.A=Bl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),WD(t.i,"t",r),n.C=0,t=n.l.J,n.h=new UD,n.g=fC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new nM(es(n.Pa,n,n.g),n.O)),OD(n.U,n.g,"readystatechange",n.nb),e=n.I?Ky(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ll(),function rM(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),f=0;f<d.length;f++){var _=d[f].split("=");if(1<_.length){var I=_[0];_=_[1];var b=I.split("_");u=2<=b.length&&"type"==b[1]?u+(I+"=")+_+"&":u+(I+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function $w(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Gw(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=BD(n,t),i==bh){4==e&&(n.o=4,vs(14),r=!1),hc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Fm){n.o=4,vs(15),hc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}hc(n.j,n.m,i,null),zw(n,i)}$w(n)&&i!=bh&&i!=Fm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),nT(e),e.M=!0,vs(11))):(hc(n.j,n.m,t,"[Invalid Chunked Response]"),to(n),Vl(n))}function BD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bh:(t=Number(e.substring(t,r)),isNaN(t)?Fm:(r+=1)+t>e.length?bh:(e=e.slice(r,r+t),n.C=r+t,e))}function Ip(n){n.Y=Date.now()+n.P,jw(n,n.P)}function jw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=xm(es(n.lb,n),e)}function Lm(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function Vl(n){0==n.l.H||n.J||cC(n.l,n)}function to(n){Lm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,rv(n.V),sv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function zw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||ea(t.i,n)))if(!n.K&&ea(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Av(t),wv(t)}tT(t),vs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=xm(es(t.ib,t),6e3));if(1>=QD(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Sh(t,11)}else if((n.K||t.g==n)&&Av(t),!gh(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.V=_[0],_=_[1],2==t.H)if("c"==_[0]){t.K=_[1],t.pa=_[2];const I=_[3];null!=I&&(t.ra=I,t.l.info("VER="+t.ra));const b=_[4];null!=b&&(t.Ga=b,t.l.info("SVER="+t.Ga));const x=_[5];null!=x&&"number"==typeof x&&0<x&&(t.L=r=1.5*x,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const $=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var s=r.i;s.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Do(s,s.h),s.h=null))}if(r.F){const Q=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;Q&&(r.Da=Q,tr(r.I,r.F,Q))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=hC(r,r.J?r.pa:null,r.Y),u.K){ta(r.i,u);var d=u,f=r.L;f&&d.setTimeout(f),d.B&&(Lm(d),Ip(d)),r.g=u}else aC(r);0<t.j.length&&Tv(t)}else"stop"!=_[0]&&"close"!=_[0]||Sh(t,7);else 3==t.H&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?Sh(t,7):Ev(t):"noop"!=_[0]&&t.h&&t.h.Aa(_),t.A=0)}Ll()}catch{}}function Ul(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hy(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Hw(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Hy(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function sM(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Hy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(at=Om.prototype).setTimeout=function(n){this.P=n},at.nb=function(n){n=n.target;const e=this.M;e&&3==Oa(n)?e.l():this.Pa(n)},at.Pa=function(n){try{if(n==this.g)e:{const I=Oa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>I)&&(3!=I||bm||this.g&&(this.h.h||this.g.ja()||Jw(this.g)))){this.J||4!=I||7==e||Ll(),Lm(this);var t=this.g.da();this.ca=t;t:if($w(this)){var r=Jw(this.g);n="";var i=r.length,s=4==Oa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){to(this),Vl(this);var u="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function ov(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.W,I,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gh(d)){var _=d;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,vs(12),to(this),Vl(this);break e}hc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zw(this,t)}this.S?(Gw(this,I,u),bm&&this.i&&3==I&&(OD(this.U,this.V,"tick",this.mb),this.V.start())):(hc(this.j,this.m,u,null),zw(this,u)),4==I&&to(this),this.i&&!this.J&&(4==I?cC(this.l,this):(this.i=!1,Ip(this)))}else(function rC(n){const e={};n=(n.g&&2<=Oa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(gh(n[r]))continue;var t=wU(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function RD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,vs(12)):(this.o=0,vs(13)),to(this),Vl(this)}}}catch{}},at.mb=function(){if(this.g){var n=Oa(this.g),e=this.g.ja();this.C<e.length&&(Lm(this),Gw(this,n,e),this.i&&4!=n&&Ip(this))}},at.cancel=function(){this.J=!0,to(this)},at.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Lw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ll(),vs(17)),to(this),this.o=2,Vl(this)):jw(this,this.Y-n)};var gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fc(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof fc){this.h=n.h,qw(this,n.j),this.s=n.s,this.g=n.g,mv(this,n.m),this.l=n.l;var e=n.i,t=new wu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),$D(this,t),this.o=n.o}else n&&(e=String(n).match(gv))?(this.h=!1,qw(this,e[1]||"",!0),this.s=yr(e[2]||""),this.g=yr(e[3]||"",!0),mv(this,e[4]),this.l=yr(e[5]||"",!0),$D(this,e[6]||"",!0),this.o=yr(e[7]||"")):(this.h=!1,this.i=new wu(null,this.h))}function Bl(n){return new fc(n)}function qw(n,e,t){n.j=t?yr(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function mv(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $D(n,e,t){e instanceof wu?(n.i=e,function TU(n,e){e&&!n.j&&($l(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qD(this,r),WD(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ep(e,zD)),n.i=new wu(e,n.h))}function tr(n,e,t){n.i.set(e,t)}function _v(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yr(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ep(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aM),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aM(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}fc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ep(e,GD,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ep(e,GD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ep(t,"/"==t.charAt(0)?uM:jD,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ep(t,HD)),n.join("")};var GD=/[#\/\?@]/g,jD=/[#\?:]/g,uM=/[#\?]/g,zD=/[#\?@]/g,HD=/#/g;function wu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $l(n){n.g||(n.g=new Map,n.h=0,n.i&&function oM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qD(n,e){$l(n),e=Dh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ww(n,e){return $l(n),e=Dh(n,e),n.g.has(e)}function WD(n,e,t){qD(n,e),0<t.length&&(n.i=null,n.g.set(Dh(n,e),AD(t)),n.h+=t.length)}function Dh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yv(n){this.l=n||Tu,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ka&&$t.g.Ka()&&$t.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=wu.prototype).add=function(n,e){$l(this),this.i=null,n=Dh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){$l(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},at.ta=function(){$l(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},at.Z=function(n){$l(this);let e=[];if("string"==typeof n)Ww(this,n)&&(e=e.concat(this.g.get(Dh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},at.set=function(n,e){return $l(this),this.i=null,Ww(this,n=Dh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var Tu=10;function ZD(n){return!!n.h||!!n.g&&n.g.size>=n.j}function QD(n){return n.h?1:n.g?n.g.size:0}function ea(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Do(n,e){n.g?n.g.add(e):n.h=e}function ta(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Kw(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return AD(n.i)}yv.prototype.cancel=function(){if(this.i=Kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var YD=class{stringify(n){return $t.JSON.stringify(n,void 0)}parse(n){return $t.JSON.parse(n,void 0)}};function cM(){this.g=new YD}function lM(n,e,t){const r=t||"";try{Ul(n,function(i,s){let u=i;wm(i)&&(u=Mw(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ch(n){this.l=n.fc||null,this.j=n.ob||!1}function Gl(n,e){xi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Zw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pi(Ch,cv),Ch.prototype.g=function(){return new Gl(this.l,this.j)},Ch.prototype.i=function(n){return function(){return n}}({}),Pi(Gl,xi);var Zw=0;function Qw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Vm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Um(n)}function Um(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Gl.prototype).open=function(n,e){if(this.readyState!=Zw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Um(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||$t).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vm(this)),this.readyState=Zw},at.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Um(this)),this.g&&(this.readyState=3,Um(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},at.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vm(this):Um(this),3==this.readyState&&Qw(this)}},at.Za=function(n){this.g&&(this.response=this.responseText=n,Vm(this))},at.Ya=function(n){this.g&&(this.response=n,Vm(this))},at.ka=function(){this.g&&Vm(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Gl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var JD=$t.JSON.parse;function vr(n){xi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Bm,this.L=this.M=!1}Pi(vr,xi);var Bm="",hM=/^https?$/i,XD=["POST","PUT"];function Yw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tC(n),wp(n)}function tC(n){n.F||(n.F=!0,Ur(n,"complete"),Ur(n,"error"))}function nC(n){if(n.h&&typeof bw<"u"&&(!n.C[1]||4!=Oa(n)||2!=n.da()))if(n.v&&4==Oa(n))iv(n.La,0,n);else if(Ur(n,"readystatechange"),4==Oa(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(gv)[1]||null;!i&&$t.self&&$t.self.location&&(i=$t.self.location.protocol.slice(0,-1)),r=!hM.test(i?i.toLowerCase():"")}t=r}if(t)Ur(n,"complete"),Ur(n,"success");else{n.m=6;try{var s=2<Oa(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",tC(n)}}finally{wp(n)}}}function wp(n,e){if(n.g){$m(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ur(n,"ready");try{t.onreadystatechange=r}catch{}}}function $m(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function Oa(n){return n.g?n.g.readyState:0}function Jw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Bm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Xw(n){let e="";return Wy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Iv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Xw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function Tp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function eT(n){this.Ga=0,this.j=[],this.l=new vp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tp("baseRetryDelayMs",5e3,n),this.hb=Tp("retryDelaySeedMs",1e4,n),this.eb=Tp("forwardChannelMaxRetries",2,n),this.xa=Tp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new yv(n&&n.concurrentRequestLimit),this.Ja=new cM,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ev(n){if(iC(n),3==n.H){var e=n.W++,t=Bl(n.I);if(tr(t,"SID",n.K),tr(t,"RID",e),tr(t,"TYPE","terminate"),Gm(n,t),(e=new Om(n,n.l,e)).L=2,e.v=_v(Bl(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon)try{t=$t.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=fC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ip(e)}dC(n)}function wv(n){n.g&&(nT(n),n.g.cancel(),n.g=null)}function iC(n){wv(n),n.u&&($t.clearTimeout(n.u),n.u=null),Av(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function Tv(n){if(!ZD(n.i)&&!n.m){n.m=!0;var e=n.Na;Sm||Ow(),Th||(Sm(),Th=!0),kw.add(e,n),n.C=0}}function sC(n,e){var t;t=e?e.m:n.W++;const r=Bl(n.I);tr(r,"SID",n.K),tr(r,"RID",t),tr(r,"AID",n.V),Gm(n,r),n.o&&n.s&&Iv(r,n.o,n.s),t=new Om(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=oC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Do(n.i,t),pv(t,r,e)}function Gm(n,e){n.na&&Wy(n.na,function(t,r){tr(e,r,t)}),n.h&&Ul({},function(t,r){tr(e,r,t)})}function oC(n,e,t){t=Math.min(n.j.length,t);var r=n.h?es(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].g,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let _=i[f].g;const I=i[f].map;if(_-=s,0>_)s=Math.max(0,i[f].g-100),d=!1;else try{lM(I,u,"req"+_+"_")}catch{r&&r(I)}}if(d){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function aC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Sm||Ow(),Th||(Sm(),Th=!0),kw.add(e,n),n.A=0}}function tT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=xm(es(n.Ma,n),lC(n,n.A)),n.A++,0))}function nT(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function uC(n){n.g=new Om(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Bl(n.wa);tr(e,"RID","rpc"),tr(e,"SID",n.K),tr(e,"AID",n.V),tr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&tr(e,"TO",n.qa),tr(e,"TYPE","xmlhttp"),Gm(n,e),n.o&&n.s&&Iv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=_v(Bl(e)),t.s=null,t.S=!0,Bw(t,n)}function Av(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function cC(n,e){var t=null;if(n.g==e){Av(n),nT(n),n.g=null;var r=2}else{if(!ea(n.i,e))return;t=e.F,ta(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ur(r=av(),new VD(r,t)),Tv(n)}else aC(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function fM(n,e){return!(QD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=xm(es(n.Na,n,e),lC(n,n.C)),n.C++,0)))}(n,e)||2==r&&tT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Sh(n,5);break;case 4:Sh(n,10);break;case 3:Sh(n,6);break;default:Sh(n,2)}}function lC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Sh(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=es(n.pb,n);t||(t=new fc("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||qw(t,"https"),_v(t)),function dM(n,e){const t=new vp;if($t.Image){const r=new Image;r.onload=Tm(vv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Tm(vv,t,r,"TestLoadImage: error",!1,e),r.onabort=Tm(vv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tm(vv,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else vs(2);n.H=0,n.h&&n.h.za(e),dC(n),iC(n)}function dC(n){if(n.H=0,n.ma=[],n.h){const e=Kw(n.i);(0!=e.length||0!=n.j.length)&&(Am(n.ma,e),Am(n.ma,n.j),n.i.i.length=0,AD(n.j),n.j.length=0),n.h.ya()}}function hC(n,e,t){var r=t instanceof fc?Bl(t):new fc(t);if(""!=r.g)e&&(r.g=e+"."+r.g),mv(r,r.m);else{var i=$t.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new fc(null);r&&qw(s,r),e&&(s.g=e),i&&mv(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&tr(r,t,e),tr(r,"VER",n.ra),Gm(n,r),r}function fC(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ha&&!n.va?new Ch({ob:!0}):n.va)).Oa(n.J),e}function rT(){}function jm(){if(dc&&!(10<=Number(bD)))throw Error("Environmental error: no available transport.")}function no(n,e){xi.call(this),this.g=new eT(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!gh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rh(this)}function iT(n){dv.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sT(){hv.call(this),this.status=1}function Rh(n){this.g=n}function na(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function bv(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],u=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;u=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(u<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((s=(e=t+((u=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=s+((u=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Fn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(at=vr.prototype).Oa=function(n){this.M=n},at.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fv.g(),this.C=function lv(n){return n.h||(n.h=n.i())}(this.u?this.u:fv),this.g.onreadystatechange=es(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void Yw(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=$t.FormData&&n instanceof $t.FormData,!(0<=Cw(XD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$m(this),0<this.B&&((this.L=function eC(n){return dc&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=es(this.ua,this)):this.A=iv(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){Yw(this,s)}},at.ua=function(){typeof bw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ur(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ur(this,"complete"),Ur(this,"abort"),wp(this))},at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wp(this,!0)),vr.$.N.call(this)},at.La=function(){this.s||(this.G||this.v||this.l?nC(this):this.kb())},at.kb=function(){nC(this)},at.isActive=function(){return!!this.g},at.da=function(){try{return 2<Oa(this)?this.g.status:-1}catch{return-1}},at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),JD(e)}},at.Ia=function(){return this.m},at.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=eT.prototype).ra=8,at.H=1,at.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Om(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Ky(s),Zx(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=oC(this,i,e),tr(t=Bl(this.I),"RID",n),tr(t,"CVER",22),this.F&&tr(t,"X-HTTP-Session-Id",this.F),Gm(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(Xw(s)))+"&"+e:this.o&&Iv(t,this.o,s)),Do(this.i,i),this.bb&&tr(t,"TYPE","init"),this.P?(tr(t,"$req",e),tr(t,"SID","null"),i.aa=!0,pv(i,t,null)):pv(i,t,e),this.H=2}}else 3==this.H&&(n?sC(this,n):0==this.j.length||ZD(this.i)||sC(this))},at.Ma=function(){if(this.u=null,uC(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=xm(es(this.jb,this),n)}},at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vs(10),wv(this),uC(this))},at.ib=function(){null!=this.v&&(this.v=null,wv(this),tT(this),vs(19))},at.pb=function(n){n?(this.l.info("Successfully pinged google.com"),vs(2)):(this.l.info("Failed to ping google.com"),vs(1))},at.isActive=function(){return!!this.h&&this.h.isActive(this)},(at=rT.prototype).Ba=function(){},at.Aa=function(){},at.za=function(){},at.ya=function(){},at.isActive=function(){return!0},at.Va=function(){},jm.prototype.g=function(n,e){return new no(n,e)},Pi(no,xi),no.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;vs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=hC(n,null,n.Y),Tv(n)},no.prototype.close=function(){Ev(this.g)},no.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Mw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Tv(e)},no.prototype.N=function(){this.g.h=null,delete this.j,Ev(this.g),delete this.g,no.$.N.call(this)},Pi(iT,dv),Pi(sT,hv),Pi(Rh,rT),Rh.prototype.Ba=function(){Ur(this.g,"a")},Rh.prototype.Aa=function(n){Ur(this.g,new iT(n))},Rh.prototype.za=function(n){Ur(this.g,new sT)},Rh.prototype.ya=function(){Ur(this.g,"b")},Pi(na,function pC(){this.blockSize=-1}),na.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},na.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)bv(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){bv(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){bv(this,r),i=0;break}}this.h=i,this.i+=e},na.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var gC={};function pc(n){return-128<=n&&128>n?function ys(n,e){var t=gC;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Fn([0|e],0>e?-1:0)}):new Fn([0|n],0>n?-1:0)}function Au(n){if(isNaN(n)||!isFinite(n))return zm;if(0>n)return Is(Au(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=jl;return new Fn(e,0)}var jl=4294967296,zm=pc(0),Hm=pc(1),pM=pc(16777216);function bu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Co(n){return-1==n.h}function Is(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Fn(t,~n.h).add(Hm)}function gc(n,e){return n.add(Is(e))}function Dv(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function qm(n,e){this.g=n,this.h=e}function Cv(n,e){if(bu(e))throw Error("division by zero");if(bu(n))return new qm(zm,zm);if(Co(n))return e=Cv(Is(n),e),new qm(Is(e.g),Is(e.h));if(Co(e))return e=Cv(n,Is(e)),new qm(Is(e.g),e.h);if(30<n.g.length){if(Co(n)||Co(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Hm,r=e;0>=r.X(n);)t=Ph(t),r=Ph(r);var i=Ap(t,1),s=Ap(r,1);for(r=Ap(r,2),t=Ap(t,2);!bu(r);){var u=s.add(r);0>=u.X(n)&&(i=i.add(t),s=u),r=Ap(r,1),t=Ap(t,1)}return e=gc(n,i.R(e)),new qm(i,e)}for(i=zm;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(s=Au(t)).R(e);Co(u)||0<u.X(n);)u=(s=Au(t-=r)).R(e);bu(s)&&(s=Hm),i=i.add(s),n=gc(n,u)}return new qm(i,n)}function Ph(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Fn(t,n.h)}function Ap(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Fn(i,n.h)}(at=Fn.prototype).ea=function(){if(Co(this))return-Is(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:jl+r)*e,e*=jl}return n},at.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(bu(this))return"0";if(Co(this))return"-"+Is(this).toString(n);for(var e=Au(Math.pow(n,6)),t=this,r="";;){var i=Cv(t,e).g,s=((0<(t=gc(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(bu(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},at.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},at.X=function(n){return Co(n=gc(this,n))?-1:bu(n)?0:1},at.abs=function(){return Co(this)?Is(this):this},at.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),u=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(s&=65535)}return new Fn(t,-2147483648&t[t.length-1]?-1:0)},at.R=function(n){if(bu(this)||bu(n))return zm;if(Co(this))return Co(n)?Is(this).R(Is(n)):Is(Is(this).R(n));if(Co(n))return Is(this.R(Is(n)));if(0>this.X(pM)&&0>n.X(pM))return Au(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,u=65535&this.D(r),d=n.D(i)>>>16,f=65535&n.D(i);t[2*r+2*i]+=u*f,Dv(t,2*r+2*i),t[2*r+2*i+1]+=s*f,Dv(t,2*r+2*i+1),t[2*r+2*i+1]+=u*d,Dv(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,Dv(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Fn(t,0)},at.gb=function(n){return Cv(this,n).h},at.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Fn(t,this.h&n.h)},at.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Fn(t,this.h|n.h)},at.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Fn(t,this.h^n.h)},jm.prototype.createWebChannel=jm.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,Mm.NO_ERROR=0,Mm.TIMEOUT=8,Mm.HTTP_ERROR=6,uv.COMPLETE="complete",Uw.EventType=Nm,Nm.OPEN="a",Nm.CLOSE="b",Nm.ERROR="c",Nm.MESSAGE="d",xi.prototype.listen=xi.prototype.O,vr.prototype.listenOnce=vr.prototype.P,vr.prototype.getLastError=vr.prototype.Sa,vr.prototype.getLastErrorCode=vr.prototype.Ia,vr.prototype.getStatus=vr.prototype.da,vr.prototype.getResponseJson=vr.prototype.Wa,vr.prototype.getResponseText=vr.prototype.ja,vr.prototype.send=vr.prototype.ha,vr.prototype.setWithCredentials=vr.prototype.Oa,na.prototype.digest=na.prototype.l,na.prototype.reset=na.prototype.reset,na.prototype.update=na.prototype.j,Fn.prototype.add=Fn.prototype.add,Fn.prototype.multiply=Fn.prototype.R,Fn.prototype.modulo=Fn.prototype.gb,Fn.prototype.compare=Fn.prototype.X,Fn.prototype.toNumber=Fn.prototype.ea,Fn.prototype.toString=Fn.prototype.toString,Fn.prototype.getBits=Fn.prototype.D,Fn.fromNumber=Au,Fn.fromString=function mC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Is(mC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Au(Math.pow(e,8)),r=zm,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+s),e);8>s?(s=Au(Math.pow(e,s)),r=r.R(s).add(Au(u))):r=(r=r.R(t)).add(Au(u))}return r};var Wm=Xo.createWebChannelTransport=function(){return new jm},Km=Xo.getStatEventTarget=function(){return av()},hi=Xo.ErrorCode=Mm,gM=Xo.EventType=uv,oT=Xo.Event=Ah,Zm=Xo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_C=Xo.FetchXmlHttpFactory=Ch,mc=Xo.WebChannel=Uw,aT=Xo.XhrIo=vr,uT=Xo.Md5=na,So=Xo.Integer=Fn;const yC="@firebase/firestore";class Mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mi.UNAUTHENTICATED=new Mi(null),Mi.GOOGLE_CREDENTIALS=new Mi("google-credentials-uid"),Mi.FIRST_PARTY=new Mi("first-party-uid"),Mi.MOCK_USER=new Mi("mock-user");let bp="10.1.0";const ra=new ms.Yd("@firebase/firestore");function cT(){return ra.logLevel}function je(n,...e){if(ra.logLevel<=ms.in.DEBUG){const t=e.map(Sv);ra.debug(`Firestore (${bp}): ${n}`,...t)}}function fr(n,...e){if(ra.logLevel<=ms.in.ERROR){const t=e.map(Sv);ra.error(`Firestore (${bp}): ${n}`,...t)}}function ia(n,...e){if(ra.logLevel<=ms.in.WARN){const t=e.map(Sv);ra.warn(`Firestore (${bp}): ${n}`,...t)}}function Sv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${bp}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function Dt(n,e){n||vt()}function tt(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends it.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mi.UNAUTHENTICATED))}shutdown(){}}class IC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mM{constructor(e){this.t=e,this.currentUser=Mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=u;e.enqueueRetryable((0,B.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},f=_=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new lT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Mi(e)}}class EC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Mi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _M{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new EC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.R;return this.R=s.token,je("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.R=t.token,new wC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function DU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yM{static V(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=DU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function _c(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Ir(0,0))}static max(){return new Ct(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class yc{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===yc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends yc{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const vM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends yc{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return vM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ke(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new ke(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new ke(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new ke(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class st{constructor(e){this.path=e}static fromPath(e){return new st(In.fromString(e))}static fromName(e){return new st(In.fromString(e).popFirst(5))}static empty(){return new st(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new In(e.slice()))}}function AC(n){return new ro(n.readTime,n.key,-1)}class ro{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ro(Ct.min(),st.empty(),-1)}static max(){return new ro(Ct.max(),st.empty(),-1)}}function pT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=st.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const gT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Du(n){return mT.apply(this,arguments)}function mT(){return mT=(0,B.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==gT)throw n;je("LocalStore","Unexpectedly lost primary lease")}),mT.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;t(e[_]).next(I=>{u[_]=I,++d,d===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new ie((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Cu(n){return"IndexedDbTransactionError"===n.name}let Ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}return n.ae=-1,n})();function e_(n){return null==n}function t_(n){return 0===n&&1/n==-1/0}function DT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hn{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kv(this.root,e,this.comparator,!1)}getReverseIterator(){return new kv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kv(this.root,e,this.comparator,!0)}}class kv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ns.RED,this.left=i??ns.EMPTY,this.right=s??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ns(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ns.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ns(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NC(this.data.getIterator())}getIteratorFrom(e){return new NC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class NC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Po{constructor(e){this.fields=e,e.sort(Br.comparator)}static empty(){return new Po([])}unionWith(e){let t=new ur(Br.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _c(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ST extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ST("Invalid base64 string: "+s):s}}(e);return new pi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let u=0;u<i.length;++u)s+=String.fromCharCode(i[u]);return s}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const RU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ql(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=RU.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ic(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function Ov(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fv(n){const e=n.mapValue.fields.__previous_value__;return Ov(e)?Fv(e):e}function n_(n){const e=ql(n.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}class NM{constructor(e,t,r,i,s,u,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class Mh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ov(n)?4:OC(n)?9007199254740991:10:vt()}function Ru(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return n_(n).isEqual(n_(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const u=ql(i.timestampValue),d=ql(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ic(n.bytesValue).isEqual(Ic(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Rr(i.geoPointValue.latitude)===Rr(s.geoPointValue.latitude)&&Rr(i.geoPointValue.longitude)===Rr(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rr(i.integerValue)===Rr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const u=Rr(i.doubleValue),d=Rr(s.doubleValue);return u===d?t_(u)===t_(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return _c(n.arrayValue.values||[],e.arrayValue.values||[],Ru);case 10:return function(i,s){const u=i.mapValue.fields||{},d=s.mapValue.fields||{};if(DT(u)!==DT(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===d[f]||!Ru(u[f],d[f])))return!1;return!0}(n,e);default:return vt()}var s}function Ec(n,e){return void 0!==(n.values||[]).find(t=>Ru(t,e))}function wc(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=Rr(s.integerValue||s.doubleValue),f=Rr(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return RT(n.timestampValue,e.timestampValue);case 4:return RT(n_(n),n_(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Ic(s),f=Ic(u);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),f=u.split("/");for(let _=0;_<d.length&&_<f.length;_++){const I=zt(d[_],f[_]);if(0!==I)return I}return zt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=zt(Rr(s.latitude),Rr(u.latitude));return 0!==d?d:zt(Rr(s.longitude),Rr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],f=u.values||[];for(let _=0;_<d.length&&_<f.length;++_){const I=wc(d[_],f[_]);if(I)return I}return zt(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Wl.mapValue&&u===Wl.mapValue)return 0;if(s===Wl.mapValue)return 1;if(u===Wl.mapValue)return-1;const d=s.fields||{},f=Object.keys(d),_=u.fields||{},I=Object.keys(_);f.sort(),I.sort();for(let b=0;b<f.length&&b<I.length;++b){const x=zt(f[b],I[b]);if(0!==x)return x;const k=wc(d[f[b]],_[I[b]]);if(0!==k)return k}return zt(f.length,I.length)}(n.mapValue,e.mapValue);default:throw vt()}}function RT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=ql(n),r=ql(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function Nh(n){return Vv(n)}function Vv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ql(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ic(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Vv(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const u of r)s?s=!1:i+=",",i+=`${u}:${Vv(t.fields[u])}`;return i+"}"}(n.mapValue):vt()}function kh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function PT(n){return!!n&&"integerValue"in n}function Uv(n){return!!n&&"arrayValue"in n}function kM(n){return!!n&&"nullValue"in n}function kC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bv(n){return!!n&&"mapValue"in n}function i_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=i_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=i_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=i_(t)}setAll(e){let t=Br.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=i_(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Bv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ru(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nr(i_(this.value))}}function LC(n){const e=[];return vc(n.fields,(t,r)=>{const i=new Br([t]);if(Bv(r)){const s=LC(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Po(e)}class qn{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new qn(e,0,Ct.min(),Ct.min(),Ct.min(),nr.empty(),0)}static newFoundDocument(e,t,r,i){return new qn(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new qn(e,2,t,Ct.min(),Ct.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new qn(e,3,t,Ct.min(),Ct.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sa{constructor(e,t){this.position=e,this.inclusive=t}}function VC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?st.comparator(st.fromName(u.referenceValue),t.key):wc(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function UC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ru(n.position[t],e.position[t]))return!1;return!0}class Cp{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class xT{}class fn extends xT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new FM(e,t,r):"array-contains"===t?new VT(e,r):"in"===t?new UT(e,r):"not-in"===t?new VM(e,r):"array-contains-any"===t?new GC(e,r):new fn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new LM(e,r):new $C(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wc(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Vn extends xT{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Vn(e,t)}matches(e){return Zl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(t=>t.isInequality());return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Zl(n){return"and"===n.op}function NT(n){return function kT(n){for(const e of n.filters)if(e instanceof Vn)return!1;return!0}(n)&&Zl(n)}function OT(n){if(n instanceof fn)return n.field.canonicalString()+n.op.toString()+Nh(n.value);if(NT(n))return n.filters.map(e=>OT(e)).join(",");{const e=n.filters.map(t=>OT(t)).join(",");return`${n.op}(${e})`}}function BC(n,e){return n instanceof fn?(r=n,(i=e)instanceof fn&&r.op===i.op&&r.field.isEqual(i.field)&&Ru(r.value,i.value)):n instanceof Vn?function(r,i){return i instanceof Vn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,u,d)=>s&&BC(u,i.filters[d]),!0)}(n,e):void vt();var r,i}function o_(n){return n instanceof fn?`${(t=n).field.canonicalString()} ${t.op} ${Nh(t.value)}`:n instanceof Vn?function(t){return t.op.toString()+" {"+t.getFilters().map(o_).join(" ,")+"}"}(n):"Filter";var t}class FM extends fn{constructor(e,t,r){super(e,t,r),this.key=st.fromName(r.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.matchesComparison(t)}}class LM extends fn{constructor(e,t){super(e,"in",t),this.keys=LT(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $C extends fn{constructor(e,t){super(e,"not-in",t),this.keys=LT(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LT(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>st.fromName(r.referenceValue))}class VT extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uv(t)&&Ec(t.arrayValue,this.value)}}class UT extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ec(this.value.arrayValue,t)}}class VM extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ec(this.value.arrayValue,t)}}class GC extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}}class jC{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.he=null}}function BT(n,e=null,t=[],r=[],i=null,s=null,u=null){return new jC(n,e,t,r,i,s,u)}function Oh(n){const e=tt(n);if(null===e.he){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>OT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),e_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nh(r)).join(",")),e.he=t}return e.he}function Fh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UC(n.startAt,e.startAt)&&UC(n.endAt,e.endAt)}function Sp(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Tc{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=f,this.Pe=null,this.Ie=null}}function Rp(n){return new Tc(n)}function HC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Hv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Pp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function qv(n){return null!==n.collectionGroup}function Lh(n){const e=tt(n);if(null===e.Pe){e.Pe=[];const t=Pp(e),r=Hv(e);if(null!==t&&null===r)t.isKeyField()||e.Pe.push(new Cp(t)),e.Pe.push(new Cp(Br.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Cp(Br.keyField(),s))}}}return e.Pe}function Es(n){const e=tt(n);if(!e.Ie)if("F"===e.limitType)e.Ie=BT(e.path,e.collectionGroup,Lh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Lh(e))t.push(new Cp(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new sa(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sa(e.startAt.position,e.startAt.inclusive):null;e.Ie=BT(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.Ie}function Wv(n,e){e.getFirstInequalityField(),Pp(n);const t=n.filters.concat([e]);return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kv(n,e,t){return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xp(n,e){return Fh(Es(n),Es(e))&&n.limitType===e.limitType}function $T(n){return`${Oh(Es(n))}|lt:${n.limitType}`}function GT(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>o_(i)).join(", ")}]`),e_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(u=i).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Nh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Nh(i)).join(",")),`Target(${r})`}(Es(n))}; limitType=${n.limitType})`}function Mp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):st.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Lh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(u,d,f){const _=VC(u,d,f);return u.inclusive?_<=0:_<0}(r.startAt,Lh(r),i)||r.endAt&&!function(u,d,f){const _=VC(u,d,f);return u.inclusive?_>=0:_>0}(r.endAt,Lh(r),i)));var r,i}function ws(n){return(e,t)=>{let r=!1;for(const i of Lh(n)){const s=Np(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Np(n,e,t){const r=n.field.isKeyField()?st.comparator(e.key,t.key):function(s,u,d){const f=u.data.field(s),_=d.data.field(s);return null!==f&&null!==_?wc(f,_):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}class Ac{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}const UM=new Hn(st.comparator);function xo(){return UM}const BM=new Hn(st.comparator);function kp(...n){let e=BM;for(const t of n)e=e.insert(t.key,t);return e}function Zv(n){let e=BM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function io(){return Vh()}function WC(){return Vh()}function Vh(){return new Ac(n=>n.toString(),(n,e)=>n.isEqual(e))}const $M=new Hn(st.comparator),KC=new ur(st.comparator);function en(...n){let e=KC;for(const t of n)e=e.add(t);return e}const GM=new ur(zt);function Qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t_(e)?"-0":e}}function zT(n){return{integerValue:""+n}}function ZC(n,e){return function DC(n){return"number"==typeof n&&Number.isInteger(n)&&!t_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?zT(e):Qv(n,e)}class Uh{constructor(){this._=void 0}}function HT(n,e,t){return n instanceof Op?function(i,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ov(s)&&(s=Fv(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Ql?Bh(n,e):n instanceof $h?WT(n,e):function(i,s){const u=qT(i,s),d=jM(u)+jM(i.Te);return PT(u)&&PT(i.Te)?zT(d):Qv(i.serializer,d)}(n,e)}function PU(n,e,t){return n instanceof Ql?Bh(n,e):n instanceof $h?WT(n,e):t}function qT(n,e){return n instanceof Yl?PT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Op extends Uh{}class Ql extends Uh{constructor(e){super(),this.elements=e}}function Bh(n,e){const t=QC(e);for(const r of n.elements)t.some(i=>Ru(i,r))||t.push(r);return{arrayValue:{values:t}}}class $h extends Uh{constructor(e){super(),this.elements=e}}function WT(n,e){let t=QC(e);for(const r of n.elements)t=t.filter(i=>!Ru(i,r));return{arrayValue:{values:t}}}class Yl extends Uh{constructor(e,t){super(),this.serializer=e,this.Te=t}}function jM(n){return Rr(n.integerValue||n.doubleValue)}function QC(n){return Uv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Yv{constructor(e,t){this.field=e,this.transform=t}}class HM{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class c_{}function YC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jh(n.key,pr.none()):new Gh(n.key,n.data,pr.none());{const t=n.data,r=nr.empty();let i=new ur(Br.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new bc(n.key,r,new Po(i.toArray()),pr.none())}}function JC(n,e,t){n instanceof Gh?function(i,s,u){const d=i.value.clone(),f=ZT(i.fieldTransforms,s,u.transformResults);d.setAll(f),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof bc?function(i,s,u){if(!u_(i.precondition,s))return void s.convertToUnknownDocument(u.version);const d=ZT(i.fieldTransforms,s,u.transformResults),f=s.data;f.setAll(KT(i)),f.setAll(d),s.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fp(n,e,t,r){return n instanceof Gh?function(s,u,d,f){if(!u_(s.precondition,u))return d;const _=s.value.clone(),I=QT(s.fieldTransforms,f,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof bc?function(s,u,d,f){if(!u_(s.precondition,u))return d;const _=QT(s.fieldTransforms,f,u),I=u.data;return I.setAll(KT(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(d=t,u_(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function qM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=qT(r.transform,i||null);null!=s&&(null===t&&(t=nr.empty()),t.set(r.field,s))}return t||null}function XC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&_c(r,i,(s,u)=>function zM(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ql&&i instanceof Ql||r instanceof $h&&i instanceof $h?_c(r.elements,i.elements,Ru):r instanceof Yl&&i instanceof Yl?Ru(r.Te,i.Te):r instanceof Op&&i instanceof Op);var r,i}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Gh extends c_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bc extends c_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ZT(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,PU(u,d,t[i]))}return r}function QT(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,HT(s,u,e))}return r}class jh extends c_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YT extends c_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&JC(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=WC();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const f=YC(u,d);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&_c(this.mutations,e.mutations,(t,r)=>XC(t,r))&&_c(this.baseMutations,e.baseMutations,(t,r)=>XC(t,r))}}class eS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=$M;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new eS(e,t,r,i)}}class Jv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class MU{constructor(e,t){this.count=e,this.unchangedNames=t}}var gi,Tn;function KM(n){if(void 0===n)return fr("GRPC error has no .code"),de.UNKNOWN;switch(n){case gi.OK:return de.OK;case gi.CANCELLED:return de.CANCELLED;case gi.UNKNOWN:return de.UNKNOWN;case gi.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case gi.INTERNAL:return de.INTERNAL;case gi.UNAVAILABLE:return de.UNAVAILABLE;case gi.UNAUTHENTICATED:return de.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case gi.NOT_FOUND:return de.NOT_FOUND;case gi.ALREADY_EXISTS:return de.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return de.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case gi.ABORTED:return de.ABORTED;case gi.OUT_OF_RANGE:return de.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return de.UNIMPLEMENTED;case gi.DATA_LOSS:return de.DATA_LOSS;default:return vt()}}(Tn=gi||(gi={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class tS{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return XT}static getOrCreateInstance(){return null===XT&&(XT=new tS),XT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let XT=null;const nS=new So([4294967295,4294967295],0);function Xv(n){const e=function ZM(){return new TextEncoder}().encode(n),t=new uT;return t.update(e),new Uint8Array(t.digest())}function e0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new So([t,r],0),new So([i,s],0)]}class t0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Jl(`Invalid padding: ${t}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Jl(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Jl(`Invalid padding when bitmap length is 0: ${t}`);this.de=8*e.length-t,this.Ae=So.fromNumber(this.de)}Re(e,t,r){let i=e.add(t.multiply(So.fromNumber(r)));return 1===i.compare(nS)&&(i=new So([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ae).toNumber()}Ve(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.de)return!1;const t=Xv(e),[r,i]=e0(t);for(let s=0;s<this.hashCount;s++){const u=this.Re(r,i,s);if(!this.Ve(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new t0(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.de)return;const t=Xv(e),[r,i]=e0(t);for(let s=0;s<this.hashCount;s++){const u=this.Re(r,i,s);this.me(u)}}me(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class l_{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,eI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new l_(Ct.min(),i,new Hn(zt),xo(),en())}}class eI{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eI(r,t,en(),en(),en())}}class n0{constructor(e,t,r,i){this.fe=e,this.removedTargetIds=t,this.key=r,this.ge=i}}class rS{constructor(e,t){this.targetId=e,this.pe=t}}class r0{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class iS{constructor(){this.ye=0,this.we=YM(),this.Se=pi.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return 0!==this.ye}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=en(),t=en(),r=en();return this.we.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new eI(this.Se,this.be,e,t,r)}xe(){this.De=!1,this.we=YM()}Oe(e,t){this.De=!0,this.we=this.we.insert(e,t)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class QM{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=xo(),this.$e=sS(),this.Ue=new Hn(zt)}We(e){for(const t of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(t,e.ge):this.ze(t,e.key,e.ge);for(const t of e.removedTargetIds)this.ze(t,e.key,e.ge)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(t);break;case 3:this.Je(t)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Fe(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){var t,r;const i=e.targetId,s=e.pe.count,u=this.Xe(i);if(u){const d=u.target;if(Sp(d))if(0===s){const f=new st(d.path);this.ze(i,f,qn.newNoDocument(f,Ct.min()))}else Dt(1===s);else{const f=this.et(i);if(f!==s){const _=this.tt(e,f);0!==_.status&&(this.Ye(i),this.Ue=this.Ue.insert(i,2===_.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=tS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,x,k,$){var Q,Z,Ae,Pe,be,Ue;const gt={localCacheCount:k,existenceFilterCount:$.count},mt=$.unchangedNames;return mt&&(gt.bloomFilter={applied:0===b,hashCount:null!==(Q=mt?.hashCount)&&void 0!==Q?Q:0,bitmapLength:null!==(Pe=null===(Ae=null===(Z=mt?.bits)||void 0===Z?void 0:Z.bitmap)||void 0===Ae?void 0:Ae.length)&&void 0!==Pe?Pe:0,padding:null!==(Ue=null===(be=mt?.bits)||void 0===be?void 0:be.padding)&&void 0!==Ue?Ue:0},x&&(gt.bloomFilter.mightContain=x)),gt}(_.status,null!==(r=_.nt)&&void 0!==r?r:null,f,e.pe))}}}}tt(e,t){const{unchangedNames:r,count:i}=e.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let f,_;try{f=Ic(s).toUint8Array()}catch(b){if(b instanceof ST)return ia("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw b}try{_=new t0(f,u,d)}catch(b){return ia(b instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",b),{status:1}}const I=b=>{const x=this.qe.rt();return _.mightContain(`projects/${x.projectId}/databases/${x.database}/documents/${b}`)};return 0===_.de?{status:1}:{status:i===t-this.it(e.targetId,I)?0:2,nt:I}}it(e,t){const r=this.qe.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{t(s.path.canonicalString())||(this.ze(e,s,null),i++)}),i}st(e){const t=new Map;this.Qe.forEach((s,u)=>{const d=this.Xe(u);if(d){if(s.current&&Sp(d.target)){const f=new st(d.target.path);null!==this.Ke.get(f)||this.ot(u,f)||this.ze(u,f,qn.newNoDocument(f,e))}s.Ce&&(t.set(u,s.Me()),s.xe())}});let r=en();this.$e.forEach((s,u)=>{let d=!0;u.forEachWhile(f=>{const _=this.Xe(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Ke.forEach((s,u)=>u.setReadTime(e));const i=new l_(e,t,this.Ue,this.Ke,r);return this.Ke=xo(),this.$e=sS(),this.Ue=new Hn(zt),i}Ge(e,t){if(!this.Je(e))return;const r=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,r),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ot(e,t)?i.Oe(t,1):i.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),r&&(this.Ke=this.Ke.insert(t,r))}removeTarget(e){this.Qe.delete(e)}et(e){const t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let t=this.Qe.get(e);return t||(t=new iS,this.Qe.set(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new ur(zt),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new iS),this.qe.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ot(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}function sS(){return new Hn(st.comparator)}function YM(){return new Hn(st.comparator)}const JM={asc:"ASCENDING",desc:"DESCENDING"},oS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aS={and:"AND",or:"OR"};class NU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mo(n,e){return n.useProto3Json||e_(e)?e:{value:e}}function zh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kU(n,e){return zh(n,e.toTimestamp())}function _n(n){return Dt(!!n),Ct.fromTimestamp(function(t){const r=ql(t);return new Ir(r.seconds,r.nanos)}(n))}function s0(n,e){return(r=n,new In(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function tI(n){const e=In.fromString(n);return Dt(d0(e)),e}function d_(n,e){return s0(n.databaseId,e.path)}function Pu(n,e){const t=tI(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(cS(t))}function h_(n,e){return s0(n.databaseId,e)}function Lp(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cS(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function a0(n,e,t){return{name:d_(n,e),fields:t.value.mapValue.fields}}function rI(n,e){return{documents:[h_(n,e.path)]}}function xu(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=h_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=h_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return fS(Vn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:Xl((b=_).field),direction:eN(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=Mo(n,e.limit);return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),t;var f}function c0(n){let e=function o0(n){const e=tI(n);return 4===e.length?In.emptyPath():cS(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(b){const x=iI(b);return x instanceof Vn&&NT(x)?x.getFilters():[x]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(x=>{return new Cp(Vp(($=x).field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction));var $}));let d=null;t.limit&&(d=function(b){let x;return x="object"==typeof b?b.value:b,e_(x)?null:x}(t.limit));let f=null;var b;t.startAt&&(f=new sa((b=t.startAt).values||[],!!b.before));let _=null;return t.endAt&&(_=function(b){return new sa(b.values||[],!b.before)}(t.endAt)),function zC(n,e,t,r,i,s,u,d){return new Tc(n,e,t,r,i,s,u,d)}(e,i,u,s,d,"F",f,_)}function iI(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Vp(t.unaryFilter.field);return fn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vp(t.unaryFilter.field);return fn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vp(t.unaryFilter.field);return fn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Vp(t.unaryFilter.field);return fn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):void 0!==n.fieldFilter?fn.create(Vp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Vn.create(t.compositeFilter.filters.map(r=>iI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(t.compositeFilter.op))}(n):vt();var t}function eN(n){return JM[n]}function OU(n){return oS[n]}function hS(n){return aS[n]}function Xl(n){return{fieldPath:n.canonicalString()}}function Vp(n){return Br.fromServerFormat(n.fieldPath)}function fS(n){return n instanceof fn?function(t){if("=="===t.op){if(kC(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NAN"}};if(kM(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(kC(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NAN"}};if(kM(t.value))return{unaryFilter:{field:Xl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(t.field),op:OU(t.op),value:t.value}}}(n):n instanceof Vn?function(t){const r=t.getFilters().map(i=>fS(i));return 1===r.length?r[0]:{compositeFilter:{op:hS(t.op),filters:r}}}(n):vt()}function tN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ed{constructor(e,t,r,i,s=Ct.min(),u=Ct.min(),d=pi.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new ed(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h0{constructor(e){this.ct=e}}function sI(n){const e=c0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Kv(e,e.limit,"L"):e}class Hh{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Rr(e.integerValue));else if("doubleValue"in e){const r=Rr(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),t_(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ic(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?OC(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):vt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),st.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Hh.bt=new Hh;class vS{constructor(){this.sn=new y_}addToCollectionParentIndex(e,t){return this.sn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ro.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ur(In.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ur(In.comparator)).toArray()}}new Uint8Array(0);class rs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class Qh{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new Qh(0)}static On(){return new Qh(-1)}}class fN{constructor(){this.changes=new Ac(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DS{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Fp(r.mutation,i,Po.empty(),Ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=io();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=kp();return s.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=io();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=xo();const u=Vh(),d=Vh();return t.forEach((f,_)=>{const I=r.get(_.key);i.has(_.key)&&(void 0===I||I.mutation instanceof bc)?s=s.insert(_.key,_):void 0!==I?(u.set(_.key,I.mutation.getFieldMask()),Fp(I.mutation,_,I.mutation.getFieldMask(),Ir.now())):u.set(_.key,Po.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((_,I)=>u.set(_,I)),t.forEach((_,I)=>{var b;return d.set(_,new bS(I,null!==(b=u.get(_))&&void 0!==b?b:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Vh();let i=new Hn((u,d)=>u-d),s=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const _=t.get(f);if(null===_)return;let I=r.get(f)||Po.empty();I=d.applyToLocalView(_,I),r.set(f,I);const b=(i.get(d.batchId)||en()).add(f);i=i.insert(d.batchId,b)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,I=f.value,b=WC();I.forEach(x=>{if(!s.has(x)){const k=YC(t.get(x),r.get(x));null!==k&&b.set(x,k),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ie.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return st.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ie.resolve(io());let d=-1,f=s;return u.next(_=>ie.forEach(_,(I,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),s.get(I)?ie.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,f,_,en())).next(I=>({batchId:d,changes:Zv(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new st(t)).next(r=>{let i=kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=kp();return this.indexManager.getCollectionParents(e,i).next(u=>ie.forEach(u,d=>{const f=(I=t,b=d.child(i),new Tc(b,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,b;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(_=>{_.forEach((I,b)=>{s=s.insert(I,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const _=f.getKey();null===s.get(_)&&(s=s.insert(_,qn.newInvalidDocument(_)))});let u=kp();return s.forEach((d,f)=>{const _=i.get(d);void 0!==_&&Fp(_.mutation,f,Po.empty(),Ir.now()),Mp(t,f)&&(u=u.insert(d,f))}),u})}}class C0{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,t){return ie.resolve(this.ar.get(t))}saveBundleMetadata(e,t){return this.ar.set(t.id,{id:(i=t).id,version:i.version,createTime:_n(i.createTime)}),ie.resolve();var i}getNamedQuery(e,t){return ie.resolve(this.ur.get(t))}saveNamedQuery(e,t){return this.ur.set(t.name,{name:(i=t).name,query:sI(i.bundledQuery),readTime:_n(i.readTime)}),ie.resolve();var i}}class gN{constructor(){this.overlays=new Hn(st.comparator),this.cr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=io();return ie.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.cr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.cr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=io(),s=t.length+1,u=new st(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Hn((_,I)=>_-I);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let I=s.get(_.largestBatchId);null===I&&(I=io(),s=s.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const d=io(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,I)=>d.set(_,I)),!(d.size()>=i)););return ie.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.cr.get(i.largestBatchId).delete(r.key);this.cr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Jv(t,r));let s=this.cr.get(t);void 0===s&&(s=en(),this.cr.set(t,s)),this.cr.set(t,s.add(r.key))}}class S0{constructor(){this.lr=new ur(mi.hr),this.Pr=new ur(mi.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,t){const r=new mi(e,t);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Er(new mi(e,t))}dr(e,t){e.forEach(r=>this.removeReference(r,t))}Ar(e){const t=new st(new In([])),r=new mi(t,e),i=new mi(t,e+1),s=[];return this.Pr.forEachInRange([r,i],u=>{this.Er(u),s.push(u.key)}),s}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const t=new st(new In([])),r=new mi(t,e),i=new mi(t,e+1);let s=en();return this.Pr.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new mi(e,0),r=this.lr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this.mr=t}static hr(e,t){return st.comparator(e.key,t.key)||zt(e.mr,t.mr)}static Ir(e,t){return zt(e.mr,t.mr)||st.comparator(e.key,t.key)}}class CS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.gr=1,this.pr=new ur(mi.hr)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.gr;this.gr++;const u=new JT(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.pr=this.pr.add(new mi(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.yr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.wr(t+1),s=i<0?0:i;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.gr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),i=new mi(t,Number.POSITIVE_INFINITY),s=[];return this.pr.forEachInRange([r,i],u=>{const d=this.yr(u.mr);s.push(d)}),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ur(zt);return t.forEach(i=>{const s=new mi(i,0),u=new mi(i,Number.POSITIVE_INFINITY);this.pr.forEachInRange([s,u],d=>{r=r.add(d.mr)})}),ie.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;st.isDocumentKey(s)||(s=s.child(""));const u=new mi(new st(s),0);let d=new ur(zt);return this.pr.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.mr)),!0)},u),ie.resolve(this.Sr(d))}Sr(e){const t=[];return e.forEach(r=>{const i=this.yr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();let r=this.pr;return ie.forEach(t.mutations,i=>{const s=new mi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,t){const r=new mi(t,0),i=this.pr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ie.resolve()}br(e,t){return this.wr(e)}wr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}yr(e){const t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $U{constructor(e){this.Dr=e,this.docs=new Hn(st.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Dr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():qn.newInvalidDocument(t))}getEntries(e,t){let r=xo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qn.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=xo();const u=t.path,d=new st(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:I}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||pT(AC(I),r)<=0||(i.has(I.key)||Mp(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(e,t,r,i){vt()}vr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mN(this)}getSize(e){return ie.resolve(this.size)}}class mN extends fN{constructor(e){super(),this.sr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.sr.addEntry(e,i)):this.sr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.sr.getEntry(e,t)}getAllFromCache(e,t){return this.sr.getEntries(e,t)}}class fI{constructor(e){this.persistence=e,this.Cr=new Ac(t=>Oh(t),Fh),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new S0,this.targetCount=0,this.Or=Qh.xn()}forEachTarget(e,t){return this.Cr.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fr&&(this.Fr=t),ie.resolve()}Ln(e){this.Cr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Or=new Qh(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,t){return this.Ln(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Ln(t),ie.resolve()}removeTargetData(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Cr.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Cr.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ie.waitFor(s).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Cr.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Mr.Tr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Mr.dr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Mr.Ar(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Mr.Vr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Mr.containsKey(t))}}class SS{constructor(e,t){this.Nr={},this.overlays={},this.Br=new Ro(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new fI(this),this.indexManager=new vS,this.remoteDocumentCache=new $U(r=>this.referenceDelegate.qr(r)),this.serializer=new h0(t),this.Qr=new C0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Nr[e.toKey()];return r||(r=new CS(t,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new _N(this.Br.next());return this.referenceDelegate.Kr(),r(i).next(s=>this.referenceDelegate.$r(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ur(e,t){return ie.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,t)))}}class _N extends EM{constructor(e){super(),this.currentSequenceNumber=e}}class R0{constructor(e){this.persistence=e,this.Wr=new S0,this.Gr=null}static zr(e){return new R0(e)}get jr(){if(this.Gr)return this.Gr;throw vt()}addReference(e,t,r){return this.Wr.addReference(r,t),this.jr.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Wr.removeReference(r,t),this.jr.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.jr.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Wr.Ar(t.targetId).forEach(i=>this.jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Kr(){this.Gr=new Set}$r(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.jr,r=>{const i=st.fromPath(r);return this.Hr(e,i).next(s=>{s||t.removeEntry(i,Ct.min())})}).next(()=>(this.Gr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hr(e,t).next(r=>{r?this.jr.delete(t.toString()):this.jr.add(t.toString())})}qr(e){return 0}Hr(e,t){return ie.or([()=>ie.resolve(this.Wr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ur(e,t)])}}class xS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Li=r,this.ki=i}static qi(e,t){let r=en(),i=en();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xS(e,t.fromCache,r,i)}}class IN{constructor(){this.Qi=!1}initialize(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.$i(e,t).next(s=>s||this.Ui(e,t,i,r)).next(s=>s||this.Wi(e,t))}$i(e,t){if(HC(t))return ie.resolve(null);let r=Es(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Kv(t,null,"F"),r=Es(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=en(...s);return this.Ki.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.Gi(t,d);return this.zi(t,_,u,f.readTime)?this.$i(e,Kv(t,null,"F")):this.ji(e,_,t,f)}))})))}Ui(e,t,r,i){return HC(t)||i.isEqual(Ct.min())?this.Wi(e,t):this.Ki.getDocuments(e,r).next(s=>{const u=this.Gi(t,s);return this.zi(t,u,r,i)?this.Wi(e,t):(cT()<=ms.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),GT(t)),this.ji(e,u,t,function fT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(1e9===r?new Ir(t+1,0):new Ir(t,r));return new ro(i,st.empty(),e)}(i,-1)))})}Gi(e,t){let r=new ur(ws(e));return t.forEach((i,s)=>{Mp(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Wi(e,t){return cT()<=ms.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",GT(t)),this.Ki.getDocumentsMatchingQuery(e,t,ro.min())}ji(e,t,r,i){return this.Ki.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class GU{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Hn(zt),this.Yi=new Ac(s=>Oh(s),Fh),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DS(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function wN(n,e){return N0.apply(this,arguments)}function N0(){return N0=(0,B.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.es(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let f=en();for(const _ of i){u.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}for(const _ of s){d.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}return t.localDocuments.getDocuments(r,f).next(_=>({ts:_,removedBatchIds:u,addedBatchIds:d}))})})}),N0.apply(this,arguments)}function o(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.kr.getLastRemoteSnapshotVersion(t))}function l(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m(n,e,t){return v.apply(this,arguments)}function v(){return v=(0,B.Z)(function*(n,e,t){const r=tt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Cu(u))throw u;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),v.apply(this,arguments)}function T(n,e,t){const r=tt(n);let i=Ct.min(),s=en();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,_,I){const b=tt(f),x=b.Yi.get(I);return void 0!==x?ie.resolve(b.Ji.get(x)):b.kr.getTargetData(_,I)}(r,u,Es(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(u,d.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Ct.min(),t?s:en())).next(d=>(function N(n,e,t){let r=n.Zi.get(e)||Ct.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Zi.set(e,r)}(r,function qC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,ss:s})))}class Ni{constructor(){this.activeTargetIds=function jT(){return GM}()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MS{constructor(){this.Hs=new Ni,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,t,r){this.Js[e]=t}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new Ni,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TN{Ys(e){}shutdown(){}}class zU{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let NS=null;function AN(){return null===NS?NS=268435456+Math.round(2147483648*Math.random()):NS++,"0x"+NS.toString(16)}const UH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BH{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}const so="WebChannelConnection";class $H extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.To=r+"://"+t.host,this.Eo=`projects/${i}/databases/${s}`,this.Ao="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Ro(){return!1}Vo(t,r,i,s,u){const d=AN(),f=this.mo(t,r);je("RestConnection",`Sending RPC '${t}' ${d}:`,f,i);const _={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(_,s,u),this.po(t,f,_,i).then(I=>(je("RestConnection",`Received RPC '${t}' ${d}: `,I),I),I=>{throw ia("RestConnection",`RPC '${t}' ${d} failed with error: `,I,"url: ",f,"request:",i),I})}yo(t,r,i,s,u,d){return this.Vo(t,r,i,s,u)}fo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+bp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,u)=>t[u]=s),i&&i.headers.forEach((s,u)=>t[u]=s)}mo(t,r){return`${this.To}/v1/${r}:${UH[t]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,t,r,i){const s=AN();return new Promise((u,d)=>{const f=new aT;f.setWithCredentials(!0),f.listenOnce(gM.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case hi.NO_ERROR:const I=f.getResponseJson();je(so,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case hi.TIMEOUT:je(so,`RPC '${e}' ${s} timed out`),d(new ke(de.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const b=f.getStatus();if(je(so,`RPC '${e}' ${s} failed with status:`,b,"response text:",f.getResponseText()),b>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x?.error;if(k&&k.status&&k.message){const $=function(Z){const Ae=Z.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(Ae)>=0?Ae:de.UNKNOWN}(k.status);d(new ke($,k.message))}else d(new ke(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ke(de.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{je(so,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(i);je(so,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=AN(),s=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Wm(),d=Km(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new _C({})),this.fo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");je(so,`Creating RPC '${e}' stream ${i}: ${I}`,f);const b=u.createWebChannel(I,f);let x=!1,k=!1;const $=new BH({so:Z=>{k?je(so,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(x||(je(so,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),je(so,`RPC '${e}' stream ${i} sending:`,Z),b.send(Z))},oo:()=>b.close()}),Q=(Z,Ae,Pe)=>{Z.listen(Ae,be=>{try{Pe(be)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return Q(b,mc.EventType.OPEN,()=>{k||je(so,`RPC '${e}' stream ${i} transport opened.`)}),Q(b,mc.EventType.CLOSE,()=>{k||(k=!0,je(so,`RPC '${e}' stream ${i} transport closed`),$.Po())}),Q(b,mc.EventType.ERROR,Z=>{k||(k=!0,ia(so,`RPC '${e}' stream ${i} transport errored:`,Z),$.Po(new ke(de.UNAVAILABLE,"The operation could not be completed")))}),Q(b,mc.EventType.MESSAGE,Z=>{var Ae;if(!k){const Pe=Z.data[0];Dt(!!Pe);const Ue=Pe.error||(null===(Ae=Pe[0])||void 0===Ae?void 0:Ae.error);if(Ue){je(so,`RPC '${e}' stream ${i} received error:`,Ue);const gt=Ue.status;let mt=function(ku){const NP=gi[ku];if(void 0!==NP)return KM(NP)}(gt),pn=Ue.message;void 0===mt&&(mt=de.INTERNAL,pn="Unknown error status: "+gt+" with message "+Ue.message),k=!0,$.Po(new ke(mt,pn)),b.close()}else je(so,`RPC '${e}' stream ${i} received:`,Pe),$.Io(Pe)}}),Q(d,oT.STAT_EVENT,Z=>{Z.stat===Zm.PROXY?je(so,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===Zm.NOPROXY&&je(so,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.ho()},0),$}}function kS(){return typeof document<"u"?document:null}function k0(n){return new NU(n,!0)}class bN{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.So=r,this.bo=i,this.Do=s,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const t=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.vo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Fo=Date.now(),e())),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}cancel(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}class qU{constructor(e,t,r,i,s,u,d,f){this.ii=e,this.Bo=r,this.Lo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new bN(e,t)}$o(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Wo()}stop(){var e=this;return(0,B.Z)(function*(){e.$o()&&(yield e.close(0))})()}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,()=>this.jo()))}Ho(e){this.Jo(),this.stream.send(e)}jo(){var e=this;return(0,B.Z)(function*(){if(e.Uo())return e.close(0)})()}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}close(e,t){var r=this;return(0,B.Z)(function*(){r.Jo(),r.Yo(),r.Ko.cancel(),r.ko++,4!==e?r.Ko.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.Ko.Mo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Zo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.uo(t)})()}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),t=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.ko===t&&this.e_(r,i)},r=>{e(()=>{const i=new ke(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.t_(i)})})}e_(e,t){const r=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o(()=>{r(()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(i=>{r(()=>this.t_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Wo(){var e=this;this.state=5,this.Ko.xo((0,B.Z)(function*(){e.state=0,e.start()}))}t_(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.ko===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GH extends qU{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}n_(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Ko.reset();const t=function dS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:vt(),i=e.targetChange.targetIds||[],s=function(_,I){return _.useProto3Json?(Dt(void 0===I||"string"==typeof I),pi.fromBase64String(I||"")):(Dt(void 0===I||I instanceof Uint8Array),pi.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(_){const I=void 0===_.code?de.UNKNOWN:KM(_.code);return new ke(I,_.message||"")}(u);t=new r0(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Pu(n,r.document.name),s=_n(r.document.updateTime),u=r.document.createTime?_n(r.document.createTime):Ct.min(),d=new nr({mapValue:{fields:r.document.fields}}),f=qn.newFoundDocument(i,s,u,d);t=new n0(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Pu(n,r.document),s=r.readTime?_n(r.readTime):Ct.min(),u=qn.newNoDocument(i,s);t=new n0([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Pu(n,r.document);t=new n0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return vt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new MU(i,s);t=new rS(r.targetId,u)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ct.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?_n(u.readTime):Ct.min()}(e);return this.listener.r_(t,r)}i_(e){const t={};t.database=Lp(this.serializer),t.addTarget=function(s,u){let d;const f=u.target;if(d=Sp(f)?{documents:rI(s,f)}:{query:xu(s,f)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=uS(s,u.resumeToken);const _=Mo(s,u.expectedCount);null!==_&&(d.expectedCount=_)}else if(u.snapshotVersion.compareTo(Ct.min())>0){d.readTime=zh(s,u.snapshotVersion.toTimestamp());const _=Mo(s,u.expectedCount);null!==_&&(d.expectedCount=_)}return d}(this.serializer,e);const r=function l0(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Ho(t)}s_(e){const t={};t.database=Lp(this.serializer),t.removeTarget=e,this.Ho(t)}}class jH extends qU{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const t=function XM(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(i,s){let u=_n(i.updateTime?i.updateTime:s);return u.isEqual(Ct.min())&&(u=_n(s)),new HM(u,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.u_(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=Lp(this.serializer),this.Ho(e)}a_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function f_(n,e){let t;if(e instanceof Gh)t={update:a0(n,e.key,e.value)};else if(e instanceof jh)t={delete:d_(n,e.key)};else if(e instanceof bc)t={update:a0(n,e.key,e.data),updateMask:tN(e.fieldMask)};else{if(!(e instanceof YT))return vt();t={verify:d_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof Op)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ql)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof $h)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Yl)return{fieldPath:u.field.canonicalString(),increment:d.Te};throw vt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:kU(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:vt()),t;var s}(this.serializer,r))};this.Ho(t)}}class zH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.h_=!1}P_(){if(this.h_)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,t,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Vo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(de.UNKNOWN,i.toString())})}yo(e,t,r,i){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.yo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(de.UNKNOWN,s.toString())})}terminate(){this.h_=!0}}class qH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve())))}m_(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(fr(t),this.d_=!1):je("OnlineStateTracker",t)}f_(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}class WH{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=s,this.S_.Ys(d=>{r.enqueueAndForget((0,B.Z)(function*(){var f;jp(u)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,B.Z)(function*(I){const b=tt(I);b.y_.add(4),yield gI(b),b.b_.set("Unknown"),b.y_.delete(4),yield O0(b)}),function _(I){return f.apply(this,arguments)})(u))}))}),this.b_=new qH(r,i)}}function O0(n){return CN.apply(this,arguments)}function CN(){return CN=(0,B.Z)(function*(n){if(jp(n))for(const e of n.w_)yield e(!0)}),CN.apply(this,arguments)}function gI(n){return SN.apply(this,arguments)}function SN(){return SN=(0,B.Z)(function*(n){for(const e of n.w_)yield e(!1)}),SN.apply(this,arguments)}function OS(n,e){const t=tt(n);t.p_.has(e.targetId)||(t.p_.set(e.targetId,e),xN(t)?PN(t):_I(t).Uo()&&RN(t,e))}function F0(n,e){const t=tt(n),r=_I(t);t.p_.delete(e),r.Uo()&&WU(t,e),0===t.p_.size&&(r.Uo()?r.zo():jp(t)&&t.b_.set("Unknown"))}function RN(n,e){if(n.D_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_I(n).i_(e)}function WU(n,e){n.D_.Be(e),_I(n).s_(e)}function PN(n){n.D_=new QM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.p_.get(e)||null,rt:()=>n.datastore.serializer.databaseId}),_I(n).start(),n.b_.A_()}function xN(n){return jp(n)&&!_I(n).$o()&&n.p_.size>0}function jp(n){return 0===tt(n).y_.size}function KU(n){n.D_=void 0}function KH(n){return MN.apply(this,arguments)}function MN(){return MN=(0,B.Z)(function*(n){n.p_.forEach((e,t)=>{RN(n,e)})}),MN.apply(this,arguments)}function ZH(n,e){return NN.apply(this,arguments)}function NN(){return NN=(0,B.Z)(function*(n,e){KU(n),xN(n)?(n.b_.m_(e),PN(n)):n.b_.set("Unknown")}),NN.apply(this,arguments)}function QH(n,e,t){return kN.apply(this,arguments)}function kN(){return kN=(0,B.Z)(function*(n,e,t){if(n.b_.set("Online"),e instanceof r0&&2===e.state&&e.cause)try{yield(r=(0,B.Z)(function*(s,u){const d=u.cause;for(const f of u.targetIds)s.p_.has(f)&&(yield s.remoteSyncer.rejectListen(f,d),s.p_.delete(f),s.D_.removeTarget(f))}),function i(s,u){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield FS(n,r)}else if(e instanceof n0?n.D_.We(e):e instanceof rS?n.D_.Ze(e):n.D_.je(e),!t.isEqual(Ct.min()))try{const r=yield o(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.D_.st(u);return d.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const I=s.p_.get(_);I&&s.p_.set(_,I.withResumeToken(f.resumeToken,u))}}),d.targetMismatches.forEach((f,_)=>{const I=s.p_.get(f);if(!I)return;s.p_.set(f,I.withResumeToken(pi.EMPTY_BYTE_STRING,I.snapshotVersion)),WU(s,f);const b=new ed(I.target,f,_,I.sequenceNumber);RN(s,b)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield FS(n,r)}var r}),kN.apply(this,arguments)}function FS(n,e,t){return ON.apply(this,arguments)}function ON(){return ON=(0,B.Z)(function*(n,e,t){if(!Cu(e))throw e;n.y_.add(1),yield gI(n),n.b_.set("Offline"),t||(t=()=>o(n.localStore)),n.asyncQueue.enqueueRetryable((0,B.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.y_.delete(1),yield O0(n)}))}),ON.apply(this,arguments)}function ZU(n,e){return e().catch(t=>FS(n,t,e))}function mI(n){return FN.apply(this,arguments)}function FN(){return FN=(0,B.Z)(function*(n){const e=tt(n),t=zp(e);let r=e.g_.length>0?e.g_[e.g_.length-1].batchId:-1;for(;YH(e);)try{const i=yield l(e.localStore,r);if(null===i){0===e.g_.length&&t.zo();break}r=i.batchId,JH(e,i)}catch(i){yield FS(e,i)}QU(e)&&YU(e)}),FN.apply(this,arguments)}function YH(n){return jp(n)&&n.g_.length<10}function JH(n,e){n.g_.push(e);const t=zp(n);t.Uo()&&t.__&&t.a_(e.mutations)}function QU(n){return jp(n)&&!zp(n).$o()&&n.g_.length>0}function YU(n){zp(n).start()}function XH(n){return LN.apply(this,arguments)}function LN(){return LN=(0,B.Z)(function*(n){zp(n).l_()}),LN.apply(this,arguments)}function eq(n){return VN.apply(this,arguments)}function VN(){return VN=(0,B.Z)(function*(n){const e=zp(n);for(const t of n.g_)e.a_(t.mutations)}),VN.apply(this,arguments)}function tq(n,e,t){return UN.apply(this,arguments)}function UN(){return UN=(0,B.Z)(function*(n,e,t){const r=n.g_.shift(),i=eS.from(r,e,t);yield ZU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield mI(n)}),UN.apply(this,arguments)}function nq(n,e){return BN.apply(this,arguments)}function BN(){return BN=(0,B.Z)(function*(n,e){var t;e&&zp(n).__&&(yield(t=(0,B.Z)(function*(i,s){if(function WM(n){switch(n){default:return vt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}(d=s.code)&&d!==de.ABORTED){const u=i.g_.shift();zp(i).Go(),yield ZU(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,s)),yield mI(i)}var d}),function r(i,s){return t.apply(this,arguments)})(n,e)),QU(n)&&YU(n)}),BN.apply(this,arguments)}function JU(n,e){return $N.apply(this,arguments)}function $N(){return $N=(0,B.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=jp(t);t.y_.add(3),yield gI(t),r&&t.b_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.y_.delete(3),yield O0(t)}),$N.apply(this,arguments)}function jN(){return jN=(0,B.Z)(function*(n,e){const t=tt(n);e?(t.y_.delete(2),yield O0(t)):e||(t.y_.add(2),yield gI(t),t.b_.set("Unknown"))}),jN.apply(this,arguments)}function _I(n){return n.v_||(n.v_=function(t,r,i){const s=tt(t);return s.P_(),new GH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{_o:KH.bind(null,n),uo:ZH.bind(null,n),r_:QH.bind(null,n)}),n.w_.push(function(){var e=(0,B.Z)(function*(t){t?(n.v_.Go(),xN(n)?PN(n):n.b_.set("Unknown")):(yield n.v_.stop(),KU(n))});return function(t){return e.apply(this,arguments)}}())),n.v_}function zp(n){return n.C_||(n.C_=function(t,r,i){const s=tt(t);return s.P_(),new jH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{_o:XH.bind(null,n),uo:nq.bind(null,n),c_:eq.bind(null,n),u_:tq.bind(null,n)}),n.w_.push(function(){var e=(0,B.Z)(function*(t){t?(n.C_.Go(),yield mI(n)):(yield n.C_.stop(),n.g_.length>0&&(je("RemoteStore",`Stopping write stream with ${n.g_.length} pending writes`),n.g_=[]))});return function(t){return e.apply(this,arguments)}}())),n.C_}class zN{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new zN(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yI(n,e){if(fr("AsyncQueue",`${e}: ${n}`),Cu(n))return new ke(de.UNAVAILABLE,`${e}: ${n}`);throw n}class vI{constructor(e){this.comparator=e?(t,r)=>e(t,r)||st.comparator(t.key,r.key):(t,r)=>st.comparator(t.key,r.key),this.keyedMap=kp(),this.sortedSet=new Hn(this.comparator)}static emptySet(e){return new vI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vI)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vI;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class XU{constructor(){this.F_=new Hn(st.comparator)}track(e){const t=e.doc.key,r=this.F_.get(t);r?0!==e.type&&3===r.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==r.type?this.F_=this.F_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.F_=this.F_.remove(t):1===e.type&&2===r.type?this.F_=this.F_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):vt():this.F_=this.F_.insert(t,e)}M_(){const e=[];return this.F_.inorderTraversal((t,r)=>{e.push(r)}),e}}class II{constructor(e,t,r,i,s,u,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new II(e,t,vI.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class rq{constructor(){this.x_=void 0,this.listeners=[]}}class iq{constructor(){this.queries=new Ac(e=>$T(e),xp),this.onlineState="Unknown",this.O_=new Set}}function HN(n,e){return qN.apply(this,arguments)}function qN(){return qN=(0,B.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new rq),i)try{s.x_=yield t.onListen(r)}catch(u){const d=yI(u,`Initialization of query '${GT(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.N_(t.onlineState),s.x_&&e.B_(s.x_)&&ZN(t)}),qN.apply(this,arguments)}function WN(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,B.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),KN.apply(this,arguments)}function sq(n,e){const t=tt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.B_(i)&&(r=!0);u.x_=i}}r&&ZN(t)}function oq(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function ZN(n){n.O_.forEach(e=>{e.next()})}class QN{constructor(e,t,r){this.query=e,this.L_=t,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}B_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new II(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),t=!0):this.K_(e,this.onlineState)&&(this.U_(e),t=!0),this.q_=e,t}onError(e){this.L_.error(e)}N_(e){this.onlineState=e;let t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}K_(e,t){return!e.fromCache||(!this.options.W_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Q_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}U_(e){e=II.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}class n2{constructor(e){this.key=e}}class r2{constructor(e){this.key=e}}class i2{constructor(e,t){this.query=e,this.X_=t,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=en(),this.mutatedKeys=en(),this.na=ws(e),this.ra=new vI(this.na)}get ia(){return this.X_}sa(e,t){const r=t?t.oa:new XU,i=t?t.ra:this.ra;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,b)=>{const x=i.get(I),k=Mp(this.query,b)?b:null,$=!!x&&this.mutatedKeys.has(x.key),Q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Z=!1;x&&k?x.data.isEqual(k.data)?$!==Q&&(r.track({type:3,doc:k}),Z=!0):this._a(x,k)||(r.track({type:2,doc:k}),Z=!0,(f&&this.na(k,f)>0||_&&this.na(k,_)<0)&&(d=!0)):!x&&k?(r.track({type:0,doc:k}),Z=!0):x&&!k&&(r.track({type:1,doc:x}),Z=!0,(f||_)&&(d=!0)),Z&&(k?(u=u.add(k),s=Q?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ra:u,oa:r,zi:d,mutatedKeys:s}}_a(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;const s=e.oa.M_();s.sort((_,I)=>function(x,k){const $=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return $(x)-$(k)}(_.type,I.type)||this.na(_.doc,I.doc)),this.aa(r);const u=t?this.ua():[],d=0===this.ta.size&&this.current?1:0,f=d!==this.ea;return this.ea=d,0!==s.length||f?{snapshot:new II(this.query,e.ra,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ca:u}:{ca:u}}N_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new XU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}aa(e){e&&(e.addedDocuments.forEach(t=>this.X_=this.X_.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.X_=this.X_.delete(t)),this.current=e.current)}ua(){if(!this.current)return[];const e=this.ta;this.ta=en(),this.ra.forEach(r=>{this.la(r.key)&&(this.ta=this.ta.add(r.key))});const t=[];return e.forEach(r=>{this.ta.has(r)||t.push(new r2(r))}),this.ta.forEach(r=>{e.has(r)||t.push(new n2(r))}),t}ha(e){this.X_=e.ss,this.ta=en();const t=this.sa(e.documents);return this.applyChanges(t,!0)}Pa(){return II.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}class cq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class lq{constructor(e){this.key=e,this.Ia=!1}}class dq{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Ta={},this.Ea=new Ac(d=>$T(d),xp),this.da=new Map,this.Aa=new Set,this.Ra=new Hn(st.comparator),this.Va=new Map,this.ma=new S0,this.fa={},this.ga=new Map,this.pa=Qh.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return!0===this.ya}}function hq(n,e){return YN.apply(this,arguments)}function YN(){return YN=(0,B.Z)(function*(n,e){const t=function Ik(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=s2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gq.bind(null,e),e.Ta.r_=sq.bind(null,e.eventManager),e.Ta.Sa=oq.bind(null,e.eventManager),e}(n);let r,i;const s=t.Ea.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const u=yield function h(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.kr.getTargetData(r,e).next(s=>s?(i=s,ie.resolve(i)):t.kr.allocateTargetId(r).next(u=>(i=new ed(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Es(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function JN(n,e,t,r,i){return XN.apply(this,arguments)}(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&OS(t.remoteStore,u)}return i}),YN.apply(this,arguments)}function XN(){return XN=(0,B.Z)(function*(n,e,t,r,i){n.wa=(b,x,k)=>{return($=(0,B.Z)(function*(Z,Ae,Pe,be){let Ue=Ae.view.sa(Pe);Ue.zi&&(Ue=yield T(Z.localStore,Ae.query,!1).then(({documents:pn})=>Ae.view.sa(pn,Ue)));const gt=be&&be.targetChanges.get(Ae.targetId),mt=Ae.view.applyChanges(Ue,Z.isPrimaryClient,gt);return ck(Z,Ae.targetId,mt.ca),mt.snapshot}),function Q(Z,Ae,Pe,be){return $.apply(this,arguments)})(n,b,x,k);var $};const s=yield T(n.localStore,e,!0),u=new i2(e,s.ss),d=u.sa(s.documents),f=eI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(d,n.isPrimaryClient,f);ck(n,t,_.ca);const I=new cq(e,t,u);return n.Ea.set(e,I),n.da.has(t)?n.da.get(t).push(e):n.da.set(t,[e]),_.snapshot}),XN.apply(this,arguments)}function fq(n,e){return ek.apply(this,arguments)}function ek(){return ek=(0,B.Z)(function*(n,e){const t=tt(n),r=t.Ea.get(e),i=t.da.get(r.targetId);if(i.length>1)return t.da.set(r.targetId,i.filter(s=>!xp(s,e))),void t.Ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield m(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),F0(t.remoteStore,r.targetId),EI(t,r.targetId)}).catch(Du))):(EI(t,r.targetId),yield m(t.localStore,r.targetId,!0))}),ek.apply(this,arguments)}function tk(){return tk=(0,B.Z)(function*(n,e,t){const r=function Ek(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_q.bind(null,e),e}(n);try{const i=yield function(u,d){const f=tt(u),_=Ir.now(),I=d.reduce((k,$)=>k.add($.key),en());let b,x;return f.persistence.runTransaction("Locally write mutations","readwrite",k=>{let $=xo(),Q=en();return f.Xi.getEntries(k,I).next(Z=>{$=Z,$.forEach((Ae,Pe)=>{Pe.isValidDocument()||(Q=Q.add(Ae))})}).next(()=>f.localDocuments.getOverlayedDocuments(k,$)).next(Z=>{b=Z;const Ae=[];for(const Pe of d){const be=qM(Pe,b.get(Pe.key).overlayedDocument);null!=be&&Ae.push(new bc(Pe.key,be,LC(be.value.mapValue),pr.exists(!0)))}return f.mutationQueue.addMutationBatch(k,_,Ae,d)}).next(Z=>{x=Z;const Ae=Z.applyToLocalDocumentSet(b,Q);return f.documentOverlayCache.saveOverlays(k,Z.batchId,Ae)})}).then(()=>({batchId:x.batchId,changes:Zv(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,d,f){let _=u.fa[u.currentUser.toKey()];_||(_=new Hn(zt)),_=_.insert(d,f),u.fa[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Xh(r,i.changes),yield mI(r.remoteStore)}catch(i){const s=yI(i,"Failed to persist write");t.reject(s)}}),tk.apply(this,arguments)}function s2(n,e){return nk.apply(this,arguments)}function nk(){return nk=(0,B.Z)(function*(n,e){const t=tt(n);try{const r=yield function a(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Xi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((I,b)=>{const x=i.get(b);if(!x)return;d.push(t.kr.removeMatchingKeys(s,I.removedDocuments,b).next(()=>t.kr.addMatchingKeys(s,I.addedDocuments,b)));let k=x.withSequenceNumber(s.currentSequenceNumber);var Q,Z,Ae;null!==e.targetMismatches.get(b)?k=k.withResumeToken(pi.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):I.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(I.resumeToken,r)),i=i.insert(b,k),Z=k,Ae=I,(0===(Q=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Ae.addedDocuments.size+Ae.modifiedDocuments.size+Ae.removedDocuments.size>0)&&d.push(t.kr.updateTargetData(s,k))});let f=xo(),_=en();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),d.push(function c(n,e,t){let r=en(),i=en();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=xo();return t.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Ct.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{ns:u,rs:i}})}(s,u,e.documentUpdates).next(I=>{f=I.ns,_=I.rs})),!r.isEqual(Ct.min())){const I=t.kr.getLastRemoteSnapshotVersion(s).next(b=>t.kr.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(I)}return ie.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Va.get(s);u&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Ia=!0:i.modifiedDocuments.size>0?Dt(u.Ia):i.removedDocuments.size>0&&(Dt(u.Ia),u.Ia=!1))}),yield Xh(t,r,e)}catch(r){yield Du(r)}}),nk.apply(this,arguments)}function o2(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Ea.forEach((s,u)=>{const d=u.view.N_(e);d.snapshot&&i.push(d.snapshot)}),function(u,d){const f=tt(u);f.onlineState=d;let _=!1;f.queries.forEach((I,b)=>{for(const x of b.listeners)x.N_(d)&&(_=!0)}),_&&ZN(f)}(r.eventManager,e),i.length&&r.Ta.r_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gq(n,e,t){return rk.apply(this,arguments)}function rk(){return rk=(0,B.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Va.get(e),s=i&&i.key;if(s){let u=new Hn(st.comparator);u=u.insert(s,qn.newNoDocument(s,Ct.min()));const d=en().add(s),f=new l_(Ct.min(),new Map,new Hn(zt),u,d);yield s2(r,f),r.Ra=r.Ra.remove(s),r.Va.delete(e),lk(r)}else yield m(r.localStore,e,!1).then(()=>EI(r,e,t)).catch(Du)}),rk.apply(this,arguments)}function mq(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,B.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield function jU(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Xi.newChangeBuffer({trackRemovals:!0});return function(d,f,_,I){const b=_.batch,x=b.keys();let k=ie.resolve();return x.forEach($=>{k=k.next(()=>I.getEntry(f,$)).next(Q=>{const Z=_.docVersions.get($);Dt(null!==Z),Q.version.compareTo(Z)<0&&(b.applyToRemoteDocument(Q,_),Q.isValidDocument()&&(Q.setReadTime(_.commitVersion),I.addEntry(Q)))})}),k.next(()=>d.mutationQueue.removeMutationBatch(f,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let f=en();for(let _=0;_<d.mutationResults.length;++_)d.mutationResults[_].transformResults.length>0&&(f=f.add(d.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);uk(t,r,null),ak(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xh(t,i)}catch(i){yield Du(i)}}),ik.apply(this,arguments)}function _q(n,e,t){return sk.apply(this,arguments)}function sk(){return sk=(0,B.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(u,d){const f=tt(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return f.mutationQueue.lookupMutationBatch(_,d).next(b=>(Dt(null!==b),I=b.keys(),f.mutationQueue.removeMutationBatch(_,b))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,I,d)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>f.localDocuments.getDocuments(_,I))})}(r.localStore,e);uk(r,e,t),ak(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xh(r,i)}catch(i){yield Du(i)}}),sk.apply(this,arguments)}function ak(n,e){(n.ga.get(e)||[]).forEach(t=>{t.resolve()}),n.ga.delete(e)}function uk(n,e,t){const r=tt(n);let i=r.fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.fa[r.currentUser.toKey()]=i}}function EI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.da.get(e))n.Ea.delete(r),t&&n.Ta.Sa(r,t);n.da.delete(e),n.isPrimaryClient&&n.ma.Ar(e).forEach(r=>{n.ma.containsKey(r)||a2(n,r)})}function a2(n,e){n.Aa.delete(e.path.canonicalString());const t=n.Ra.get(e);null!==t&&(F0(n.remoteStore,t),n.Ra=n.Ra.remove(e),n.Va.delete(t),lk(n))}function ck(n,e,t){for(const r of t)r instanceof n2?(n.ma.addReference(r.key,e),vq(n,r)):r instanceof r2?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ma.removeReference(r.key,e),n.ma.containsKey(r.key)||a2(n,r.key)):vt()}function vq(n,e){const t=e.key,r=t.path.canonicalString();n.Ra.get(t)||n.Aa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.Aa.add(r),lk(n))}function lk(n){for(;n.Aa.size>0&&n.Ra.size<n.maxConcurrentLimboResolutions;){const e=n.Aa.values().next().value;n.Aa.delete(e);const t=new st(In.fromString(e)),r=n.pa.next();n.Va.set(r,new lq(t)),n.Ra=n.Ra.insert(t,r),OS(n.remoteStore,new ed(Es(Rp(t.path)),r,"TargetPurposeLimboResolution",Ro.ae))}}function Xh(n,e,t){return dk.apply(this,arguments)}function dk(){return dk=(0,B.Z)(function*(n,e,t){const r=tt(n),i=[],s=[],u=[];var d;r.Ea.isEmpty()||(r.Ea.forEach((d,f)=>{u.push(r.wa(f,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const I=xS.qi(f.targetId,_);s.push(I)}}))}),yield Promise.all(u),r.Ta.r_(i),yield(d=(0,B.Z)(function*(_,I){const b=tt(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ie.forEach(I,k=>ie.forEach(k.Li,$=>b.persistence.referenceDelegate.addReference(x,k.targetId,$)).next(()=>ie.forEach(k.ki,$=>b.persistence.referenceDelegate.removeReference(x,k.targetId,$)))))}catch(x){if(!Cu(x))throw x;je("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const k=x.targetId;if(!x.fromCache){const $=b.Ji.get(k),Z=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);b.Ji=b.Ji.insert(k,Z)}}}),function f(_,I){return d.apply(this,arguments)})(r.localStore,s))}),dk.apply(this,arguments)}function Iq(n,e){return hk.apply(this,arguments)}function hk(){return hk=(0,B.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield wN(t.localStore,e);t.currentUser=e,(s=t).ga.forEach(d=>{d.forEach(f=>{f.reject(new ke(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ga.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xh(t,r.ts)}var s}),hk.apply(this,arguments)}function Eq(n,e){const t=tt(n),r=t.Va.get(e);if(r&&r.Ia)return en().add(r.key);{let i=en();const s=t.da.get(e);if(!s)return i;for(const u of s){const d=t.Ea.get(u);i=i.unionWith(d.view.ia)}return i}}class LS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,B.Z)(function*(){t.serializer=k0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function EN(n,e,t,r){return new GU(n,e,t,r)}(this.persistence,new IN,e.initialUser,this.serializer)}createPersistence(e){return new SS(R0.zr,this.serializer)}createSharedClientState(e){return new MS}terminate(){var e=this;return(0,B.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wI{initialize(e,t){var r=this;return(0,B.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>o2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Iq.bind(null,r.syncEngine),yield function GN(n,e){return jN.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new iq}createDatastore(e){const t=k0(e.databaseInfo.databaseId),r=new $H(e.databaseInfo);return new zH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,u=t=>o2(this.syncEngine,t,0),d=zU.v()?new zU:new TN,new WH(r,i,s,u,d);var r,i,s,u,d}createSyncEngine(e,t){return function(i,s,u,d,f,_,I){const b=new dq(i,s,u,d,f,_);return I&&(b.ya=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,B.Z)(function*(r){const i=tt(r);je("RemoteStore","RemoteStore shutting down."),i.y_.add(5),yield gI(i),i.S_.shutdown(),i.b_.set("Unknown")}),function t(r){return e.apply(this,arguments)})(this.remoteStore);var e}}class VS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.va(this.observer.next,e)}error(e){this.observer.error?this.va(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Ca(){this.muted=!0}va(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class kq{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mi.UNAUTHENTICATED,this.clientId=yM.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,B.Z)(function*(d){je("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(je("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,B.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,B.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=yI(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function US(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,B.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,B.Z)(function*(s){r.isEqual(s)||(yield wN(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),wk.apply(this,arguments)}function Tk(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,B.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function bk(n){return Dk.apply(this,arguments)}(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>JU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>JU(e.remoteStore,s)),n._onlineComponents=e}),Ak.apply(this,arguments)}function Dk(){return Dk=(0,B.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield US(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function f2(n){return"FirebaseError"===n.name?n.code===de.FAILED_PRECONDITION||n.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;ia("Error using user provided cache. Falling back to memory cache: "+t),yield US(n,new LS)}}else je("FirestoreClient","Using default OfflineComponentProvider"),yield US(n,new LS);return n._offlineComponents}),Dk.apply(this,arguments)}function BS(n){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,B.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je("FirestoreClient","Using user provided OnlineComponentProvider"),yield Tk(n,n._uninitializedComponentsProvider._online)):(je("FirestoreClient","Using default OnlineComponentProvider"),yield Tk(n,new wI))),n._onlineComponents}),Ck.apply(this,arguments)}function TI(n){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,B.Z)(function*(n){const e=yield BS(n),t=e.eventManager;return t.onListen=hq.bind(null,e.syncEngine),t.onUnlisten=fq.bind(null,e.syncEngine),t}),Rk.apply(this,arguments)}function v2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const I2=new Map;function Pk(n,e,t){if(!t)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function E2(n){if(!st.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w2(n){if(st.isDocumentKey(n))throw new ke(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":vt()}function An(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=GS(n);throw new ke(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class A2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function jq(n,e,t,r){if(!0===e&&!0===r)throw new ke(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=v2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ke(de.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A2(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new vC;switch(r.type){case"firstParty":return new _M(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=I2.get(t);r&&(je("ComponentProvider","Removing Datastore"),I2.delete(t),r.terminate())}(this),Promise.resolve()}}class Fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class _i{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _i(this.firestore,e,this._key)}}class sd extends Fs{constructor(e,t,r){super(e,t,Rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _i(this.firestore,null,new st(e))}withConverter(e){return new sd(this.firestore,e,this._path)}}function V0(n,e,...t){if(n=(0,it.m9)(n),Pk("collection","path",e),n instanceof L0){const r=In.fromString(e,...t);return w2(r),new sd(n,null,r)}{if(!(n instanceof _i||n instanceof sd))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return w2(r),new sd(n.firestore,null,r)}}function I_(n,e,...t){if(n=(0,it.m9)(n),1===arguments.length&&(e=yM.V()),Pk("doc","path",e),n instanceof L0){const r=In.fromString(e,...t);return E2(r),new _i(n,null,new st(r))}{if(!(n instanceof _i||n instanceof sd))throw new ke(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return E2(r),new _i(n.firestore,n instanceof sd?n.converter:null,new st(r))}}class Hq{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new bN(this,"async_queue_retry"),this.Xa=()=>{const t=kS();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Ko.No()};const e=kS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const t=kS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise(()=>{});const t=new fi;return this.tu(()=>this.za&&this.Ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ga.push(e),this.nu()))}nu(){var e=this;return(0,B.Z)(function*(){if(0!==e.Ga.length){try{yield e.Ga[0](),e.Ga.shift(),e.Ko.reset()}catch(t){if(!Cu(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Ga.length>0&&e.Ko.xo(()=>e.nu())}})()}tu(e){const t=this.Wa.then(()=>(this.Ja=!0,e().catch(r=>{throw this.Ha=r,this.Ja=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ja=!1,r))));return this.Wa=t,t}enqueueAfterDelay(e,t,r){this.eu(),this.Za.indexOf(e)>-1&&(t=0);const i=zN.createAndSchedule(this,e,t,r,s=>this.ru(s));return this.ja.push(i),i}eu(){this.Ha&&vt()}verifyOperationInProgress(){}iu(){var e=this;return(0,B.Z)(function*(){let t;do{t=e.Wa,yield t}while(t!==e.Wa)})()}su(e){for(const t of this.ja)if(t.timerId===e)return!0;return!1}ou(e){return this.iu().then(()=>{this.ja.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ja)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.iu()})}_u(e){this.Za.push(e)}ru(e){const t=this.ja.indexOf(e);this.ja.splice(t,1)}}function xk(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Er extends L0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Hq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||D2(this),this._firestoreClient.terminate()}}function AI(n,e){const t="object"==typeof n?n:(0,wn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,wn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,it.P0)("firestore");s&&function zq(n,e,t,r={}){var i;const s=(n=An(n,L0))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Mi.MOCK_USER;else{d=(0,it.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ke(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Mi(_)}n._authCredentials=new IC(new lT(d,f))}}(i,...s)}return i}function ki(n){return n._firestoreClient||D2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function D2(n){var e,t,r;const i=n._freezeSettings(),s=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NM(n._databaseId,f,n._persistenceKey,(I=i).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,v2(I.experimentalLongPollingOptions),I.useFetchStreams));var f,I;n._firestoreClient=new kq(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class E_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new E_(pi.fromBase64String(e))}catch(t){throw new ke(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new E_(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bI{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jS{constructor(e){this._methodName=e}}class Mk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const Kq=/^__.*__$/;class Zq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gh(e,this.data,t,this.fieldTransforms)}}class R2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function P2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class zS{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.au(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new zS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.cu({path:r,hu:!1});return i.Pu(e),i}Iu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.cu({path:r,hu:!1});return i.au(),i}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return qS(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(P2(this.uu)&&Kq.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class Qq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||k0(e)}Ru(e,t,r,i=!1){return new zS({uu:e,methodName:t,Au:r,path:Br.emptyPath(),hu:!1,du:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DI(n){const e=n._freezeSettings(),t=k0(n._databaseId);return new Qq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nk(n,e,t,r,i,s={}){const u=n.Ru(s.merge||s.mergeFields?2:0,e,t,i);Ok("Data must be an object, but it was:",u,r);const d=O2(r,u);let f,_;if(s.merge)f=new Po(u.fieldMask),_=u.fieldTransforms;else if(s.mergeFields){const I=[];for(const b of s.mergeFields){const x=$0(e,b,t);if(!u.contains(x))throw new ke(de.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);L2(I,x)||I.push(x)}f=new Po(I),_=u.fieldTransforms.filter(b=>f.covers(b.field))}else f=null,_=u.fieldTransforms;return new Zq(new nr(d),f,_)}class B0 extends jS{_toFieldTransform(e){if(2!==e.uu)throw e.Eu(1===e.uu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B0}}class kk extends jS{_toFieldTransform(e){return new Yv(e.path,new Op)}isEqual(e){return e instanceof kk}}function w_(n,e){if(F2(n=(0,it.m9)(n)))return Ok("Unsupported field value:",e,n),O2(n,e);if(n instanceof jS)return function(r,i){if(!P2(i.uu))throw i.Eu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Eu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.hu&&4!==e.uu)throw e.Eu("Nested arrays are not supported");return function(r,i){const s=[];let u=0;for(const d of r){let f=w_(d,i.Tu(u));null==f&&(f={nullValue:"NULL_VALUE"}),s.push(f),u++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,it.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ZC(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Ir.fromDate(r);return{timestampValue:zh(i.serializer,s)}}if(r instanceof Ir){const s=new Ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zh(i.serializer,s)}}if(r instanceof Mk)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof E_)return{bytesValue:uS(i.serializer,r._byteString)};if(r instanceof _i){const s=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(s))throw i.Eu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:s0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Eu(`Unsupported field value: ${GS(r)}`)}(n,e)}function O2(n,e){const t={};return CT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vc(n,(r,i)=>{const s=w_(i,e.lu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function F2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ir||n instanceof Mk||n instanceof E_||n instanceof _i||n instanceof jS)}function Ok(n,e,t){if(!F2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=GS(t);throw e.Eu("an object"===r?n+" a custom object":n+" "+r)}var i}function $0(n,e,t){if((e=(0,it.m9)(e))instanceof bI)return e._internalPath;if("string"==typeof e)return HS(n,e);throw qS("Field path arguments must be of type string or ",n,!1,void 0,t)}const e3=new RegExp("[~\\*/\\[\\]]");function HS(n,e,t){if(e.search(e3)>=0)throw qS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bI(...e.split("."))._internalPath}catch{throw qS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function qS(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new ke(de.INVALID_ARGUMENT,d+n+f)}function L2(n,e){return n.some(t=>t.isEqual(e))}class Fk{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class t3 extends Fk{data(){return super.data()}}function WS(n,e){return"string"==typeof e?HS(n,e):e instanceof bI?e._internalPath:e._delegate._internalPath}function V2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lk{}class Vk extends Lk{}function Uk(n,e,...t){let r=[];e instanceof Lk&&r.push(e),r=r.concat(t),function(s){const u=s.filter(f=>f instanceof CI).length,d=s.filter(f=>f instanceof G0).length;if(u>1||u>0&&d>0)throw new ke(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class G0 extends Vk{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new G0(e,t,r)}_apply(e){const t=this._parse(e);return G2(e._query,t),new Fs(e.firestore,e.converter,Wv(e._query,t))}_parse(e){const t=DI(e.firestore);return function(s,u,d,f,_,I,b){let x;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){$2(b,I);const k=[];for(const $ of b)k.push(B2(f,s,$));x={arrayValue:{values:k}}}else x=B2(f,s,b)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||$2(b,I),x=function k2(n,e,t,r=!1){return w_(t,n.Ru(r?4:3,e))}(d,"where",b,"in"===I||"not-in"===I);return fn.create(_,I,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Bk(n,e,t){const r=e,i=WS("where",n);return G0._create(i,r,t)}class CI extends Lk{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new CI(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let u=i;const d=s.getFlattenedFilters();for(const f of d)G2(u,f),u=Wv(u,f)}(e._query,t),new Fs(e.firestore,e.converter,Wv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $k extends Vk{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $k(e,t)}_apply(e){const t=function(i,s,u){if(null!==i.startAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ke(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Cp(s,u);return function(_,I){if(null===Hv(_)){const b=Pp(_);null!==b&&j2(0,b,I.field)}}(i,d),d}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(i,s){const u=i.explicitOrderBy.concat([s]);return new Tc(i.path,i.collectionGroup,u,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class KS extends Vk{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new KS(e,t,r)}_apply(e){return new Fs(e.firestore,e.converter,Kv(e._query,this._limit,this._limitType))}}function B2(n,e,t){if("string"==typeof(t=(0,it.m9)(t))){if(""===t)throw new ke(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qv(e)&&-1!==t.indexOf("/"))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!st.isDocumentKey(r))throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kh(n,new st(r))}if(t instanceof _i)return kh(n,t._key);throw new ke(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${GS(t)}.`)}function $2(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function G2(n,e){if(e.isInequality()){const r=Pp(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new ke(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Hv(n);null!==s&&j2(0,i,s)}const t=function(i,s){for(const u of i)for(const d of u.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(de.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function j2(n,e,t){if(!t.isEqual(e))throw new ke(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class i3{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Mk(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(n_(e));default:return null}}convertTimestamp(e){const t=ql(e);return new Ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Dt(d0(r));const i=new Mh(r.get(1),r.get(3)),s=new st(r.popFirst(5));return i.isEqual(t)||fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Gk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class T_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SI extends Fk{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new YS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(WS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class YS extends SI{data(e={}){return super.data(e)}}class RI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new T_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new YS(this._firestore,this._userDataWriter,r.key,r,new T_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new YS(i._firestore,i._userDataWriter,d.doc.key,d.doc,new T_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const f=new YS(i._firestore,i._userDataWriter,d.doc.key,d.doc,new T_(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let _=-1,I=-1;return 0!==d.type&&(_=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:o3(d.type),doc:f,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function o3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function JS(n){n=An(n,_i);const e=An(n.firestore,Er);return function _2(n,e,t={}){const r=new fi;return n.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return function(s,u,d,f,_){const I=new VS({next:x=>{u.enqueueAndForget(()=>WN(s,b));const k=x.docs.has(d);!k&&x.fromCache?_.reject(new ke(de.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&f&&"server"===f.source?_.reject(new ke(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new QN(Rp(d.path),I,{includeMetadataChanges:!0,W_:!0});return HN(s,b)}(yield TI(n),n.asyncQueue,e,t,r)})),r.promise}(ki(e),n._key).then(t=>jk(e,n,t))}class Hp extends i3{constructor(e){super(),this.firestore=e}convertBytes(e){return new E_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _i(this.firestore,null,t)}}function H2(n){n=An(n,Fs);const e=An(n.firestore,Er),t=ki(e),r=new Hp(e);return V2(n._query),function y2(n,e,t={}){const r=new fi;return n.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return function(s,u,d,f,_){const I=new VS({next:x=>{u.enqueueAndForget(()=>WN(s,b)),x.fromCache&&"server"===f.source?_.reject(new ke(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new QN(d,I,{includeMetadataChanges:!0,W_:!0});return HN(s,b)}(yield TI(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new RI(e,r,n,i))}function q2(n,e,t,...r){n=An(n,_i);const i=An(n.firestore,Er),s=DI(i);let u;return u="string"==typeof(e=(0,it.m9)(e))||e instanceof bI?function N2(n,e,t,r,i,s){const u=n.Ru(1,e,t),d=[$0(e,r,t)],f=[i];if(s.length%2!=0)throw new ke(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push($0(e,s[x])),f.push(s[x+1]);const _=[],I=nr.empty();for(let x=d.length-1;x>=0;--x)if(!L2(_,d[x])){const k=d[x];let $=f[x];$=(0,it.m9)($);const Q=u.Iu(k);if($ instanceof B0)_.push(k);else{const Z=w_($,Q);null!=Z&&(_.push(k),I.set(k,Z))}}const b=new Po(_);return new R2(I,b,u.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function M2(n,e,t,r){const i=n.Ru(1,e,t);Ok("Data must be an object, but it was:",i,r);const s=[],u=nr.empty();vc(r,(f,_)=>{const I=HS(e,f,t);_=(0,it.m9)(_);const b=i.Iu(I);if(_ instanceof B0)s.push(I);else{const x=w_(_,b);null!=x&&(s.push(I),u.set(I,x))}});const d=new Po(s);return new R2(u,d,i.fieldTransforms)}(s,"updateDoc",n._key,e),j0(i,[u.toMutation(n._key,pr.exists(!0))])}function W2(n,...e){var t,r,i;n=(0,it.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||xk(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(xk(e[u])){const b=e[u];e[u]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[u+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[u+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let f,_,I;if(n instanceof _i)_=An(n.firestore,Er),I=Rp(n._key.path),f={next:b=>{e[u]&&e[u](jk(_,n,b))},error:e[u+1],complete:e[u+2]};else{const b=An(n,Fs);_=An(b.firestore,Er),I=b._query;const x=new Hp(_);f={next:k=>{e[u]&&e[u](new RI(_,x,b,k))},error:e[u+1],complete:e[u+2]},V2(n._query)}return function(x,k,$,Q){const Z=new VS(Q),Ae=new QN(k,Z,$);return x.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return HN(yield TI(x),Ae)})),()=>{Z.Ca(),x.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return WN(yield TI(x),Ae)}))}}(ki(_),I,d,f)}function j0(n,e){return function(r,i){const s=new fi;return r.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return function pq(n,e,t){return tk.apply(this,arguments)}(yield function Sk(n){return BS(n).then(e=>e.syncEngine)}(r),i,s)})),s.promise}(ki(n),e)}function jk(n,e,t){const r=t.docs.get(e._key),i=new Hp(n);return new SI(n,i,e._key,r,new T_(t.hasPendingWrites,t.fromCache),e.converter)}function K2(){return new kk("serverTimestamp")}!function(e,t=!0){bp=wn.SDK_VERSION,(0,wn._registerComponent)(new xl.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const u=r.getProvider("app").getImmediate(),d=new Er(new mM(r.getProvider("auth-internal")),new bU(r.getProvider("app-check-internal")),function(_,I){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ke(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(_.options.projectId,I)}(u,i),u);return s=Object.assign({useFetchStreams:t},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(yC,"4.1.0",e),(0,wn.registerVersion)(yC,"4.1.0","esm2017")}();var Q2=O(7582);const E3=function Y2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},J2=new it.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),eR=new ms.Yd("@firebase/auth");function tR(n,...e){eR.logLevel<=ms.in.ERROR&&eR.error(`Auth (${wn.SDK_VERSION}): ${n}`,...e)}function oa(n,...e){throw zk(n,...e)}function od(n,...e){return zk(n,...e)}function zk(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return J2.create(n,...e)}function rt(n,e,...t){if(!n)throw zk(e,...t)}function ad(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tR(e),new Error(e)}function qp(n,e){n||ad(e)}function z0(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function eB(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class H0{constructor(e,t){this.shortDelay=e,this.longDelay=t,qp(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,it.uI)()||(0,it.b$)()}get(){return function T3(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Hk(){return"http:"===eB()||"https:"===eB()}()||(0,it.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qk(n,e){qp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class tB{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ad("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ad("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ad("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const b3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},D3=new H0(3e4,6e4);function $r(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Yr(n,e,t,r){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,B.Z)(function*(n,e,t,r,i={}){return nB(n,i,(0,B.Z)(function*(){let s={},u={};r&&("GET"===e?u=r:s={body:JSON.stringify(r)});const d=(0,it.xO)(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode),tB.fetch()(rB(n,n.config.apiHost,t,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},s))}))}),Wk.apply(this,arguments)}function nB(n,e,t){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,B.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},b3),e);try{const i=new C3(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=yield s.json();if("needConfirmation"in u)throw q0(n,"account-exists-with-different-credential",u);if(s.ok&&!("errorMessage"in u))return u;{const d=s.ok?u.errorMessage:u.error.message,[f,_]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===f)throw q0(n,"credential-already-in-use",u);if("EMAIL_EXISTS"===f)throw q0(n,"email-already-in-use",u);if("USER_DISABLED"===f)throw q0(n,"user-disabled",u);const I=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw function X2(n,e,t){const r=Object.assign(Object.assign({},E3()),{[e]:t});return new it.LL("auth","Firebase",r).create(e,{appName:n.name})}(n,I,_);oa(n,I)}}catch(i){if(i instanceof it.ZR)throw i;oa(n,"network-request-failed",{message:String(i)})}}),Kk.apply(this,arguments)}function Zk(){return Zk=(0,B.Z)(function*(n,e,t,r,i={}){const s=yield Yr(n,e,t,r,i);return"mfaPendingCredential"in s&&oa(n,"multi-factor-auth-required",{_serverResponse:s}),s}),Zk.apply(this,arguments)}function rB(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?qk(n.config,i):`${n.config.apiScheme}://${i}`}class C3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(od(this.auth,"network-request-failed")),D3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=od(n,e,r);return i.customData._tokenResponse=t,i}function Qk(){return Qk=(0,B.Z)(function*(n,e){return Yr(n,"POST","/v1/accounts:delete",e)}),Qk.apply(this,arguments)}function Jk(){return Jk=(0,B.Z)(function*(n,e){return Yr(n,"POST","/v1/accounts:lookup",e)}),Jk.apply(this,arguments)}function W0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xk(){return Xk=(0,B.Z)(function*(n,e=!1){const t=(0,it.m9)(n),r=yield t.getIdToken(e),i=nR(r);rt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,u=s?.sign_in_provider;return{claims:i,token:r,authTime:W0(e1(i.auth_time)),issuedAtTime:W0(e1(i.iat)),expirationTime:W0(e1(i.exp)),signInProvider:u||null,signInSecondFactor:s?.sign_in_second_factor||null}}),Xk.apply(this,arguments)}function e1(n){return 1e3*Number(n)}function nR(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return tR("JWT malformed, contained fewer than 3 sections"),null;try{const i=(0,it.tV)(t);return i?JSON.parse(i):(tR("Failed to decode base64 JWT payload"),null)}catch(i){return tR("Caught error parsing JWT payload as JSON",i?.toString()),null}}function tf(n,e){return t1.apply(this,arguments)}function t1(){return t1=(0,B.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof it.ZR&&function N3({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),t1.apply(this,arguments)}class k3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,B.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,B.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class iB{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W0(this.lastLoginAt),this.creationTime=W0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function K0(n){return n1.apply(this,arguments)}function n1(){return n1=(0,B.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield tf(n,function P3(n,e){return Jk.apply(this,arguments)}(t,{idToken:r}));rt(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const u=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function L3(n){return n.map(e=>{var{providerId:t}=e,r=(0,Q2._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],d=function F3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,u),I=!!n.isAnonymous&&!(n.email&&s.passwordHash||d?.length),b={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new iB(s.createdAt,s.lastLoginAt),isAnonymous:I};Object.assign(n,b)}),n1.apply(this,arguments)}function r1(){return r1=(0,B.Z)(function*(n){const e=(0,it.m9)(n);yield K0(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),r1.apply(this,arguments)}function i1(){return i1=(0,B.Z)(function*(n,e){const t=yield nB(n,{},(0,B.Z)(function*(){const r=(0,it.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,u=rB(n,i,"/v1/token",`key=${s}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",tB.fetch()(u,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),i1.apply(this,arguments)}class Z0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function M3(n){const e=nR(n);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,B.Z)(function*(){return rt(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,B.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:u}=yield function V3(n,e){return i1.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(u))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,u=new Z0;return r&&(rt("string"==typeof r,"internal-error",{appName:e}),u.refreshToken=r),i&&(rt("string"==typeof i,"internal-error",{appName:e}),u.accessToken=i),s&&(rt("number"==typeof s,"internal-error",{appName:e}),u.expirationTime=s),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Z0,this.toJSON())}_performRefresh(){return ad("not implemented")}}function Wp(n,e){rt("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class A_{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Q2._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new k3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iB(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,B.Z)(function*(){const r=yield tf(t,t.stsTokenManager.getToken(t.auth,e));return rt(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function x3(n){return Xk.apply(this,arguments)}(this,e)}reload(){return function O3(n){return r1.apply(this,arguments)}(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new A_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,B.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield K0(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,B.Z)(function*(){const t=yield e.getIdToken();return yield tf(e,function S3(n,e){return Qk.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,u,d,f,_,I;const b=null!==(r=t.displayName)&&void 0!==r?r:void 0,x=null!==(i=t.email)&&void 0!==i?i:void 0,k=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,$=null!==(u=t.photoURL)&&void 0!==u?u:void 0,Q=null!==(d=t.tenantId)&&void 0!==d?d:void 0,Z=null!==(f=t._redirectEventId)&&void 0!==f?f:void 0,Ae=null!==(_=t.createdAt)&&void 0!==_?_:void 0,Pe=null!==(I=t.lastLoginAt)&&void 0!==I?I:void 0,{uid:be,emailVerified:Ue,isAnonymous:gt,providerData:mt,stsTokenManager:pn}=t;rt(be&&pn,e,"internal-error");const ei=Z0.fromJSON(this.name,pn);rt("string"==typeof be,e,"internal-error"),Wp(b,e.name),Wp(x,e.name),rt("boolean"==typeof Ue,e,"internal-error"),rt("boolean"==typeof gt,e,"internal-error"),Wp(k,e.name),Wp($,e.name),Wp(Q,e.name),Wp(Z,e.name),Wp(Ae,e.name),Wp(Pe,e.name);const ku=new A_({uid:be,auth:e,email:x,emailVerified:Ue,displayName:b,isAnonymous:gt,photoURL:$,phoneNumber:k,tenantId:Q,stsTokenManager:ei,createdAt:Ae,lastLoginAt:Pe});return mt&&Array.isArray(mt)&&(ku.providerData=mt.map(NP=>Object.assign({},NP))),Z&&(ku._redirectEventId=Z),ku}static _fromIdTokenResponse(e,t,r=!1){return(0,B.Z)(function*(){const i=new Z0;i.updateFromServerResponse(t);const s=new A_({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield K0(s),s})()}}const sB=new Map;function nf(n){qp(n instanceof Function,"Expected a class definition");let e=sB.get(n);return e?(qp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sB.set(n,e),e)}const oB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,B.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,B.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,B.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,B.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function rR(n,e,t){return`firebase:${n}:${e}:${t}`}class xI{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=rR(this.userKey,i.apiKey,s),this.fullPersistenceKey=rR("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,B.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?A_._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,B.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,B.Z)(function*(){if(!t.length)return new xI(nf(oB),e,r);const i=(yield Promise.all(t.map(function(){var _=(0,B.Z)(function*(I){if(yield I._isAvailable())return I});return function(I){return _.apply(this,arguments)}}()))).filter(_=>_);let s=i[0]||nf(oB);const u=rR(r,e.config.apiKey,e.name);let d=null;for(const _ of t)try{const I=yield _._get(u);if(I){const b=A_._fromJSON(e,I);_!==s&&(d=b),s=_;break}}catch{}const f=i.filter(_=>_._shouldAllowMigration);return s._shouldAllowMigration&&f.length?(s=f[0],d&&(yield s._set(u,d.toJSON())),yield Promise.all(t.map(function(){var _=(0,B.Z)(function*(I){if(I!==s)try{yield I._remove(u)}catch{}});return function(I){return _.apply(this,arguments)}}())),new xI(s,e,r)):new xI(s,e,r)})()}}function aB(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hB(e))return"Blackberry";if(fB(e))return"Webos";if(s1(e))return"Safari";if((e.includes("chrome/")||cB(e))&&!e.includes("edge/"))return"Chrome";if(dB(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function uB(n=(0,it.z$)()){return/firefox\//i.test(n)}function s1(n=(0,it.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cB(n=(0,it.z$)()){return/crios\//i.test(n)}function lB(n=(0,it.z$)()){return/iemobile/i.test(n)}function dB(n=(0,it.z$)()){return/android/i.test(n)}function hB(n=(0,it.z$)()){return/blackberry/i.test(n)}function fB(n=(0,it.z$)()){return/webos/i.test(n)}function iR(n=(0,it.z$)()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pB(n=(0,it.z$)()){return iR(n)||dB(n)||fB(n)||hB(n)||/windows phone/i.test(n)||lB(n)}function gB(n,e=[]){let t;switch(n){case"Browser":t=aB((0,it.z$)());break;case"Worker":t=`${aB((0,it.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wn.SDK_VERSION}/${r}`}function mB(n,e){return a1.apply(this,arguments)}function a1(){return a1=(0,B.Z)(function*(n,e){return Yr(n,"GET","/v2/recaptchaConfig",$r(n,e))}),a1.apply(this,arguments)}function yB(n){return void 0!==n&&void 0!==n.enterprise}class vB{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function u1(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=od("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function j3(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function IB(n){return`__${n}${Math.floor(1e6*Math.random())}`}class EB{constructor(e){this.type="recaptcha-enterprise",this.auth=Ts(e)}verify(e="verify",t=!1){var r=this;return(0,B.Z)(function*(){function s(){return s=(0,B.Z)(function*(d){if(!t){if(null==d.tenantId&&null!=d._agentRecaptchaConfig)return d._agentRecaptchaConfig.siteKey;if(null!=d.tenantId&&void 0!==d._tenantRecaptchaConfigs[d.tenantId])return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(function(){var f=(0,B.Z)(function*(_,I){mB(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(void 0!==b.recaptchaKey){const x=new vB(b);return null==d.tenantId?d._agentRecaptchaConfig=x:d._tenantRecaptchaConfigs[d.tenantId]=x,_(x.siteKey)}I(new Error("recaptcha Enterprise site key undefined"))}).catch(b=>{I(b)})});return function(_,I){return f.apply(this,arguments)}}())}),s.apply(this,arguments)}function u(d,f,_){const I=window.grecaptcha;yB(I)?I.enterprise.ready(()=>{I.enterprise.execute(d,{action:e}).then(b=>{f(b)}).catch(()=>{f("NO_RECAPTCHA")})}):_(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((d,f)=>{(function i(d){return s.apply(this,arguments)})(r.auth).then(_=>{if(!t&&yB(window.grecaptcha))u(_,d,f);else{if(typeof window>"u")return void f(new Error("RecaptchaVerifier is only supported in browser"));u1("https://www.google.com/recaptcha/enterprise.js?render="+_).then(()=>{u(_,d,f)}).catch(I=>{f(I)})}}).catch(_=>{f(_)})})})()}}class W3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((u,d)=>{try{u(e(s))}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,B.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class K3{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wB(this),this.idTokenSubscription=new wB(this),this.beforeStateQueue=new W3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=nf(t)),this._initializationPromise=this.queue((0,B.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield xI.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,B.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,B.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,u=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,f=s?._redirectEventId,_=yield t.tryRedirectSignIn(e);(!d||d===f)&&_?.user&&(s=_.user,u=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(u)try{yield t.beforeStateQueue.runMiddleware(s)}catch(d){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return rt(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,B.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,B.Z)(function*(){try{yield K0(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function A3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,B.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,B.Z)(function*(){const r=e?(0,it.m9)(e):null;return r&&rt(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,B.Z)(function*(){if(!r._deleted)return e&&rt(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,B.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,B.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,B.Z)(function*(){yield t.assertedPersistence.setPersistence(nf(e))}))}initializeRecaptchaConfig(){var e=this;return(0,B.Z)(function*(){const t=yield mB(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new vB(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new EB(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new it.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,B.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,B.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&nf(e)||t._popupRedirectResolver;rt(r,t,"argument-error"),t.redirectPersistenceManager=yield xI.create(t,[nf(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,B.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,B.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,B.Z)(function*(){if(e===t.currentUser)return t.queue((0,B.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),u=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(u,this,"internal-error"),u.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,B.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,B.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const s=yield e._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r})()}_getAppCheckToken(){var e=this;return(0,B.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function w3(n,...e){eR.logLevel<=ms.in.WARN&&eR.warn(`Auth (${wn.SDK_VERSION}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Ts(n){return(0,it.m9)(n)}class wB{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,it.ne)(t=>this.observer=t)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function TB(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AB(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class e4{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ad("not implemented")}_getIdTokenResponse(e){return ad("not implemented")}_linkToIdToken(e,t){return ad("not implemented")}_getReauthenticationResolver(e){return ad("not implemented")}}function rf(n,e){return b1.apply(this,arguments)}function b1(){return b1=(0,B.Z)(function*(n,e){return function ef(n,e,t,r){return Zk.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",$r(n,e))}),b1.apply(this,arguments)}class Zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class p4 extends Zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,B.Z)(function*(){const s=yield A_._fromIdTokenResponse(e,r,i),u=SB(r);return new Nu({user:s,providerId:u,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,B.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=SB(r);return new Nu({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function SB(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class cR extends it.ZR{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cR.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new cR(e,t,r,i)}}function RB(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?cR._fromErrorAndOperation(n,s,e,r):s})}function O1(){return O1=(0,B.Z)(function*(n,e,t=!1){const r=yield tf(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Nu._forOperation(n,"link",r)}),O1.apply(this,arguments)}function L1(){return L1=(0,B.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield tf(n,RB(r,i,e,n),t);rt(s.idToken,r,"internal-error");const u=nR(s.idToken);rt(u,r,"internal-error");const{sub:d}=u;return rt(n.uid===d,r,"user-mismatch"),Nu._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&oa(r,"user-mismatch"),s}}),L1.apply(this,arguments)}function V1(){return V1=(0,B.Z)(function*(n,e,t=!1){const r="signIn",i=yield RB(n,r,e),s=yield Nu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),V1.apply(this,arguments)}const dR="__sak";class kB{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dR,"1"),this.storage.removeItem(dR),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const L4=(()=>{class n extends kB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function k4(){const n=(0,it.z$)();return s1(n)||iR(n)}()&&function $3(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pB(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((d,f,_)=>{this.notifyListeners(d,_)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(i);if(t.newValue!==d)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);!function B3(){return(0,it.w1)()&&10===document.documentMode}()||u===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,B.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,B.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,B.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),OB=(()=>{class n extends kB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let U4=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,B.Z)(function*(){const i=t,{eventId:s,eventType:u,data:d}=i.data,f=r.handlersMap[u];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:u});const _=Array.from(f).map(function(){var b=(0,B.Z)(function*(x){return x(i.origin,d)});return function(x){return b.apply(this,arguments)}}()),I=yield function V4(n){return Promise.all(n.map(function(){var e=(0,B.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(_);i.ports[0].postMessage({status:"done",eventId:s,eventType:u,response:I})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function pO(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class B4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,B.Z)(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let u,d;return new Promise((f,_)=>{const I=pO("",20);s.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);d={messageChannel:s,onMessage(x){const k=x;if(k.data.eventId===I)switch(k.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),f(k.data.response);break;default:clearTimeout(b),clearTimeout(u),_(new Error("invalid_response"))}}},i.handlers.add(d),s.port1.addEventListener("message",d.onMessage),i.target.postMessage({eventType:e,eventId:I,data:t},[s.port2])}).finally(()=>{d&&i.removeMessageHandler(d)})})()}}function Oi(){return window}function gO(){return typeof Oi().WorkerGlobalScope<"u"&&"function"==typeof Oi().importScripts}function mO(){return(mO=(0,B.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const FB="firebaseLocalStorageDb",hR="firebaseLocalStorage",LB="fbase_key";class X0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fR(n,e){return n.transaction([hR],e?"readwrite":"readonly").objectStore(hR)}function _O(){const n=indexedDB.open(FB,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hR,{keyPath:LB})}catch(i){t(i)}}),n.addEventListener("success",(0,B.Z)(function*(){const r=n.result;r.objectStoreNames.contains(hR)?e(r):(r.close(),yield function q4(){const n=indexedDB.deleteDatabase(FB);return new X0(n).toPromise()}(),e(yield _O()))}))})}function VB(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,B.Z)(function*(n,e,t){const r=fR(n,!0).put({[LB]:e,value:t});return new X0(r).toPromise()}),yO.apply(this,arguments)}function vO(){return vO=(0,B.Z)(function*(n,e){const t=fR(n,!1).get(e),r=yield new X0(t).toPromise();return void 0===r?null:r.value}),vO.apply(this,arguments)}function UB(n,e){const t=fR(n,!0).delete(e);return new X0(t).toPromise()}const Q4=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,B.Z)(function*(){return t.db||(t.db=yield _O()),t.db})()}_withRetries(t){var r=this;return(0,B.Z)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,B.Z)(function*(){return gO()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,B.Z)(function*(){t.receiver=U4._getInstance(function z4(){return gO()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,B.Z)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,B.Z)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,B.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function G4(){return mO.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new B4(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,B.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function j4(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,B.Z)(function*(){try{if(!indexedDB)return!1;const t=yield _O();return yield VB(t,dR,"1"),yield UB(t,dR),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,B.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,B.Z)(function*(){return i._withPendingWrite((0,B.Z)(function*(){return yield i._withRetries(s=>VB(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,B.Z)(function*(){const i=yield r._withRetries(s=>function W4(n,e){return vO.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,B.Z)(function*(){return r._withPendingWrite((0,B.Z)(function*(){return yield r._withRetries(i=>UB(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,B.Z)(function*(){const r=yield t._withRetries(u=>{const d=fR(u,!1).getAll();return new X0(d).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:u,value:d}of r)s.add(u),JSON.stringify(t.localCache[u])!==JSON.stringify(d)&&(t.notifyListeners(u,d),i.push(u));for(const u of Object.keys(t.localCache))t.localCache[u]&&!s.has(u)&&(t.notifyListeners(u,null),i.push(u));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,B.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();IB("rcb"),new H0(3e4,6e4);class SO extends e4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function h6(n){return function MB(n,e){return V1.apply(this,arguments)}(n.auth,new SO(n),n.bypassAuthState)}function f6(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),function xB(n,e){return L1.apply(this,arguments)}(t,new SO(n),n.bypassAuthState)}function p6(n){return RO.apply(this,arguments)}function RO(){return RO=(0,B.Z)(function*(n){const{auth:e,user:t}=n;return rt(t,e,"internal-error"),function k1(n,e){return O1.apply(this,arguments)}(t,new SO(n),n.bypassAuthState)}),RO.apply(this,arguments)}class g6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,B.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,B.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:u,error:d,type:f}=e;if(d)return void t.reject(d);const _={auth:t.auth,requestUri:r,sessionId:i,tenantId:u||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(f)(_))}catch(I){t.reject(I)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h6;case"linkViaPopup":case"linkViaRedirect":return p6;case"reauthViaPopup":case"reauthViaRedirect":return f6;default:oa(this.auth,"internal-error")}}resolve(e){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new H0(2e3,1e4);const m6="pendingRedirect",eA=new Map;class _6 extends g6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,B.Z)(function*(){let r=eA.get(t.auth._key());if(!r){try{const s=(yield function y6(n,e){return kO.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}eA.set(t.auth._key(),r)}return t.bypassAuthState||eA.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,B.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,B.Z)(function*(){})()}cleanUp(){}}function kO(){return kO=(0,B.Z)(function*(n,e){const t=function GB(n){return rR(m6,n.config.apiKey,n.name)}(e),r=function $B(n){return nf(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),kO.apply(this,arguments)}function v6(n,e){eA.set(n._key(),e)}function jB(n,e){return $O.apply(this,arguments)}function $O(){return $O=(0,B.Z)(function*(n,e,t=!1){const r=Ts(n),i=function D_(n,e){return e?nf(e):(rt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),u=yield new _6(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,yield r._persistUserIfCurrent(u.user),yield r._setRedirectUser(null,e)),u}),$O.apply(this,arguments)}class A6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function b6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qB(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qB(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(od(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(HB(e))}saveEventToCache(e){this.cachedEventUids.add(HB(e)),this.lastProcessedEventTime=Date.now()}}function HB(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qB({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function jO(){return jO=(0,B.Z)(function*(n,e={}){return Yr(n,"GET","/v1/projects",e)}),jO.apply(this,arguments)}const C6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;function zO(){return zO=(0,B.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function D6(n){return jO.apply(this,arguments)}(n);for(const t of e)try{if(P6(t))return}catch{}oa(n,"unauthorized-domain")}),zO.apply(this,arguments)}function P6(n){const e=z0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return""===u.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&u.hostname===r}if(!S6.test(t))return!1;if(C6.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const x6=new H0(3e4,6e4);function WB(){const n=Oi().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let gR=null;const k6=new H0(5e3,15e3),O6="__/auth/iframe",F6="emulator/auth/iframe",L6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U6(n){const e=n.config;rt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qk(e,F6):`https://${n.config.authDomain}/${O6}`,r={apiKey:e.apiKey,appName:n.name,v:wn.SDK_VERSION},i=V6.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${(0,it.xO)(r).slice(1)}`}function HO(){return HO=(0,B.Z)(function*(n){const e=yield function N6(n){return gR=gR||function M6(n){return new Promise((e,t)=>{var r,i,s;function u(){WB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WB(),t(od(n,"network-request-failed"))},timeout:x6.get()})}if(null!==(i=null===(r=Oi().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=Oi().gapi)||void 0===s||!s.load){const d=IB("iframefcb");return Oi()[d]=()=>{gapi.load?u():t(od(n,"network-request-failed"))},u1(`https://apis.google.com/js/api.js?onload=${d}`).catch(f=>t(f))}u()}}).catch(e=>{throw gR=null,e})}(n),gR}(n),t=Oi().gapi;return rt(t,n,"internal-error"),e.open({where:document.body,url:U6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L6,dontclear:!0},r=>new Promise(function(){var i=(0,B.Z)(function*(s,u){yield r.restyle({setHideOnLeave:!1});const d=od(n,"network-request-failed"),f=Oi().setTimeout(()=>{u(d)},k6.get());function _(){Oi().clearTimeout(f),s(r)}r.ping(_).then(_,()=>{u(d)})});return function(s,u){return i.apply(this,arguments)}}()))}),HO.apply(this,arguments)}const $6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class KB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const K6="__/auth/handler",Z6="emulator/auth/handler",Q6=encodeURIComponent("fac");function ZB(n,e,t,r,i,s){return qO.apply(this,arguments)}function qO(){return qO=(0,B.Z)(function*(n,e,t,r,i,s){rt(n.config.authDomain,n,"auth-domain-config-required"),rt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:wn.SDK_VERSION,eventId:i};if(e instanceof Zp){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",(0,it.xb)(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,b]of Object.entries(s||{}))u[I]=b}if(e instanceof p4){const I=e.getScopes().filter(b=>""!==b);I.length>0&&(u.scopes=I.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const I of Object.keys(d))void 0===d[I]&&delete d[I];const f=yield n._getAppCheckToken(),_=f?`#${Q6}=${encodeURIComponent(f)}`:"";return`${function Y6({config:n}){return n.emulator?qk(n,Z6):`https://${n.authDomain}/${K6}`}(n)}?${(0,it.xO)(d).slice(1)}${_}`}),qO.apply(this,arguments)}const WO="webStorageSupport",X6=class J6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OB,this._completeRedirectFn=jB,this._overrideRedirectResult=v6}_openPopup(e,t,r,i){var s=this;return(0,B.Z)(function*(){var u;qp(null===(u=s.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()");const d=yield ZB(e,t,r,z0(),i);return function q6(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},$6),{width:r.toString(),height:i.toString(),top:s,left:u}),_=(0,it.z$)().toLowerCase();t&&(d=cB(_)?"_blank":t),uB(_)&&(e=e||"http://localhost",f.scrollbars="yes");const I=Object.entries(f).reduce((x,[k,$])=>`${x}${k}=${$},`,"");if(function U3(n=(0,it.z$)()){var e;return iR(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(_)&&"_self"!==d)return function W6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",d),new KB(null);const b=window.open(e||"",d,I);rt(b,n,"popup-blocked");try{b.focus()}catch{}return new KB(b)}(e,d,pO())})()}_openRedirect(e,t,r,i){var s=this;return(0,B.Z)(function*(){return yield s._originValidation(e),function $4(n){Oi().location.href=n}(yield ZB(e,t,r,z0(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(qp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,B.Z)(function*(){const r=yield function B6(n){return HO.apply(this,arguments)}(e),i=new A6(e);return r.register("authEvent",s=>(rt(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WO,{type:WO},i=>{var s;const u=null===(s=i?.[0])||void 0===s?void 0:s[WO];void 0!==u&&t(!!u),oa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function R6(n){return zO.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pB()||s1()||iR()}};var JB="@firebase/auth";class eW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,B.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const iW=(0,it.Pz)("authIdTokenMaxAge")||300;let e$=null;const sW=n=>function(){var e=(0,B.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>iW)return;const s=r?.token;e$!==s&&(e$=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function oW(n=(0,wn.getApp)()){const e=(0,wn._getProvider)(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Z3(n,e){const t=(0,wn._getProvider)(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if((0,it.vZ)(s,e??{}))return i;oa(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:X6,persistence:[Q4,L4,OB]}),r=(0,it.Pz)("authTokenSyncURL");if(r){const s=sW(r);(function R4(n,e,t){(0,it.m9)(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function S4(n,e,t,r){(0,it.m9)(n).onIdTokenChanged(e,t,r)}(t,u=>s(u))}const i=(0,it.q4)("auth");return i&&function Y3(n,e,t){const r=Ts(n);rt(r._canInitEmulator,r,"emulator-config-failed"),rt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,s=TB(e),{host:u,port:d}=function J3(n){const e=TB(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:AB(r.substr(s.length+1))}}{const[s,u]=r.split(":");return{host:s,port:AB(u)}}}(e);r.config.emulator={url:`${s}//${u}${null===d?"":`:${d}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:d,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function X3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function nW(n){(0,wn._registerComponent)(new xl.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;rt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gB(n)},_=new K3(r,i,s,f);return function Q3(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nf);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,wn._registerComponent)(new xl.wA("auth-internal",e=>{const t=Ts(e.getProvider("auth").getImmediate());return new eW(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,wn.registerVersion)(JB,"1.1.0",function tW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,wn.registerVersion)(JB,"1.1.0","esm2017")}("Browser");var aW=O(3019),_R=O(3093),uW=O(4552);class cW extends rh.x{constructor(e=1/0,t=1/0,r=uW.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let f=1;f<r.length&&r[f]<=u;f+=2)d=f;d&&r.splice(0,d+1)}}}var lW=O(3020);function t$(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,lW.B)({connector:()=>new cW(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function n$(n,e){return(0,Yf.m)(e)?(0,Ri.w)(()=>n,e):(0,Ri.w)(()=>n)}var ZO=O(5137),Gr=O(2793),Sc=O(6304),C_=O(4097);class NI{constructor(e){return e}}class r${constructor(){return(0,C_.C6)()}}const QO=new p.OlP("angularfire2._apps"),hW={provide:NI,useFactory:function dW(n){return n&&1===n.length?n[0]:new NI((0,C_.Mq)())},deps:[[new p.FiY,QO]]},fW={provide:r$,deps:[[new p.FiY,QO]]};function pW(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new NI(r)}}let gW=(()=>{class n{constructor(t){(0,C_.KN)("angularfire",Gr.q4.full,"core"),(0,C_.KN)("angularfire",Gr.q4.full,"app"),(0,C_.KN)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[hW,fW]}),n})();function mW(n,...e){return{ngModule:gW,providers:[{provide:QO,useFactory:pW(n),multi:!0,deps:[p.R0b,p.zs3,Gr.HU,...e]}]}}const _W=(0,Gr.u3)(C_.ZF,!0),YO=new Map,i$={activated:!1,tokenObservers:[]},yW={initialized:!1,enabled:!1};function Jr(n){return YO.get(n)||Object.assign({},i$)}function yR(){return yW}const JO="https://content-firebaseappcheck.googleapis.com/v1",wW="exchangeDebugToken",s$={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class AW{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,B.Z)(function*(){t.stop();try{t.pending=new it.BH,yield function bW(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new it.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ls=new it.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XO(n){if(!Jr(n).activated)throw Ls.create("use-before-activation",{appName:n.name})}function ER(n,e){return tF.apply(this,arguments)}function tF(){return tF=(0,B.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const b=yield i.getHeartbeatsHeader();b&&(r["X-Firebase-Client"]=b)}const s={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,s)}catch(b){throw Ls.create("fetch-network-error",{originalErrorMessage:b?.message})}if(200!==u.status)throw Ls.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(b){throw Ls.create("fetch-parse-error",{originalErrorMessage:b?.message})}const f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Ls.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const _=1e3*Number(f[1]),I=Date.now();return{token:d.token,expireTimeMillis:I+_,issuedAtTimeMillis:I}}),tF.apply(this,arguments)}function o$(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${JO}/projects/${t}/apps/${r}:${wW}?key=${i}`,body:{debug_token:e}}}const RW="firebase-app-check-database",PW=1,tA="firebase-app-check-store";let wR=null;function nF(){return nF=(0,B.Z)(function*(n,e){const r=(yield function u$(){return wR||(wR=new Promise((n,e)=>{try{const t=indexedDB.open(RW,PW);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ls.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(tA,{keyPath:"compositeKey"})}}catch(t){e(Ls.create("storage-open",{originalErrorMessage:t?.message}))}}),wR)}()).transaction(tA,"readwrite"),s=r.objectStore(tA).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=f=>{u()},r.onerror=f=>{var _;d(Ls.create("storage-set",{originalErrorMessage:null===(_=f.target.error)||void 0===_?void 0:_.message}))}})}),nF.apply(this,arguments)}const nA=new ms.Yd("@firebase/app-check");function sF(n,e){return(0,it.hl)()?function MW(n,e){return function c$(n,e){return nF.apply(this,arguments)}(function d$(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{nA.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function aF(){return yR().enabled}function uF(){return cF.apply(this,arguments)}function cF(){return cF=(0,B.Z)(function*(){const n=yR();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),cF.apply(this,arguments)}const VW={error:"UNKNOWN_ERROR"};function UW(n){return it.US.encodeString(JSON.stringify(n),!1)}function TR(n){return lF.apply(this,arguments)}function lF(){return lF=(0,B.Z)(function*(n,e=!1){const t=n.app;XO(t);const r=Jr(t);let s,i=r.token;if(i&&!kI(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(kI(f)?i=f:yield sF(t,void 0))}if(!e&&i&&kI(i))return{token:i.token};let d,u=!1;if(aF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ER(o$(t,yield uF()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const f=yield r.exchangeTokenPromise;return yield sF(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield Jr(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?nA.warn(f.message):nA.error(f),s=f}return i?s?d=kI(i)?{token:i.token,internalError:s}:g$(s):(d={token:i.token},r.token=i,yield sF(t,i)):d=g$(s),u&&function p$(n,e){const t=Jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),lF.apply(this,arguments)}function dF(){return dF=(0,B.Z)(function*(n){const e=n.app;XO(e);const{provider:t}=Jr(e);if(aF()){const r=yield uF(),{token:i}=yield ER(o$(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),dF.apply(this,arguments)}function fF(n,e){const t=Jr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function f$(n){const{app:e}=n,t=Jr(e);let r=t.tokenRefresher;r||(r=function BW(n){const{app:e}=n;return new AW((0,B.Z)(function*(){let r;if(r=Jr(e).token?yield TR(n,!0):yield TR(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},s$.RETRIAL_MIN_WAIT,s$.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kI(n){return n.expireTimeMillis-Date.now()>0}function g$(n){return{token:UW(VW),error:n}}class $W{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Jr(this.app);for(const t of e)fF(this.app,t.next);return Promise.resolve()}}const T$="app-check-internal";!function t5(){(0,wn._registerComponent)(new xl.wA("app-check",n=>function GW(n,e){return new $W(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(T$).initialize()})),(0,wn._registerComponent)(new xl.wA(T$,n=>function jW(n){return{getToken:e=>TR(n,e),getLimitedUseToken:()=>function h$(n){return dF.apply(this,arguments)}(n),addTokenListener:e=>function hF(n,e,t,r){const{app:i}=n,s=Jr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&kI(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),f$(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>f$(n))}(n,"INTERNAL",e),removeTokenListener:e=>fF(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wn.registerVersion)("@firebase/app-check","0.8.0")}();class bR{constructor(){return(0,Gr.vb)("app-check")}}typeof window<"u"&&window;var o5=O(120);const u5=new p.OlP("angularfire2.auth.use-emulator"),c5=new p.OlP("angularfire2.auth.settings"),l5=new p.OlP("angularfire2.auth.tenant-id"),d5=new p.OlP("angularfire2.auth.langugage-code"),h5=new p.OlP("angularfire2.auth.use-device-language"),f5=new p.OlP("angularfire.auth.persistence");let DR=(()=>{class n{constructor(t,r,i,s,u,d,f,_,I,b,x,k){const $=new rh.x,Q=(0,Vt.of)(void 0).pipe((0,_R.Q)(u.outsideAngular),(0,Ri.w)(()=>s.runOutsideAngular(()=>O.e(661).then(O.bind(O,8661)))),(0,rn.U)(()=>(0,Sc.on)(t,s,r)),(0,rn.U)(Z=>((n,e,t,r,i,s,u,d)=>(0,Sc.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),u)for(const[_,I]of Object.entries(u))f.settings[_]=I;return d&&f.setPersistence(d),f},[t,r,i,s,u,d]))(Z,s,d,_,I,b,f,x)),t$({bufferSize:1,refCount:!1}));if(Wa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Vt.of)(null);else{Q.pipe(sc()).subscribe();const Ae=Q.pipe((0,Ri.w)(Ue=>Ue.getRedirectResult().then(gt=>gt,()=>null)),Gr.iC,t$({bufferSize:1,refCount:!1})),Pe=Q.pipe((0,Ri.w)(Ue=>new Zr.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Ue.onAuthStateChanged(mt=>gt.next(mt),mt=>gt.error(mt),()=>gt.complete()))})))),be=Q.pipe((0,Ri.w)(Ue=>new Zr.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Ue.onIdTokenChanged(mt=>gt.next(mt),mt=>gt.error(mt),()=>gt.complete()))}))));this.authState=Ae.pipe(n$(Pe),(0,ZO.R)(u.outsideAngular),(0,_R.Q)(u.insideAngular)),this.user=Ae.pipe(n$(be),(0,ZO.R)(u.outsideAngular),(0,_R.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,Ri.w)(Ue=>Ue?(0,Rn.D)(Ue.getIdToken()):(0,Vt.of)(null))),this.idTokenResult=this.user.pipe((0,Ri.w)(Ue=>Ue?(0,Rn.D)(Ue.getIdTokenResult()):(0,Vt.of)(null))),this.credential=(0,aW.T)(Ae,$,this.authState.pipe(ic(Ue=>!Ue))).pipe((0,rn.U)(Ue=>Ue?.user?Ue:null),(0,ZO.R)(u.outsideAngular),(0,_R.Q)(u.insideAngular))}return(0,Sc.pX)(this,Q,s,{spy:{apply:(Z,Ae,Pe)=>{(Z.startsWith("signIn")||Z.startsWith("createUser"))&&Pe.then(be=>$.next(be))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Sc.Dh),p.LFG(Sc.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gr.HU),p.LFG(u5,8),p.LFG(c5,8),p.LFG(l5,8),p.LFG(d5,8),p.LFG(h5,8),p.LFG(f5,8),p.LFG(bR,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),g5=(()=>{class n{constructor(){o5.Z.registerVersion("angularfire",Gr.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[DR]}),n})();var m5=O(6321),y5=O(3106);const b$="firebasestorage.googleapis.com",D$="storageBucket";class jr extends it.ZR{constructor(e,t,r=0){super(yF(e),`Firebase Storage: ${t} (${yF(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yF(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Pr=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Pr||{});function yF(n){return"storage/"+n}function vF(){return new jr(Pr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function C$(){return new jr(Pr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S$(){return new jr(Pr.CANCELED,"User canceled the upload/download.")}function R$(){return new jr(Pr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OI(n){return new jr(Pr.INVALID_ARGUMENT,n)}function P$(){return new jr(Pr.APP_DELETED,"The Firebase app was deleted.")}function x$(n){return new jr(Pr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rA(n,e){return new jr(Pr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function iA(n){throw new jr(Pr.INTERNAL_ERROR,"Internal error: "+n)}class oo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=oo.makeFromUrl(e,t)}catch{return new oo(e,"")}if(""===r.path)return r;throw function S5(n){return new jr(Pr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Ue){Ue.path_=decodeURIComponent(Ue.path)}const b=t.replace(/[.]/g,"\\."),be=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ue){"/"===Ue.path.charAt(Ue.path.length-1)&&(Ue.path_=Ue.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${b}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===b$?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Ue=0;Ue<be.length;Ue++){const gt=be[Ue],mt=gt.regex.exec(e);if(mt){let ei=mt[gt.indices.path];ei||(ei=""),r=new oo(mt[gt.indices.bucket],ei),gt.postModify(r);break}}if(null==r)throw function C5(n){return new jr(Pr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class N5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function CR(n){return"string"==typeof n||n instanceof String}function M$(n){return IF()&&n instanceof Blob}function IF(){return typeof Blob<"u"&&!(0,it.UG)()}function EF(n,e,t,r){if(r<e)throw OI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw OI(`Invalid value for '${n}'. Expected ${t} or less.`)}function sf(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function N$(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var FI=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(FI||{});function k$(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class U5{constructor(e,t,r,i,s,u,d,f,_,I,b,x=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=_,this.progressCallback_=I,this.connectionFactory_=b,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,$)=>{this.resolve_=k,this.reject_=$,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function F5(n){return void 0!==n}(f)?s():s(f)}catch(f){u(f)}else if(null!==d){const f=vF();f.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,f):f)}else u(i.canceled?this.appDelete_?P$():S$():C$())};this.canceled_?t(0,new SR(!1,null,!0)):this.backoffId_=function k5(n,e,t){let r=1,i=null,s=null,u=!1,d=0;function f(){return 2===d}let _=!1;function I(...Z){_||(_=!0,e.apply(null,Z))}function b(Z){i=setTimeout(()=>{i=null,n(k,f())},Z)}function x(){s&&clearTimeout(s)}function k(Z,...Ae){if(_)return void x();if(Z)return x(),void I.call(null,Z,...Ae);if(f()||u)return x(),void I.call(null,Z,...Ae);let be;r<64&&(r*=2),1===d?(d=2,be=0):be=1e3*(r+Math.random()),b(be)}let $=!1;function Q(Z){$||($=!0,x(),!_&&(null!==i?(Z||(d=2),clearTimeout(i),b(0)):Z||(d=1)))}return b(0),s=setTimeout(()=>{u=!0,Q(!0)},t),Q}((r,i)=>{if(i)return void r(!1,new SR(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const d=s.getErrorCode()===FI.NO_ERROR,f=s.getStatus();if(!d||k$(f,this.additionalRetryCodes_)&&this.retry){const I=s.getErrorCode()===FI.ABORT;return void r(!1,new SR(!1,null,I))}const _=-1!==this.successCodes_.indexOf(f);r(!0,new SR(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function O5(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class SR{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function q5(...n){const e=function H5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(IF())return new Blob(n);throw new jr(Pr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const La={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wF{constructor(e,t){this.data=e,this.contentType=t||null}}function TF(n,e){switch(n){case La.RAW:return new wF(O$(e));case La.BASE64:case La.BASE64URL:return new wF(F$(n,e));case La.DATA_URL:return new wF(function Q5(n){const e=new L$(n);return e.base64?F$(La.BASE64,e.rest):function Z5(n){let e;try{e=decodeURIComponent(n)}catch{throw rA(La.DATA_URL,"Malformed data URL.")}return O$(e)}(e.rest)}(e),function Y5(n){return new L$(n).contentType}(e))}throw vF()}function O$(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function F$(n,e){switch(n){case La.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw rA(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case La.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw rA(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function K5(n){if(typeof atob>"u")throw function M5(n){return new jr(Pr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:rA(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class L${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw rA(La.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function J5(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ud{constructor(e,t){let r=0,i="";M$(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(M$(this.data_)){const i=function W5(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ud(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ud(r,!0)}}static getBlob(...e){if(IF()){const t=e.map(r=>r instanceof ud?r.data_:r);return new ud(q5.apply(null,t))}{const t=e.map(u=>CR(u)?TF(La.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[s++]=u[d]}),new ud(i,!0)}}uploadData(){return this.data_}}function AF(n){let e;try{e=JSON.parse(n)}catch{return null}return function V5(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function V$(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function t9(n,e){return e}class No{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||t9}}let RR=null;function sA(){if(RR)return RR;const n=[];n.push(new No("bucket")),n.push(new No("generation")),n.push(new No("metageneration")),n.push(new No("name","fullPath",!0));const t=new No("name");t.xform=function e(s,u){return function n9(n){return!CR(n)||n.length<2?n:V$(n)}(u)},n.push(t);const i=new No("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new No("timeCreated")),n.push(new No("updated")),n.push(new No("md5Hash",null,!0)),n.push(new No("cacheControl",null,!0)),n.push(new No("contentDisposition",null,!0)),n.push(new No("contentEncoding",null,!0)),n.push(new No("contentLanguage",null,!0)),n.push(new No("contentType",null,!0)),n.push(new No("metadata","customMetadata",!0)),RR=n,RR}function U$(n,e,t){const r=AF(e);return null===r?null:function i9(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function r9(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new oo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function bF(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const B$="prefixes",$$="items";class cd{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ld(n){if(!n)throw vF()}function PR(n,e){return function t(r,i){const s=U$(n,i,e);return ld(null!==s),s}}function LI(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function b5(){return new jr(Pr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function A5(){return new jr(Pr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function T5(n){return new jr(Pr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function D5(n){return new jr(Pr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function oA(n){const e=LI(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function w5(n){return new jr(Pr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function G$(n,e,t){const i=sf(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new cd(i,"GET",PR(n,t),u);return d.errorHandler=oA(e),d}function l9(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=sf(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,I=new cd(d,"GET",function u9(n,e){return function t(r,i){const s=function a9(n,e,t){const r=AF(t);return null===r?null:function o9(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[B$])for(const i of t[B$]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new oo(e,s));r.prefixes.push(u)}if(t[$$])for(const i of t[$$]){const s=n._makeStorageReference(new oo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return ld(null!==s),s}}(n,e.bucket),_);return I.urlParams=s,I.errorHandler=LI(e),I}function z$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function p9(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function H$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let be="";for(let Ue=0;Ue<2;Ue++)be+=Math.random().toString().slice(2);return be}();u["Content-Type"]="multipart/related; boundary="+f;const _=z$(e,r,i),I=bF(_,t),k=ud.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+f+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===k)throw R$();const $={name:_.fullPath},Q=sf(s,n.host,n._protocol),Ae=n.maxUploadRetryTime,Pe=new cd(Q,"POST",PR(n,t),Ae);return Pe.urlParams=$,Pe.headers=u,Pe.body=k.uploadData(),Pe.errorHandler=LI(e),Pe}class xR{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function DF(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ld(!1)}return ld(!!t&&-1!==(e||["active"]).indexOf(t)),t}const y9={STATE_CHANGED:"state_changed"},ko={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CF(n){switch(n){case"running":case"pausing":case"canceling":return ko.RUNNING;case"paused":return ko.PAUSED;case"success":return ko.SUCCESS;case"canceled":return ko.CANCELED;default:return ko.ERROR}}class v9{constructor(e,t,r){if(function L5(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function VI(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let W$=null;class I9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=FI.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=FI.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=FI.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw iA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class E9 extends I9{initXhr(){this.xhr_.responseType="text"}}function Rc(){return W$?W$():new E9}class K${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=sA(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Pr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(k$(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=C$()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Pr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function g9(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=z$(e,r,i),d={name:u.fullPath},f=sf(s,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},b=bF(u,t),$=new cd(f,"POST",function k(Q){let Z;DF(Q);try{Z=Q.getResponseHeader("X-Goog-Upload-URL")}catch{ld(!1)}return ld(CR(Z)),Z},n.maxUploadRetryTime);return $.urlParams=d,$.headers=I,$.body=b,$.errorHandler=LI(e),$}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function m9(n,e,t,r){const f=new cd(t,"POST",function s(_){const I=DF(_,["active","final"]);let b=null;try{b=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ld(!1)}b||ld(!1);const x=Number(b);return ld(!isNaN(x)),new xR(x,r.size(),"final"===I)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=LI(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Rc,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xR(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function _9(n,e,t,r,i,s,u,d){const f=new xR(0,0);if(u?(f.current=u.current,f.total=u.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function P5(){return new jr(Pr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const _=f.total-f.current;let I=_;i>0&&(I=Math.min(I,i));const b=f.current;let k="";k=0===I?"finalize":_===I?"upload, finalize":"upload";const $={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${f.current}`},Q=r.slice(b,b+I);if(null===Q)throw R$();const be=new cd(t,"POST",function Z(Ue,gt){const mt=DF(Ue,["active","final"]),pn=f.current+I,ei=r.size();let ku;return ku="final"===mt?PR(e,s)(Ue,gt):null,new xR(pn,ei,"final"===mt,ku)},e.maxUploadRetryTime);return be.headers=$,be.body=Q.uploadData(),be.progressCallback=d||null,be.errorHandler=LI(n),be}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Rc,i,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=G$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=H$(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rc,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=S$(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=CF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new v9(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(CF(this._state)){case ko.SUCCESS:VI(this._resolve.bind(null,this.snapshot))();break;case ko.CANCELED:case ko.ERROR:VI(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(CF(this._state)){case ko.RUNNING:case ko.PAUSED:e.next&&VI(e.next.bind(e,this.snapshot))();break;case ko.SUCCESS:e.complete&&VI(e.complete.bind(e))();break;default:e.error&&VI(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class S_{constructor(e,t){this._service=e,this._location=t instanceof oo?t:oo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new S_(e,t)}get root(){const e=new oo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V$(this._location.path)}get storage(){return this._service}get parent(){const e=function X5(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new oo(this._location.bucket,e);return new S_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw x$(e)}}function Q$(n,e,t){return SF.apply(this,arguments)}function SF(){return SF=(0,B.Z)(function*(n,e,t){const i=yield Y$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Q$(n,e,i.nextPageToken))}),SF.apply(this,arguments)}function Y$(n,e){null!=e&&"number"==typeof e.maxResults&&EF("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=l9(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Rc)}function N9(n){n._throwIfRoot("getDownloadURL");const e=function d9(n,e,t){const i=sf(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new cd(i,"GET",function c9(n,e){return function t(r,i){const s=U$(n,i,e);return ld(null!==s),function s9(n,e,t,r){const i=AF(e);if(null===i||!CR(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(_=>{const b=n.fullPath;return sf("/b/"+u(n.bucket)+"/o/"+u(b),t,r)+N$({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=oA(e),d}(n.storage,n._location,sA());return n.storage.makeRequestWithTokens(e,Rc).then(t=>{if(null===t)throw function x5(){return new jr(Pr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function J$(n,e){const t=function e9(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new oo(n._location.bucket,t);return new S_(n.storage,r)}function X$(n,e){if(n instanceof RF){const t=n;if(null==t._bucket)throw function R5(){return new jr(Pr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D$+"' property when initializing the app?")}();const r=new S_(t,t._bucket);return null!=e?X$(r,e):r}return void 0!==e?J$(n,e):n}function L9(n,e){if(e&&function O9(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof RF)return function F9(n,e){return new S_(n,e)}(n,e);throw OI("To use ref(service, url), the first argument must be a Storage instance.")}return X$(n,e)}function eG(n,e){const t=e?.[D$];return null==t?null:oo.makeFromBucketSpec(t,n)}class RF{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=b$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?oo.makeFromBucketSpec(i,this._host):eG(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?oo.makeFromBucketSpec(this._url,e):eG(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,B.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,B.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new S_(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new N5(P$());{const u=function z5(n,e,t,r,i,s,u=!0){const d=N$(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function G5(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function B5(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function $5(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function j5(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new U5(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,B.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const tG="@firebase/storage",rG="storage";function U9(n,e,t){return function Z$(n,e,t){n._throwIfRoot("uploadBytes");const r=H$(n.storage,n._location,sA(),new ud(e,!0),t);return n.storage.makeRequestWithTokens(r,Rc).then(i=>({metadata:i,ref:n}))}(n=(0,it.m9)(n),e,t)}function iG(n){return function P9(n){const e={prefixes:[],items:[]};return Q$(n,e).then(()=>e)}(n=(0,it.m9)(n))}function sG(n){return N9(n=(0,it.m9)(n))}function oG(n){return function k9(n){n._throwIfRoot("deleteObject");const e=function f9(n,e){const r=sf(e.fullServerUrl(),n.host,n._protocol),d=new cd(r,"DELETE",function u(f,_){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=oA(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rc)}(n=(0,it.m9)(n))}function MR(n,e){return L9(n=(0,it.m9)(n),e)}function aG(n,e,t,r={}){!function V9(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,it.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function q9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RF(t,r,i,e,wn.SDK_VERSION)}!function W9(){(0,wn._registerComponent)(new xl.wA(rG,q9,"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(tG,"0.11.2",""),(0,wn.registerVersion)(tG,"0.11.2","esm2017")}();class NR{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class uG{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NR(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new NR(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new NR(u,this,this._ref)):{next:t.next?u=>t.next(new NR(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class cG{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new af(e,this._service))}get items(){return this._delegate.items.map(e=>new af(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class af{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function z9(n,e){return J$(n,e)}(this._delegate,e);return new af(t,this.storage)}get root(){return new af(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new af(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new uG(function B9(n,e,t){return function S9(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new K$(n,new ud(e),t)}(n=(0,it.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=La.RAW,r){this._throwIfRoot("putString");const i=TF(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new uG(new K$(this._delegate,new ud(i.data,!0),s),this)}listAll(){return iG(this._delegate).then(e=>new cG(e,this.storage))}list(e){return function j9(n,e){return Y$(n=(0,it.m9)(n),e)}(this._delegate,e||void 0).then(t=>new cG(t,this.storage))}getMetadata(){return function $9(n){return function x9(n){n._throwIfRoot("getMetadata");const e=G$(n.storage,n._location,sA());return n.storage.makeRequestWithTokens(e,Rc)}(n=(0,it.m9)(n))}(this._delegate)}updateMetadata(e){return function G9(n,e){return function M9(n,e){n._throwIfRoot("updateMetadata");const t=function h9(n,e,t,r){const s=sf(e.fullServerUrl(),n.host,n._protocol),d=bF(t,r),_=n.maxOperationRetryTime,I=new cd(s,"PATCH",PR(n,r),_);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=oA(e),I}(n.storage,n._location,e,sA());return n.storage.makeRequestWithTokens(t,Rc)}(n=(0,it.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return sG(this._delegate)}delete(){return this._throwIfRoot("delete"),oG(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw x$(e)}}class lG{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(dG(e))throw OI("ref() expected a child path but got a URL, use refFromURL instead.");return new af(MR(this._delegate,e),this)}refFromURL(e){if(!dG(e))throw OI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oo.makeFromUrl(e,this._delegate.host)}catch{throw OI("refFromUrl() expected a valid full URL but got an invalid one.")}return new af(MR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){aG(this._delegate,e,t,r)}}function dG(n){return/^[A-Za-z]+:\/\//.test(n)}function Y9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lG(t,r)}function hG(n){const e=function X9(n){return new Zr.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(function _5(n,e=m5.z){return(0,Xs.e)((t,r)=>{let i=null,s=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function f(){const _=u+n,I=e.now();if(I<_)return i=this.schedule(void 0,_-I),void r.add(i);d()}t.subscribe((0,Ki.x)(r,_=>{s=_,u=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,rn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function kR(n){return{getDownloadURL:()=>(0,Vt.of)(void 0).pipe(Gr.fc,(0,Ri.w)(()=>n.getDownloadURL()),Gr.iC),getMetadata:()=>(0,Vt.of)(void 0).pipe(Gr.fc,(0,Ri.w)(()=>n.getMetadata()),Gr.iC),delete:()=>(0,Rn.D)(n.delete()),child:e=>kR(n.child(e)),updateMetadata:e=>(0,Rn.D)(n.updateMetadata(e)),put:(e,t)=>hG(n.put(e,t)),putString:(e,t,r)=>hG(n.putString(e,t,r)),list:e=>(0,Rn.D)(n.list(e)),listAll:()=>(0,Rn.D)(n.listAll())}}!function J9(n){const e={TaskState:ko,TaskEvent:y9,StringFormat:La,Storage:lG,Reference:af};n.INTERNAL.registerComponent(new xl.wA("storage-compat",Y9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(y5.Z);const eK=new p.OlP("angularfire2.storageBucket"),tK=new p.OlP("angularfire2.storage.maxUploadRetryTime"),nK=new p.OlP("angularfire2.storage.maxOperationRetryTime"),rK=new p.OlP("angularfire2.storage.use-emulator");let iK=(()=>{class n{constructor(t,r,i,s,u,d,f,_,I,b){const x=(0,Sc.on)(t,u,r);this.storage=(0,Sc.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const k=u.runOutsideAngular(()=>x.storage(i||void 0)),$=I;return $&&k.useEmulator(...$),f&&k.setMaxUploadRetryTime(f),_&&k.setMaxOperationRetryTime(_),k},[f,_])}ref(t){return kR(this.storage.ref(t))}refFromURL(t){return kR(this.storage.refFromURL(t))}upload(t,r,i){return kR(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Sc.Dh),p.LFG(Sc.xv,8),p.LFG(eK,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gr.HU),p.LFG(tK,8),p.LFG(nK,8),p.LFG(rK,8),p.LFG(bR,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UI=(()=>{var n;class e{constructor(r,i,s){this.frauth=r,this.router=i,this.storage=s,this.frauth.onAuthStateChanged(u=>{u?(console.log("logged in",u.displayName),this.getAvatar(u.uid)):console.log("user logged out")})}register(r,i,s,u,d,f){var _=this;return(0,B.Z)(function*(){try{const b=(yield _.frauth.createUserWithEmailAndPassword(r,i)).user;if(!b)throw new Error("User creation failed.");const x=yield _.uploadAvatarStorage(f,b.uid);yield b.updateProfile({displayName:u,photoURL:x});const k={displayName:b.displayName??null,email:b.email??null,uid:b.uid??null,phoneNumber:d,photoURL:b.photoURL??null,providerId:b.providerId??null,department:s};return yield _.SetUserData(k),k}catch(I){throw console.error("Registration failed:",I),I}})()}signIn(r,i){var s=this;return(0,B.Z)(function*(){return s.frauth.signInWithEmailAndPassword(r,i)})()}signOut(){var r=this;return(0,B.Z)(function*(){r.frauth.signOut().then(()=>{r.router.navigate(["/login"])}).catch(i=>{console.error(i)})})()}getUser(){return oW().currentUser}SetUserData(r){(function a3(n,e,t){n=An(n,_i);const r=An(n.firestore,Er),i=Gk(n.converter,e,t);return j0(r,[Nk(DI(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])})(I_(AI(),"users",r.uid),r).then(()=>{console.log("User data stored in Firestore.")}).catch(u=>{console.error("Error storing user data:",u)})}uploadAvatarStorage(r,i){var s=this;return(0,B.Z)(function*(){const d=yield(yield s.storage.upload("avatars/"+i,r)).ref.getDownloadURL();return s.currentlySignedInUserAvatarURL=d,d})()}getAvatar(r){var i=this;return(0,B.Z)(function*(){try{const u=yield(yield i.storage.ref("avatars/"+r).getDownloadURL()).toPromise();i.currentlySignedInUserAvatarURL=u}catch{i.currentlySignedInUserAvatarURL="https://wbi.net.au/wp-content/uploads/2019/04/person-icon-silhouette-png-12-1-e1555982192147.png"}})()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(DR),p.LFG(Xi),p.LFG(iK))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function sK(n,e){1&n&&(p.TgZ(0,"div"),p._uU(1,"Please switch department or check your details"),p.qZA())}let oK=(()=>{var n;class e{constructor(r,i){this.auth=r,this.router=i,this.department="police",this.userDepartment="",this.show_password=!1,this.formsubmited=!1,this.db=AI(),this.loginForm=new Sr({email:new Vr("",[or.required,or.email]),password:new Vr("",or.required)})}logIn(){var r=this;return(0,B.Z)(function*(){if(r.loginForm.valid){r.formsubmited=!0;const i=r.loginForm.value.email,s=r.loginForm.value.password,u=V0(r.db,"users"),f=(yield H2(Uk(u,Bk("email","==",i)))).docs[0];if(f.exists()&&(r.userDepartment=f.data()?.department||""),r.userDepartment!=r.department)return;r.auth.signIn(i,s).then(function(){var _=(0,B.Z)(function*(I){r.router.navigate(["/"])});return function(I){return _.apply(this,arguments)}}()).catch(_=>{console.log(_)})}else console.log("Invalid")})()}showPassword(){this.show_password=!this.show_password}toggleSwitch(){this.formsubmited=!1;const r=document.getElementById("checkbox"),i=document.getElementById("formDiv");r.checked?(i.style.backgroundImage="url('assets/trg.jpg')",i.style.backgroundPosition="center",i.style.backgroundSize="cover",this.department="muncipality"):(i.style.backgroundImage="url('assets/MVR.jpg')",i.style.backgroundPosition="center",i.style.backgroundSize="cover",this.department="police")}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI),p.Y36(Xi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:4,consts:[["id","formDiv",1,"formDiv"],[1,"form",3,"formGroup","ngSubmit"],[1,"switch"],["id","checkbox","type","checkbox",3,"click"],[1,"slider"],["for","email"],["type","text","name","email","formControlName","email"],["for","password"],[1,"password-container"],["name","password","formControlName","password",3,"type"],["type","checkbox",3,"change"],["type","submit",3,"disabled"],[4,"ngIf"],["routerLink","/register"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"form",1),p.NdJ("ngSubmit",function(){return i.logIn()}),p.TgZ(2,"label",2)(3,"input",3),p.NdJ("click",function(){return i.toggleSwitch()}),p.qZA(),p._UZ(4,"span",4),p.qZA(),p.TgZ(5,"label",5),p._uU(6,"Username"),p.qZA(),p._UZ(7,"input",6),p.TgZ(8,"label",7),p._uU(9,"Password"),p.qZA(),p.TgZ(10,"div",8),p._UZ(11,"input",9),p.TgZ(12,"input",10),p.NdJ("change",function(){return i.showPassword()}),p.qZA()(),p.TgZ(13,"button",11),p._uU(14,"Log-In"),p.qZA(),p.YNc(15,sK,2,0,"div",12),p.TgZ(16,"h4"),p._uU(17,"Don't have an account?"),p.TgZ(18,"a",13),p._uU(19,"Click here to create one!"),p.qZA()()()()),2&r&&(p.xp6(1),p.Q6J("formGroup",i.loginForm),p.xp6(10),p.s9C("type",i.show_password?"text":"password"),p.xp6(2),p.Q6J("disabled",i.loginForm.invalid),p.xp6(2),p.Q6J("ngIf",i.formsubmited&&i.department!==i.userDepartment))},dependencies:[za,gp,ee,wo,dl,ks,Jo,Kf],styles:['.formDiv[_ngcontent-%COMP%]{margin:auto;display:flex;justify-content:center;align-items:center;height:50vh;width:50vh;border:2px solid black;border-radius:3px;background-image:url(MVR.3101c8d3caaf83bf.jpg);background-position:center;background-size:cover;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], label[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin-bottom:10px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border:0;border-radius:4px;font-weight:600;margin:0 auto;width:200px;padding:10px 0;box-shadow:0 0 20px #6855e033;transition:.4s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([disabled]):hover{color:#fff;box-shadow:0 0 20px #6855e099;background-color:#6855e0}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:24px}.password-container[_ngcontent-%COMP%]{position:relative}.password-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .password-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}.password-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;top:0%;right:5px;cursor:pointer}.switch[_ngcontent-%COMP%]{position:relative;display:block;width:60px;height:34px;text-align:center;margin:0 auto}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#2196f3;transition:.4s;border-radius:34px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2196f3}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}']}),e})();const aK=[{reason:"Huii",price:100},{reason:"Pedal",price:1e5}],uK=[{reason:"Pedal",price:3322},{reason:"Chukal malki deca",price:455555}];let fG=(()=>{var n;class e{constructor(r){this.authService=r,this.user=this.authService.getUser(),this.db=AI(),this.department=""}ngOnInit(){var r=this;return(0,B.Z)(function*(){try{if(r.user){const s=I_(V0(r.db,"users"),r.user.uid),u=yield JS(s);u.exists()?r.department=u.data()?.department||"":console.log("kur")}}catch(i){throw i}})()}signOut(){this.authService.signOut()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-navbar"]],decls:12,vars:4,consts:[[1,"navbar"],[1,"navbar-left"],["routerLink","/"],[1,"navbar-right"],["alt","",1,"avatar",2,"max-height","35px","width","40px",3,"routerLink","src"],[3,"click"]],template:function(r,i){1&r&&(p.TgZ(0,"div",0)(1,"div",1)(2,"a",2),p._uU(3,"Home"),p.qZA()(),p.TgZ(4,"div",3)(5,"h4"),p._uU(6),p.qZA(),p.TgZ(7,"h4"),p._uU(8),p.qZA(),p._UZ(9,"img",4),p.TgZ(10,"button",5),p.NdJ("click",function(){return i.signOut()}),p._uU(11,"Log out"),p.qZA()()()),2&r&&(p.xp6(6),p.hij("Username: ",null==i.user?null:i.user.displayName,""),p.xp6(2),p.hij("Department: ",i.department,""),p.xp6(1),p.MGl("routerLink","profile/",null==i.user?null:i.user.uid,""),p.Q6J("src",i.authService.currentlySignedInUserAvatarURL,p.LSH))},dependencies:[gp],styles:[".navbar[_ngcontent-%COMP%]{display:flex;margin:-8px;box-sizing:border-box;justify-content:space-between;background-color:beige;height:40px;padding:10px}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.navbar-left[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.navbar-right[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.navbar-right[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-right:10px}.avatar[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden;box-shadow:0 0 10px #0000004d;margin-right:10px}.avatar[_ngcontent-%COMP%]:hover{cursor:pointer;border:2px solid black}"]}),e})();function cK(n,e){if(1&n&&(p.TgZ(0,"option"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t.reason)}}function lK(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"option",20),p._uU(2,"Any"),p.qZA(),p.YNc(3,cK,2,1,"option",19),p.BQk()),2&n){const t=p.oxw();p.xp6(3),p.Q6J("ngForOf",t.policeReasons)}}function dK(n,e){if(1&n&&(p.TgZ(0,"option"),p._uU(1),p.qZA()),2&n){const t=e.$implicit;p.xp6(1),p.Oqu(t.reason)}}function hK(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"option",20),p._uU(2,"Any"),p.qZA(),p.YNc(3,dK,2,1,"option",19),p.BQk()),2&n){const t=p.oxw();p.xp6(3),p.Q6J("ngForOf",t.muncipalityReasons)}}function fK(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"ul")(1,"div",21)(2,"li"),p._uU(3),p.qZA(),p.TgZ(4,"li"),p._uU(5),p.qZA(),p.TgZ(6,"li"),p._uU(7),p.qZA(),p.TgZ(8,"li"),p._uU(9),p.qZA(),p.TgZ(10,"li"),p._uU(11),p.qZA(),p.TgZ(12,"li"),p._uU(13),p.qZA(),p.TgZ(14,"button",22),p.NdJ("click",function(){const s=p.CHM(t).$implicit,u=p.oxw();return p.KtG(u.onFineClick(s.documentId))}),p._uU(15,"Modify"),p.qZA(),p.TgZ(16,"button",22),p.NdJ("click",function(){const s=p.CHM(t).$implicit,u=p.oxw();return p.KtG(u.deleteDoc(s.documentId))}),p._uU(17,"Delete"),p.qZA(),p.TgZ(18,"li"),p._uU(19),p.qZA()()()}if(2&n){const t=e.$implicit;p.xp6(3),p.hij("Firstname: ",t.firstname,""),p.xp6(2),p.hij("Lastname: ",t.lastname,""),p.xp6(2),p.hij("Date: ",t.date,""),p.xp6(2),p.hij("Time: ",t.time,""),p.xp6(2),p.hij("Reason: ",t.reason,""),p.xp6(2),p.hij("Price: ",t.price,"\u043b\u0432."),p.xp6(6),p.hij("Last updated: ",t.timestamp.toDate(),"")}}let pK=(()=>{var n;class e{constructor(r,i){this.authService=r,this.router=i,this.selectedImages=[],this.policeReasons=aK,this.muncipalityReasons=uK,this.user=this.authService.getUser(),this.db=AI(),this.storage=function H9(n=(0,wn.getApp)(),e){n=(0,it.m9)(n);const r=(0,wn._getProvider)(n,rG).getImmediate({identifier:e}),i=(0,it.P0)("storage");return i&&aG(r,...i),r}(),this.department="",this.fines=[],this.fine=new Sr({firstname:new Vr("",[or.required]),lastname:new Vr("",or.required),date:new Vr("",or.required),time:new Vr("",or.required),price:new Vr("",or.required),reason:new Vr("",or.required),image:new Vr("",or.required)})}ngOnInit(){var r=this;return(0,B.Z)(function*(){try{if(r.user){const i=I_(r.db,"users",r.user.uid),s=yield JS(i);r.department=s.data()?.department||"",yield r.getFines()}}catch(i){throw i}})()}OnSubmit(){var r=this;return(0,B.Z)(function*(){if(r.user){const{firstname:i,lastname:s,date:u,time:d,reason:f,price:_}=r.fine.value,I={firstname:i,lastname:s,date:u,time:d,price:_,reason:f,image:"",issuer:r.user.displayName,issueruid:r.user.uid,timestamp:K2()},b=V0(r.db,"fines"),x=yield function c3(n,e){const t=An(n.firestore,Er),r=I_(n),i=Gk(n.converter,e);return j0(t,[Nk(DI(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(b,I);if(r.selectedImages.length>0){const k=[];for(const $ of r.selectedImages){const Q=MR(r.storage,`fine_images/${r.user?.uid}/${x.id}/${$.name}`);yield U9(Q,$),k.push(yield sG(Q))}yield q2(x,{image:k})}}else console.log("rku")})()}signOut(){this.authService.signOut()}getFines(){W2(Uk(V0(this.db,"fines"),Bk("issueruid","==",this.user?.uid)),s=>{s.docChanges().forEach(u=>{if("added"==u.type){const f={documentId:u.doc.id,...u.doc.data()};this.fines.push(f)}"removed"==u.type&&(this.fines=this.fines.filter(d=>d.documentId!=u.doc.id))})})}onFineClick(r){this.router.navigate(["/finedetails",r]),console.log(r)}deleteDoc(r){var i=this;return(0,B.Z)(function*(){try{const s=I_(i.db,"fines",r);yield function u3(n){return j0(An(n.firestore,Er),[new jh(n._key,pr.none())])}(s);const u=MR(i.storage,`fine_images/${i.user?.uid}/${s.id}`);yield i.deleteDocStorage(u),console.log("Document and associated storage contents deleted successfully.")}catch(s){console.error("Error deleting document and storage contents:",s)}})()}deleteDocStorage(r){return(0,B.Z)(function*(){const s=(yield iG(r)).items.map(function(){var u=(0,B.Z)(function*(d){yield oG(d)});return function(d){return u.apply(this,arguments)}}());yield Promise.all(s)})()}onImageSelected(r){r.target.files&&r.target.files.length>0&&(this.selectedImages=Array.from(r.target.files))}finePrice(){const r=this.fine.get("reason"),i=this.fine.get("price");let s=0;if("police"==this.department){const u=this.policeReasons.filter(d=>r?.value.includes(d.reason));for(const d of u)s+=d.price}if("muncipality"==this.department){const u=this.muncipalityReasons.filter(d=>r?.value.includes(d.reason));for(const d of u)s+=d.price}i?.setValue(s)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI),p.Y36(Xi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:35,vars:4,consts:[[1,"container"],[1,"container-item"],[3,"formGroup","ngSubmit"],["for","firstname"],["type","text","name","firstname","formControlName","firstname"],["for","lastname"],["type","text","name","lastname","formControlName","lastname"],["for","reason"],["name","reason","formControlName","reason","multiple","",3,"change"],[4,"ngIf"],["for","date"],["type","date","id","date","name","date","formControlName","date"],["for","time"],["type","time","id","time","name","time","formControlName","time"],["for","price"],["type","number","name","price","formControlName","price"],["for","image"],["type","file","name","image","formControlName","image","accept","image/","multiple","",3,"change"],["id","submit","type","submit"],[4,"ngFor","ngForOf"],["value","any"],[1,"fine"],[3,"click"]],template:function(r,i){1&r&&(p._UZ(0,"app-navbar"),p.TgZ(1,"div",0)(2,"div",1)(3,"h3"),p._uU(4,"Submit new fine"),p.qZA(),p.TgZ(5,"form",2),p.NdJ("ngSubmit",function(){return i.OnSubmit()}),p.TgZ(6,"label",3),p._uU(7,"Firstname"),p.qZA(),p._UZ(8,"input",4),p.TgZ(9,"label",5),p._uU(10,"Lastname"),p.qZA(),p._UZ(11,"input",6),p.TgZ(12,"label",7),p._uU(13,"Reason"),p.qZA(),p.TgZ(14,"select",8),p.NdJ("change",function(){return i.finePrice()}),p.YNc(15,lK,4,1,"ng-container",9),p.YNc(16,hK,4,1,"ng-container",9),p.qZA(),p.TgZ(17,"label",10),p._uU(18,"Date:"),p.qZA(),p._UZ(19,"input",11),p.TgZ(20,"label",12),p._uU(21,"Time"),p.qZA(),p._UZ(22,"input",13),p.TgZ(23,"label",14),p._uU(24,"Pay price"),p.qZA(),p._UZ(25,"input",15),p.TgZ(26,"label",16),p._uU(27,"Evidence"),p.qZA(),p.TgZ(28,"input",17),p.NdJ("change",function(u){return i.onImageSelected(u)}),p.qZA(),p.TgZ(29,"button",18),p._uU(30,"Submit fine"),p.qZA()()(),p.TgZ(31,"div",1)(32,"h3"),p._uU(33,"Globi"),p.qZA(),p.YNc(34,fK,20,7,"ul",19),p.qZA()()),2&r&&(p.xp6(5),p.Q6J("formGroup",i.fine),p.xp6(10),p.Q6J("ngIf","police"===i.department),p.xp6(1),p.Q6J("ngIf","muncipality"===i.department),p.xp6(18),p.Q6J("ngForOf",i.fines))},dependencies:[Nr,za,ee,fy,th,wo,Ce,py,dl,ks,Jo,Kf,fG],styles:['form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:60%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:6px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border:0;border-bottom:1px solid orange}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}#submit[_ngcontent-%COMP%]{-webkit-appearance:button;appearance:button;background-color:transparent;background-image:linear-gradient(to bottom,#fff,#f8eedb);border:0 solid #e5e7eb;border-radius:.5rem;box-sizing:border-box;color:#482307;column-gap:1rem;cursor:pointer;display:flex;font-family:ui-sans-serif,system-ui,-apple-system,system-ui,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:100%;font-weight:700;line-height:24px;margin:0;outline:2px solid transparent;padding:1rem 1.5rem;text-align:center;text-transform:none;transition:all .1s cubic-bezier(.4,0,.2,1);user-select:none;-webkit-user-select:none;touch-action:manipulation;box-shadow:-6px 8px 10px #51290a1a,0 2px 2px #51290a33}#submit[_ngcontent-%COMP%]:active{background-color:#f3f4f6;box-shadow:-1px 2px 5px #51290a26,0 1px 1px #51290a26;transform:translateY(.125rem)}#submit[_ngcontent-%COMP%]:focus{box-shadow:#48230775 0 0 0 4px,-6px 8px 10px #51290a1a,0 2px 2px #51290a33}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:30px}.container-item[_ngcontent-%COMP%]{width:50%}.container-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.container-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none}.fine[_ngcontent-%COMP%]{border:2px solid;padding:10px;box-shadow:#32325d40 0 50px 100px -20px,#0000004d 0 30px 60px -30px,#0a254059 0 -2px 6px inset}']}),e})(),PF=(()=>{var n;class e{constructor(r,i){this.auth=r,this.router=i}canActivate(){return!!this.auth.getUser()||(this.router.navigate(["/login"]),!1)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(UI),p.LFG(Xi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),gK=(()=>{var n;class e{constructor(r,i,s){this.fb=r,this.auth=i,this.router=s,this.avatarFile=null,this.registration=new Sr({email:new Vr("",[or.required,or.email]),password:new Vr("",or.required),displayName:new Vr("",or.required),department:new Vr("",or.required),phoneNumber:new Vr("",or.required),photoURL:new Vr("")})}OnSubmit(){this.registration.valid?this.register():console.log("There was an error")}register(){const f=this.registration.value.photoURL;this.auth.register(this.registration.value.email,this.registration.value.password,this.registration.value.department,this.registration.value.displayName,this.registration.value.phoneNumber,f).then(_=>{f&&(this.auth.uploadAvatarStorage(this.avatarFile,_.uid),this.router.navigate(["login"]))}).catch(_=>{console.log(_)})}onFileSelected(r){const i=r.target.files[0];i&&(this.avatarFile=i)}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(db),p.Y36(UI),p.Y36(Xi))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-register"]],decls:29,vars:2,consts:[[3,"formGroup","ngSubmit"],["for","displayName"],["type","text","name","displayName","id","displayName","formControlName","displayName","required",""],["for","email"],["type","email","name","email","formControlName","email","required",""],["for","password"],["type","password","name","password","id","password","formControlName","password","required",""],["for","department"],["name","department","id","department","formControlName","department"],["value","police"],["value","muncipality"],["for","phoneNumber"],["type","text","name","phoneNumber","id","phoneNumber","formControlName","phoneNumber","required",""],["for","photoURL"],["type","file","name","photoURL","id","photoURL","formControlName","photoURL","accept","image/","required","",3,"change"],["type","submit",3,"disabled"],["routerLink","/login"]],template:function(r,i){1&r&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return i.OnSubmit()}),p.TgZ(1,"label",1),p._uU(2,"Username"),p.qZA(),p._UZ(3,"input",2),p.TgZ(4,"label",3),p._uU(5,"Email"),p.qZA(),p._UZ(6,"input",4),p.TgZ(7,"label",5),p._uU(8,"Password"),p.qZA(),p._UZ(9,"input",6),p.TgZ(10,"label",7),p._uU(11,"Department"),p.qZA(),p.TgZ(12,"select",8)(13,"option",9),p._uU(14,"Police"),p.qZA(),p.TgZ(15,"option",10),p._uU(16,"Muncipality"),p.qZA()(),p.TgZ(17,"label",11),p._uU(18,"Phone Number"),p.qZA(),p._UZ(19,"input",12),p.TgZ(20,"label",13),p._uU(21,"Avatar"),p.qZA(),p.TgZ(22,"input",14),p.NdJ("change",function(u){return i.onFileSelected(u)}),p.qZA(),p.TgZ(23,"button",15),p._uU(24,"Register Now!"),p.qZA(),p.TgZ(25,"h4"),p._uU(26,"Already having account?"),p.TgZ(27,"a",16),p._uU(28,"Click here to log-in!"),p.qZA()()()),2&r&&(p.Q6J("formGroup",i.registration),p.xp6(23),p.Q6J("disabled",i.registration.invalid))},dependencies:[gp,ee,fy,th,wo,hy,dl,ks,nh,Jo,Kf],styles:["form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid black;padding:20px;margin:auto;width:50%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:5px;padding:6px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#c2fbd7;border-radius:100px;box-shadow:#2cbb6333 0 -25px 18px -14px inset,#2cbb6326 0 1px 2px,#2cbb6326 0 2px 4px,#2cbb6326 0 4px 8px,#2cbb6326 0 8px 16px,#2cbb6326 0 16px 32px;color:green;cursor:pointer;display:inline-block;font-family:CerebriSans-Regular,-apple-system,system-ui,Roboto,sans-serif;padding:7px 20px;text-align:center;text-decoration:none;transition:all .25s;border:0;font-size:16px;user-select:none;-webkit-user-select:none;touch-action:manipulation}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:#2cbb6359 0 -25px 18px -14px inset,#2cbb6340 0 1px 2px,#2cbb6340 0 2px 4px,#2cbb6340 0 4px 8px,#2cbb6340 0 8px 16px,#2cbb6340 0 16px 32px;transform:scale(1.05) rotate(-1deg)}form[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center}"]}),e})();function mK(n,e){1&n&&p._UZ(0,"img",11),2&n&&p.Q6J("src",e.$implicit,p.LSH)}function _K(n,e){if(1&n&&(p.TgZ(0,"div")(1,"p")(2,"strong"),p._uU(3,"First Name:"),p.qZA(),p._uU(4),p.qZA(),p.TgZ(5,"p")(6,"strong"),p._uU(7,"Last Name:"),p.qZA(),p._uU(8),p.qZA(),p.TgZ(9,"p")(10,"strong"),p._uU(11,"Date:"),p.qZA(),p._uU(12),p.qZA(),p.TgZ(13,"p")(14,"strong"),p._uU(15,"Time:"),p.qZA(),p._uU(16),p.qZA(),p.TgZ(17,"p")(18,"strong"),p._uU(19,"Reason:"),p.qZA(),p._uU(20),p.qZA(),p.TgZ(21,"p")(22,"strong"),p._uU(23,"Price:"),p.qZA(),p._uU(24),p.qZA(),p.TgZ(25,"p")(26,"strong"),p._uU(27,"Issuer:"),p.qZA(),p._uU(28),p.qZA(),p.TgZ(29,"div",9),p.YNc(30,mK,1,1,"img",10),p.qZA()()),2&n){const t=p.oxw();p.xp6(4),p.Oqu(t.fineData.firstname),p.xp6(4),p.Oqu(t.fineData.lastname),p.xp6(4),p.Oqu(t.fineData.date),p.xp6(4),p.Oqu(t.fineData.time),p.xp6(4),p.Oqu(t.fineData.reason),p.xp6(4),p.hij("",t.fineData.price," \u043b\u0432."),p.xp6(4),p.Oqu(t.fineData.issuer),p.xp6(2),p.Q6J("ngForOf",t.fineData.image)}}let yK=(()=>{var n;class e{constructor(r,i){this.route=r,this.fb=i,this.db=AI(),this.modify=this.fb.group({firstname:[""],lastname:[""],price:[""]})}ngOnInit(){var r=this;return(0,B.Z)(function*(){const i=r.route.snapshot.paramMap.get("id");if(i)try{const s=I_(r.db,"fines",i),u=yield JS(s);W2(s,d=>{d.exists()?(r.fineData=d.data(),r.modify.patchValue(r.fineData)):console.log("Fine document does not exist")}),u.exists()?r.fineData=u.data():console.log("Fine document does not exist")}catch(s){console.error("Error fetching fine document:",s)}})()}onSubmit(){var r=this;return(0,B.Z)(function*(){const i=r.route.snapshot.paramMap.get("id");if(i)try{const s=I_(r.db,"fines",i),u=K2(),d={...r.modify.value,timestamp:u},f=yield JS(s);if(f.exists()){const _=f.data(),I={};for(const b in d)d[b]!==_[b]&&""!==d[b]&&(I[b]=d[b]);Object.keys(I).length>0?yield q2(s,I):console.log("error")}}catch(s){console.error("Error fetching fine document:",s)}else console.log("Fine document does not exist")})()}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(uc),p.Y36(db))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-finedetails"]],decls:13,vars:2,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],["for","firstname"],["type","text","formControlName","firstname"],["for","lastname"],["type","text","formControlName","lastname"],["for","price"],["type","text","formControlName","price"],["type","submit"],[1,"images"],[3,"src",4,"ngFor","ngForOf"],[3,"src"]],template:function(r,i){1&r&&(p.YNc(0,_K,31,8,"div",0),p.TgZ(1,"form",1),p.NdJ("ngSubmit",function(){return i.onSubmit()}),p.TgZ(2,"label",2),p._uU(3,"Firstname"),p.qZA(),p._UZ(4,"input",3),p.TgZ(5,"label",4),p._uU(6,"Lastname"),p.qZA(),p._UZ(7,"input",5),p.TgZ(8,"label",6),p._uU(9,"Price: "),p.qZA(),p._UZ(10,"input",7),p.TgZ(11,"button",8),p._uU(12,"Save"),p.qZA()()),2&r&&(p.Q6J("ngIf",i.fineData),p.xp6(1),p.Q6J("formGroup",i.modify))},dependencies:[Nr,za,ee,wo,dl,ks,Jo,Kf],styles:[".images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}"]}),e})();function vK(n,e){if(1&n&&(p.TgZ(0,"ul")(1,"li"),p._uU(2),p.qZA(),p.TgZ(3,"li"),p._uU(4),p.qZA(),p.TgZ(5,"li"),p._uU(6),p.qZA(),p.TgZ(7,"li"),p._uU(8),p.qZA(),p.TgZ(9,"li"),p._uU(10),p.qZA()()),2&n){const t=e.$implicit;p.xp6(2),p.hij("Firstname:",t.firstname,""),p.xp6(2),p.hij("Lastname:",t.lastname,""),p.xp6(2),p.hij("Date: ",t.date,""),p.xp6(2),p.hij("Time: ",t.time,""),p.xp6(2),p.hij("Reason: ",t.reason,"")}}const IK=[{path:"",component:pK,canActivate:[PF]},{path:"login",component:oK},{path:"register",component:gK},{path:"finedetails/:id",component:yK,canActivate:[PF]},{path:"profile/:id",component:(()=>{var n;class e{constructor(r){this.authService=r,this.user=this.authService.getUser(),this.lastFines=[]}ngOnInit(){this.getLastFines()}getLastFines(){const s=Uk(V0(AI(),"fines"),Bk("issueruid","==",this.user?.uid),function r3(n){return function T2(n,e){if(e<=0)throw new ke(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),KS._create("limit",n,"F")}(3),function n3(n,e="asc"){const t=e,r=WS("orderBy",n);return $k._create(r,t)}("timestamp","desc"));this.lastFines=[],H2(s).then(u=>{u.forEach(d=>{this.lastFines.push(d.data())})})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.Y36(UI))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-profile"]],decls:11,vars:5,consts:[["alt","",3,"src"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(p._UZ(0,"app-navbar"),p.TgZ(1,"p"),p._uU(2),p.qZA(),p._UZ(3,"img",0),p.TgZ(4,"p"),p._uU(5),p.qZA(),p.TgZ(6,"p"),p._uU(7),p.qZA(),p.TgZ(8,"h3"),p._uU(9,"Last issued fines by you"),p.qZA(),p.YNc(10,vK,11,5,"ul",1)),2&r&&(p.xp6(2),p.Oqu(null==i.user?null:i.user.displayName),p.xp6(1),p.Q6J("src",i.authService.currentlySignedInUserAvatarURL,p.LSH),p.xp6(2),p.Oqu(null==i.user?null:i.user.phoneNumber),p.xp6(2),p.Oqu(null==i.user?null:i.user.email),p.xp6(3),p.Q6J("ngForOf",i.lastFines))},dependencies:[Nr,fG]}),e})(),canActivate:[PF]}];let EK=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[Aw.forRoot(IK),Aw]}),e})(),wK=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&p._UZ(0,"router-outlet")},dependencies:[Py]}),e})();O(2659);class gG{constructor(){return(0,Gr.vb)("auth")}}const mG="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let BI="9.23.0";const Qp=new ms.Yd("@firebase/firestore");function NF(){return Qp.logLevel}function qe(n,...e){if(Qp.logLevel<=ms.in.DEBUG){const t=e.map(kF);Qp.debug(`Firestore (${BI}): ${n}`,...t)}}function yi(n,...e){if(Qp.logLevel<=ms.in.ERROR){const t=e.map(kF);Qp.error(`Firestore (${BI}): ${n}`,...t)}}function Pc(n,...e){if(Qp.logLevel<=ms.in.WARN){const t=e.map(kF);Qp.warn(`Firestore (${BI}): ${n}`,...t)}}function kF(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function It(n="Unexpected state"){const e=`FIRESTORE (${BI}) INTERNAL ASSERTION FAILED: `+n;throw yi(e),new Error(e)}function St(n,e){n||It()}function dt(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends it.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _G{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(As.UNAUTHENTICATED))}shutdown(){}}class CK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SK{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new is,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const _=u;e.enqueueRetryable((0,B.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},f=_=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(_=>f(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?f(_):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new is)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new _G(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new As(e)}}class RK{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=As.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class PK{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new RK(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(As.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xK{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.T;return this.T=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.T=t.token,new yG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function MK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vG{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=MK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Wt(n,e){return n<e?-1:n>e?1:0}function $I(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new zr(0,0))}static max(){return new Rt(new zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class aA{constructor(e,t,r){void 0===t?t=0:t>e.length&&It(),void 0===r?r=e.length-t:r>e.length-t&&It(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===aA.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof aA?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dn extends aA{construct(e,t,r){return new Dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Dn(t)}static emptyPath(){return new Dn([])}}const NK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends aA{construct(e,t,r){return new vi(e,t,r)}static isValidIdentifier(e){return NK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Le(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Le(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Le(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Le(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(t)}static emptyPath(){return new vi([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Dn.fromString(e))}static fromName(e){return new ut(Dn.fromString(e).popFirst(5))}static empty(){return new ut(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Dn(e.slice()))}}function wG(n){return new Va(n.readTime,n.key,-1)}class Va{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Va(Rt.min(),ut.empty(),-1)}static max(){return new Va(Rt.max(),ut.empty(),-1)}}function FF(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:Wt(n.largestBatchId,e.largestBatchId))}const TG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yp(n){return LF.apply(this,arguments)}function LF(){return LF=(0,B.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==TG)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),LF.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},f=>r(f))}),u=!0,s===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let f=0;f<s;f++){const _=f;t(e[_]).next(I=>{u[_]=I,++d,d===s&&r(u)},I=>i(I))}})}static doWhile(e,t){return new ae((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function Jp(n){return"IndexedDbTransactionError"===n.name}let Ua=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function lA(n){return null==n}function dA(n){return 0===n&&1/n==-1/0}function MG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}class gr{constructor(e,t){this.comparator=e,this.root=t||Vs.EMPTY}insert(e,t){return new gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vs.BLACK,null,null))}remove(e){return new gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new UR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new UR(this.root,e,this.comparator,!1)}getReverseIterator(){return new UR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new UR(this.root,e,this.comparator,!0)}}class UR{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Vs.RED,this.left=i??Vs.EMPTY,this.right=s??Vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Vs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1,Vs.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Vs(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(e){this.comparator=e,this.data=new gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kG(this.data.getIterator())}getIteratorFrom(e){return new kG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wr(this.comparator);return t.data=e,t}}class kG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class aa{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new aa([])}unionWith(e){let t=new wr(vi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new aa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $I(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class OG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ss{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new OG("Invalid base64 string: "+i):i}}(e);return new ss(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new ss(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ss.EMPTY_BYTE_STRING=new ss("");const s8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eg(n){if(St(!!n),"string"==typeof n){let e=0;const t=s8.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xr(n.seconds),nanos:Xr(n.nanos)}}function Xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function uf(n){return"string"==typeof n?ss.fromBase64String(n):ss.fromUint8Array(n)}function BR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $R(n){const e=n.mapValue.fields.__previous_value__;return BR(e)?$R(e):e}function hA(n){const e=eg(n.mapValue.fields.__local_write_time__.timestampValue);return new zr(e.seconds,e.nanos)}class o8{constructor(e,t,r,i,s,u,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=_}}class x_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new x_("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof x_&&e.projectId===this.projectId&&e.database===this.database}}const tg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ng(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BR(n)?4:UG(n)?9007199254740991:10:It()}function hd(n,e){if(n===e)return!0;const t=ng(n);if(t!==ng(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hA(n).isEqual(hA(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=eg(r.timestampValue),u=eg(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,uf(n.bytesValue).isEqual(uf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Xr(r.geoPointValue.latitude)===Xr(i.geoPointValue.latitude)&&Xr(r.geoPointValue.longitude)===Xr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Xr(r.integerValue)===Xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Xr(r.doubleValue),u=Xr(i.doubleValue);return s===u?dA(s)===dA(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return $I(n.arrayValue.values||[],e.arrayValue.values||[],hd);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(MG(s)!==MG(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!hd(s[d],u[d])))return!1;return!0}(n,e);default:return It()}var i}function fA(n,e){return void 0!==(n.values||[]).find(t=>hd(t,e))}function rg(n,e){if(n===e)return 0;const t=ng(n),r=ng(e);if(t!==r)return Wt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Xr(i.integerValue||i.doubleValue),d=Xr(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return FG(n.timestampValue,e.timestampValue);case 4:return FG(hA(n),hA(e));case 5:return Wt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=uf(i),d=uf(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let f=0;f<u.length&&f<d.length;f++){const _=Wt(u[f],d[f]);if(0!==_)return _}return Wt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Wt(Xr(i.latitude),Xr(s.latitude));return 0!==u?u:Wt(Xr(i.longitude),Xr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let f=0;f<u.length&&f<d.length;++f){const _=rg(u[f],d[f]);if(_)return _}return Wt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===tg.mapValue&&s===tg.mapValue)return 0;if(i===tg.mapValue)return 1;if(s===tg.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),f=s.fields||{},_=Object.keys(f);d.sort(),_.sort();for(let I=0;I<d.length&&I<_.length;++I){const b=Wt(d[I],_[I]);if(0!==b)return b;const x=rg(u[d[I]],f[_[I]]);if(0!==x)return x}return Wt(d.length,_.length)}(n.mapValue,e.mapValue);default:throw It()}}function FG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Wt(n,e);const t=eg(n),r=eg(e),i=Wt(t.seconds,r.seconds);return 0!==i?i:Wt(t.nanos,r.nanos)}function jI(n){return BF(n)}function BF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=eg(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?uf(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=BF(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${BF(r.fields[d])}`;return s+"}"}(n.mapValue):It();var e}function $F(n){return!!n&&"integerValue"in n}function pA(n){return!!n&&"arrayValue"in n}function LG(n){return!!n&&"nullValue"in n}function VG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zR(n){return!!n&&"mapValue"in n}function gA(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gA(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gA(n.arrayValue.values[t]);return e}return Object.assign({},n)}function UG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zR(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gA(t)}setAll(e){let t=vi.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=gA(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());zR(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xp(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Us(gA(this.value))}}class Tr{constructor(e,t,r,i,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Tr(e,0,Rt.min(),Rt.min(),Rt.min(),Us.empty(),0)}static newFoundDocument(e,t,r,i){return new Tr(e,1,t,Rt.min(),r,i,0)}static newNoDocument(e,t){return new Tr(e,2,t,Rt.min(),Rt.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new Tr(e,3,t,Rt.min(),Rt.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Rt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ig{constructor(e,t){this.position=e,this.inclusive=t}}function jG(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?ut.comparator(ut.fromName(u.referenceValue),t.key):rg(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hd(n.position[t],e.position[t]))return!1;return!0}class zI{constructor(e,t="asc"){this.field=e,this.dir=t}}function c8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class HG{}class En extends HG{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new l8(e,t,r):"array-contains"===t?new f8(e,r):"in"===t?new YG(e,r):"not-in"===t?new p8(e,r):"array-contains-any"===t?new g8(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new d8(e,r):new h8(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rg(t,this.value)):null!==t&&ng(this.value)===ng(t)&&this.matchesComparison(rg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Wn extends HG{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Wn(e,t)}matches(e){return HI(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function HI(n){return"and"===n.op}function jF(n){return function qG(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}(n)&&HI(n)}function zF(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+jI(n.value);if(jF(n))return n.filters.map(e=>zF(e)).join(",");{const e=n.filters.map(t=>zF(t)).join(",");return`${n.op}(${e})`}}function WG(n,e){return n instanceof En?(t=n,(r=e)instanceof En&&t.op===r.op&&t.field.isEqual(r.field)&&hd(t.value,r.value)):n instanceof Wn?function(t,r){return r instanceof Wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,u)=>i&&WG(s,r.filters[u]),!0)}(n,e):void It();var t,r}function ZG(n){return n instanceof En?`${(e=n).field.canonicalString()} ${e.op} ${jI(e.value)}`:n instanceof Wn?function(e){return e.op.toString()+" {"+e.getFilters().map(ZG).join(" ,")+"}"}(n):"Filter";var e}class l8 extends En{constructor(e,t,r){super(e,t,r),this.key=ut.fromName(r.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.matchesComparison(t)}}class d8 extends En{constructor(e,t){super(e,"in",t),this.keys=QG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class h8 extends En{constructor(e,t){super(e,"not-in",t),this.keys=QG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ut.fromName(r.referenceValue))}class f8 extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pA(t)&&fA(t.arrayValue,this.value)}}class YG extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fA(this.value.arrayValue,t)}}class p8 extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(fA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fA(this.value.arrayValue,t)}}class g8 extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fA(this.value.arrayValue,r))}}class m8{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.dt=null}}function HF(n,e=null,t=[],r=[],i=null,s=null,u=null){return new m8(n,e,t,r,i,s,u)}function N_(n){const e=dt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zF(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),lA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jI(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jI(r)).join(",")),e.dt=t}return e.dt}function mA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WG(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zG(n.startAt,e.startAt)&&zG(n.endAt,e.endAt)}function HR(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class cf{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=f,this.wt=null,this._t=null}}function qI(n){return new cf(n)}function tj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function k_(n){const e=dt(n);if(null===e.wt){e.wt=[];const t=function WR(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}(e),r=function qF(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new zI(t)),e.wt.push(new zI(vi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zI(vi.keyField(),s))}}}return e.wt}function Oo(n){const e=dt(n);if(!e._t)if("F"===e.limitType)e._t=HF(e.path,e.collectionGroup,k_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of k_(e))t.push(new zI(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new ig(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ig(e.startAt.position,e.startAt.inclusive):null;e._t=HF(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function KR(n,e,t){return new cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _A(n,e){return mA(Oo(n),Oo(e))&&n.limitType===e.limitType}function nj(n){return`${N_(Oo(n))}|lt:${n.limitType}`}function ZF(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>ZG(r)).join(", ")}]`),lA(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jI(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jI(r)).join(",")),`Target(${t})`}(Oo(n))}; limitType=${n.limitType})`}function yA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ut.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of k_(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=jG(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,k_(t),r)||t.endAt&&!function(i,s,u){const d=jG(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,k_(t),r)));var t,r}function ij(n){return(e,t)=>{let r=!1;for(const i of k_(n)){const s=_8(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function _8(n,e,t){const r=n.field.isKeyField()?ut.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),f=u.data.field(i);return null!==d&&null!==f?rg(d,f):It()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}class lf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xp(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return function NG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(this.inner)}size(){return this.innerSize}}const y8=new gr(ut.comparator);function ua(){return y8}const sj=new gr(ut.comparator);function vA(...n){let e=sj;for(const t of n)e=e.insert(t.key,t);return e}function oj(n){let e=sj;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fd(){return IA()}function aj(){return IA()}function IA(){return new lf(n=>n.toString(),(n,e)=>n.isEqual(e))}new gr(ut.comparator);const I8=new wr(ut.comparator);function an(...n){let e=I8;for(const t of n)e=e.add(t);return e}const E8=new wr(Wt);class ZR{constructor(){this._=void 0}}function w8(n,e,t){return n instanceof WI?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&BR(i)&&(i=$R(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof O_?hj(n,e):n instanceof F_?fj(n,e):function(r,i){const s=function dj(n,e){return n instanceof KI?$F(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}(r,i),u=pj(s)+pj(r.gt);return $F(s)&&$F(r.gt)?function cj(n){return{integerValue:""+n}}(u):function uj(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dA(e)?"-0":e}}(r.serializer,u)}(n,e)}function T8(n,e,t){return n instanceof O_?hj(n,e):n instanceof F_?fj(n,e):t}class WI extends ZR{}class O_ extends ZR{constructor(e){super(),this.elements=e}}function hj(n,e){const t=gj(e);for(const r of n.elements)t.some(i=>hd(i,r))||t.push(r);return{arrayValue:{values:t}}}class F_ extends ZR{constructor(e){super(),this.elements=e}}function fj(n,e){let t=gj(e);for(const r of n.elements)t=t.filter(i=>!hd(i,r));return{arrayValue:{values:t}}}class KI extends ZR{constructor(e,t){super(),this.serializer=e,this.gt=t}}function pj(n){return Xr(n.integerValue||n.doubleValue)}function gj(n){return pA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function QR(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class YF{}function mj(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new QI(n.key,xr.none()):new ZI(n.key,n.data,xr.none());{const t=n.data,r=Us.empty();let i=new wr(vi.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new df(n.key,r,new aa(i.toArray()),xr.none())}}function D8(n,e,t){n instanceof ZI?function(r,i,s){const u=r.value.clone(),d=vj(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof df?function(r,i,s){if(!QR(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=vj(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(yj(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wA(n,e,t,r){return n instanceof ZI?function(i,s,u,d){if(!QR(i.precondition,s))return u;const f=i.value.clone(),_=Ij(i.fieldTransforms,d,s);return f.setAll(_),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof df?function(i,s,u,d){if(!QR(i.precondition,s))return u;const f=Ij(i.fieldTransforms,d,s),_=s.data;return _.setAll(yj(i)),_.setAll(f),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(I=>I.field))}(n,e,t,r):(u=t,QR(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function _j(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$I(t,r,(i,s)=>function A8(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof O_&&r instanceof O_||t instanceof F_&&r instanceof F_?$I(t.elements,r.elements,hd):t instanceof KI&&r instanceof KI?hd(t.gt,r.gt):t instanceof WI&&r instanceof WI);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ZI extends YF{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class df extends YF{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yj(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vj(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,T8(u,d,t[i]))}return r}function Ij(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,w8(s,u,e))}return r}class QI extends YF{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XF{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&D8(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wA(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wA(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aj();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const f=mj(u,d);null!==f&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&$I(this.mutations,e.mutations,(t,r)=>_j(t,r))&&$I(this.baseMutations,e.baseMutations,(t,r)=>_j(t,r))}}class tL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class R8{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fi,Cn;function wj(n){if(void 0===n)return yi("GRPC error has no .code"),fe.UNKNOWN;switch(n){case Fi.OK:return fe.OK;case Fi.CANCELLED:return fe.CANCELLED;case Fi.UNKNOWN:return fe.UNKNOWN;case Fi.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Fi.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Fi.INTERNAL:return fe.INTERNAL;case Fi.UNAVAILABLE:return fe.UNAVAILABLE;case Fi.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Fi.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Fi.NOT_FOUND:return fe.NOT_FOUND;case Fi.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Fi.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Fi.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Fi.ABORTED:return fe.ABORTED;case Fi.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Fi.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Fi.DATA_LOSS:return fe.DATA_LOSS;default:return It()}}(Cn=Fi||(Fi={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class nL{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return YR}static getOrCreateInstance(){return null===YR&&(YR=new nL),YR}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let YR=null;const P8=new So([4294967295,4294967295],0);function Aj(n){const e=function Tj(){return new TextEncoder}().encode(n),t=new uT;return t.update(e),new Uint8Array(t.digest())}function bj(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new So([t,r],0),new So([i,s],0)]}class rL{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new TA(`Invalid padding: ${t}`);if(r<0)throw new TA(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new TA(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new TA(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=So.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(So.fromNumber(r)));return 1===i.compare(P8)&&(i=new So([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Aj(e),[r,i]=bj(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new rL(s,i,t);return r.forEach(d=>u.insert(d)),u}insert(e){if(0===this.It)return;const t=Aj(e),[r,i]=bj(t);for(let s=0;s<this.hashCount;s++){const u=this.Et(r,i,s);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class TA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class AA{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,bA.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new AA(Rt.min(),i,new gr(Wt),ua(),an())}}class bA{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new bA(r,t,an(),an(),an())}}class JR{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Dj{constructor(e,t){this.targetId=e,this.Vt=t}}class Cj{constructor(e,t,r=ss.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Sj{constructor(){this.St=0,this.Dt=Pj(),this.Ct=ss.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=an(),t=an(),r=an();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:It()}}),new bA(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=Pj()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class x8{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ua(),this.zt=Rj(),this.Wt=new gr(Wt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const u=s.target;if(HR(u))if(0===i){const d=new ut(u.path);this.Yt(r,d,Tr.newNoDocument(d,Rt.min()))}else St(1===i);else{const d=this.ie(r);if(d!==i){const f=this.re(e,d);0!==f&&(this.ee(r),this.Wt=this.Wt.insert(r,2===f?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=nL.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(_,I,b){var x,k,$,Q,Z,Ae;const Pe={localCacheCount:I,existenceFilterCount:b.count},be=b.unchangedNames;return be&&(Pe.bloomFilter={applied:0===_,hashCount:null!==(x=be?.hashCount)&&void 0!==x?x:0,bitmapLength:null!==(Q=null===($=null===(k=be?.bits)||void 0===k?void 0:k.bitmap)||void 0===$?void 0:$.length)&&void 0!==Q?Q:0,padding:null!==(Ae=null===(Z=be?.bits)||void 0===Z?void 0:Z.padding)&&void 0!==Ae?Ae:0}),Pe}(f,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let f,_;try{f=uf(s).toUint8Array()}catch(I){if(I instanceof OG)return Pc("Decoding the base64 bloom filter in existence filter failed ("+I.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw I}try{_=new rL(f,u,d)}catch(I){return Pc(I instanceof TA?"BloomFilter error: ":"Applying bloom filter failed: ",I),1}return 0===_.It?1:i!==t-this.oe(e.targetId,_)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const u=this.Gt.ue(),d=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;t.vt(d)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,u)=>{const d=this.se(u);if(d){if(s.current&&HR(d.target)){const f=new ut(d.target.path);null!==this.jt.get(f)||this.ae(u,f)||this.Yt(u,f,Tr.newNoDocument(f,e))}s.Mt&&(t.set(u,s.Ot()),s.Ft())}});let r=an();this.zt.forEach((s,u)=>{let d=!0;u.forEachWhile(f=>{const _=this.se(f);return!_||"TargetPurposeLimboResolution"===_.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.jt.forEach((s,u)=>u.setReadTime(e));const i=new AA(e,t,this.Wt,this.jt,r);return this.jt=ua(),this.zt=Rj(),this.Wt=new gr(Wt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Sj,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new wr(Wt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Sj),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Rj(){return new gr(ut.comparator)}function Pj(){return new gr(ut.comparator)}const M8={asc:"ASCENDING",desc:"DESCENDING"},N8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k8={and:"AND",or:"OR"};class O8{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iL(n,e){return n.useProto3Json||lA(e)?e:{value:e}}function Ii(n){return St(!!n),Rt.fromTimestamp(function(e){const t=eg(e);return new zr(t.seconds,t.nanos)}(n))}function Mj(n){const e=Dn.fromString(n);return St($j(e)),e}function pd(n,e){const t=Mj(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(kj(t))}function oL(n,e){return function sL(n,e){return(t=n,new Dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}(n.databaseId,e)}function CA(n){return new Dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kj(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Lj(n,e){return{documents:[oL(n,e.path)]}}function uL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oL(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oL(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return Bj(Wn.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(_=>{return{field:sg((I=_).field),direction:$8(I.dir)};var I})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=iL(n,e.limit);var d,f;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function Vj(n){let e=function Nj(n){const e=Mj(n);return 4===e.length?Dn.emptyPath():kj(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let s=[];t.where&&(s=function(I){const b=Uj(I);return b instanceof Wn&&jF(b)?b.getFilters():[b]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new zI(JI((b=I).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let d=null;t.limit&&(d=function(I){let b;return b="object"==typeof I?I.value:I,lA(b)?null:b}(t.limit));let f=null;var I;t.startAt&&(f=new ig((I=t.startAt).values||[],!!I.before));let _=null;return t.endAt&&(_=function(I){return new ig(I.values||[],!I.before)}(t.endAt)),function ej(n,e,t,r,i,s,u,d){return new cf(n,e,t,r,i,s,u,d)}(e,i,u,s,d,"F",f,_)}function Uj(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=JI(e.unaryFilter.field);return En.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=JI(e.unaryFilter.field);return En.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=JI(e.unaryFilter.field);return En.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=JI(e.unaryFilter.field);return En.create(s,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):void 0!==n.fieldFilter?En.create(JI((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Wn.create(e.compositeFilter.filters.map(t=>Uj(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return It()}}(e.compositeFilter.op))}(n):It();var e}function $8(n){return M8[n]}function G8(n){return N8[n]}function j8(n){return k8[n]}function sg(n){return{fieldPath:n.canonicalString()}}function JI(n){return vi.fromServerFormat(n.fieldPath)}function Bj(n){return n instanceof En?function(e){if("=="===e.op){if(VG(e.value))return{unaryFilter:{field:sg(e.field),op:"IS_NAN"}};if(LG(e.value))return{unaryFilter:{field:sg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(VG(e.value))return{unaryFilter:{field:sg(e.field),op:"IS_NOT_NAN"}};if(LG(e.value))return{unaryFilter:{field:sg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sg(e.field),op:G8(e.op),value:e.value}}}(n):n instanceof Wn?function(e){const t=e.getFilters().map(r=>Bj(r));return 1===t.length?t[0]:{compositeFilter:{op:j8(e.op),filters:t}}}(n):It()}function $j(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class hf{constructor(e,t,r,i,s=Rt.min(),u=Rt.min(),d=ss.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gj{constructor(e){this.fe=e}}function cL(n){const e=Vj({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?KR(e,e.limit,"L"):e}class B_{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Xr(e.integerValue));else if("doubleValue"in e){const r=Xr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),dA(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(uf(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?UG(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):It()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),ut.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}B_.Ve=new B_;class X8{constructor(){this.rn=new gL}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Va.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Va.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class gL{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wr(Dn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wr(Dn.comparator)).toArray()}}new Uint8Array(0);class uo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new uo(e,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}uo.DEFAULT_COLLECTION_PERCENTILE=10,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uo.DEFAULT=new uo(41943040,uo.DEFAULT_COLLECTION_PERCENTILE,uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uo.DISABLED=new uo(-1,0,0);class G_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new G_(0)}static Mn(){return new G_(-1)}}class s7{constructor(){this.changes=new lf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class u7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pz{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&wA(r.mutation,i,aa.empty(),zr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,an()).next(()=>r))}getLocalViewOfDocuments(e,t,r=an()){const i=fd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=vA();return s.forEach((d,f)=>{u=u.insert(d,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=fd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,an()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=ua();const u=IA(),d=IA();return t.forEach((f,_)=>{const I=r.get(_.key);i.has(_.key)&&(void 0===I||I.mutation instanceof df)?s=s.insert(_.key,_):void 0!==I?(u.set(_.key,I.mutation.getFieldMask()),wA(I.mutation,_,I.mutation.getFieldMask(),zr.now())):u.set(_.key,aa.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((_,I)=>u.set(_,I)),t.forEach((_,I)=>{var b;return d.set(_,new u7(I,null!==(b=u.get(_))&&void 0!==b?b:null))}),d))}recalculateAndSaveOverlays(e,t){const r=IA();let i=new gr((u,d)=>u-d),s=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(f=>{const _=t.get(f);if(null===_)return;let I=r.get(f)||aa.empty();I=d.applyToLocalView(_,I),r.set(f,I);const b=(i.get(d.batchId)||an()).add(f);i=i.insert(d.batchId,b)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),_=f.key,I=f.value,b=aj();I.forEach(x=>{if(!s.has(x)){const k=mj(t.get(x),r.get(x));null!==k&&b.set(x,k),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ae.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ut.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function WF(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ae.resolve(fd());let d=-1,f=s;return u.next(_=>ae.forEach(_,(I,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),s.get(I)?ae.resolve():this.remoteDocumentCache.getEntry(e,I).next(x=>{f=f.insert(I,x)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,f,_,an())).next(I=>({batchId:d,changes:oj(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(r=>{let i=vA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=vA();return this.indexManager.getCollectionParents(e,i).next(u=>ae.forEach(u,d=>{const f=(_=t,I=d.child(i),new cf(I,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,I;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(_=>{_.forEach((I,b)=>{s=s.insert(I,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((d,f)=>{const _=f.getKey();null===s.get(_)&&(s=s.insert(_,Tr.newInvalidDocument(_)))});let u=vA();return s.forEach((d,f)=>{const _=i.get(d);void 0!==_&&wA(_.mutation,f,aa.empty(),zr.now()),yA(t,f)&&(u=u.insert(d,f))}),u})}}class c7{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ii(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:cL(r.bundledQuery),readTime:Ii(r.readTime)}),ae.resolve();var r}}class l7{constructor(){this.overlays=new gr(ut.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fd();return ae.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=fd(),s=t.length+1,u=new ut(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,_=f.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new gr((_,I)=>_-I);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let I=s.get(_.largestBatchId);null===I&&(I=fd(),s=s.insert(_.largestBatchId,I)),I.set(_.getKey(),_)}}const d=fd(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((_,I)=>d.set(_,I)),!(d.size()>=i)););return ae.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new tL(t,r));let s=this.ls.get(t);void 0===s&&(s=an(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class mL{constructor(){this.fs=new wr(Ds.ds),this.ws=new wr(Ds._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ds(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ds(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new ut(new Dn([])),r=new Ds(t,e),i=new Ds(t,e+1),s=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),s.push(u.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new ut(new Dn([])),r=new Ds(t,e),i=new Ds(t,e+1);let s=an();return this.ws.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Ds(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ds{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return ut.comparator(e.key,t.key)||Wt(e.As,t.As)}static _s(e,t){return Wt(e.As,t.As)||ut.comparator(e.key,t.key)}}class d7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new wr(Ds.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const u=new XF(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.Rs=this.Rs.add(new Ds(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ds(t,0),i=new Ds(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],u=>{const d=this.Ps(u.As);s.push(d)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wr(Wt);return t.forEach(i=>{const s=new Ds(i,0),u=new Ds(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,u],d=>{r=r.add(d.As)})}),ae.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const u=new Ds(new ut(s),0);let d=new wr(Wt);return this.Rs.forEachWhile(f=>{const _=f.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(d=d.add(f.As)),!0)},u),ae.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(t.mutations,i=>{const s=new Ds(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ds(t,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class h7{constructor(e){this.Ds=e,this.docs=new gr(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(t))}getEntries(e,t){let r=ua();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tr.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ua();const u=t.path,d=new ut(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:_,value:{document:I}}=f.getNext();if(!u.isPrefixOf(_.path))break;_.path.length>u.length+1||FF(wG(I),r)<=0||(i.has(I.key)||yA(t,I))&&(s=s.insert(I.key,I.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,r,i){It()}Cs(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new f7(this)}getSize(e){return ae.resolve(this.size)}}class f7 extends s7{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class p7{constructor(e){this.persistence=e,this.xs=new lf(t=>N_(t),mA),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mL,this.targetCount=0,this.Ms=G_.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new G_(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ae.waitFor(s).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class _L{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ua(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new p7(this),this.indexManager=new X8,this.remoteDocumentCache=new h7(r=>this.referenceDelegate.Ls(r)),this.serializer=new Gj(t),this.qs=new c7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new l7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new d7(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new g7(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return ae.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class g7 extends FK{constructor(e){super(),this.currentSequenceNumber=e}}class aP{constructor(e){this.persistence=e,this.Qs=new mL,this.js=null}static zs(e){return new aP(e)}get Ws(){if(this.js)return this.js;throw It()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,r=>{const i=ut.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Rt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class EL{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=an(),i=an();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new EL(e,t.fromCache,r,i)}}class mz{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(tj(t))return ae.resolve(null);let r=Oo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=KR(t,null,"F"),r=Oo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=an(...s);return this.Ui.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const _=this.ji(t,d);return this.zi(t,_,u,f.readTime)?this.Ki(e,KR(t,null,"F")):this.Wi(e,_,t,f)}))})))}Gi(e,t,r,i){return tj(t)||i.isEqual(Rt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const u=this.ji(t,s);return this.zi(t,u,r,i)?this.Qi(e,t):(NF()<=ms.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ZF(t)),this.Wi(e,u,t,function EG(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new zr(t+1,0):new zr(t,r));return new Va(i,ut.empty(),e)}(i,-1)))})}ji(e,t){let r=new wr(ij(e));return t.forEach((i,s)=>{yA(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return NF()<=ms.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",ZF(t)),this.Ui.getDocumentsMatchingQuery(e,t,Va.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class _7{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new gr(Wt),this.Yi=new lf(s=>N_(s),mA),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pz(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function yz(n,e){return wL.apply(this,arguments)}function wL(){return wL=(0,B.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let f=an();for(const _ of i){u.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}for(const _ of s){d.push(_.batchId);for(const I of _.mutations)f=f.add(I.key)}return t.localDocuments.getDocuments(r,f).next(_=>({er:_,removedBatchIds:u,addedBatchIds:d}))})})}),wL.apply(this,arguments)}function vz(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function nE(n,e,t){return TL.apply(this,arguments)}function TL(){return TL=(0,B.Z)(function*(n,e,t){const r=dt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Jp(u))throw u;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),TL.apply(this,arguments)}function lP(n,e,t){const r=dt(n);let i=Rt.min(),s=an();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,f,_){const I=dt(d),b=I.Yi.get(_);return void 0!==b?ae.resolve(I.Ji.get(b)):I.Bs.getTargetData(f,_)}(r,u,Oo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,d.targetId).next(f=>{s=f})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Rt.min(),t?s:an())).next(d=>(function Tz(n,e,t){let r=n.Xi.get(e)||Rt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}(r,function rj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,ir:s})))}class SL{constructor(){this.activeTargetIds=function QF(){return E8}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dz{constructor(){this.Hr=new SL,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new SL,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class T7{Yr(e){}shutdown(){}}class Cz{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fP=null;function PL(){return null===fP?fP=268435456+Math.round(2147483648*Math.random()):fP++,"0x"+fP.toString(16)}const A7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b7{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const co="WebChannelConnection";class D7 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const u=PL(),d=this.To(e,t);qe("RestConnection",`Sending RPC '${e}' ${u}:`,d,r);const f={};return this.Eo(f,i,s),this.Ao(e,d,f,r).then(_=>(qe("RestConnection",`Received RPC '${e}' ${u}: `,_),_),_=>{throw Pc("RestConnection",`RPC '${e}' ${u} failed with error: `,_,"url: ",d,"request:",r),_})}vo(e,t,r,i,s,u){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+BI,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${A7[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=PL();return new Promise((u,d)=>{const f=new aT;f.setWithCredentials(!0),f.listenOnce(gM.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case hi.NO_ERROR:const I=f.getResponseJson();qe(co,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(I)),u(I);break;case hi.TIMEOUT:qe(co,`RPC '${e}' ${s} timed out`),d(new Le(fe.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const b=f.getStatus();if(qe(co,`RPC '${e}' ${s} failed with status:`,b,"response text:",f.getResponseText()),b>0){let x=f.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x?.error;if(k&&k.status&&k.message){const $=function(Q){const Z=Q.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Z)>=0?Z:fe.UNKNOWN}(k.status);d(new Le($,k.message))}else d(new Le(fe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Le(fe.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{qe(co,`RPC '${e}' ${s} completed.`)}});const _=JSON.stringify(i);qe(co,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",_,r,15)})}Ro(e,t,r){const i=PL(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Wm(),d=Km(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;void 0!==_&&(f.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(f.xmlHttpFactory=new _C({})),this.Eo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const I=s.join("");qe(co,`Creating RPC '${e}' stream ${i}: ${I}`,f);const b=u.createWebChannel(I,f);let x=!1,k=!1;const $=new b7({ro:Z=>{k?qe(co,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(x||(qe(co,`Opening RPC '${e}' stream ${i} transport.`),b.open(),x=!0),qe(co,`RPC '${e}' stream ${i} sending:`,Z),b.send(Z))},oo:()=>b.close()}),Q=(Z,Ae,Pe)=>{Z.listen(Ae,be=>{try{Pe(be)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return Q(b,mc.EventType.OPEN,()=>{k||qe(co,`RPC '${e}' stream ${i} transport opened.`)}),Q(b,mc.EventType.CLOSE,()=>{k||(k=!0,qe(co,`RPC '${e}' stream ${i} transport closed`),$.wo())}),Q(b,mc.EventType.ERROR,Z=>{k||(k=!0,Pc(co,`RPC '${e}' stream ${i} transport errored:`,Z),$.wo(new Le(fe.UNAVAILABLE,"The operation could not be completed")))}),Q(b,mc.EventType.MESSAGE,Z=>{var Ae;if(!k){const Pe=Z.data[0];St(!!Pe);const Ue=Pe.error||(null===(Ae=Pe[0])||void 0===Ae?void 0:Ae.error);if(Ue){qe(co,`RPC '${e}' stream ${i} received error:`,Ue);const gt=Ue.status;let mt=function(ei){const ku=Fi[ei];if(void 0!==ku)return wj(ku)}(gt),pn=Ue.message;void 0===mt&&(mt=fe.INTERNAL,pn="Unknown error status: "+gt+" with message "+Ue.message),k=!0,$.wo(new Le(mt,pn)),b.close()}else qe(co,`RPC '${e}' stream ${i} received:`,Pe),$._o(Pe)}}),Q(d,oT.STAT_EVENT,Z=>{Z.stat===Zm.PROXY?qe(co,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===Zm.NOPROXY&&qe(co,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.fo()},0),$}}function pP(){return typeof document<"u"?document:null}function LA(n){return new O8(n,!0)}class xL{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class C7{constructor(e,t,r,i,s,u,d,f){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new xL(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,B.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,B.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,B.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Le(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,B.Z)(function*(){e.state=0,e.start()}))}tu(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class S7 extends C7{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function V8(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:It(),i=e.targetChange.targetIds||[],s=function(f,_){return f.useProto3Json?(St(void 0===_||"string"==typeof _),ss.fromBase64String(_||"")):(St(void 0===_||_ instanceof Uint8Array),ss.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(f){const _=void 0===f.code?fe.UNKNOWN:wj(f.code);return new Le(_,f.message||"")}(u);t=new Cj(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=pd(n,r.document.name),s=Ii(r.document.updateTime),u=r.document.createTime?Ii(r.document.createTime):Rt.min(),d=new Us({mapValue:{fields:r.document.fields}}),f=Tr.newFoundDocument(i,s,u,d);t=new JR(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=pd(n,r.document),s=r.readTime?Ii(r.readTime):Rt.min(),u=Tr.newNoDocument(i,s);t=new JR([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=pd(n,r.document);t=new JR([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,{count:i=0,unchangedNames:s}=r,u=new R8(i,s);t=new Dj(r.targetId,u)}}var f;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Rt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Rt.min():s.readTime?Ii(s.readTime):Rt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=CA(this.serializer),t.addTarget=function(i,s){let u;const d=s.target;if(u=HR(d)?{documents:Lj(i,d)}:{query:uL(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=function xj(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}(i,s.resumeToken);const f=iL(i,s.expectedCount);null!==f&&(u.expectedCount=f)}else if(s.snapshotVersion.compareTo(Rt.min())>0){u.readTime=function YI(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}(i,s.snapshotVersion.toTimestamp());const f=iL(i,s.expectedCount);null!==f&&(u.expectedCount=f)}return u}(this.serializer,e);const r=function B8(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=CA(this.serializer),t.removeTarget=e,this.Wo(t)}}class P7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(fe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.vo(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(fe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class M7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(yi(t),this.mu=!1):qe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class N7{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{r.enqueueAndForget((0,B.Z)(function*(){var f;cg(u)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,B.Z)(function*(_){const I=dt(_);I.vu.add(4),yield rE(I),I.bu.set("Unknown"),I.vu.delete(4),yield VA(I)}),function(_){return f.apply(this,arguments)})(u))}))}),this.bu=new M7(r,i)}}function VA(n){return NL.apply(this,arguments)}function NL(){return NL=(0,B.Z)(function*(n){if(cg(n))for(const e of n.Ru)yield e(!0)}),NL.apply(this,arguments)}function rE(n){return kL.apply(this,arguments)}function kL(){return kL=(0,B.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),kL.apply(this,arguments)}function gP(n,e){const t=dt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),LL(t)?FL(t):sE(t).Ko()&&OL(t,e))}function UA(n,e){const t=dt(n),r=sE(t);t.Au.delete(e),r.Ko()&&Rz(t,e),0===t.Au.size&&(r.Ko()?r.jo():cg(t)&&t.bu.set("Unknown"))}function OL(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sE(n).su(e)}function Rz(n,e){n.Vu.qt(e),sE(n).iu(e)}function FL(n){n.Vu=new x8({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),sE(n).start(),n.bu.gu()}function LL(n){return cg(n)&&!sE(n).Uo()&&n.Au.size>0}function cg(n){return 0===dt(n).vu.size}function Pz(n){n.Vu=void 0}function k7(n){return VL.apply(this,arguments)}function VL(){return VL=(0,B.Z)(function*(n){n.Au.forEach((e,t)=>{OL(n,e)})}),VL.apply(this,arguments)}function O7(n,e){return UL.apply(this,arguments)}function UL(){return UL=(0,B.Z)(function*(n,e){Pz(n),LL(n)?(n.bu.Iu(e),FL(n)):n.bu.set("Unknown")}),UL.apply(this,arguments)}function F7(n,e,t){return BL.apply(this,arguments)}function BL(){return BL=(0,B.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Cj&&2===e.state&&e.cause)try{yield(r=(0,B.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mP(n,r)}else if(e instanceof JR?n.Vu.Ht(e):e instanceof Dj?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Rt.min()))try{const r=yield vz(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Vu.ce(s);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const _=i.Au.get(f);_&&i.Au.set(f,_.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach((d,f)=>{const _=i.Au.get(d);if(!_)return;i.Au.set(d,_.withResumeToken(ss.EMPTY_BYTE_STRING,_.snapshotVersion)),Rz(i,d);const I=new hf(_.target,d,f,_.sequenceNumber);OL(i,I)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield mP(n,r)}var r}),BL.apply(this,arguments)}function mP(n,e,t){return $L.apply(this,arguments)}function $L(){return $L=(0,B.Z)(function*(n,e,t){if(!Jp(e))throw e;n.vu.add(1),yield rE(n),n.bu.set("Offline"),t||(t=()=>vz(n.localStore)),n.asyncQueue.enqueueRetryable((0,B.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield VA(n)}))}),$L.apply(this,arguments)}function kz(n,e){return WL.apply(this,arguments)}function WL(){return WL=(0,B.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=cg(t);t.vu.add(3),yield rE(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield VA(t)}),WL.apply(this,arguments)}function ZL(){return ZL=(0,B.Z)(function*(n,e){const t=dt(n);e?(t.vu.delete(2),yield VA(t)):e||(t.vu.add(2),yield rE(t),t.bu.set("Unknown"))}),ZL.apply(this,arguments)}function sE(n){return n.Su||(n.Su=function(e,t,r){const i=dt(e);return i.fu(),new S7(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:k7.bind(null,n),ao:O7.bind(null,n),nu:F7.bind(null,n)}),n.Ru.push(function(){var e=(0,B.Z)(function*(t){t?(n.Su.Qo(),LL(n)?FL(n):n.bu.set("Unknown")):(yield n.Su.stop(),Pz(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}class QL{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new QL(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oE(n,e){if(yi("AsyncQueue",`${e}: ${n}`),Jp(n))return new Le(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class aE{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ut.comparator(t.key,r.key):(t,r)=>ut.comparator(t.key,r.key),this.keyedMap=vA(),this.sortedSet=new gr(this.comparator)}static emptySet(e){return new aE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aE)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new aE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Oz{constructor(){this.Cu=new gr(ut.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):It():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uE{constructor(e,t,r,i,s,u,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new uE(e,t,aE.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_A(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class j7{constructor(){this.Nu=void 0,this.listeners=[]}}class z7{constructor(){this.queries=new lf(e=>nj(e),_A),this.onlineState="Unknown",this.ku=new Set}}function JL(){return JL=(0,B.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new j7),i)try{s.Nu=yield t.onListen(r)}catch(u){const d=oE(u,`Initialization of query '${ZF(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&tV(t)}),JL.apply(this,arguments)}function eV(){return eV=(0,B.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),eV.apply(this,arguments)}function H7(n,e){const t=dt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.$u(i)&&(r=!0);u.Nu=i}}r&&tV(t)}function q7(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function tV(n){n.ku.forEach(e=>{e.next()})}class nV{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uE(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=uE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Vz{constructor(e){this.key=e}}class Uz{constructor(e){this.key=e}}class Bz{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=an(),this.mutatedKeys=an(),this.tc=ij(e),this.ec=new aE(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Oz,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,b)=>{const x=i.get(I),k=yA(this.query,b)?b:null,$=!!x&&this.mutatedKeys.has(x.key),Q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Z=!1;x&&k?x.data.isEqual(k.data)?$!==Q&&(r.track({type:3,doc:k}),Z=!0):this.rc(x,k)||(r.track({type:2,doc:k}),Z=!0,(f&&this.tc(k,f)>0||_&&this.tc(k,_)<0)&&(d=!0)):!x&&k?(r.track({type:0,doc:k}),Z=!0):x&&!k&&(r.track({type:1,doc:x}),Z=!0,(f||_)&&(d=!0)),Z&&(k?(u=u.add(k),s=Q?s.add(I):s.delete(I)):(u=u.delete(I),s=s.delete(I)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const I="F"===this.query.limitType?u.last():u.first();u=u.delete(I.key),s=s.delete(I.key),r.track({type:1,doc:I})}return{ec:u,ic:r,zi:d,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((_,I)=>function(b,x){const k=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return k(b)-k(x)}(_.type,I.type)||this.tc(_.doc,I.doc)),this.oc(r);const u=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,f=d!==this.Xu;return this.Xu=d,0!==s.length||f?{snapshot:new uE(this.query,e.ec,i,s,e.mutatedKeys,0===d,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Oz,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=an(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new Uz(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new Vz(r))}),t}hc(e){this.Yu=e.ir,this.Zu=an();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return uE.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Z7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Q7{constructor(e){this.key=e,this.fc=!1}}class Y7{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new lf(d=>nj(d),_A),this._c=new Map,this.mc=new Set,this.gc=new gr(ut.comparator),this.yc=new Map,this.Ic=new mL,this.Tc={},this.Ec=new Map,this.Ac=G_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function J7(n,e){return rV.apply(this,arguments)}function rV(){return rV=(0,B.Z)(function*(n,e){const t=function DV(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$z.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tZ.bind(null,e),e.dc.nu=H7.bind(null,e.eventManager),e.dc.Pc=q7.bind(null,e.eventManager),e}(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const u=yield function tE(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,ae.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new hf(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Oo(e)),d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield function iV(n,e,t,r,i){return sV.apply(this,arguments)}(t,e,r,"current"===d,u.resumeToken),t.isPrimaryClient&&gP(t.remoteStore,u)}return i}),rV.apply(this,arguments)}function sV(){return sV=(0,B.Z)(function*(n,e,t,r,i){n.Rc=(b,x,k)=>{return($=(0,B.Z)(function*(Q,Z,Ae,Pe){let be=Z.view.sc(Ae);be.zi&&(be=yield lP(Q.localStore,Z.query,!1).then(({documents:mt})=>Z.view.sc(mt,be)));const Ue=Pe&&Pe.targetChanges.get(Z.targetId),gt=Z.view.applyChanges(be,Q.isPrimaryClient,Ue);return gV(Q,Z.targetId,gt.cc),gt.snapshot}),function(Q,Z,Ae,Pe){return $.apply(this,arguments)})(n,b,x,k);var $};const s=yield lP(n.localStore,e,!0),u=new Bz(e,s.ir),d=u.sc(s.documents),f=bA.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(d,n.isPrimaryClient,f);gV(n,t,_.cc);const I=new Z7(e,t,u);return n.wc.set(e,I),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),_.snapshot}),sV.apply(this,arguments)}function X7(n,e){return oV.apply(this,arguments)}function oV(){return oV=(0,B.Z)(function*(n,e){const t=dt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!_A(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield nE(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),UA(t.remoteStore,r.targetId),cE(t,r.targetId)}).catch(Yp))):(cE(t,r.targetId),yield nE(t.localStore,r.targetId,!0))}),oV.apply(this,arguments)}function $z(n,e){return uV.apply(this,arguments)}function uV(){return uV=(0,B.Z)(function*(n,e){const t=dt(n);try{const r=yield function v7(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((I,b)=>{const x=i.get(b);if(!x)return;d.push(t.Bs.removeMatchingKeys(s,I.removedDocuments,b).next(()=>t.Bs.addMatchingKeys(s,I.addedDocuments,b)));let k=x.withSequenceNumber(s.currentSequenceNumber);var $,Q,Z;null!==e.targetMismatches.get(b)?k=k.withResumeToken(ss.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):I.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(I.resumeToken,r)),i=i.insert(b,k),Q=k,Z=I,(0===($=x).resumeToken.approximateByteSize()||Q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(s,k))});let f=ua(),_=an();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,I))}),d.push(function Iz(n,e,t){let r=an(),i=an();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=ua();return t.forEach((d,f)=>{const _=s.get(d);f.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Rt.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),{nr:u,sr:i}})}(s,u,e.documentUpdates).next(I=>{f=I.nr,_=I.sr})),!r.isEqual(Rt.min())){const I=t.Bs.getLastRemoteSnapshotVersion(s).next(b=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(I)}return ae.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,_)).next(()=>f)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.yc.get(s);u&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?St(u.fc):i.removedDocuments.size>0&&(St(u.fc),u.fc=!1))}),yield ff(t,r,e)}catch(r){yield Yp(r)}}),uV.apply(this,arguments)}function Gz(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,u)=>{const d=u.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=dt(s);d.onlineState=u;let f=!1;d.queries.forEach((_,I)=>{for(const b of I.listeners)b.Mu(u)&&(f=!0)}),f&&tV(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tZ(n,e,t){return cV.apply(this,arguments)}function cV(){return cV=(0,B.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let u=new gr(ut.comparator);u=u.insert(s,Tr.newNoDocument(s,Rt.min()));const d=an().add(s),f=new AA(Rt.min(),new Map,new gr(Wt),u,d);yield $z(r,f),r.gc=r.gc.remove(s),r.yc.delete(e),mV(r)}else yield nE(r.localStore,e,!1).then(()=>cE(r,e,t)).catch(Yp)}),cV.apply(this,arguments)}function cE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||jz(n,r)})}function jz(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(UA(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),mV(n))}function gV(n,e,t){for(const r of t)r instanceof Vz?(n.Ic.addReference(r.key,e),sZ(n,r)):r instanceof Uz?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||jz(n,r.key)):It()}function sZ(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.mc.add(r),mV(n))}function mV(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new ut(Dn.fromString(e)),r=n.Ac.next();n.yc.set(r,new Q7(t)),n.gc=n.gc.insert(t,r),gP(n.remoteStore,new hf(Oo(qI(t.path)),r,"TargetPurposeLimboResolution",Ua.ct))}}function ff(n,e,t){return _V.apply(this,arguments)}function _V(){return _V=(0,B.Z)(function*(n,e,t){const r=dt(n),i=[],s=[],u=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,f)=>{u.push(r.Rc(f,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const I=EL.Li(f.targetId,_);s.push(I)}}))}),yield Promise.all(u),r.dc.nu(i),yield(d=(0,B.Z)(function*(f,_){const I=dt(f);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ae.forEach(_,x=>ae.forEach(x.Fi,k=>I.persistence.referenceDelegate.addReference(b,x.targetId,k)).next(()=>ae.forEach(x.Bi,k=>I.persistence.referenceDelegate.removeReference(b,x.targetId,k)))))}catch(b){if(!Jp(b))throw b;qe("LocalStore","Failed to update sequence numbers: "+b)}for(const b of _){const x=b.targetId;if(!b.fromCache){const k=I.Ji.get(x),Q=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);I.Ji=I.Ji.insert(x,Q)}}}),function(f,_){return d.apply(this,arguments)})(r.localStore,s))}),_V.apply(this,arguments)}function oZ(n,e){return yV.apply(this,arguments)}function yV(){return yV=(0,B.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield yz(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(d=>{d.reject(new Le(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ff(t,r.er)}var i}),yV.apply(this,arguments)}function aZ(n,e){const t=dt(n),r=t.yc.get(e);if(r&&r.fc)return an().add(r.key);{let i=an();const s=t._c.get(e);if(!s)return i;for(const u of s){const d=t.wc.get(u);i=i.unionWith(d.view.nc)}return i}}class _P{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,B.Z)(function*(){t.serializer=LA(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function _z(n,e,t,r){return new _7(n,e,t,r)}(this.persistence,new mz,e.initialUser,this.serializer)}createPersistence(e){return new _L(aP.zs,this.serializer)}createSharedClientState(e){return new Dz}terminate(){var e=this;return(0,B.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lE{initialize(e,t){var r=this;return(0,B.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Gz(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=oZ.bind(null,r.syncEngine),yield function KL(n,e){return ZL.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new z7}createDatastore(e){const t=LA(e.databaseInfo.databaseId),r=new D7(e.databaseInfo);return new P7(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>Gz(this.syncEngine,d,0),u=Cz.D()?new Cz:new T7,new N7(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,f,_){const I=new Y7(r,i,s,u,d,f);return _&&(I.vc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,B.Z)(function*(t){const r=dt(t);qe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield rE(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class yP{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class IZ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=As.UNAUTHENTICATED,this.clientId=vG.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,B.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(qe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,B.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,B.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=oE(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function vP(n,e){return SV.apply(this,arguments)}function SV(){return SV=(0,B.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,B.Z)(function*(s){r.isEqual(s)||(yield yz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SV.apply(this,arguments)}function RV(n,e){return PV.apply(this,arguments)}function PV(){return PV=(0,B.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function xV(n){return MV.apply(this,arguments)}(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>kz(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>kz(e.remoteStore,s)),n._onlineComponents=e}),PV.apply(this,arguments)}function MV(){return MV=(0,B.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vP(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function Zz(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Pc("Error using user provided cache. Falling back to memory cache: "+t),yield vP(n,new _P)}}else qe("FirestoreClient","Using default OfflineComponentProvider"),yield vP(n,new _P);return n._offlineComponents}),MV.apply(this,arguments)}function NV(){return NV=(0,B.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe("FirestoreClient","Using user provided OnlineComponentProvider"),yield RV(n,n._uninitializedComponentsProvider._online)):(qe("FirestoreClient","Using default OnlineComponentProvider"),yield RV(n,new lE))),n._onlineComponents}),NV.apply(this,arguments)}function dE(n){return OV.apply(this,arguments)}function OV(){return OV=(0,B.Z)(function*(n){const e=yield function IP(n){return NV.apply(this,arguments)}(n),t=e.eventManager;return t.onListen=J7.bind(null,e.syncEngine),t.onUnlisten=X7.bind(null,e.syncEngine),t}),OV.apply(this,arguments)}function tH(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const nH=new Map;function iH(n){if(ut.isDocumentKey(n))throw new Le(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function wP(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":It()}(n);throw new Le(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class oH{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function RZ(n,e,t,r){if(!0===e&&!0===r)throw new Le(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=tH(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Le(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class BA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oH({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Le(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oH(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DK;switch(t.type){case"firstParty":return new PK(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Le(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nH.get(e);t&&(qe("ComponentProvider","Removing Datastore"),nH.delete(e),t.terminate())}(this),Promise.resolve()}}class Ei{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ei(this.firestore,e,this._key)}}class Bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class gd extends Bs{constructor(e,t,r){super(e,t,qI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ei(this.firestore,null,new ut(e))}withConverter(e){return new gd(this.firestore,e,this._path)}}function xZ(n,e,...t){if(n=(0,it.m9)(n),function FV(n,e,t){if(!t)throw new Le(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}("collection","path",e),n instanceof BA){const r=Dn.fromString(e,...t);return iH(r),new gd(n,null,r)}{if(!(n instanceof Ei||n instanceof gd))throw new Le(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Dn.fromString(e,...t));return iH(r),new gd(n.firestore,null,r)}}class NZ{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new xL(this,"async_queue_retry"),this.Xc=()=>{const t=pP();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=pP();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=pP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new is;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,B.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Jp(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,yi("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=QL.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&It()}verifyOperationInProgress(){}sa(){var e=this;return(0,B.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function LV(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Ar extends BA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new NZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||uH(this),this._firestoreClient.terminate()}}function OZ(n,e){const t="object"==typeof n?n:(0,wn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,wn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,it.P0)("firestore");s&&function PZ(n,e,t,r={}){var i;const s=(n=bn(n,BA))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==u&&Pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=As.MOCK_USER;else{d=(0,it.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new As(_)}n._authCredentials=new CK(new _G(d,f))}}(i,...s)}return i}function uH(n){var e,t,r;const i=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new o8(n._databaseId,d,n._persistenceKey,(_=i).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,tH(_.experimentalLongPollingOptions),_.useFetchStreams));var d,_;n._firestoreClient=new IZ(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class z_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new z_(ss.fromBase64String(e))}catch(t){throw new Le(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new z_(ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hE{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class VV{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}const jZ=new RegExp("[~\\*/\\[\\]]");function bP(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||u)&&(f+=" (found",s&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new Le(fe.INVALID_ARGUMENT,d+n+f)}class GV{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ei(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zZ extends GV{data(){return super.data()}}function DP(n,e){return"string"==typeof e?function AP(n,e,t){if(e.search(jZ)>=0)throw bP(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hE(...e.split("."))._internalPath}catch{throw bP(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}(n,e):e instanceof hE?e._internalPath:e._delegate._internalPath}class qZ{convertValue(e,t="none"){switch(ng(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw It()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Xp(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new VV(Xr(e.latitude),Xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$R(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hA(e));default:return null}}convertTimestamp(e){const t=eg(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Dn.fromString(e);St($j(r));const i=new x_(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(t)||yi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class q_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gE extends GV{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new PP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DP("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class PP extends gE{data(e={}){return super.data(e)}}class mE{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new q_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new PP(this._firestore,this._userDataWriter,r.key,r,new q_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new PP(r._firestore,r._userDataWriter,u.doc.key,u.doc,new q_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new PP(r._firestore,r._userDataWriter,u.doc.key,u.doc,new q_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return 0!==u.type&&(f=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),_=s.indexOf(u.doc.key)),{type:KZ(u.type),doc:d,oldIndex:f,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function KZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}class dg extends qZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new z_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ei(this.firestore,null,t)}}!function(n,e=!0){BI=wn.SDK_VERSION,(0,wn._registerComponent)(new xl.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Ar(new SK(t.getProvider("auth-internal")),new xK(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Le(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x_(d.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,wn.registerVersion)(mG,"3.13.0",n),(0,wn.registerVersion)(mG,"3.13.0","esm2017")}();var aQ={includeMetadataChanges:!1};function qV(n,e){return void 0===e&&(e=aQ),new Zr.y(function(t){var r=function ZZ(n,...e){var t,r,i;n=(0,it.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||LV(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(LV(e[u])){const b=e[u];e[u]=null===(t=b.next)||void 0===t?void 0:t.bind(b),e[u+1]=null===(r=b.error)||void 0===r?void 0:r.bind(b),e[u+2]=null===(i=b.complete)||void 0===i?void 0:i.bind(b)}let f,_,I;if(n instanceof Ei)_=bn(n.firestore,Ar),I=qI(n._key.path),f={next:b=>{e[u]&&e[u](function HV(n,e,t){const r=t.docs.get(e._key),i=new dg(n);return new gE(n,i,e._key,r,new q_(t.hasPendingWrites,t.fromCache),e.converter)}(_,n,b))},error:e[u+1],complete:e[u+2]};else{const b=bn(n,Bs);_=bn(b.firestore,Ar),I=b._query;const x=new dg(_);f={next:k=>{e[u]&&e[u](new mE(_,x,b,k))},error:e[u+1],complete:e[u+2]},function EH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(b,x,k,$){const Q=new yP($),Z=new nV(x,Q,k);return b.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return function YL(n,e){return JL.apply(this,arguments)}(yield dE(b),Z)})),()=>{Q.Dc(),b.asyncQueue.enqueueAndForget((0,B.Z)(function*(){return function XL(n,e){return eV.apply(this,arguments)}(yield dE(b),Z)}))}}(function Li(n){return n._firestoreClient||uH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}(_),I,d,f)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function pQ(n,e){return void 0===e&&(e={}),function fQ(n){return qV(n,{includeMetadataChanges:!0}).pipe((0,rn.U)(function(e){return e.docs}))}(n).pipe((0,rn.U)(function(t){return t.map(function(r){return function RH(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class MP{constructor(e){return e}}const NH="firestore",ZV=new p.OlP("angularfire2.firestore-instances");function _Q(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new MP(r)}}const yQ={provide:class gQ{constructor(){return(0,Gr.vb)(NH)}},deps:[[new p.FiY,ZV]]},vQ={provide:MP,useFactory:function mQ(n,e){const t=(0,Gr.JM)(NH,n,e);return t&&new MP(t)},deps:[[new p.FiY,ZV],NI]};let kH=(()=>{class n{constructor(){(0,C_.KN)("angularfire",Gr.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[vQ,yQ]}),n})();function IQ(n,...e){return{ngModule:kH,providers:[{provide:ZV,useFactory:_Q(n),multi:!0,deps:[p.R0b,p.zs3,Gr.HU,r$,[new p.FiY,gG],[new p.FiY,bR],...e]}]}}const EQ=(0,Gr.u3)(pQ,!0),wQ=(0,Gr.u3)(xZ,!0),TQ=(0,Gr.u3)(OZ,!0);let AQ=(()=>{var n;class e{constructor(r){this.fs=r}getNotes(){let r=wQ(this.fs,"fines-reasons");return EQ(r,{idField:"id"})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(MP))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const OH={apiKey:"AIzaSyBfZwTw3O0jW8Kl43QRLCGchzJ8ie-0Aic",authDomain:"proben-proekt.firebaseapp.com",projectId:"proben-proekt",storageBucket:"proben-proekt.appspot.com",messagingSenderId:"542405012456",appId:"1:542405012456:web:af6d14aaf9c85ad1d2d25d",measurementId:"G-RKQXZGPE67"};let bQ=(()=>{var n;class e{constructor(r){this.frauth=r,this.frauth.setPersistence("local").then(()=>{console.log("Firebase initialized with persistence.")}).catch(i=>{console.error("Error setting persistence:",i)})}}return(n=e).\u0275fac=function(r){return new(r||n)(p.LFG(DR))},n.\u0275mod=p.oAB({type:n,bootstrap:[wK]}),n.\u0275inj=p.cJS({providers:[AQ],imports:[tl,EK,mW(()=>_W(OH)),IQ(()=>TQ()),g5,Sc.hO.initializeApp(OH),kH,hb,fb]}),e})();Rg().bootstrapModule(bQ).catch(n=>console.error(n))},5619:(wt,Se,O)=>{O.d(Se,{X:()=>U});var p=O(8645);class U extends p.x{constructor(re){super(),this._value=re}get value(){return this.getValue()}_subscribe(re){const se=super._subscribe(re);return!se.closed&&re.next(this._value),se}getValue(){const{hasError:re,thrownError:se,_value:Ie}=this;if(re)throw se;return this._throwIfClosed(),Ie}next(re){super.next(this._value=re)}}},5592:(wt,Se,O)=>{O.d(Se,{y:()=>Ve});var p=O(1887),U=O(7394),W=O(4850),re=O(8407),se=O(2653),Ie=O(4674),ve=O(1441);let Ve=(()=>{class ce{constructor(me){me&&(this._subscribe=me)}lift(me){const Xe=new ce;return Xe.source=this,Xe.operator=me,Xe}subscribe(me,Xe,nt){const et=function q(ce){return ce&&ce instanceof p.Lv||function H(ce){return ce&&(0,Ie.m)(ce.next)&&(0,Ie.m)(ce.error)&&(0,Ie.m)(ce.complete)}(ce)&&(0,U.Nn)(ce)}(me)?me:new p.Hp(me,Xe,nt);return(0,ve.x)(()=>{const{operator:ze,source:At}=this;et.add(ze?ze.call(et,At):At?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(me){try{return this._subscribe(me)}catch(Xe){me.error(Xe)}}forEach(me,Xe){return new(Xe=_e(Xe))((nt,et)=>{const ze=new p.Hp({next:At=>{try{me(At)}catch(xe){et(xe),ze.unsubscribe()}},error:et,complete:nt});this.subscribe(ze)})}_subscribe(me){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(me)}[W.L](){return this}pipe(...me){return(0,re.U)(me)(this)}toPromise(me){return new(me=_e(me))((Xe,nt)=>{let et;this.subscribe(ze=>et=ze,ze=>nt(ze),()=>Xe(et))})}}return ce.create=Ke=>new ce(Ke),ce})();function _e(ce){var Ke;return null!==(Ke=ce??se.config.Promise)&&void 0!==Ke?Ke:Promise}},8645:(wt,Se,O)=>{O.d(Se,{x:()=>ve});var p=O(5592),U=O(7394);const re=(0,O(2306).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(9039),Ie=O(1441);let ve=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ce=new Ve(this,this);return ce.operator=q,ce}_throwIfClosed(){if(this.closed)throw new re}next(q){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ce of this.currentObservers)ce.next(q)}})}error(q){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ce}=this;for(;ce.length;)ce.shift().error(q)}})}complete(){(0,Ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ce,isStopped:Ke,observers:me}=this;return ce||Ke?U.Lc:(this.currentObservers=null,me.push(q),new U.w0(()=>{this.currentObservers=null,(0,se.P)(me,q)}))}_checkFinalizedStatuses(q){const{hasError:ce,thrownError:Ke,isStopped:me}=this;ce?q.error(Ke):me&&q.complete()}asObservable(){const q=new p.y;return q.source=this,q}}return _e.create=(H,q)=>new Ve(H,q),_e})();class Ve extends ve{constructor(H,q){super(),this.destination=H,this.source=q}next(H){var q,ce;null===(ce=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ce||ce.call(q,H)}error(H){var q,ce;null===(ce=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ce||ce.call(q,H)}complete(){var H,q;null===(q=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===q||q.call(H)}_subscribe(H){var q,ce;return null!==(ce=null===(q=this.source)||void 0===q?void 0:q.subscribe(H))&&void 0!==ce?ce:U.Lc}}},1887:(wt,Se,O)=>{O.d(Se,{Hp:()=>nt,Lv:()=>ce});var p=O(4674),U=O(7394),W=O(2653),re=O(3894);function se(){}const Ie=_e("C",void 0,void 0);function _e(Be,Ne,Oe){return{kind:Be,value:Ne,error:Oe}}var H=O(7599),q=O(1441);class ce extends U.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,U.Nn)(Ne)&&Ne.add(this)):this.destination=xe}static create(Ne,Oe,Qe){return new nt(Ne,Oe,Qe)}next(Ne){this.isStopped?At(function Ve(Be){return _e("N",Be,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?At(function ve(Be){return _e("E",void 0,Be)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?At(Ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function me(Be,Ne){return Ke.call(Be,Ne)}class Xe{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Oe}=this;if(Oe.next)try{Oe.next(Ne)}catch(Qe){et(Qe)}}error(Ne){const{partialObserver:Oe}=this;if(Oe.error)try{Oe.error(Ne)}catch(Qe){et(Qe)}else et(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Oe){et(Oe)}}}class nt extends ce{constructor(Ne,Oe,Qe){let oe;if(super(),(0,p.m)(Ne)||!Ne)oe={next:Ne??void 0,error:Oe??void 0,complete:Qe??void 0};else{let Je;this&&W.config.useDeprecatedNextContext?(Je=Object.create(Ne),Je.unsubscribe=()=>this.unsubscribe(),oe={next:Ne.next&&me(Ne.next,Je),error:Ne.error&&me(Ne.error,Je),complete:Ne.complete&&me(Ne.complete,Je)}):oe=Ne}this.destination=new Xe(oe)}}function et(Be){W.config.useDeprecatedSynchronousErrorHandling?(0,q.O)(Be):(0,re.h)(Be)}function At(Be,Ne){const{onStoppedNotification:Oe}=W.config;Oe&&H.z.setTimeout(()=>Oe(Be,Ne))}const xe={closed:!0,next:se,error:function ze(Be){throw Be},complete:se}},7394:(wt,Se,O)=>{O.d(Se,{Lc:()=>Ie,w0:()=>se,Nn:()=>ve});var p=O(4674);const W=(0,O(2306).d)(_e=>function(q){_e(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ce,Ke)=>`${Ke+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var re=O(9039);class se{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const me of q)me.remove(this);else q.remove(this);const{initialTeardown:ce}=this;if((0,p.m)(ce))try{ce()}catch(me){H=me instanceof W?me.errors:[me]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const me of Ke)try{Ve(me)}catch(Xe){H=H??[],Xe instanceof W?H=[...H,...Xe.errors]:H.push(Xe)}}if(H)throw new W(H)}}add(H){var q;if(H&&H!==this)if(this.closed)Ve(H);else{if(H instanceof se){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(H)}}_hasParent(H){const{_parentage:q}=this;return q===H||Array.isArray(q)&&q.includes(H)}_addParent(H){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(H),q):q?[q,H]:H}_removeParent(H){const{_parentage:q}=this;q===H?this._parentage=null:Array.isArray(q)&&(0,re.P)(q,H)}remove(H){const{_finalizers:q}=this;q&&(0,re.P)(q,H),H instanceof se&&H._removeParent(this)}}se.EMPTY=(()=>{const _e=new se;return _e.closed=!0,_e})();const Ie=se.EMPTY;function ve(_e){return _e instanceof se||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function Ve(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2653:(wt,Se,O)=>{O.d(Se,{config:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(wt,Se,O)=>{O.d(Se,{E:()=>U});const U=new(O(5592).y)(se=>se.complete())},2459:(wt,Se,O)=>{O.d(Se,{D:()=>Ne});var p=O(4829),U=O(3093),W=O(5137),Ie=O(5592),Ve=O(4971),_e=O(4674),H=O(7103);function ce(Oe,Qe){if(!Oe)throw new Error("Iterable cannot be null");return new Ie.y(oe=>{(0,H.f)(oe,Qe,()=>{const Je=Oe[Symbol.asyncIterator]();(0,H.f)(oe,Qe,()=>{Je.next().then(Ge=>{Ge.done?oe.complete():oe.next(Ge.value)})},0,!0)})})}var Ke=O(8382),me=O(4026),Xe=O(4266),nt=O(3664),et=O(5726),ze=O(9853),At=O(541);function Ne(Oe,Qe){return Qe?function Be(Oe,Qe){if(null!=Oe){if((0,Ke.c)(Oe))return function re(Oe,Qe){return(0,p.Xf)(Oe).pipe((0,W.R)(Qe),(0,U.Q)(Qe))}(Oe,Qe);if((0,Xe.z)(Oe))return function ve(Oe,Qe){return new Ie.y(oe=>{let Je=0;return Qe.schedule(function(){Je===Oe.length?oe.complete():(oe.next(Oe[Je++]),oe.closed||this.schedule())})})}(Oe,Qe);if((0,me.t)(Oe))return function se(Oe,Qe){return(0,p.Xf)(Oe).pipe((0,W.R)(Qe),(0,U.Q)(Qe))}(Oe,Qe);if((0,et.D)(Oe))return ce(Oe,Qe);if((0,nt.T)(Oe))return function q(Oe,Qe){return new Ie.y(oe=>{let Je;return(0,H.f)(oe,Qe,()=>{Je=Oe[Ve.h](),(0,H.f)(oe,Qe,()=>{let Ge,ht;try{({value:Ge,done:ht}=Je.next())}catch(Hr){return void oe.error(Hr)}ht?oe.complete():oe.next(Ge)},0,!0)}),()=>(0,_e.m)(Je?.return)&&Je.return()})}(Oe,Qe);if((0,At.L)(Oe))return function xe(Oe,Qe){return ce((0,At.Q)(Oe),Qe)}(Oe,Qe)}throw(0,ze.z)(Oe)}(Oe,Qe):(0,p.Xf)(Oe)}},4829:(wt,Se,O)=>{O.d(Se,{Xf:()=>Ke});var p=O(7582),U=O(4266),W=O(4026),re=O(5592),se=O(8382),Ie=O(5726),ve=O(9853),Ve=O(3664),_e=O(541),H=O(4674),q=O(3894),ce=O(4850);function Ke(Be){if(Be instanceof re.y)return Be;if(null!=Be){if((0,se.c)(Be))return function me(Be){return new re.y(Ne=>{const Oe=Be[ce.L]();if((0,H.m)(Oe.subscribe))return Oe.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Be);if((0,U.z)(Be))return function Xe(Be){return new re.y(Ne=>{for(let Oe=0;Oe<Be.length&&!Ne.closed;Oe++)Ne.next(Be[Oe]);Ne.complete()})}(Be);if((0,W.t)(Be))return function nt(Be){return new re.y(Ne=>{Be.then(Oe=>{Ne.closed||(Ne.next(Oe),Ne.complete())},Oe=>Ne.error(Oe)).then(null,q.h)})}(Be);if((0,Ie.D)(Be))return ze(Be);if((0,Ve.T)(Be))return function et(Be){return new re.y(Ne=>{for(const Oe of Be)if(Ne.next(Oe),Ne.closed)return;Ne.complete()})}(Be);if((0,_e.L)(Be))return function At(Be){return ze((0,_e.Q)(Be))}(Be)}throw(0,ve.z)(Be)}function ze(Be){return new re.y(Ne=>{(function xe(Be,Ne){var Oe,Qe,oe,Je;return(0,p.mG)(this,void 0,void 0,function*(){try{for(Oe=(0,p.KL)(Be);!(Qe=yield Oe.next()).done;)if(Ne.next(Qe.value),Ne.closed)return}catch(Ge){oe={error:Ge}}finally{try{Qe&&!Qe.done&&(Je=Oe.return)&&(yield Je.call(Oe))}finally{if(oe)throw oe.error}}Ne.complete()})})(Be,Ne).catch(Oe=>Ne.error(Oe))})}},3019:(wt,Se,O)=>{O.d(Se,{T:()=>Ie});var p=O(7537),U=O(4829),W=O(6232),re=O(4564),se=O(2459);function Ie(...ve){const Ve=(0,re.yG)(ve),_e=(0,re._6)(ve,1/0),H=ve;return H.length?1===H.length?(0,U.Xf)(H[0]):(0,p.J)(_e)((0,se.D)(H,Ve)):W.E}},2096:(wt,Se,O)=>{O.d(Se,{of:()=>W});var p=O(4564),U=O(2459);function W(...re){const se=(0,p.yG)(re);return(0,U.D)(re,se)}},8251:(wt,Se,O)=>{O.d(Se,{x:()=>U});var p=O(1887);function U(re,se,Ie,ve,Ve){return new W(re,se,Ie,ve,Ve)}class W extends p.Lv{constructor(se,Ie,ve,Ve,_e,H){super(se),this.onFinalize=_e,this.shouldUnsubscribe=H,this._next=Ie?function(q){try{Ie(q)}catch(ce){se.error(ce)}}:super._next,this._error=Ve?function(q){try{Ve(q)}catch(ce){se.error(ce)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(q){se.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ie}=this;super.unsubscribe(),!Ie&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},7398:(wt,Se,O)=>{O.d(Se,{U:()=>W});var p=O(9360),U=O(8251);function W(re,se){return(0,p.e)((Ie,ve)=>{let Ve=0;Ie.subscribe((0,U.x)(ve,_e=>{ve.next(re.call(se,_e,Ve++))}))})}},7537:(wt,Se,O)=>{O.d(Se,{J:()=>W});var p=O(1631),U=O(2737);function W(re=1/0){return(0,p.z)(U.y,re)}},1631:(wt,Se,O)=>{O.d(Se,{z:()=>Ve});var p=O(7398),U=O(4829),W=O(9360),re=O(7103),se=O(8251),ve=O(4674);function Ve(_e,H,q=1/0){return(0,ve.m)(H)?Ve((ce,Ke)=>(0,p.U)((me,Xe)=>H(ce,me,Ke,Xe))((0,U.Xf)(_e(ce,Ke))),q):("number"==typeof H&&(q=H),(0,W.e)((ce,Ke)=>function Ie(_e,H,q,ce,Ke,me,Xe,nt){const et=[];let ze=0,At=0,xe=!1;const Be=()=>{xe&&!et.length&&!ze&&H.complete()},Ne=Qe=>ze<ce?Oe(Qe):et.push(Qe),Oe=Qe=>{me&&H.next(Qe),ze++;let oe=!1;(0,U.Xf)(q(Qe,At++)).subscribe((0,se.x)(H,Je=>{Ke?.(Je),me?Ne(Je):H.next(Je)},()=>{oe=!0},void 0,()=>{if(oe)try{for(ze--;et.length&&ze<ce;){const Je=et.shift();Xe?(0,re.f)(H,Xe,()=>Oe(Je)):Oe(Je)}Be()}catch(Je){H.error(Je)}}))};return _e.subscribe((0,se.x)(H,Ne,()=>{xe=!0,Be()})),()=>{nt?.()}}(ce,Ke,_e,q)))}},3093:(wt,Se,O)=>{O.d(Se,{Q:()=>re});var p=O(7103),U=O(9360),W=O(8251);function re(se,Ie=0){return(0,U.e)((ve,Ve)=>{ve.subscribe((0,W.x)(Ve,_e=>(0,p.f)(Ve,se,()=>Ve.next(_e),Ie),()=>(0,p.f)(Ve,se,()=>Ve.complete(),Ie),_e=>(0,p.f)(Ve,se,()=>Ve.error(_e),Ie)))})}},3020:(wt,Se,O)=>{O.d(Se,{B:()=>se});var p=O(4829),U=O(8645),W=O(1887),re=O(9360);function se(ve={}){const{connector:Ve=(()=>new U.x),resetOnError:_e=!0,resetOnComplete:H=!0,resetOnRefCountZero:q=!0}=ve;return ce=>{let Ke,me,Xe,nt=0,et=!1,ze=!1;const At=()=>{me?.unsubscribe(),me=void 0},xe=()=>{At(),Ke=Xe=void 0,et=ze=!1},Be=()=>{const Ne=Ke;xe(),Ne?.unsubscribe()};return(0,re.e)((Ne,Oe)=>{nt++,!ze&&!et&&At();const Qe=Xe=Xe??Ve();Oe.add(()=>{nt--,0===nt&&!ze&&!et&&(me=Ie(Be,q))}),Qe.subscribe(Oe),!Ke&&nt>0&&(Ke=new W.Hp({next:oe=>Qe.next(oe),error:oe=>{ze=!0,At(),me=Ie(xe,_e,oe),Qe.error(oe)},complete:()=>{et=!0,At(),me=Ie(xe,H),Qe.complete()}}),(0,p.Xf)(Ne).subscribe(Ke))})(ce)}}function Ie(ve,Ve,..._e){if(!0===Ve)return void ve();if(!1===Ve)return;const H=new W.Hp({next:()=>{H.unsubscribe(),ve()}});return(0,p.Xf)(Ve(..._e)).subscribe(H)}},5137:(wt,Se,O)=>{O.d(Se,{R:()=>U});var p=O(9360);function U(W,re=0){return(0,p.e)((se,Ie)=>{Ie.add(W.schedule(()=>se.subscribe(Ie),re))})}},4664:(wt,Se,O)=>{O.d(Se,{w:()=>re});var p=O(4829),U=O(9360),W=O(8251);function re(se,Ie){return(0,U.e)((ve,Ve)=>{let _e=null,H=0,q=!1;const ce=()=>q&&!_e&&Ve.complete();ve.subscribe((0,W.x)(Ve,Ke=>{_e?.unsubscribe();let me=0;const Xe=H++;(0,p.Xf)(se(Ke,Xe)).subscribe(_e=(0,W.x)(Ve,nt=>Ve.next(Ie?Ie(Ke,nt,Xe,me++):nt),()=>{_e=null,ce()}))},()=>{q=!0,ce()}))})}},9397:(wt,Se,O)=>{O.d(Se,{b:()=>se});var p=O(4674),U=O(9360),W=O(8251),re=O(2737);function se(Ie,ve,Ve){const _e=(0,p.m)(Ie)||ve||Ve?{next:Ie,error:ve,complete:Ve}:Ie;return _e?(0,U.e)((H,q)=>{var ce;null===(ce=_e.subscribe)||void 0===ce||ce.call(_e);let Ke=!0;H.subscribe((0,W.x)(q,me=>{var Xe;null===(Xe=_e.next)||void 0===Xe||Xe.call(_e,me),q.next(me)},()=>{var me;Ke=!1,null===(me=_e.complete)||void 0===me||me.call(_e),q.complete()},me=>{var Xe;Ke=!1,null===(Xe=_e.error)||void 0===Xe||Xe.call(_e,me),q.error(me)},()=>{var me,Xe;Ke&&(null===(me=_e.unsubscribe)||void 0===me||me.call(_e)),null===(Xe=_e.finalize)||void 0===Xe||Xe.call(_e)}))}):re.y}},1954:(wt,Se,O)=>{O.d(Se,{o:()=>se});var p=O(7394);class U extends p.w0{constructor(ve,Ve){super()}schedule(ve,Ve=0){return this}}const W={setInterval(Ie,ve,...Ve){const{delegate:_e}=W;return _e?.setInterval?_e.setInterval(Ie,ve,...Ve):setInterval(Ie,ve,...Ve)},clearInterval(Ie){const{delegate:ve}=W;return(ve?.clearInterval||clearInterval)(Ie)},delegate:void 0};var re=O(9039);class se extends U{constructor(ve,Ve){super(ve,Ve),this.scheduler=ve,this.work=Ve,this.pending=!1}schedule(ve,Ve=0){var _e;if(this.closed)return this;this.state=ve;const H=this.id,q=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(q,H,Ve)),this.pending=!0,this.delay=Ve,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(q,this.id,Ve),this}requestAsyncId(ve,Ve,_e=0){return W.setInterval(ve.flush.bind(ve,this),_e)}recycleAsyncId(ve,Ve,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ve;null!=Ve&&W.clearInterval(Ve)}execute(ve,Ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ve,Ve);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ve){let H,_e=!1;try{this.work(ve)}catch(q){_e=!0,H=q||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ve}=this,{actions:_e}=Ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(_e,this),null!=ve&&(this.id=this.recycleAsyncId(Ve,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(wt,Se,O)=>{O.d(Se,{v:()=>W});var p=O(4552);class U{constructor(se,Ie=U.now){this.schedulerActionCtor=se,this.now=Ie}schedule(se,Ie=0,ve){return new this.schedulerActionCtor(this,se).schedule(ve,Ie)}}U.now=p.l.now;class W extends U{constructor(se,Ie=U.now){super(se,Ie),this.actions=[],this._active=!1}flush(se){const{actions:Ie}=this;if(this._active)return void Ie.push(se);let ve;this._active=!0;do{if(ve=se.execute(se.state,se.delay))break}while(se=Ie.shift());if(this._active=!1,ve){for(;se=Ie.shift();)se.unsubscribe();throw ve}}}},6321:(wt,Se,O)=>{O.d(Se,{z:()=>W});var p=O(1954);const W=new(O(2631).v)(p.o)},4552:(wt,Se,O)=>{O.d(Se,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},7599:(wt,Se,O)=>{O.d(Se,{z:()=>p});const p={setTimeout(U,W,...re){const{delegate:se}=p;return se?.setTimeout?se.setTimeout(U,W,...re):setTimeout(U,W,...re)},clearTimeout(U){const{delegate:W}=p;return(W?.clearTimeout||clearTimeout)(U)},delegate:void 0}},4971:(wt,Se,O)=>{O.d(Se,{h:()=>U});const U=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(wt,Se,O)=>{O.d(Se,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(wt,Se,O)=>{O.d(Se,{_6:()=>Ie,jO:()=>re,yG:()=>se});var p=O(4674);function W(ve){return ve[ve.length-1]}function re(ve){return(0,p.m)(W(ve))?ve.pop():void 0}function se(ve){return function U(ve){return ve&&(0,p.m)(ve.schedule)}(W(ve))?ve.pop():void 0}function Ie(ve,Ve){return"number"==typeof W(ve)?ve.pop():Ve}},9039:(wt,Se,O)=>{function p(U,W){if(U){const re=U.indexOf(W);0<=re&&U.splice(re,1)}}O.d(Se,{P:()=>p})},2306:(wt,Se,O)=>{function p(U){const re=U(se=>{Error.call(se),se.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}O.d(Se,{d:()=>p})},1441:(wt,Se,O)=>{O.d(Se,{O:()=>re,x:()=>W});var p=O(2653);let U=null;function W(se){if(p.config.useDeprecatedSynchronousErrorHandling){const Ie=!U;if(Ie&&(U={errorThrown:!1,error:null}),se(),Ie){const{errorThrown:ve,error:Ve}=U;if(U=null,ve)throw Ve}}else se()}function re(se){p.config.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=se)}},7103:(wt,Se,O)=>{function p(U,W,re,se=0,Ie=!1){const ve=W.schedule(function(){re(),Ie?U.add(this.schedule(null,se)):this.unsubscribe()},se);if(U.add(ve),!Ie)return ve}O.d(Se,{f:()=>p})},2737:(wt,Se,O)=>{function p(U){return U}O.d(Se,{y:()=>p})},4266:(wt,Se,O)=>{O.d(Se,{z:()=>p});const p=U=>U&&"number"==typeof U.length&&"function"!=typeof U},5726:(wt,Se,O)=>{O.d(Se,{D:()=>U});var p=O(4674);function U(W){return Symbol.asyncIterator&&(0,p.m)(W?.[Symbol.asyncIterator])}},4674:(wt,Se,O)=>{function p(U){return"function"==typeof U}O.d(Se,{m:()=>p})},8382:(wt,Se,O)=>{O.d(Se,{c:()=>W});var p=O(4850),U=O(4674);function W(re){return(0,U.m)(re[p.L])}},3664:(wt,Se,O)=>{O.d(Se,{T:()=>W});var p=O(4971),U=O(4674);function W(re){return(0,U.m)(re?.[p.h])}},4026:(wt,Se,O)=>{O.d(Se,{t:()=>U});var p=O(4674);function U(W){return(0,p.m)(W?.then)}},541:(wt,Se,O)=>{O.d(Se,{L:()=>re,Q:()=>W});var p=O(7582),U=O(4674);function W(se){return(0,p.FC)(this,arguments,function*(){const ve=se.getReader();try{for(;;){const{value:Ve,done:_e}=yield(0,p.qq)(ve.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(Ve)}}finally{ve.releaseLock()}})}function re(se){return(0,U.m)(se?.getReader)}},9360:(wt,Se,O)=>{O.d(Se,{A:()=>U,e:()=>W});var p=O(4674);function U(re){return(0,p.m)(re?.lift)}function W(re){return se=>{if(U(se))return se.lift(function(Ie){try{return re(Ie,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},8407:(wt,Se,O)=>{O.d(Se,{U:()=>W,z:()=>U});var p=O(2737);function U(...re){return W(re)}function W(re){return 0===re.length?p.y:1===re.length?re[0]:function(Ie){return re.reduce((ve,Ve)=>Ve(ve),Ie)}}},3894:(wt,Se,O)=>{O.d(Se,{h:()=>W});var p=O(2653),U=O(7599);function W(re){U.z.setTimeout(()=>{const{onUnhandledError:se}=p.config;if(!se)throw re;se(re)})}},9853:(wt,Se,O)=>{function p(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Se,{z:()=>p})},8926:(wt,Se,O)=>{O.d(Se,{tb:()=>iI,AFp:()=>Nb,ip1:()=>nS,hGG:()=>fN,z2F:()=>rd,Ojb:()=>ex,sBO:()=>m_,Sil:()=>QM,EJc:()=>l_,Xts:()=>rp,SBq:()=>ky,lqb:()=>Cl,qLn:()=>up,vpe:()=>nr,XFs:()=>Ot,OlP:()=>Mn,zs3:()=>Pl,ZZ4:()=>lI,aQg:()=>A0,soG:()=>Jl,YKP:()=>MC,h0i:()=>Dp,PXZ:()=>Vp,R0b:()=>_n,FiY:()=>Ys,Lbi:()=>JE,g9A:()=>kb,Qsj:()=>iw,FYo:()=>Bb,JOm:()=>Fe,tp0:()=>Yd,Rgc:()=>sa,dDg:()=>f_,eoX:()=>nI,q4F:()=>lx,GfV:()=>ap,s_b:()=>o_,ifc:()=>Bn,VuI:()=>yN,MMx:()=>bT,Lck:()=>PM,eFA:()=>h0,Gpc:()=>At,f3M:()=>pe,X6Q:()=>rN,$WT:()=>Uo,_c5:()=>dI,qFp:()=>N0,rg0:()=>ya,c2e:()=>e0,zSh:()=>Ty,HDt:()=>r0,wAp:()=>gc,vHH:()=>oe,lri:()=>lS,rWj:()=>dS,cg1:()=>Hm,kL8:()=>bu,dqk:()=>Yt,Z0I:()=>Gs,eJc:()=>Zv,QGY:()=>uv,F4k:()=>cv,RDi:()=>ic,AaK:()=>nt,qOj:()=>at,Xq5:()=>Cw,TTD:()=>zc,_Bn:()=>xC,jDz:()=>Nv,xp6:()=>lw,uIk:()=>bm,ekj:()=>yv,Suo:()=>Es,Xpm:()=>Vu,lG2:()=>si,Yz7:()=>ye,cJS:()=>jn,oAB:()=>yf,Yjl:()=>vf,Y36:()=>dp,_UZ:()=>Lw,BQk:()=>Ll,ynx:()=>Pm,qZA:()=>hc,TgZ:()=>ov,EpF:()=>Mm,n5z:()=>Kd,LFG:()=>V,$8M:()=>Aa,$Z:()=>_m,NdJ:()=>lv,CRH:()=>Wv,oxw:()=>km,Q6J:()=>sv,s9C:()=>Fm,MGl:()=>bh,iGM:()=>qv,KtG:()=>Sf,CHM:()=>ey,LSH:()=>zE,P3R:()=>Db,YNc:()=>rv,_uU:()=>eC,Oqu:()=>wp,hij:()=>$m});var p=O(8645),U=O(7394),W=O(5619),re=O(5592),se=O(3019),Ie=O(2096),ve=O(3020),Ve=O(4664),_e=O(2737),H=O(9360),q=O(8251);function Ke(o,a){return o===a}function me(o){for(let a in o)if(o[a]===me)return a;throw Error("Could not find renamed property on target object.")}function Xe(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function nt(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(nt).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function et(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const ze=me({__forward_ref__:me});function At(o){return o.__forward_ref__=At,o.toString=function(){return nt(this())},o}function xe(o){return Be(o)?o():o}function Be(o){return"function"==typeof o&&o.hasOwnProperty(ze)&&o.__forward_ref__===At}function Ne(o){return o&&!!o.\u0275providers}const Qe="https://g.co/ng/security#xss";class oe extends Error{constructor(a,c){super(function Je(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,c)),this.code=a}}function Ge(o){return"string"==typeof o?o:null==o?"":String(o)}function $s(o,a){throw new oe(-201,!1)}function Tt(o,a){null==o&&function _t(o,a,c,l){throw new Error(`ASSERTION ERROR: ${o}`+(null==l?"":` [Expected=> ${c} ${l} ${a} <=Actual]`))}(a,o,null,"!=")}function ye(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function jn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Cs(o){return lo(o,kn)||lo(o,Gt)}function Gs(o){return null!==Cs(o)}function lo(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ba(o){return o&&(o.hasOwnProperty(Kt)||o.hasOwnProperty(wi))?o[Kt]:null}const kn=me({\u0275prov:me}),Kt=me({\u0275inj:me}),Gt=me({ngInjectableDef:me}),wi=me({ngInjectorDef:me});var Ot=function(o){return o[o.Default=0]="Default",o[o.Host=1]="Host",o[o.Self=2]="Self",o[o.SkipSelf=4]="SkipSelf",o[o.Optional=8]="Optional",o}(Ot||{});let tn;function cn(o){const a=tn;return tn=o,a}function ca(o,a,c){const l=Cs(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:c&Ot.Optional?null:void 0!==a?a:void $s(nt(o))}const Yt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ui={},ri="__NG_DI_FLAG__",os="ngTempTokenPath",Ti=/\n/gm,as="__source";let ii;function Ai(o){const a=ii;return ii=o,a}function z(o,a=Ot.Default){if(void 0===ii)throw new oe(-203,!1);return null===ii?ca(o,void 0,a):ii.get(o,a&Ot.Optional?null:void 0,a)}function V(o,a=Ot.Default){return(function un(){return tn}()||z)(xe(o),a)}function pe(o,a=Ot.Default){return V(o,ne(a))}function ne(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function ft(o){const a=[];for(let c=0;c<o.length;c++){const l=xe(o[c]);if(Array.isArray(l)){if(0===l.length)throw new oe(900,!1);let h,m=Ot.Default;for(let v=0;v<l.length;v++){const T=l[v],D=dn(T);"number"==typeof D?-1===D?h=T.token:m|=D:h=T}a.push(V(h,m))}else a.push(V(l))}return a}function xt(o,a){return o[ri]=a,o.prototype[ri]=a,o}function dn(o){return o[ri]}function Un(o){return{toString:o}.toString()}var nn=function(o){return o[o.OnPush=0]="OnPush",o[o.Default=1]="Default",o}(nn||{}),Bn=function(o){return o[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",o}(Bn||{});const mr={},Qt=[],Vo=me({\u0275cmp:me}),ge=me({\u0275dir:me}),te=me({\u0275pipe:me}),Me=me({\u0275mod:me}),ct=me({\u0275fac:me}),Mt=me({__NG_ELEMENT_ID__:me}),kt=me({__NG_ENV_ID__:me});function yn(o,a,c){let l=o.length;for(;;){const h=o.indexOf(a,c);if(-1===h)return h;if(0===h||o.charCodeAt(h-1)<=32){const m=a.length;if(h+m===l||o.charCodeAt(h+m)<=32)return h}c=h+1}}function rr(o,a,c){let l=0;for(;l<c.length;){const h=c[l];if("number"==typeof h){if(0!==h)break;l++;const m=c[l++],v=c[l++],T=c[l++];o.setAttribute(a,v,T,m)}else{const m=h,v=c[++l];$i(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),l++}}return l}function $n(o){return 3===o||4===o||6===o}function $i(o){return 64===o.charCodeAt(0)}function js(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let l=0;l<a.length;l++){const h=a[l];"number"==typeof h?c=h:0===c||la(o,c,h,null,-1===c||2===c?a[++l]:null)}}return o}function la(o,a,c,l,h){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const T=o[m++];if("number"==typeof T){if(T===a){v=-1;break}if(T>a){v=m-1;break}}}for(;m<o.length;){const T=o[m];if("number"==typeof T)break;if(T===c){if(null===l)return void(null!==h&&(o[m+1]=h));if(l===o[m+1])return void(o[m+2]=h)}m++,null!==l&&m++,null!==h&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==l&&o.splice(m++,0,l),null!==h&&o.splice(m++,0,h)}const Lu="ng-template";function Nc(o,a,c){let l=0,h=!0;for(;l<o.length;){let m=o[l++];if("string"==typeof m&&h){const v=o[l++];if(c&&"class"===m&&-1!==yn(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;l<o.length&&"string"==typeof(m=o[l++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function md(o){return 4===o.type&&o.value!==Lu}function Ga(o,a,c){return a===(4!==o.type||c?o.value:Lu)}function pf(o,a,c){let l=4;const h=o.attrs||[],m=function K_(o){for(let a=0;a<o.length;a++)if($n(o[a]))return a;return o.length}(h);let v=!1;for(let T=0;T<a.length;T++){const D=a[T];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!Ga(o,D,c)||""===D&&1===a.length){if(Nr(l))return!1;v=!0}}else{const R=8&l?D:a[++T];if(8&l&&null!==o.attrs){if(!Nc(o.attrs,R,c)){if(Nr(l))return!1;v=!0}continue}const L=ja(8&l?"class":D,h,md(o),c);if(-1===L){if(Nr(l))return!1;v=!0;continue}if(""!==R){let K;K=L>m?"":h[L+1].toLowerCase();const X=8&l?K:null;if(X&&-1!==yn(X,R,0)||2&l&&R!==K){if(Nr(l))return!1;v=!0}}}}else{if(!v&&!Nr(l)&&!Nr(D))return!1;if(v&&Nr(D))continue;v=!1,l=D|1&l}}return Nr(l)||v}function Nr(o){return 0==(1&o)}function ja(o,a,c,l){if(null===a)return-1;let h=0;if(l||!c){let m=!1;for(;h<a.length;){const v=a[h];if(v===o)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let T=a[++h];for(;"string"==typeof T;)T=a[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function gf(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const l=o[c];if("number"==typeof l)return-1;if(l===a)return c;c++}return-1}(a,o)}function W_(o,a,c=!1){for(let l=0;l<a.length;l++)if(pf(o,a[l],c))return!0;return!1}function da(o,a){return o?":not("+a.trim()+")":a}function mf(o){let a=o[0],c=1,l=2,h="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&l){const T=o[++c];h+="["+v+(T.length>0?'="'+T+'"':"")+"]"}else 8&l?h+="."+v:4&l&&(h+=" "+v);else""!==h&&!Nr(v)&&(a+=da(m,h),h=""),l=v,m=m||!Nr(l);c++}return""!==h&&(a+=da(m,h)),a}function Vu(o){return Un(()=>{const a=pg(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===nn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,signals:o.signals??!1,data:o.data||{},encapsulation:o.encapsulation||Bn.Emulated,styles:o.styles||Qt,_:null,schemas:o.schemas||null,tView:null,id:""};ir(c);const l=o.dependencies;return c.directiveDefs=ha(l,!1),c.pipeDefs=ha(l,!0),c.id=function mg(o){let a=0;const c=[o.selectors,o.ngContentSelectors,o.hostVars,o.hostAttrs,o.consts,o.vars,o.decls,o.encapsulation,o.standalone,o.signals,o.exportAs,JSON.stringify(o.inputs),JSON.stringify(o.outputs),Object.getOwnPropertyNames(o.type.prototype),!!o.contentQueries,!!o.viewQuery].join("|");for(const h of c)a=Math.imul(31,a)+h.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function vd(o){return gn(o)||kr(o)}function _f(o){return null!==o}function yf(o){return Un(()=>({type:o.type,bootstrap:o.bootstrap||Qt,declarations:o.declarations||Qt,imports:o.imports||Qt,exports:o.exports||Qt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Id(o,a){if(null==o)return mr;const c={};for(const l in o)if(o.hasOwnProperty(l)){let h=o[l],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),c[h]=l,a&&(a[h]=m)}return c}function si(o){return Un(()=>{const a=pg(o);return ir(a),a})}function vf(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function gn(o){return o[Vo]||null}function kr(o){return o[ge]||null}function Qn(o){return o[te]||null}function Uo(o){const a=gn(o)||kr(o)||Qn(o);return null!==a&&a.standalone}function oi(o,a){const c=o[Me]||null;if(!c&&!0===a)throw new Error(`Type ${nt(o)} does not have '\u0275mod' property.`);return c}function pg(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:o.inputs||mr,exportAs:o.exportAs||null,standalone:!0===o.standalone,signals:!0===o.signals,selectors:o.selectors||Qt,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Id(o.inputs,a),outputs:Id(o.outputs)}}function ir(o){o.features?.forEach(a=>a(o))}function ha(o,a){if(!o)return null;const c=a?Qn:vd;return()=>("function"==typeof o?o():o).map(l=>c(l)).filter(_f)}const Yn=0,pt=1,jt=2,zn=3,zs=4,Gi=5,Or=6,Bo=7,Jn=8,$o=9,fo=10,Ft=11,Ha=12,Ed=13,po=14,Gn=15,Uu=16,Ss=17,br=18,qa=19,Wa=20,go=21,Go=22,Bu=23,kc=24,Jt=25,$u=1,fa=2,Dr=7,mo=9,qr=11;function ai(o){return Array.isArray(o)&&"object"==typeof o[$u]}function dr(o){return Array.isArray(o)&&!0===o[$u]}function Gu(o){return 0!=(4&o.flags)}function Hs(o){return o.componentOffset>-1}function Oc(o){return 1==(1&o.flags)}function Rs(o){return!!o.template}function Za(o){return 0!=(512&o[jt])}function jo(o,a){return o.hasOwnProperty(ct)?o[ct]:null}let Cd=Yt.WeakRef??class Ja{constructor(a){this.ref=a}deref(){return this.ref}},Hi=0,us=null,ma=!1;function sr(o){const a=us;return us=o,a}class _a{constructor(){this.id=Hi++,this.ref=function Sd(o){return new Cd(o)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const l=c.producerNode.deref();if(null!=l&&c.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=ma;ma=!0;try{for(const[c,l]of this.consumers){const h=l.consumerNode.deref();null!=h&&h.trackingVersion===l.atTrackingVersion?h.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),h?.producers.delete(this.id))}}finally{ma=a}}producerAccessed(){if(ma)throw new Error("");if(null===us)return;let a=us.producers.get(this.id);void 0===a?(a={consumerNode:us.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:us.trackingVersion},us.producers.set(this.id,a),this.consumers.set(us.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=us.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==us?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let Fr=null;function ya(o){const a=sr(null);try{return o()}finally{sr(a)}}const jc=()=>{};class qu extends _a{constructor(a,c,l){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=jc,this.registerOnCleanup=h=>{this.cleanupFn=h},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=sr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=jc,this.watch(this.registerOnCleanup)}finally{sr(a)}}cleanup(){this.cleanupFn()}}class wg{constructor(a,c,l){this.previousValue=a,this.currentValue=c,this.firstChange=l}isFirstChange(){return this.firstChange}}function zc(){return Tg}function Tg(o){return o.type.prototype.ngOnChanges&&(o.setInput=Tf),Hc}function Hc(){const o=Ag(this),a=o?.current;if(a){const c=o.previous;if(c===mr)o.previous=a;else for(let l in a)c[l]=a[l];o.current=null,this.ngOnChanges(a)}}function Tf(o,a,c,l){const h=this.declaredInputs[c],m=Ag(o)||function qc(o,a){return o[Wu]=a}(o,{previous:mr,current:null}),v=m.current||(m.current={}),T=m.previous,D=T[h];v[h]=new wg(D&&D.currentValue,a,T===mr),o[l]=a}zc.ngInherit=!0;const Wu="__ngSimpleChanges__";function Ag(o){return o[Wu]||null}const qi=function(o,a,c){};function vn(o){for(;Array.isArray(o);)o=o[Yn];return o}function yo(o,a){return vn(a[o])}function Di(o,a){return vn(a[o.index])}function Md(o,a){return o.data[a]}function Wr(o,a){const c=a[o];return ai(c)?c:c[Yn]}function Zs(o,a){return null==a?null:o[a]}function zo(o){o[Ss]=0}function Af(o){1024&o[jt]||(o[jt]|=1024,Nd(o,1))}function ru(o){1024&o[jt]&&(o[jt]&=-1025,Nd(o,-1))}function Nd(o,a){let c=o[zn];if(null===c)return;c[Gi]+=a;let l=c;for(c=c[zn];null!==c&&(1===a&&1===l[Gi]||-1===a&&0===l[Gi]);)c[Gi]+=a,l=c,c=c[zn]}const Pt={lFrame:Xn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dg(){return Pt.bindingsEnabled}function Re(){return Pt.lFrame.lView}function hn(){return Pt.lFrame.tView}function ey(o){return Pt.lFrame.contextLView=o,o[Jn]}function Sf(o){return Pt.lFrame.contextLView=null,o}function Ci(){let o=el();for(;null!==o&&64===o.type;)o=o.parent;return o}function el(){return Pt.lFrame.currentTNode}function cs(o,a){const c=Pt.lFrame;c.currentTNode=o,c.isParent=a}function Fd(){return Pt.lFrame.isParent}function Ld(){Pt.lFrame.isParent=!1}function su(){return Pt.lFrame.bindingIndex++}function xf(o,a){const c=Pt.lFrame;c.bindingIndex=c.bindingRootIndex=o,vo(a)}function vo(o){Pt.lFrame.currentDirectiveIndex=o}function xg(){return Pt.lFrame.currentQueryIndex}function Ia(o){Pt.lFrame.currentQueryIndex=o}function Mf(o){const a=o[pt];return 2===a.type?a.declTNode:1===a.type?o[Or]:null}function Mg(o,a,c){if(c&Ot.SkipSelf){let h=a,m=o;for(;!(h=h.parent,null!==h||c&Ot.Host||(h=Mf(m),null===h||(m=m[po],10&h.type))););if(null===h)return!1;a=h,o=m}const l=Pt.lFrame=Ng();return l.currentTNode=a,l.lView=o,!0}function au(o){const a=Ng(),c=o[pt];Pt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Ng(){const o=Pt.lFrame,a=null===o?null:o.child;return null===a?Xn(o):a}function Xn(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function kg(){const o=Pt.lFrame;return Pt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Vd=kg;function rl(){const o=kg();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ui(){return Pt.lFrame.selectedIndex}function Io(o){Pt.lFrame.selectedIndex=o}function er(){const o=Pt.lFrame;return Md(o.tView,o.selectedIndex)}let Gd=!0;function cu(){return Gd}function Eo(o){Gd=o}function Rn(o,a){for(let c=a.directiveStart,l=a.directiveEnd;c<l;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:T,ngAfterViewInit:D,ngAfterViewChecked:R,ngOnDestroy:N}=m;v&&(o.contentHooks??=[]).push(-c,v),T&&((o.contentHooks??=[]).push(c,T),(o.contentCheckHooks??=[]).push(c,T)),D&&(o.viewHooks??=[]).push(-c,D),R&&((o.viewHooks??=[]).push(c,R),(o.viewCheckHooks??=[]).push(c,R)),null!=N&&(o.destroyHooks??=[]).push(c,N)}}function Zr(o,a,c){Og(o,a,3,c)}function sl(o,a,c,l){(3&o[jt])===c&&Og(o,a,c,l)}function Zu(o,a){let c=o[jt];(3&c)===a&&(c&=8191,c+=1,o[jt]=c)}function Og(o,a,c,l){const m=l??-1,v=a.length-1;let T=0;for(let D=void 0!==l?65535&o[Ss]:0;D<v;D++)if("number"==typeof a[D+1]){if(T=a[D],null!=l&&T>=l)break}else a[D]<0&&(o[Ss]+=65536),(T<m||-1==m)&&(ol(o,c,a,D),o[Ss]=(4294901760&o[Ss])+D+2),D++}function Qu(o,a){qi(4,o,a);const c=sr(null);try{a.call(o)}finally{sr(c),qi(5,o,a)}}function ol(o,a,c,l){const h=c[l]<0,m=c[l+1],T=o[h?-c[l]:c[l]];h?o[jt]>>13<o[Ss]>>16&&(3&o[jt])===a&&(o[jt]+=8192,Qu(T,m)):Qu(T,m)}const Ea=-1;class Ho{constructor(a,c,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=l}}function lu(o){return o!==Ea}function xs(o){return 32767&o}function Zi(o,a){let c=function Ms(o){return o>>16}(o),l=a;for(;c>0;)l=l[po],c--;return l}let wa=!0;function jd(o){const a=wa;return wa=o,a}const Lf=255,wo=5;let qo=0;const Qi={};function ds(o,a){const c=or(o,a);if(-1!==c)return c;const l=a[pt];l.firstCreatePass&&(o.injectorIndex=a.length,Vf(l.data,o),Vf(a,null),Vf(l.blueprint,null));const h=du(o,a),m=o.injectorIndex;if(lu(h)){const v=xs(h),T=Zi(h,a),D=T[pt].data;for(let R=0;R<8;R++)a[m+R]=T[v+R]|D[v+R]}return a[m+8]=h,m}function Vf(o,a){o.push(0,0,0,0,0,0,0,0,a)}function or(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function du(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,l=null,h=a;for(;null!==h;){if(l=Qo(h),null===l)return Ea;if(c++,h=h[po],-1!==l.injectorIndex)return l.injectorIndex|c<<16}return Ea}function Ju(o,a,c){!function Cr(o,a,c){let l;"string"==typeof c?l=c.charCodeAt(0)||0:c.hasOwnProperty(Mt)&&(l=c[Mt]),null==l&&(l=c[Mt]=qo++);const h=l&Lf;a.data[o+(h>>wo)]|=1<<h}(o,a,c)}function ul(o,a,c){if(c&Ot.Optional||void 0!==o)return o;$s()}function zd(o,a,c,l){if(c&Ot.Optional&&void 0===l&&(l=null),!(c&(Ot.Self|Ot.Host))){const h=o[$o],m=cn(void 0);try{return h?h.get(a,l,c&Ot.Optional):ca(a,l,c&Ot.Optional)}finally{cn(m)}}return ul(l,0,c)}function Wo(o,a,c,l=Ot.Default,h){if(null!==o){if(2048&a[jt]&&!(l&Ot.Self)){const v=function Uf(o,a,c,l,h){let m=o,v=a;for(;null!==m&&null!==v&&2048&v[jt]&&!(512&v[jt]);){const T=hu(m,v,c,l|Ot.Self,Qi);if(T!==Qi)return T;let D=m.parent;if(!D){const R=v[Wa];if(R){const N=R.get(c,Qi,l);if(N!==Qi)return N}D=Qo(v),v=v[po]}m=D}return h}(o,a,c,l,Qi);if(v!==Qi)return v}const m=hu(o,a,c,l,Qi);if(m!==Qi)return m}return zd(a,c,l,h)}function hu(o,a,c,l,h){const m=function cl(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Mt)?o[Mt]:void 0;return"number"==typeof a?a>=0?a&Lf:Wd:a}(c);if("function"==typeof m){if(!Mg(a,o,l))return l&Ot.Host?ul(h,0,l):zd(a,c,l,h);try{const v=m(l);if(null!=v||l&Ot.Optional)return v;$s()}finally{Vd()}}else if("number"==typeof m){let v=null,T=or(o,a),D=Ea,R=l&Ot.Host?a[Gn][Or]:null;for((-1===T||l&Ot.SkipSelf)&&(D=-1===T?du(o,a):a[T+8],D!==Ea&&qd(l,!1)?(v=a[pt],T=xs(D),a=Zi(D,a)):T=-1);-1!==T;){const N=a[pt];if(ll(m,T,N.data)){const L=Hd(T,a,c,v,l,R);if(L!==Qi)return L}D=a[T+8],D!==Ea&&qd(l,a[pt].data[T+8]===R)&&ll(m,T,a)?(v=N,T=xs(D),a=Zi(D,a)):T=-1}}return h}function Hd(o,a,c,l,h,m){const v=a[pt],T=v.data[o+8],N=Ta(T,v,c,null==l?Hs(T)&&wa:l!=v&&0!=(3&T.type),h&Ot.Host&&m===T);return null!==N?Ko(a,v,N,T):Qi}function Ta(o,a,c,l,h){const m=o.providerIndexes,v=a.data,T=1048575&m,D=o.directiveStart,N=m>>20,K=h?T+N:o.directiveEnd;for(let X=l?T:T+N;X<K;X++){const Te=v[X];if(X<D&&c===Te||X>=D&&Te.type===c)return X}if(h){const X=v[D];if(X&&Rs(X)&&X.type===c)return D}return null}function Ko(o,a,c,l){let h=o[c];const m=a.data;if(function Yu(o){return o instanceof Ho}(h)){const v=h;v.resolving&&function Hr(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new oe(-200,`Circular dependency in DI detected for ${o}${c}`)}(function ht(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ge(o)}(m[c]));const T=jd(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?cn(v.injectImpl):null;Mg(o,l,Ot.Default);try{h=o[c]=v.factory(void 0,m,o,l),a.firstCreatePass&&c>=l.directiveStart&&function Of(o,a,c){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:m}=a.type.prototype;if(l){const v=Tg(a);(c.preOrderHooks??=[]).push(o,v),(c.preOrderCheckHooks??=[]).push(o,v)}h&&(c.preOrderHooks??=[]).push(0-o,h),m&&((c.preOrderHooks??=[]).push(o,m),(c.preOrderCheckHooks??=[]).push(o,m))}(c,m[c],a)}finally{null!==D&&cn(D),jd(T),v.resolving=!1,Vd()}}return h}function ll(o,a,c){return!!(c[a+(o>>wo)]&1<<o)}function qd(o,a){return!(o&Ot.Self||o&Ot.Host&&a)}class fu{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,l){return Wo(this._tNode,this._lView,a,ne(l),c)}}function Wd(){return new fu(Ci(),Re())}function Kd(o){return Un(()=>{const a=o.prototype.constructor,c=a[ct]||Zo(a),l=Object.prototype;let h=Object.getPrototypeOf(o.prototype).constructor;for(;h&&h!==l;){const m=h[ct]||Zo(h);if(m&&m!==c)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Zo(o){return Be(o)?()=>{const a=Zo(xe(o));return a&&a()}:jo(o)}function Qo(o){const a=o[pt],c=a.type;return 2===c?a.declTNode:1===c?o[Or]:null}function Aa(o){return function Vg(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const l=c.length;let h=0;for(;h<l;){const m=c[h];if($n(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<l&&"string"==typeof c[h];)h++;else{if(m===a)return c[h+1];h+=2}}}return null}(Ci(),o)}const Yi="__parameters__";function Ns(o,a,c){return Un(()=>{const l=function Yo(o){return function(...c){if(o){const l=o(...c);for(const h in l)this[h]=l[h]}}}(a);function h(...m){if(this instanceof h)return l.apply(this,m),this;const v=new h(...m);return T.annotation=v,T;function T(D,R,N){const L=D.hasOwnProperty(Yi)?D[Yi]:Object.defineProperty(D,Yi,{value:[]})[Yi];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(v),D}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=o,h.annotationCls=h,h})}function Sa(o,a){o.forEach(c=>Array.isArray(c)?Sa(c,a):a(c))}function Qd(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function fl(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function j(o,a,c){let l=ue(o,a);return l>=0?o[1|l]=c:(l=~l,function P(o,a,c,l){let h=o.length;if(h==a)o.push(c,l);else if(1===h)o.push(l,o[0]),o[0]=c;else{for(h--,o.push(o[h-1],o[h]);h>a;)o[h]=o[h-2],h--;o[a]=c,o[a+1]=l}}(o,l,a,c)),l}function J(o,a){const c=ue(o,a);if(c>=0)return o[1|c]}function ue(o,a){return function Ze(o,a,c){let l=0,h=o.length>>c;for(;h!==l;){const m=l+(h-l>>1),v=o[m<<c];if(a===v)return m<<c;v>a?h=m:l=m+1}return~(h<<c)}(o,a,1)}const Ys=xt(Ns("Optional"),8),Yd=xt(Ns("SkipSelf"),4);function G(o){return 128==(128&o.flags)}var Fe=function(o){return o[o.Important=1]="Important",o[o.DashCase=2]="DashCase",o}(Fe||{});const Ce=/^>|^->|<!--|-->|--!>|<!-$/g,lt=/(<|>)/,Ht="\u200b$1\u200b";const ci=new Map;let Pa=0;const yl="__ngContext__";function Si(o,a){ai(a)?(o[yl]=a[qa],function Hf(o){ci.set(o[qa],o)}(a)):o[yl]=a}let TE;function nb(o,a){return TE(o,a)}function th(o){const a=o[zn];return dr(a)?a[zn]:a}function vl(o){return AE(o[Ha])}function sb(o){return AE(o[zs])}function AE(o){for(;null!==o&&!dr(o);)o=o[zs];return o}function Zf(o,a,c,l,h){if(null!=l){let m,v=!1;dr(l)?m=l:ai(l)&&(v=!0,l=l[Yn]);const T=vn(l);0===o&&null!==c?null==h?UP(a,c,T):Qf(a,c,T,h||null,!0):1===o&&null!==c?Qf(a,c,T,h||null,!0):2===o?function my(o,a,c){const l=xE(o,a);l&&function db(o,a,c,l){o.removeChild(a,c,l)}(o,l,a,c)}(a,T,v):3===o&&a.destroyNode(T),null!=m&&function OE(o,a,c,l,h){const m=c[Dr];m!==vn(c)&&Zf(a,o,l,m,h);for(let T=qr;T<c.length;T++){const D=c[T];El(D[pt],D,o,a,l,m)}}(a,o,m,c,h)}}function bE(o,a){return o.createComment(function mn(o){return o.replace(Ce,a=>a.replace(lt,Ht))}(a))}function nh(o,a,c){return o.createElement(a,c)}function DE(o,a){const c=o[mo],l=c.indexOf(a);ru(a),c.splice(l,1)}function CE(o,a){if(o.length<=qr)return;const c=qr+a,l=o[c];if(l){const h=l[Uu];null!==h&&h!==o&&DE(h,l),a>0&&(o[c-1][zs]=l[zs]);const m=fl(o,qr+a);!function ab(o,a){El(o,a,a[Ft],2,null,null),a[Yn]=null,a[Or]=null}(l[pt],l);const v=m[br];null!==v&&v.detachView(m[pt]),l[zn]=null,l[zs]=null,l[jt]&=-129}return l}function SE(o,a){if(!(256&a[jt])){const c=a[Ft];a[Bu]?.destroy(),a[kc]?.destroy(),c.destroyNode&&El(o,a,c,3,null,null),function LP(o){let a=o[Ha];if(!a)return lb(o[pt],o);for(;a;){let c=null;if(ai(a))c=a[Ha];else{const l=a[qr];l&&(c=l)}if(!c){for(;a&&!a[zs]&&a!==o;)ai(a)&&lb(a[pt],a),a=a[zn];null===a&&(a=o),ai(a)&&lb(a[pt],a),c=a&&a[zs]}a=c}}(a)}}function lb(o,a){if(!(256&a[jt])){a[jt]&=-129,a[jt]|=256,function YV(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let l=0;l<c.length;l+=2){const h=a[c[l]];if(!(h instanceof Ho)){const m=c[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const T=h[m[v]],D=m[v+1];qi(4,T,D);try{D.call(T)}finally{qi(5,T,D)}}else{qi(4,h,m);try{m.call(h)}finally{qi(5,h,m)}}}}}(o,a),function QV(o,a){const c=o.cleanup,l=a[Bo];if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?l[v]():l[-v].unsubscribe(),m+=2}else c[m].call(l[c[m+1]]);null!==l&&(a[Bo]=null);const h=a[go];if(null!==h){a[go]=null;for(let m=0;m<h.length;m++)(0,h[m])()}}(o,a),1===a[pt].type&&a[Ft].destroy();const c=a[Uu];if(null!==c&&dr(a[zn])){c!==a[zn]&&DE(c,a);const l=a[br];null!==l&&l.detachView(o)}!function dy(o){ci.delete(o[qa])}(a)}}function gy(o,a,c){return function RE(o,a,c){let l=a;for(;null!==l&&40&l.type;)l=(a=l).parent;if(null===l)return c[Yn];{const{componentOffset:h}=l;if(h>-1){const{encapsulation:m}=o.data[l.directiveStart+h];if(m===Bn.None||m===Bn.Emulated)return null}return Di(l,c)}}(o,a.parent,c)}function Qf(o,a,c,l,h){o.insertBefore(a,c,l,h)}function UP(o,a,c){o.appendChild(a,c)}function PE(o,a,c,l,h){null!==l?Qf(o,a,c,l,h):UP(o,a,c)}function xE(o,a){return o.parentNode(a)}let ME,FE,ih,Yf=function fb(o,a,c){return 40&o.type?Di(o,c):null};function Js(o,a,c,l){const h=gy(o,l,a),m=a[Ft],T=function hb(o,a,c){return Yf(o,a,c)}(l.parent||a[Or],l,a);if(null!=h)if(Array.isArray(c))for(let D=0;D<c.length;D++)PE(m,h,c[D],T,!1);else PE(m,h,c,T,!1);void 0!==ME&&ME(m,l,a,c,h)}function Il(o,a){if(null!==a){const c=a.type;if(3&c)return Di(a,o);if(4&c)return Qg(-1,o[a.index]);if(8&c){const l=a.child;if(null!==l)return Il(o,l);{const h=o[a.index];return dr(h)?Qg(-1,h):vn(h)}}if(32&c)return nb(a,o)()||vn(o[a.index]);{const l=pb(o,a);return null!==l?Array.isArray(l)?l[0]:Il(th(o[Gn]),l):Il(o,a.next)}}return null}function pb(o,a){return null!==a?o[Gn][Or].projection[a.projection]:null}function Qg(o,a){const c=qr+o+1;if(c<a.length){const l=a[c],h=l[pt].firstChild;if(null!==h)return Il(l,h)}return a[Dr]}function kE(o,a,c,l,h,m,v){for(;null!=c;){const T=l[c.index],D=c.type;if(v&&0===a&&(T&&Si(vn(T),l),c.flags|=2),32!=(32&c.flags))if(8&D)kE(o,a,c.child,l,h,m,!1),Zf(a,o,h,T,m);else if(32&D){const R=nb(c,l);let N;for(;N=R();)Zf(a,o,h,N,m);Zf(a,o,h,T,m)}else 16&D?gb(o,a,l,c,h,m):Zf(a,o,h,T,m);c=v?c.projectionNext:c.next}}function El(o,a,c,l,h,m){kE(c,l,o.firstChild,a,h,m,!1)}function gb(o,a,c,l,h,m){const v=c[Gn],D=v[Or].projection[l.projection];if(Array.isArray(D))for(let R=0;R<D.length;R++)Zf(a,o,h,D[R],m);else{let R=D;const N=v[zn];G(l)&&(R.flags|=128),kE(o,a,R,N,h,m,!0)}}function Jf(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function rc(o,a,c){const{mergedAttrs:l,classes:h,styles:m}=c;null!==l&&rr(o,a,l),null!==h&&Jf(o,a,h),null!==m&&function BP(o,a,c){o.setAttribute(a,"style",c)}(o,a,m)}function ic(o){FE=o}function ep(o){return function _y(){if(void 0===ih&&(ih=null,Yt.trustedTypes))try{ih=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ih}()?.createScriptURL(o)||o}class gs{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}function Tl(o){return o instanceof gs?o.changingThisBreaksApplicationSecurity:o}function oh(o,a){const c=function Xt(o){return o instanceof gs&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${Qe})`)}return c===a}const zP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var oc=function(o){return o[o.NONE=0]="NONE",o[o.HTML=1]="HTML",o[o.STYLE=2]="STYLE",o[o.SCRIPT=3]="SCRIPT",o[o.URL=4]="URL",o[o.RESOURCE_URL=5]="RESOURCE_URL",o}(oc||{});function zE(o){const a=im();return a?a.sanitize(oc.URL,o)||"":oh(o,"URL")?Tl(o):function vy(o){return(o=String(o)).match(zP)?o:"unsafe:"+o}(Ge(o))}function bb(o){const a=im();if(a)return ep(a.sanitize(oc.RESOURCE_URL,o)||"");if(oh(o,"ResourceURL"))return ep(Tl(o));throw new oe(904,!1)}function Db(o,a,c){return function ZP(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?bb:zE}(a,c)(o)}function im(){const o=Re();return o&&o[fo].sanitizer}class Mn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ye({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rp=new Mn("ENVIRONMENT_INITIALIZER"),qE=new Mn("INJECTOR",-1),Cb=new Mn("INJECTOR_DEF_TYPES");class bl{get(a,c=Ui){if(c===Ui){const l=new Error(`NullInjectorError: No provider for ${nt(a)}!`);throw l.name="NullInjectorError",l}return c}}function Rb(...o){return{\u0275providers:WE(0,o),\u0275fromNgModule:!0}}function WE(o,...a){const c=[],l=new Set;let h;return Sa(a,m=>{const v=m;uh(v,c,[],l)&&(h||=[],h.push(v))}),void 0!==h&&sm(h,c),c}function sm(o,a){for(let c=0;c<o.length;c++){const{providers:h}=o[c];wy(h,m=>{a.push(m)})}}function uh(o,a,c,l){if(!(o=xe(o)))return!1;let h=null,m=Ba(o);const v=!m&&gn(o);if(m||v){if(v&&!v.standalone)return!1;h=o}else{const D=o.ngModule;if(m=Ba(D),!m)return!1;h=D}const T=l.has(h);if(v){if(T)return!1;if(l.add(h),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of D)uh(R,a,c,l)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let R;l.add(h);try{Sa(m.imports,N=>{uh(N,a,c,l)&&(R||=[],R.push(N))})}finally{}void 0!==R&&sm(R,a)}if(!T){const R=jo(h)||(()=>new h);a.push({provide:h,useFactory:R,deps:Qt},{provide:Cb,useValue:h,multi:!0},{provide:rp,useValue:()=>V(h),multi:!0})}const D=m.providers;null==D||T||wy(D,N=>{a.push(N)})}}return h!==o&&void 0!==o.providers}function wy(o,a){for(let c of o)Ne(c)&&(c=c.\u0275providers),Array.isArray(c)?wy(c,a):a(c)}const xb=me({provide:String,useValue:me});function KE(o){return null!==o&&"object"==typeof o&&xb in o}function ch(o){return"function"==typeof o}const Ty=new Mn("Set Injector scope."),Dl={},YP={};let am;function Ay(){return void 0===am&&(am=new bl),am}class Cl{}class by extends Cl{get destroyed(){return this._destroyed}constructor(a,c,l,h){super(),this.parent=c,this.source=l,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,YE(a,v=>this.processProvider(v)),this.records.set(qE,ac(void 0,this)),h.has("environment")&&this.records.set(Cl,ac(void 0,this));const m=this.records.get(Ty);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Cb.multi,Qt,Ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=Ai(this),l=cn(void 0);try{return a()}finally{Ai(c),cn(l)}}get(a,c=Ui,l=Ot.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(kt))return a[kt](this);l=ne(l);const h=Ai(this),m=cn(void 0);try{if(!(l&Ot.SkipSelf)){let T=this.records.get(a);if(void 0===T){const D=function JP(o){return"function"==typeof o||"object"==typeof o&&o instanceof Mn}(a)&&Cs(a);T=D&&this.injectableDefInScope(D)?ac(lh(a),Dl):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(l&Ot.Self?Ay():this.parent).get(a,c=l&Ot.Optional&&c===Ui?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[os]=v[os]||[]).unshift(nt(a)),h)throw v;return function Mr(o,a,c,l){const h=o[os];throw a[as]&&h.unshift(a[as]),o.message=function Zn(o,a,c,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let h=nt(a);if(Array.isArray(a))h=a.map(nt).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let T=a[v];m.push(v+":"+("string"==typeof T?JSON.stringify(T):nt(T)))}h=`{${m.join(", ")}}`}return`${c}${l?"("+l+")":""}[${h}]: ${o.replace(Ti,"\n  ")}`}("\n"+o.message,h,c,l),o.ngTokenPath=h,o[os]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{cn(m),Ai(h)}}resolveInjectorInitializers(){const a=Ai(this),c=cn(void 0);try{const l=this.get(rp.multi,Qt,Ot.Self);for(const h of l)h()}finally{Ai(a),cn(c)}}toString(){const a=[],c=this.records;for(const l of c.keys())a.push(nt(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(a){let c=ch(a=xe(a))?a:xe(a&&a.provide);const l=function ZE(o){return KE(o)?ac(void 0,o.useValue):ac(Sl(o),Dl)}(a);if(ch(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=ac(void 0,Dl,!0),h.factory=()=>ft(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,l)}hydrate(a,c){return c.value===Dl&&(c.value=YP,c.value=c.factory()),"object"==typeof c.value&&c.value&&function QE(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=xe(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function lh(o){const a=Cs(o),c=null!==a?a.factory:jo(o);if(null!==c)return c;if(o instanceof Mn)throw new oe(204,!1);if(o instanceof Function)return function _u(o){const a=o.length;if(a>0)throw function pu(o,a){const c=[];for(let l=0;l<o;l++)c.push(a);return c}(a,"?"),new oe(204,!1);const c=function Fo(o){return o&&(o[kn]||o[Gt])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new oe(204,!1)}function Sl(o,a,c){let l;if(ch(o)){const h=xe(o);return jo(h)||lh(h)}if(KE(o))l=()=>xe(o.useValue);else if(function Mb(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...ft(o.deps||[]));else if(function om(o){return!(!o||!o.useExisting)}(o))l=()=>V(xe(o.useExisting));else{const h=xe(o&&(o.useClass||o.provide));if(!function um(o){return!!o.deps}(o))return jo(h)||lh(h);l=()=>new h(...ft(o.deps))}return l}function ac(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function YE(o,a){for(const c of o)Array.isArray(c)?YE(c,a):c&&Ne(c)?YE(c.\u0275providers,a):a(c)}const Nb=new Mn("AppId",{providedIn:"root",factory:()=>XP}),XP="ng",kb=new Mn("Platform Initializer"),JE=new Mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ex=new Mn("CSP nonce",{providedIn:"root",factory:()=>function li(){if(void 0!==FE)return FE;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Sy=(o,a)=>null;function Ry(o,a){return Sy(o,a)}class Lb{}class nw{}class cU{resolveComponentFactory(a){throw function Vb(o){const a=Error(`No component factory found for ${nt(o)}.`);return a.ngComponent=o,a}(a)}}let rw=(()=>{class a{}return a.NULL=new cU,a})();function lU(){return op(Ci(),Re())}function op(o,a){return new ky(Di(o,a))}let ky=(()=>{class a{constructor(l){this.nativeElement=l}}return a.__NG_ELEMENT_ID__=lU,a})();function ux(o){return o instanceof ky?o.nativeElement:o}class Bb{}let iw=(()=>{class a{constructor(){this.destroyNode=null}}return a.__NG_ELEMENT_ID__=()=>function ka(){const o=Re(),c=Wr(Ci().index,o);return(ai(c)?c:o)[Ft]}(),a})(),cx=(()=>{var o;class a{}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:()=>null}),a})();class ap{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const lx=new ap("16.1.8"),sw={};function fm(o){for(;o;){o[jt]|=64;const a=th(o);if(Za(o)&&!a)return o;o=a}return null}function uw(o){return o.ngOriginalError}class up{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&uw(a);for(;c&&uw(c);)c=uw(c);return c||null}}const $b=new Mn("",{providedIn:"root",factory:()=>!1});function lc(o){return o instanceof Function?o():o}class qb extends _a{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){fm(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,l){const h=sr(this);this.trackingVersion++;try{a(c,l)}finally{sr(h)}}destroy(){this.trackingVersion++}}let Oy=null;function Wb(){return Oy??=new qb,Oy}function Kb(o,a){return o[a]??Wb()}function Zb(o,a){const c=Wb();c.hasReadASignal&&(o[a]=Oy,c.lView=o,Oy=new qb)}const qt={};function lw(o){Qb(hn(),Re(),ui()+o,!1)}function Qb(o,a,c,l){if(!l)if(3==(3&a[jt])){const m=o.preOrderCheckHooks;null!==m&&Zr(a,m,c)}else{const m=o.preOrderHooks;null!==m&&sl(a,m,0,c)}Io(c)}function eD(o,a=null,c=null,l){const h=tD(o,a,c,l);return h.resolveInjectorInitializers(),h}function tD(o,a=null,c=null,l,h=new Set){const m=[c||Qt,Rb(o)];return l=l||("object"==typeof o?void 0:nt(o)),new by(m,a||Ay(),l||null,h)}let Pl=(()=>{var o;class a{static create(l,h){if(Array.isArray(l))return eD({name:""},h,l,"");{const m=l.name??"";return eD({name:m},l.parent,l.providers,m)}}}return(o=a).THROW_IF_NOT_FOUND=Ui,o.NULL=new bl,o.\u0275prov=ye({token:o,providedIn:"any",factory:()=>V(qE)}),o.__NG_ELEMENT_ID__=-1,a})();function dp(o,a=Ot.Default){const c=Re();return null===c?V(o,a):Wo(Ci(),c,xe(o),a)}function _m(){throw new Error("invalid")}function Ly(o,a,c,l,h,m,v,T,D,R,N){const L=a.blueprint.slice();return L[Yn]=h,L[jt]=140|l,(null!==R||o&&2048&o[jt])&&(L[jt]|=2048),zo(L),L[zn]=L[po]=o,L[Jn]=c,L[fo]=v||o&&o[fo],L[Ft]=T||o&&o[Ft],L[$o]=D||o&&o[$o]||null,L[Or]=m,L[qa]=function zf(){return Pa++}(),L[Go]=N,L[Wa]=R,L[Gn]=2==a.type?o[Gn]:L,L}function hp(o,a,c,l,h){let m=o.data[a];if(null===m)m=function fw(o,a,c,l,h){const m=el(),v=Fd(),D=o.data[a]=function fp(o,a,c,l,h,m){let v=a?a.injectorIndex:-1,T=0;return function va(){return null!==Pt.skipHydrationRootTNode}()&&(T|=128),{type:c,index:l,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,l,h);return null===o.firstChild&&(o.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D,D.prev=m)),D}(o,a,c,l,h),function Pg(){return Pt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=l,m.attrs=h;const v=function Wi(){const o=Pt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return cs(m,!0),m}function ym(o,a,c,l){if(0===c)return-1;const h=a.length;for(let m=0;m<c;m++)a.push(l),o.blueprint.push(l),o.data.push(null);return h}function nD(o,a,c,l,h){const m=Kb(a,Bu),v=ui(),T=2&l;try{if(Io(-1),T&&a.length>Jt&&Qb(o,a,Jt,!1),qi(T?2:0,h),T)m.runInContext(c,l,h);else{const R=sr(null);try{c(l,h)}finally{sr(R)}}}finally{T&&null===a[Bu]&&Zb(a,Bu),Io(v),qi(T?3:1,h)}}function Vy(o,a,c){if(Gu(a)){const l=sr(null);try{const m=a.directiveEnd;for(let v=a.directiveStart;v<m;v++){const T=o.data[v];T.contentQueries&&T.contentQueries(1,c[v],v)}}finally{sr(l)}}}function rD(o,a,c){Dg()&&(function Cx(o,a,c,l){const h=c.directiveStart,m=c.directiveEnd;Hs(c)&&function gp(o,a,c){const l=Di(a,o),h=pw(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const T=vm(o,Ly(o,h,null,v,l,a,null,o[fo].rendererFactory.createRenderer(l,c),null,null,null));o[a.index]=T}(a,c,o.data[h+c.componentOffset]),o.firstCreatePass||ds(c,a),Si(l,a);const v=c.initialInputs;for(let T=h;T<m;T++){const D=o.data[T],R=Ko(a,o,T,c);Si(R,a),null!==v&&dD(0,T-h,R,D,0,v),Rs(D)&&(Wr(c.index,a)[Jn]=Ko(a,o,T,c))}}(o,a,c,Di(c,a)),64==(64&c.flags)&&pp(o,a,c))}function Uy(o,a,c=Di){const l=a.localNames;if(null!==l){let h=a.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],T=-1===v?c(a,o):o[v];o[h++]=T}}}function pw(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=gw(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts,o.id):a}function gw(o,a,c,l,h,m,v,T,D,R,N){const L=Jt+l,K=L+h,X=function Ex(o,a){const c=[];for(let l=0;l<a;l++)c.push(l<o?null:qt);return c}(L,K),Te="function"==typeof R?R():R;return X[pt]={type:o,blueprint:X,template:c,queries:null,viewQuery:T,declTNode:a,data:X.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:K,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Te,incompleteFirstPass:!1,ssrId:N}}let iD=o=>null;function By(o,a,c,l){for(let h in o)if(o.hasOwnProperty(h)){c=null===c?{}:c;const m=o[h];null===l?oD(c,a,h,m):l.hasOwnProperty(h)&&oD(c,a,l[h],m)}return c}function oD(o,a,c,l){o.hasOwnProperty(c)?o[c].push(a,l):o[c]=[a,l]}function eo(o,a,c,l,h,m,v,T){const D=Di(a,c);let N,R=a.inputs;!T&&null!=R&&(N=R[l])?(gD(o,c,N,l,h),Hs(a)&&function uD(o,a){const c=Wr(a,o);16&c[jt]||(c[jt]|=64)}(c,a.index)):3&a.type&&(l=function $y(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(l),h=null!=v?v(h,a.value||"",l):h,m.setProperty(D,l,h))}function _w(o,a,c,l){if(Dg()){const h=null===l?null:{"":-1},m=function Sx(o,a){const c=o.directiveRegistry;let l=null,h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(W_(a,v.selectors,!1))if(l||(l=[]),Rs(v))if(null!==v.findHostDirectiveDefs){const T=[];h=h||new Map,v.findHostDirectiveDefs(v,T,h),l.unshift(...T,v),yw(o,a,T.length)}else l.unshift(v),yw(o,a,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,l,h),l.push(v)}return null===l?null:[l,h]}(o,c);let v,T;null===m?v=T=null:[v,T]=m,null!==v&&cD(o,a,c,v,h,T),h&&function Rx(o,a,c){if(a){const l=o.localNames=[];for(let h=0;h<a.length;h+=2){const m=c[a[h+1]];if(null==m)throw new oe(-301,!1);l.push(a[h],m)}}}(c,l,h)}c.mergedAttrs=js(c.mergedAttrs,c.attrs)}function cD(o,a,c,l,h,m){for(let R=0;R<l.length;R++)Ju(ds(c,a),o,l[R].type);!function Xi(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,l.length);for(let R=0;R<l.length;R++){const N=l[R];N.providersResolver&&N.providersResolver(N)}let v=!1,T=!1,D=ym(o,a,l.length,null);for(let R=0;R<l.length;R++){const N=l[R];c.mergedAttrs=js(c.mergedAttrs,N.hostAttrs),xx(o,c,a,D,N),Px(D,N,h),null!==N.contentQueries&&(c.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(c.flags|=64);const L=N.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((o.preOrderHooks??=[]).push(c.index),v=!0),!T&&(L.ngOnChanges||L.ngDoCheck)&&((o.preOrderCheckHooks??=[]).push(c.index),T=!0),D++}!function aD(o,a,c){const h=a.directiveEnd,m=o.data,v=a.attrs,T=[];let D=null,R=null;for(let N=a.directiveStart;N<h;N++){const L=m[N],K=c?c.get(L):null,Te=K?K.outputs:null;D=By(L.inputs,N,D,K?K.inputs:null),R=By(L.outputs,N,R,Te);const $e=null===D||null===v||md(a)?null:pU(D,N,v);T.push($e)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=T,a.inputs=D,a.outputs=R}(o,c,m)}function pp(o,a,c){const l=c.directiveStart,h=c.directiveEnd,m=c.index,v=function nl(){return Pt.lFrame.currentDirectiveIndex}();try{Io(m);for(let T=l;T<h;T++){const D=o.data[T],R=a[T];vo(T),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&lD(D,R)}}finally{Io(-1),vo(v)}}function lD(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function yw(o,a,c){a.componentOffset=c,(o.components??=[]).push(a.index)}function Px(o,a,c){if(c){if(a.exportAs)for(let l=0;l<a.exportAs.length;l++)c[a.exportAs[l]]=o;Rs(a)&&(c[""]=o)}}function xx(o,a,c,l,h){o.data[l]=h;const m=h.factory||(h.factory=jo(h.type)),v=new Ho(m,Rs(h),dp);o.blueprint[l]=v,c[l]=v,function Gy(o,a,c,l,h){const m=h.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const T=~a.index;(function Dx(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=T&&v.push(T),v.push(c,l,m)}}(o,a,l,ym(o,c,h.hostVars,qt),h)}function vu(o,a,c,l,h,m){const v=Di(o,a);!function vw(o,a,c,l,h,m,v){if(null==m)o.removeAttribute(a,h,c);else{const T=null==v?Ge(m):v(m,l||"",h);o.setAttribute(a,h,T,c)}}(a[Ft],v,m,o.value,c,l,h)}function dD(o,a,c,l,h,m){const v=m[a];if(null!==v)for(let T=0;T<v.length;)Mx(l,c,v[T++],v[T++],v[T++])}function Mx(o,a,c,l,h){const m=sr(null);try{const v=o.inputTransforms;null!==v&&v.hasOwnProperty(l)&&(h=v[l].call(a,h)),null!==o.setInput?o.setInput(a,h,c,l):a[l]=h}finally{sr(m)}}function pU(o,a,c){let l=null,h=0;for(;h<c.length;){const m=c[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===l&&(l=[]);const v=o[m];for(let T=0;T<v.length;T+=2)if(v[T]===a){l.push(m,v[T+1],c[h+1]);break}}h+=2}else h+=2;else h+=4}return l}function hD(o,a,c,l){return[o,!0,!1,a,null,0,l,c,null,null,null]}function jy(o,a){const c=o.contentQueries;if(null!==c)for(let l=0;l<c.length;l+=2){const m=c[l+1];if(-1!==m){const v=o.data[m];Ia(c[l]),v.contentQueries(2,a[m],m)}}}function vm(o,a){return o[Ha]?o[Ed][zs]=a:o[Ha]=a,o[Ed]=a,a}function fD(o,a,c){Ia(0);const l=sr(null);try{a(o,c)}finally{sr(l)}}function Iu(o){return o[Bo]||(o[Bo]=[])}function pD(o){return o.cleanup||(o.cleanup=[])}function Ox(o,a){const c=o[$o],l=c?c.get(up,null):null;l&&l.handleError(a)}function gD(o,a,c,l,h){for(let m=0;m<c.length;){const v=c[m++],T=c[m++];Mx(o.data[v],a[v],l,T,h)}}function mD(o,a){const c=Wr(a,o),l=c[pt];!function Iw(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])}(l,c);const h=c[Yn];null!==h&&null===c[Go]&&(c[Go]=Ry(h,c[$o])),Ew(l,c,c[Jn])}function Ew(o,a,c){au(a);try{const l=o.viewQuery;null!==l&&fD(1,l,c);const h=o.template;null!==h&&nD(o,a,h,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&jy(o,a),o.staticViewQueries&&fD(2,o.viewQuery,c);const m=o.components;null!==m&&function Fx(o,a){for(let c=0;c<a.length;c++)mD(o,a[c])}(a,m)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{a[jt]&=-5,rl()}}let Lx=(()=>{var o;class a{constructor(){this.all=new Set,this.queue=new Map}create(l,h,m){const v=typeof Zone>"u"?null:Zone.current,T=new qu(l,N=>{this.all.has(N)&&this.queue.set(N,v)},m);let D;this.all.add(T),T.notify();const R=()=>{T.cleanup(),D?.(),this.all.delete(T),this.queue.delete(T)};return D=h?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[l,h]of this.queue)this.queue.delete(l),h?h.run(()=>l.run()):l.run()}get isQueueEmpty(){return 0===this.queue.size}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:()=>new o}),a})();function ww(o,a,c){let l=c?o.styles:null,h=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const T=a[v];"number"==typeof T?m=T:1==m?h=et(h,T):2==m&&(l=et(l,T+": "+a[++v]+";"))}c?o.styles=l:o.stylesWithoutHost=l,c?o.classes=h:o.classesWithoutHost=h}function Im(o,a,c,l,h=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&l.push(vn(m)),dr(m)){for(let T=qr;T<m.length;T++){const D=m[T],R=D[pt].firstChild;null!==R&&Im(D[pt],D,R,l)}m[Dr]!==m[Yn]&&l.push(m[Dr])}const v=c.type;if(8&v)Im(o,a,c.child,l);else if(32&v){const T=nb(c,a);let D;for(;D=T();)l.push(D)}else if(16&v){const T=pb(a,c);if(Array.isArray(T))l.push(...T);else{const D=th(a[Gn]);Im(D[pt],D,T,l,!0)}}c=h?c.projectionNext:c.next}return l}function Tw(o,a,c,l=!0){const h=a[fo].rendererFactory;h.begin&&h.begin();try{yD(o,a,o.template,c)}catch(v){throw l&&Ox(a,v),v}finally{h.end&&h.end(),a[fo].effectManager?.flush()}}function yD(o,a,c,l){const h=a[jt];if(256!=(256&h)){a[fo].effectManager?.flush(),au(a);try{zo(a),function tl(o){return Pt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&nD(o,a,c,2,l);const v=3==(3&h);if(v){const R=o.preOrderCheckHooks;null!==R&&Zr(a,R,null)}else{const R=o.preOrderHooks;null!==R&&sl(a,R,0,null),Zu(a,0)}if(function Bx(o){for(let a=vl(o);null!==a;a=sb(a)){if(!a[fa])continue;const c=a[mo];for(let l=0;l<c.length;l++){Af(c[l])}}}(a),Aw(a,2),null!==o.contentQueries&&jy(o,a),v){const R=o.contentCheckHooks;null!==R&&Zr(a,R)}else{const R=o.contentHooks;null!==R&&sl(a,R,1),Zu(a,1)}!function Ix(o,a){const c=o.hostBindingOpCodes;if(null===c)return;const l=Kb(a,kc);try{for(let h=0;h<c.length;h++){const m=c[h];if(m<0)Io(~m);else{const v=m,T=c[++h],D=c[++h];xf(T,v),l.runInContext(D,2,a[v])}}}finally{null===a[kc]&&Zb(a,kc),Io(-1)}}(o,a);const T=o.components;null!==T&&ID(a,T,0);const D=o.viewQuery;if(null!==D&&fD(2,D,l),v){const R=o.viewCheckHooks;null!==R&&Zr(a,R)}else{const R=o.viewHooks;null!==R&&sl(a,R,2),Zu(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[jt]&=-73,ru(a)}finally{rl()}}}function Aw(o,a){for(let c=vl(o);null!==c;c=sb(c))for(let l=qr;l<c.length;l++)vD(c[l],a)}function $x(o,a,c){vD(Wr(a,o),c)}function vD(o,a){if(!function Qc(o){return 128==(128&o[jt])}(o))return;const c=o[pt];if(80&o[jt]&&0===a||1024&o[jt]||2===a)yD(c,o,c.template,o[Jn]);else if(o[Gi]>0){Aw(o,1);const h=o[pt].components;null!==h&&ID(o,h,1)}}function ID(o,a,c){for(let l=0;l<a.length;l++)$x(o,a[l],c)}class Em{get rootNodes(){const a=this._lView,c=a[pt];return Im(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(a){this._lView[Jn]=a}get destroyed(){return 256==(256&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[zn];if(dr(a)){const c=a[8],l=c?c.indexOf(this):-1;l>-1&&(CE(a,l),fl(c,l))}this._attachedToViewContainer=!1}SE(this._lView[pt],this._lView)}onDestroy(a){!function Yc(o,a){if(256==(256&o[jt]))throw new oe(911,!1);null===o[go]&&(o[go]=[]),o[go].push(a)}(this._lView,a)}markForCheck(){fm(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-129}reattach(){this._lView[jt]|=128}detectChanges(){Tw(this._lView[pt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ub(o,a){El(o,a,a[Ft],2,null,null)}(this._lView[pt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=a}}class ED extends Em{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Tw(a[pt],a,a[Jn],!1)}checkNoChanges(){}get context(){return null}}class wD extends rw{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=gn(a);return new zy(c,this.ngModule)}}function Gx(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class vU{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,l){l=ne(l);const h=this.injector.get(a,sw,l);return h!==sw||c===sw?h:this.parentInjector.get(a,c,l)}}class zy extends nw{get inputs(){const a=this.componentDef,c=a.inputTransforms,l=Gx(a.inputs);if(null!==c)for(const h of l)c.hasOwnProperty(h.propName)&&(h.transform=c[h.propName]);return l}get outputs(){return Gx(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function yd(o){return o.map(mf).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,l,h){let m=(h=h||this.ngModule)instanceof Cl?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new vU(a,m):a,T=v.get(Bb,null);if(null===T)throw new oe(407,!1);const N={rendererFactory:T,sanitizer:v.get(cx,null),effectManager:v.get(Lx,null)},L=T.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",X=l?function wx(o,a,c,l){const m=l.get($b,!1)||c===Bn.ShadowDom,v=o.selectRootElement(a,m);return function Tx(o){iD(o)}(v),v}(L,l,this.componentDef.encapsulation,v):nh(L,K,function yU(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(K)),ot=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Et=gw(0,null,null,1,0,null,null,null,null,null,null),De=Ly(null,Et,null,ot,null,null,N,L,v,null,null);let Bt,on;au(De);try{const ln=this.componentDef;let Ni,Gp=null;ln.findHostDirectiveDefs?(Ni=[],Gp=new Map,ln.findHostDirectiveDefs(ln,Ni,Gp),Ni.push(ln)):Ni=[ln];const MS=function EU(o,a){const c=o[pt],l=Jt;return o[l]=a,hp(c,l,2,"#host",null)}(De,X),TN=function B(o,a,c,l,h,m,v){const T=h[pt];!function wn(o,a,c,l){for(const h of o)a.mergedAttrs=js(a.mergedAttrs,h.hostAttrs);null!==a.mergedAttrs&&(ww(a,a.mergedAttrs,!0),null!==c&&rc(l,c,a))}(l,o,a,v);let D=null;null!==a&&(D=Ry(a,h[$o]));const R=m.rendererFactory.createRenderer(a,c);let N=16;c.signals?N=4096:c.onPush&&(N=64);const L=Ly(h,pw(c),null,N,h[o.index],o,m,R,null,null,D);return T.firstCreatePass&&yw(T,o,l.length-1),vm(h,L),h[o.index]=L}(MS,X,ln,Ni,De,N,L);on=Md(Et,Jt),X&&function ms(o,a,c,l){if(l)rr(o,c,["ng-version",lx.full]);else{const{attrs:h,classes:m}=function hg(o){const a=[],c=[];let l=1,h=2;for(;l<o.length;){let m=o[l];if("string"==typeof m)2===h?""!==m&&a.push(m,o[++l]):8===h&&c.push(m);else{if(!Nr(h))break;h=m}l++}return{attrs:a,classes:c}}(a.selectors[0]);h&&rr(o,c,h),m&&m.length>0&&Jf(o,c,m.join(" "))}}(L,ln,X,l),void 0!==c&&function it(o,a,c){const l=o.projection=[];for(let h=0;h<a.length;h++){const m=c[h];l.push(null!=m?Array.from(m):null)}}(on,this.ngContentSelectors,c),Bt=function xl(o,a,c,l,h,m){const v=Ci(),T=h[pt],D=Di(v,h);cD(T,h,v,c,null,l);for(let N=0;N<c.length;N++)Si(Ko(h,T,v.directiveStart+N,v),h);pp(T,h,v),D&&Si(D,h);const R=Ko(h,T,v.directiveStart+v.componentOffset,v);if(o[Jn]=h[Jn]=R,null!==m)for(const N of m)N(R,a);return Vy(T,v,o),R}(TN,ln,Ni,Gp,De,[jx]),Ew(Et,De,null)}finally{rl()}return new IU(this.componentType,Bt,op(on,De),De,on)}}class IU extends Lb{constructor(a,c,l,h,m){super(),this.location=l,this._rootLView=h,this._tNode=m,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new ED(h),this.componentType=a}setInput(a,c){const l=this._tNode.inputs;let h;if(null!==l&&(h=l[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const m=this._rootLView;gD(m[pt],m,h,a,c),this.previousInputValues.set(a,c),fm(Wr(this._tNode.index,m))}}get injector(){return new fu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function jx(){const o=Ci();Rn(Re()[pt],o)}function at(o){let a=function Xo(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const l=[o];for(;a;){let h;if(Rs(o))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new oe(903,!1);h=a.\u0275dir}if(h){if(c){l.push(h);const v=o;v.inputs=$t(o.inputs),v.inputTransforms=$t(o.inputTransforms),v.declaredInputs=$t(o.declaredInputs),v.outputs=$t(o.outputs);const T=h.hostBindings;T&&zx(o,T);const D=h.viewQuery,R=h.contentQueries;if(D&&Hy(o,D),R&&wm(o,R),Xe(o.inputs,h.inputs),Xe(o.declaredInputs,h.declaredInputs),Xe(o.outputs,h.outputs),null!==h.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),Xe(v.inputTransforms,h.inputTransforms)),Rs(h)&&h.data.animation){const N=o.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const T=m[v];T&&T.ngInherit&&T(o),T===at&&(c=!1)}}a=Object.getPrototypeOf(a)}!function bw(o){let a=0,c=null;for(let l=o.length-1;l>=0;l--){const h=o[l];h.hostVars=a+=h.hostVars,h.hostAttrs=js(h.hostAttrs,c=js(c,h.hostAttrs))}}(l)}function $t(o){return o===mr?{}:o===Qt?[]:o}function Hy(o,a){const c=o.viewQuery;o.viewQuery=c?(l,h)=>{a(l,h),c(l,h)}:a}function wm(o,a){const c=o.contentQueries;o.contentQueries=c?(l,h,m)=>{a(l,h,m),c(l,h,m)}:a}function zx(o,a){const c=o.hostBindings;o.hostBindings=c?(l,h)=>{a(l,h),c(l,h)}:a}function Cw(o){const a=o.inputConfig,c={};for(const l in a)if(a.hasOwnProperty(l)){const h=a[l];Array.isArray(h)&&h[2]&&(c[l]=h[2])}o.inputTransforms=c}function Am(o){return!!gh(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function gh(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ys(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function bm(o,a,c,l){const h=Re();return ys(h,su(),a)&&(hn(),vu(er(),h,o,a,c,l)),bm}function mp(o,a,c,l){return ys(o,su(),c)?a+Ge(c)+l:qt}function rv(o,a,c,l,h,m,v,T){const D=Re(),R=hn(),N=o+Jt,L=R.firstCreatePass?function nv(o,a,c,l,h,m,v,T,D){const R=a.consts,N=hp(a,o,4,v||null,Zs(R,T));_w(a,c,N,Zs(R,D)),Rn(a,N);const L=N.tView=gw(2,N,l,h,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R,null);return null!==a.queries&&(a.queries.template(a,N),L.queries=a.queries.embeddedTView(N)),N}(N,R,D,a,c,l,h,m,v):R.data[N];cs(L,!1);const K=iv(R,D,L,o);cu()&&Js(R,D,K,L),Si(K,D),vm(D,D[N]=hD(K,D,K,L)),Oc(L)&&rD(R,D,L),null!=v&&Uy(D,L,T)}let iv=function Fw(o,a,c,l){return Eo(!0),a[Ft].createComment("")};function sv(o,a,c){const l=Re();return ys(l,su(),a)&&eo(hn(),er(),l,o,a,l[Ft],c,!1),sv}function vp(o,a,c,l,h){const v=h?"class":"style";gD(o,c,a.inputs[v],v,l)}function ov(o,a,c,l){const h=Re(),m=hn(),v=Jt+o,T=h[Ft],D=m.firstCreatePass?function rM(o,a,c,l,h,m){const v=a.consts,D=hp(a,o,2,l,Zs(v,h));return _w(a,c,D,Zs(v,m)),null!==D.attrs&&ww(D,D.attrs,!1),null!==D.mergedAttrs&&ww(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(v,m,h,a,c,l):m.data[v],R=FD(m,h,D,T,a,o);h[v]=R;const N=Oc(D);return cs(D,!0),rc(T,R,D),32!=(32&D.flags)&&cu()&&Js(m,h,R,D),0===function Ku(){return Pt.lFrame.elementDepthCount}()&&Si(R,h),function Jc(){Pt.lFrame.elementDepthCount++}(),N&&(rD(m,h,D),Vy(m,D,h)),null!==l&&Uy(h,D),ov}function hc(){let o=Ci();Fd()?Ld():(o=o.parent,cs(o,!1));const a=o;(function Cg(o){return Pt.skipHydrationRootTNode===o})(a)&&function Xc(){Pt.skipHydrationRootTNode=null}(),function Cf(){Pt.lFrame.elementDepthCount--}();const c=hn();return c.firstCreatePass&&(Rn(c,o),Gu(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Fg(o){return 0!=(8&o.flags)}(a)&&vp(c,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ps(o){return 0!=(16&o.flags)}(a)&&vp(c,a,Re(),a.stylesWithoutHost,!1),hc}function Lw(o,a,c,l){return ov(o,a,c,l),hc(),Lw}let FD=(o,a,c,l,h,m)=>(Eo(!0),nh(l,h,function $d(){return Pt.lFrame.currentNamespace}()));function Pm(o,a,c){const l=Re(),h=hn(),m=o+Jt,v=h.firstCreatePass?function av(o,a,c,l,h){const m=a.consts,v=Zs(m,l),T=hp(a,o,8,"ng-container",v);return null!==v&&ww(T,v,!0),_w(a,c,T,Zs(m,h)),null!==a.queries&&a.queries.elementStart(a,T),T}(m,h,l,a,c):h.data[m];cs(v,!0);const T=vs(h,l,v,o);return l[m]=T,cu()&&Js(h,l,T,v),Si(T,l),Oc(v)&&(rD(h,l,v),Vy(h,v,l)),null!=c&&Uy(l,v),Pm}function Ll(){let o=Ci();const a=hn();return Fd()?Ld():(o=o.parent,cs(o,!1)),a.firstCreatePass&&(Rn(a,o),Gu(o)&&a.queries.elementEnd(o)),Ll}let vs=(o,a,c,l)=>(Eo(!0),bE(a[Ft],""));function Mm(){return Re()}function uv(o){return!!o&&"function"==typeof o.then}function cv(o){return!!o&&"function"==typeof o.subscribe}function lv(o,a,c,l){const h=Re(),m=hn(),v=Ci();return function dv(o,a,c,l,h,m,v){const T=Oc(l),R=o.firstCreatePass&&pD(o),N=a[Jn],L=Iu(a);let K=!0;if(3&l.type||v){const $e=Di(l,a),ot=v?v($e):$e,Et=L.length,De=v?on=>v(vn(on[l.index])):l.index;let Bt=null;if(!v&&T&&(Bt=function Nm(o,a,c,l){const h=o.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===c&&h[m+1]===l){const T=a[Bo],D=h[m+2];return T.length>D?T[D]:null}"string"==typeof v&&(m+=2)}return null}(o,a,h,l.index)),null!==Bt)(Bt.__ngLastListenerFn__||Bt).__ngNextListenerFn__=m,Bt.__ngLastListenerFn__=m,K=!1;else{m=fv(l,a,N,m,!1);const on=c.listen(ot,h,m);L.push(m,on),R&&R.push(h,De,Et,Et+1)}}else m=fv(l,a,N,m,!1);const X=l.outputs;let Te;if(K&&null!==X&&(Te=X[h])){const $e=Te.length;if($e)for(let ot=0;ot<$e;ot+=2){const ln=a[Te[ot]][Te[ot+1]].subscribe(m),Ni=L.length;L.push(m,ln),R&&R.push(h,l.index,Ni,-(Ni+1))}}}(m,h,h[Ft],v,o,a,l),lv}function hv(o,a,c,l){try{return qi(6,a,c),!1!==c(l)}catch(h){return Ox(o,h),!1}finally{qi(7,a,c)}}function fv(o,a,c,l,h){return function m(v){if(v===Function)return l;fm(o.componentOffset>-1?Wr(o.index,a):a);let D=hv(a,c,l,v),R=m.__ngNextListenerFn__;for(;R;)D=hv(a,c,R,v)&&D,R=R.__ngNextListenerFn__;return h&&!1===D&&v.preventDefault(),D}}function km(o=1){return function Nf(o){return(Pt.lFrame.contextLView=function kf(o,a){for(;o>0;)a=a[po],o--;return a}(o,Pt.lFrame.contextLView))[Jn]}(o)}function Fm(o,a,c){return bh(o,"",a,"",c),Fm}function bh(o,a,c,l,h){const m=Re(),v=mp(m,a,c,l);return v!==qt&&eo(hn(),er(),m,o,v,m[Ft],h,!1),bh}function Vl(o,a){return o<<17|a<<2}function to(o){return o>>17&32767}function Hw(o){return 2|o}function Ul(o){return(131068&o)>>2}function gv(o,a){return-131069&o|a<<2}function fc(o){return 1|o}function tr(o,a,c,l,h){const m=o[c+1],v=null===a;let T=l?to(m):Ul(m),D=!1;for(;0!==T&&(!1===D||v);){const N=o[T+1];_v(o[T],a)&&(D=!0,o[T+1]=l?fc(N):Hw(N)),T=l?to(N):Ul(N)}D&&(o[c+1]=l?Hw(m):fc(m))}function _v(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ue(o,a)>=0}function yv(o,a){return function Do(o,a,c,l){const h=Re(),m=hn(),v=function ls(o){const a=Pt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);m.firstUpdatePass&&function YD(o,a,c,l){const h=o.data;if(null===h[c+1]){const m=h[ui()],v=function Kw(o,a){return a>=o.expandoStartIndex}(o,c);(function XD(o,a){return 0!=(o.flags&(a?8:16))})(m,l)&&null===a&&!v&&(a=!1),a=function cM(o,a,c,l){const h=function ou(o){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=l?a.residualClasses:a.residualStyles;if(null===h)0===(l?a.classBindings:a.styleBindings)&&(c=Gl(c=Ch(null,o,a,c,l),a.attrs,l),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==h)if(c=Ch(h,o,a,c,l),null===m){let D=function lM(o,a,c){const l=c?a.classBindings:a.styleBindings;if(0!==Ul(l))return o[to(l)]}(o,a,l);void 0!==D&&Array.isArray(D)&&(D=Ch(null,o,a,D[1],l),D=Gl(D,a.attrs,l),function dM(o,a,c,l){o[to(c?a.classBindings:a.styleBindings)]=l}(o,a,l,D))}else m=function vv(o,a,c){let l;const h=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<h;m++)l=Gl(l,o[m].hostAttrs,c);return Gl(l,a.attrs,c)}(o,a,l)}return void 0!==m&&(l?a.residualClasses=m:a.residualStyles=m),c}(h,m,a,l),function mv(o,a,c,l,h,m){let v=m?a.classBindings:a.styleBindings,T=to(v),D=Ul(v);o[l]=c;let N,R=!1;if(Array.isArray(c)?(N=c[1],(null===N||ue(c,N)>0)&&(R=!0)):N=c,h)if(0!==D){const K=to(o[T+1]);o[l+1]=Vl(K,T),0!==K&&(o[K+1]=gv(o[K+1],l)),o[T+1]=function sM(o,a){return 131071&o|a<<17}(o[T+1],l)}else o[l+1]=Vl(T,0),0!==T&&(o[T+1]=gv(o[T+1],l)),T=l;else o[l+1]=Vl(D,0),0===T?T=l:o[D+1]=gv(o[D+1],l),D=l;R&&(o[l+1]=Hw(o[l+1])),tr(o,N,l,!0),tr(o,N,l,!1),function $D(o,a,c,l,h){const m=h?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&ue(m,a)>=0&&(c[l+1]=fc(c[l+1]))}(a,N,o,l,m),v=Vl(T,D),m?a.classBindings=v:a.styleBindings=v}(h,m,a,c,v,l)}}(m,o,v,l),a!==qt&&ys(h,v,a)&&function JD(o,a,c,l,h,m,v,T){if(!(3&a.type))return;const D=o.data,R=D[T+1],N=function oM(o){return 1==(1&o)}(R)?vr(D,a,c,h,Ul(R),v):void 0;Bm(N)||(Bm(m)||function zw(o){return 2==(2&o)}(R)&&(m=vr(D,null,c,h,T,v)),function mb(o,a,c,l,h){if(a)h?o.addClass(c,l):o.removeClass(c,l);else{let m=-1===l.indexOf("-")?void 0:Fe.DashCase;null==h?o.removeStyle(c,l,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=Fe.Important),o.setStyle(c,l,h,m))}}(l,v,yo(ui(),c),h,m))}(m,m.data[ui()],h,h[Ft],o,h[v+1]=function hM(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=nt(Tl(o)))),o}(a,c),l,v)}(o,a,null,!0),yv}function Ch(o,a,c,l,h){let m=null;const v=c.directiveEnd;let T=c.directiveStylingLast;for(-1===T?T=c.directiveStart:T++;T<v&&(m=a[T],l=Gl(l,m.hostAttrs,h),m!==o);)T++;return null!==o&&(c.directiveStylingLast=T),l}function Gl(o,a,c){const l=c?1:2;let h=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?h=v:h===l&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),j(o,v,!!c||a[++m]))}return void 0===o?null:o}function vr(o,a,c,l,h,m){const v=null===a;let T;for(;h>0;){const D=o[h],R=Array.isArray(D),N=R?D[1]:D,L=null===N;let K=c[h+1];K===qt&&(K=L?Qt:void 0);let X=L?J(K,l):N===l?K:void 0;if(R&&!Bm(X)&&(X=J(D,l)),Bm(X)&&(T=X,v))return T;const Te=o[h+1];h=v?to(Te):Ul(Te)}if(null!==a){let D=m?a.residualClasses:a.residualStyles;null!=D&&(T=J(D,l))}return T}function Bm(o){return void 0!==o}function eC(o,a=""){const c=Re(),l=hn(),h=o+Jt,m=l.firstCreatePass?hp(l,h,1,a,null):l.data[h],v=Yw(l,c,m,a,o);c[h]=v,cu()&&Js(l,c,v,m),cs(m,!1)}let Yw=(o,a,c,l,h)=>(Eo(!0),function Zg(o,a){return o.createText(a)}(a[Ft],l));function wp(o){return $m("",o,""),wp}function $m(o,a,c){const l=Re(),h=mp(l,o,a,c);return h!==qt&&function Eu(o,a,c){const l=yo(a,o);!function ob(o,a,c){o.setValue(a,c)}(o[Ft],l,c)}(l,ui(),h),$m}const pc=void 0;var mC=["en",[["a","p"],["AM","PM"],pc],[["AM","PM"],pc,pc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pc,"{1} 'at' {0}",pc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Au(o){const c=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===l?1:5}];let jl={};function Hm(o){const a=function Dv(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Co(a);if(c)return c;const l=a.split("-")[0];if(c=Co(l),c)return c;if("en"===l)return mC;throw new oe(701,!1)}function bu(o){return Hm(o)[gc.PluralCase]}function Co(o){return o in jl||(jl[o]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[o]),jl[o]}var gc=function(o){return o[o.LocaleId=0]="LocaleId",o[o.DayPeriodsFormat=1]="DayPeriodsFormat",o[o.DayPeriodsStandalone=2]="DayPeriodsStandalone",o[o.DaysFormat=3]="DaysFormat",o[o.DaysStandalone=4]="DaysStandalone",o[o.MonthsFormat=5]="MonthsFormat",o[o.MonthsStandalone=6]="MonthsStandalone",o[o.Eras=7]="Eras",o[o.FirstDayOfWeek=8]="FirstDayOfWeek",o[o.WeekendRange=9]="WeekendRange",o[o.DateFormat=10]="DateFormat",o[o.TimeFormat=11]="TimeFormat",o[o.DateTimeFormat=12]="DateTimeFormat",o[o.NumberSymbols=13]="NumberSymbols",o[o.NumberFormats=14]="NumberFormats",o[o.CurrencyCode=15]="CurrencyCode",o[o.CurrencySymbol=16]="CurrencySymbol",o[o.CurrencyName=17]="CurrencyName",o[o.Currencies=18]="Currencies",o[o.Directionality=19]="Directionality",o[o.PluralCase=20]="PluralCase",o[o.ExtraData=21]="ExtraData",o}(gc||{});const Ph="en-US";let oT=Ph;function vT(o,a,c,l,h){if(o=xe(o),Array.isArray(o))for(let m=0;m<o.length;m++)vT(o[m],a,c,l,h);else{const m=hn(),v=Re();let T=ch(o)?o:xe(o.provide),D=Sl(o);const R=Ci(),N=1048575&R.providerIndexes,L=R.directiveStart,K=R.providerIndexes>>20;if(ch(o)||!o.multi){const X=new Ho(D,h,dp),Te=ET(T,a,h?N:N+K,L);-1===Te?(Ju(ds(R,v),m,T),IT(m,o,a.length),a.push(T),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),c.push(X),v.push(X)):(c[Te]=X,v[Te]=X)}else{const X=ET(T,a,N+K,L),Te=ET(T,a,N,N+K),ot=Te>=0&&c[Te];if(h&&!ot||!h&&!(X>=0&&c[X])){Ju(ds(R,v),m,T);const Et=function RM(o,a,c,l,h){const m=new Ho(o,c,dp);return m.multi=[],m.index=a,m.componentProviders=0,PC(m,h,l&&!c),m}(h?SM:CM,c.length,h,l,D);!h&&ot&&(c[Te].providerFactory=Et),IT(m,o,a.length,0),a.push(T),R.directiveStart++,R.directiveEnd++,h&&(R.providerIndexes+=1048576),c.push(Et),v.push(Et)}else IT(m,o,X>-1?X:Te,PC(c[h?Te:X],D,!h&&l));!h&&l&&ot&&c[Te].componentProviders++}}}function IT(o,a,c,l){const h=ch(a),m=function QP(o){return!!o.useClass}(a);if(h||m){const D=(m?xe(a.useClass):a).prototype.ngOnDestroy;if(D){const R=o.destroyHooks||(o.destroyHooks=[]);if(!h&&a.multi){const N=R.indexOf(c);-1===N?R.push(c,[l,D]):R[N+1].push(l,D)}else R.push(c,D)}}}function PC(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function ET(o,a,c,l){for(let h=c;h<l;h++)if(a[h]===o)return h;return-1}function CM(o,a,c,l){return wT(this.multi,[])}function SM(o,a,c,l){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,T=Ko(c,c[pt],this.providerFactory.index,l);m=T.slice(0,v),wT(h,m);for(let D=v;D<T.length;D++)m.push(T[D])}else m=[],wT(h,m);return m}function wT(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function xC(o,a=[]){return c=>{c.providersResolver=(l,h)=>function DM(o,a,c){const l=hn();if(l.firstCreatePass){const h=Rs(o);vT(c,l.data,l.blueprint,h,!0),vT(a,l.data,l.blueprint,h,!1)}}(l,h?h(o):o,a)}}class Dp{}class MC{}function PM(o,a){return new TT(o,a??null,[])}class TT extends Dp{constructor(a,c,l){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wD(this);const h=oi(a);this._bootstrapComponents=lc(h.bootstrap),this._r3Injector=tD(a,c,[{provide:Dp,useValue:this},{provide:rw,useValue:this.componentFactoryResolver},...l],nt(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Mv extends MC{constructor(a){super(),this.moduleType=a}create(a){return new TT(this.moduleType,a,[])}}class AT extends Dp{constructor(a){super(),this.componentFactoryResolver=new wD(this),this.instance=null;const c=new by([...a.providers,{provide:Dp,useValue:this},{provide:rw,useValue:this.componentFactoryResolver}],a.parent||Ay(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function bT(o,a,c=null){return new AT({providers:o,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let MM=(()=>{var o;class a{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l)){const h=WE(0,l.type),m=h.length>0?bT([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l,m)}return this.cachedInjectors.get(l)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return(o=a).\u0275prov=ye({token:o,providedIn:"environment",factory:()=>new o(V(Cl))}),a})();function Nv(o){o.getStandaloneInjector=a=>a.get(MM).getOrCreateStandaloneInjector(o)}function $v(o){return a=>{setTimeout(o,void 0,a)}}const nr=class FC extends p.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,l){let h=a,m=c||(()=>null),v=l;if(a&&"object"==typeof a){const D=a;h=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=$v(m),h&&(h=$v(h)),v&&(v=$v(v)));const T=super.subscribe({next:h,error:m,complete:v});return a instanceof U.w0&&a.add(T),T}};function LC(){return this._results[Symbol.iterator]()}class qn{get changes(){return this._changes||(this._changes=new nr)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=qn.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=LC)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const l=this;l.dirty=!1;const h=function fs(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function ny(o,a,c){if(o.length!==a.length)return!1;for(let l=0;l<o.length;l++){let h=o[l],m=a[l];if(c&&(h=c(h),m=c(m)),m!==h)return!1}return!0}(l._results,h,c))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sa=(()=>{class a{}return a.__NG_ELEMENT_ID__=Cp,a})();const VC=sa,UC=class extends VC{constructor(a,c,l){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c,null)}createEmbeddedViewImpl(a,c,l){const v=this._declarationTContainer.tView,T=Ly(this._declarationLView,v,a,4096&this._declarationLView[jt]?4096:16,null,v.declTNode,null,null,null,c||null,l||null);T[Uu]=this._declarationLView[this._declarationTContainer.index];const R=this._declarationLView[br];return null!==R&&(T[br]=R.createEmbeddedView(v)),Ew(v,T,a),new Em(T)}};function Cp(){return Gv(Ci(),Re())}function Gv(o,a){return 4&o.type?new UC(a,o,op(o,a)):null}let o_=(()=>{class a{}return a.__NG_ELEMENT_ID__=FM,a})();function FM(){return UT(Ci(),Re())}const LM=o_,$C=class extends LM{constructor(a,c,l){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=l}get element(){return op(this._hostTNode,this._hostLView)}get injector(){return new fu(this._hostTNode,this._hostLView)}get parentInjector(){const a=du(this._hostTNode,this._hostLView);if(lu(a)){const c=Zi(a,this._hostLView),l=xs(a);return new fu(c[pt].data[l+8],c)}return new fu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=LT(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-qr}createEmbeddedView(a,c,l){let h,m;"number"==typeof l?h=l:null!=l&&(h=l.index,m=l.injector);const T=a.createEmbeddedViewImpl(c||{},m,null);return this.insertImpl(T,h,false),T}createComponent(a,c,l,h,m){const v=a&&!function hs(o){return"function"==typeof o}(a);let T;if(v)T=c;else{const $e=c||{};T=$e.index,l=$e.injector,h=$e.projectableNodes,m=$e.environmentInjector||$e.ngModuleRef}const D=v?a:new zy(gn(a)),R=l||this.parentInjector;if(!m&&null==D.ngModule){const ot=(v?R:this.parentInjector).get(Cl,null);ot&&(m=ot)}gn(D.componentType??{});const X=D.create(R,h,null,m);return this.insertImpl(X.hostView,T,false),X}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,l){const h=a._lView,m=h[pt];if(function nu(o){return dr(o[zn])}(h)){const D=this.indexOf(a);if(-1!==D)this.detach(D);else{const R=h[zn],N=new $C(R,R[Or],R[zn]);N.detach(N.indexOf(a))}}const v=this._adjustIndex(c),T=this._lContainer;if(function cb(o,a,c,l){const h=qr+l,m=c.length;l>0&&(c[h-1][zs]=a),l<m-qr?(a[zs]=c[h],Qd(c,qr+l,a)):(c.push(a),a[zs]=null),a[zn]=c;const v=a[Uu];null!==v&&c!==v&&function VP(o,a){const c=o[mo];a[Gn]!==a[zn][zn][Gn]&&(o[fa]=!0),null===c?o[mo]=[a]:c.push(a)}(v,a);const T=a[br];null!==T&&T.insertView(o),a[jt]|=128}(m,h,T,v),!l){const D=Qg(v,T),R=h[Ft],N=xE(R,T[Dr]);null!==N&&function FP(o,a,c,l,h,m){l[Yn]=h,l[Or]=a,El(o,l,c,1,h,m)}(m,T[Or],R,h,N,D)}return a.attachToViewContainerRef(),Qd(VT(T),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=LT(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),l=CE(this._lContainer,c);l&&(fl(VT(this._lContainer),c),SE(l[pt],l))}detach(a){const c=this._adjustIndex(a,-1),l=CE(this._lContainer,c);return l&&null!=fl(VT(this._lContainer),c)?new Em(l):null}_adjustIndex(a,c=0){return a??this.length+c}};function LT(o){return o[8]}function VT(o){return o[8]||(o[8]=[])}function UT(o,a){let c;const l=a[o.index];return dr(l)?c=l:(c=hD(l,a,null,o),a[o.index]=c,vm(a,c)),GC(c,a,o,l),new $C(c,o,a)}let GC=function jC(o,a,c,l){if(o[Dr])return;let h;h=8&c.type?vn(l):function VM(o,a){const c=o[Ft],l=c.createComment(""),h=Di(a,o);return Qf(c,xE(c,h),l,function JV(o,a){return o.nextSibling(a)}(c,h),!1),l}(a,c),o[Dr]=h};class Fh{constructor(a){this.queryList=a,this.matches=null}clone(){return new Fh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const l=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let m=0;m<l;m++){const v=c.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new Sp(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Mp(a,c).matches&&this.queries[c].setDirty()}}class a_{constructor(a,c,l=null){this.predicate=a,this.flags=c,this.read=l}}class jv{constructor(a=[]){this.queries=a}elementStart(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let l=0;l<this.length;l++){const h=null!==c?c.length:0,m=this.getByIndex(l).embeddedTView(a,h);m&&(m.indexInDeclarationView=l,null!==c?c.push(m):c=[m])}return null!==c?new jv(c):null}template(a,c){for(let l=0;l<this.queries.length;l++)this.queries[l].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class zv{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new zv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let l=a.parent;for(;null!==l&&8&l.type&&l.index!==c;)l=l.parent;return c===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const m=l[h];this.matchTNodeWithReadOption(a,c,Tc(c,m)),this.matchTNodeWithReadOption(a,c,Ta(c,a,m,!1,!1))}else l===sa?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Ta(c,a,l,!1,!1))}matchTNodeWithReadOption(a,c,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===ky||h===o_||h===sa&&4&c.type)this.addMatch(c.index,-2);else{const m=Ta(c,a,h,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,l)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Tc(o,a){const c=o.localNames;if(null!==c)for(let l=0;l<c.length;l+=2)if(c[l]===a)return c[l+1];return null}function Rp(o,a,c,l){return-1===c?function zC(o,a){return 11&o.type?op(o,a):4&o.type?Gv(o,a):null}(a,o):-2===c?function HC(o,a,c){return c===ky?op(a,o):c===sa?Gv(a,o):c===o_?UT(a,o):void 0}(o,a,l):Ko(o,o[pt],c,a)}function Hv(o,a,c,l){const h=a[br].queries[l];if(null===h.matches){const m=o.data,v=c.matches,T=[];for(let D=0;D<v.length;D+=2){const R=v[D];T.push(R<0?null:Rp(a,m[R],v[D+1],c.metadata.read))}h.matches=T}return h.matches}function Pp(o,a,c,l){const h=o.queries.getByIndex(c),m=h.matches;if(null!==m){const v=Hv(o,a,h,c);for(let T=0;T<m.length;T+=2){const D=m[T];if(D>0)l.push(v[T/2]);else{const R=m[T+1],N=a[-D];for(let L=qr;L<N.length;L++){const K=N[L];K[Uu]===K[zn]&&Pp(K[pt],K,R,l)}if(null!==N[mo]){const L=N[mo];for(let K=0;K<L.length;K++){const X=L[K];Pp(X[pt],X,R,l)}}}}}return l}function qv(o){const a=Re(),c=hn(),l=xg();Ia(l+1);const h=Mp(c,l);if(o.dirty&&function Zc(o){return 4==(4&o[jt])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)o.reset([]);else{const m=h.crossesNgTemplate?Pp(c,a,l,[]):Hv(c,a,h,l);o.reset(m,ux),o.notifyOnChanges()}return!0}return!1}function Es(o,a,c,l){const h=hn();if(h.firstCreatePass){const m=Ci();(function $T(o,a,c){null===o.queries&&(o.queries=new jv),o.queries.track(new zv(a,c))})(h,new a_(a,c,l),m.index),function GT(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(h,o),2==(2&c)&&(h.staticContentQueries=!0)}!function xp(o,a,c){const l=new qn(4==(4&c));(function mw(o,a,c,l){const h=Iu(a);h.push(c),o.firstCreatePass&&pD(o).push(l,h.length-1)})(o,a,l,l.destroy),null===a[br]&&(a[br]=new Sp),a[br].queries.push(new Fh(l))}(h,Re(),c)}function Wv(){return function Kv(o,a){return o[br].queries[a].queryList}(Re(),xg())}function Mp(o,a){return o.queries.getByIndex(a)}function Zv(o){return!!oi(o)}const nS=new Mn("Application Initializer");let Xv=(()=>{var o;class a{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h}),this.appInits=pe(nS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const l=[];for(const m of this.appInits){const v=m();if(uv(v))l.push(v);else if(cv(v)){const T=new Promise((D,R)=>{v.subscribe({complete:D,error:R})});l.push(T)}}const h=()=>{this.done=!0,this.resolve()};Promise.all(l).then(()=>{h()}).catch(m=>{this.reject(m)}),0===l.length&&h(),this.initialized=!0}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})(),e0=(()=>{var o;class a{log(l){console.log(l)}warn(l){console.warn(l)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();const Jl=new Mn("LocaleId",{providedIn:"root",factory:()=>pe(Jl,Ot.Optional|Ot.SkipSelf)||function t0(){return typeof $localize<"u"&&$localize.locale||Ph}()}),l_=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let r0=(()=>{var o;class a{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new W.X(!1)}add(){this.hasPendingTasks.next(!0);const l=this.taskId++;return this.pendingTasks.add(l),l}remove(l){this.pendingTasks.delete(l),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();class iS{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let QM=(()=>{var o;class a{compileModuleSync(l){return new Mv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),v=lc(oi(l).declarations).reduce((T,D)=>{const R=gn(D);return R&&T.push(new zy(R)),T},[]);return new iS(h,v)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function zh(...o){}class _n{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nr(!1),this.onMicrotaskEmpty=new nr(!1),this.onStable=new nr(!1),this.onError=new nr(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&c,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function uS(){const o="function"==typeof Yt.requestAnimationFrame;let a=Yt[o?"requestAnimationFrame":"setTimeout"],c=Yt[o?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l);const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function Pu(o){const a=()=>{!function d_(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Yt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,h_(o),o.isCheckStableRunning=!0,tI(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),h_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,l,h,m,v,T)=>{try{return o0(o),c.invokeTask(h,m,v,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),Lp(o)}},onInvoke:(c,l,h,m,v,T,D)=>{try{return o0(o),c.invoke(h,m,v,T,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),Lp(o)}},onHasTask:(c,l,h,m)=>{c.hasTask(h,m),l===h&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,h_(o),tI(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,l,h,m)=>(c.handleError(h,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(_n.isInAngularZone())throw new oe(909,!1)}run(a,c,l){return this._inner.run(a,c,l)}runTask(a,c,l,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,a,s0,zh,zh);try{return m.runTask(v,c,l)}finally{m.cancelTask(v)}}runGuarded(a,c,l){return this._inner.runGuarded(a,c,l)}runOutsideAngular(a){return this._outer.run(a)}}const s0={};function tI(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function h_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function o0(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Lp(o){o._nesting--,tI(o)}class cS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nr,this.onMicrotaskEmpty=new nr,this.onStable=new nr,this.onError=new nr}run(a,c,l){return a.apply(c,l)}runGuarded(a,c,l){return a.apply(c,l)}runOutsideAngular(a){return a()}runTask(a,c,l,h){return a.apply(c,l)}}const a0=new Mn("",{providedIn:"root",factory:u0});function u0(){const o=pe(_n);let a=!0;const c=new re.y(h=>{a=o.isStable&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks,o.runOutsideAngular(()=>{h.next(a),h.complete()})}),l=new re.y(h=>{let m;o.runOutsideAngular(()=>{m=o.onStable.subscribe(()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!o.hasPendingMacrotasks&&!o.hasPendingMicrotasks&&(a=!0,h.next(!0))})})});const v=o.onUnstable.subscribe(()=>{_n.assertInAngularZone(),a&&(a=!1,o.runOutsideAngular(()=>{h.next(!1)}))});return()=>{m.unsubscribe(),v.unsubscribe()}});return(0,se.T)(c,l.pipe((0,ve.B)()))}const lS=new Mn(""),dS=new Mn("");let rI,f_=(()=>{var o;class a{constructor(l,h,m){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rI||(function XM(o){rI=o}(m),m.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_n.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,m){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==v),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:v,updateCb:m})}whenStable(l,h,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,m){return[]}}return(o=a).\u0275fac=function(l){return new(l||o)(V(_n),V(nI),V(dS))},o.\u0275prov=ye({token:o,factory:o.\u0275fac}),a})(),nI=(()=>{var o;class a{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return rI?.findTestabilityInTree(this,l,h)??null}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})(),xu=null;const c0=new Mn("AllowMultipleToken"),l0=new Mn("PlatformDestroyListeners"),iI=new Mn("appBootstrapListener");class Vp{constructor(a,c){this.name=a,this.token=c}}function h0(o,a,c=[]){const l=`Platform: ${a}`,h=new Mn(l);return(m=[])=>{let v=Dc();if(!v||v.injector.get(c0,!1)){const T=[...c,...m,{provide:h,useValue:!0}];o?o(T):function fS(o){if(xu&&!xu.get(c0,!1))throw new oe(400,!1);(function hS(){!function Ef(o){Fr=o}(()=>{throw new oe(600,!1)})})(),xu=o;const a=o.get(td);(function d0(o){o.get(kb,null)?.forEach(c=>c())})(o)}(function f0(o=[],a){return Pl.create({name:a,providers:[{provide:Ty,useValue:"platform"},{provide:l0,useValue:new Set([()=>xu=null])},...o]})}(T,l))}return function nN(o){const a=Dc();if(!a)throw new oe(401,!1);return a}()}}function Dc(){return xu?.get(td)??null}let td=(()=>{var o;class a{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const m=function p_(o="zone.js",a){return"noop"===o?new cS:"zone.js"===o?new _n(a):o}(h?.ngZone,function nd(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:o?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:o?.runCoalescing??!1}}({eventCoalescing:h?.ngZoneEventCoalescing,runCoalescing:h?.ngZoneRunCoalescing}));return m.run(()=>{const v=function xM(o,a,c){return new TT(o,a,c)}(l.moduleType,this.injector,function Up(o){return[{provide:_n,useFactory:o},{provide:rp,multi:!0,useFactory:()=>{const a=pe(mS,{optional:!0});return()=>a.initialize()}},{provide:pS,useFactory:gS},{provide:a0,useFactory:u0}]}(()=>m)),T=v.injector.get(up,null);return m.runOutsideAngular(()=>{const D=m.onError.subscribe({next:R=>{T.handleError(R)}});v.onDestroy(()=>{g_(this._modules,v),D.unsubscribe()})}),function g0(o,a,c){try{const l=c();return uv(l)?l.catch(h=>{throw a.runOutsideAngular(()=>o.handleError(h)),h}):l}catch(l){throw a.runOutsideAngular(()=>o.handleError(l)),l}}(T,m,()=>{const D=v.injector.get(Xv);return D.runInitializers(),D.donePromise.then(()=>(function Zm(o){Tt(o,"Expected localeId to be defined"),"string"==typeof o&&(oT=o.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Jl,Ph)||Ph),this._moduleDoBootstrap(v),v))})})}bootstrapModule(l,h=[]){const m=sI({},h);return function eN(o,a,c){const l=new Mv(c);return Promise.resolve(l)}(0,0,l).then(v=>this.bootstrapModuleFactory(v,m))}_moduleDoBootstrap(l){const h=l.injector.get(rd);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(m=>h.bootstrap(m));else{if(!l.instance.ngDoBootstrap)throw new oe(-403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(l0,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(o=a).\u0275fac=function(l){return new(l||o)(V(Pl))},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"platform"}),a})();function sI(o,a){return Array.isArray(a)?a.reduce(sI,o):{...o,...a}}let rd=(()=>{var o;class a{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(pS),this.zoneIsStable=pe(a0),this.componentTypes=[],this.components=[],this.isStable=pe(r0).hasPendingTasks.pipe((0,Ve.w)(l=>l?(0,Ie.of)(!1):this.zoneIsStable),function ce(o,a=_e.y){return o=o??Ke,(0,H.e)((c,l)=>{let h,m=!0;c.subscribe((0,q.x)(l,v=>{const T=a(v);(m||!o(h,T))&&(m=!1,h=T,l.next(v))}))})}(),(0,ve.B)()),this._injector=pe(Cl)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const m=l instanceof nw;if(!this._injector.get(Xv).done)throw!m&&Uo(l),new oe(405,!1);let T;T=m?l:this._injector.get(rw).resolveComponentFactory(l),this.componentTypes.push(T.componentType);const D=function Xl(o){return o.isBoundToModule}(T)?void 0:this._injector.get(Dp),N=T.create(Pl.NULL,[],h||T.selector,D),L=N.location.nativeElement,K=N.injector.get(lS,null);return K?.registerApplication(L),N.onDestroy(()=>{this.detachView(N.hostView),g_(this.components,N),K?.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;g_(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l);const h=this._injector.get(iI,[]);h.push(...this._bootstrapListeners),h.forEach(m=>m(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>g_(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new oe(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function g_(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}const pS=new Mn("",{providedIn:"root",factory:()=>pe(up).handleError.bind(void 0)});function gS(){const o=pe(_n),a=pe(up);return c=>o.runOutsideAngular(()=>a.handleError(c))}let mS=(()=>{var o;class a{constructor(){this.zone=pe(_n),this.applicationRef=pe(rd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(o=a).\u0275fac=function(l){return new(l||o)},o.\u0275prov=ye({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();function rN(){return!1}let m_=(()=>{class a{}return a.__NG_ELEMENT_ID__=qh,a})();function qh(o){return function id(o,a,c){if(Hs(o)&&!c){const l=Wr(o.index,a);return new Em(l,l)}return 47&o.type?new Em(a[Gn],a):null}(Ci(),Re(),16==(16&o))}class rs{constructor(){}supports(a){return Am(a)}create(a){return new uI(a)}}const IS=(o,a)=>a;class uI{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||IS}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,l=this._removalsHead,h=0,m=null;for(;c||l;){const v=!l||c&&c.currentIndex<Zh(l,h,m)?c:l,T=Zh(v,h,m),D=v.currentIndex;if(v===l)h--,l=l._nextRemoved;else if(c=c._next,null==v.previousIndex)h++;else{m||(m=[]);const R=T-h,N=D-h;if(R!=N){for(let K=0;K<R;K++){const X=K<m.length?m[K]:m[K]=0,Te=X+K;N<=Te&&Te<R&&(m[K]=X+1)}m[v.previousIndex]=N-R}}T!==D&&a(v,T,D)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Am(a))throw new oe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,m,v,c=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)m=a[T],v=this._trackByFn(T,m),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,m,v,T)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,T),l=!0),c=c._next}else h=0,function Kx(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let l;for(;!(l=c.next()).done;)a(l.value)}}(a,T=>{v=this._trackByFn(h,T),null!==c&&Object.is(c.trackById,v)?(l&&(c=this._verifyReinsertion(c,T,v,h)),Object.is(c.item,T)||this._addIdentityChange(c,T)):(c=this._mismatch(c,T,v,h),l=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,l,h){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,h)):a=this._addAfter(new cI(c,l),m,h),a}_verifyReinsertion(a,c,l,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?a=this._reinsertAfter(m,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,m=a._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(a,c,l),this._addToMoves(a,l),a}_moveAfter(a,c,l){return this._unlink(a),this._insertAfter(a,c,l),this._addToMoves(a,l),a}_addAfter(a,c,l){return this._insertAfter(a,c,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,l){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new Cc),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,l=a._next;return null===c?this._itHead=l:c._next=l,null===l?this._itTail=c:l._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Cc),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class cI{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ES{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===c||c<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const c=a._prevDup,l=a._nextDup;return null===c?this._head=l:c._nextDup=l,null===l?this._tail=c:l._prevDup=c,null===this._head}}class Cc{constructor(){this.map=new Map}put(a){const c=a.trackById;let l=this.map.get(c);l||(l=new ES,this.map.set(c,l)),l.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zh(o,a,c){const l=o.previousIndex;if(null===l)return l;let h=0;return c&&l<c.length&&(h=c[l]),l+a+h}class w0{constructor(){}supports(a){return a instanceof Map||gh(a)}create(){return new Qh}}class Qh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||gh(a)))throw new oe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,l),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(h,l);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let l=c;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const l=a._prev;return c._next=a,c._prev=l,a._prev=c,l&&(l._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const l=new lN(a);return this._records.set(a,l),l.currentValue=c,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(l=>c(a[l],l))}}class lN{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Yh(){return new lI([new rs])}let lI=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(null!=h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||Yh()),deps:[[a,new Yd,new Ys]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(null!=h)return h;throw new oe(901,!1)}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:Yh}),a})();function T0(){return new A0([new w0])}let A0=(()=>{var o;class a{constructor(l){this.factories=l}static create(l,h){if(h){const m=h.factories.slice();l=l.concat(m)}return new a(l)}static extend(l){return{provide:a,useFactory:h=>a.create(l,h||T0()),deps:[[a,new Yd,new Ys]]}}find(l){const h=this.factories.find(m=>m.supports(l));if(h)return h;throw new oe(901,!1)}}return(o=a).\u0275prov=ye({token:o,providedIn:"root",factory:T0}),a})();const dI=h0(null,"core",[]);let fN=(()=>{var o;class a{constructor(l){}}return(o=a).\u0275fac=function(l){return new(l||o)(V(rd))},o.\u0275mod=yf({type:o}),o.\u0275inj=jn({}),a})();function yN(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function N0(o){const a=gn(o);if(!a)return null;const c=new zy(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},4097:(wt,Se,O)=>{O.d(Se,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=O(534);(0,p.registerVersion)("firebase","9.23.0","app")},120:(wt,Se,O)=>{O.d(Se,{Z:()=>p.Z});var p=O(3106);p.Z.registerVersion("firebase","9.23.0","app-compat")},3106:(wt,Se,O)=>{O.d(Se,{Z:()=>Xe});var p=O(9058),U=O(4537),W=O(534),re=O(7879);class se{constructor(et,ze){this._delegate=et,this.firebase=ze,(0,W._addComponent)(et,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(et,ze=W._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const xe=this._delegate.container.getProvider(et);return!xe.isInitialized()&&"EXPLICIT"===(null===(At=xe.getComponent())||void 0===At?void 0:At.instantiationMode)&&xe.initialize(),xe.getImmediate({identifier:ze})}_removeServiceInstance(et,ze=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(ze)}_addComponent(et){(0,W._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,W._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function _e(){const nt=function Ve(nt){const et={},ze={__esModule:!0,initializeApp:function Be(oe,Je={}){const Ge=W.initializeApp(oe,Je);if((0,p.r3)(et,Ge.name))return et[Ge.name];const ht=new nt(Ge,ze);return et[Ge.name]=ht,ht},app:xe,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function Oe(oe){const Je=oe.name,Ge=Je.replace("-compat","");if(W._registerComponent(oe)&&"PUBLIC"===oe.type){const ht=(Hr=xe())=>{if("function"!=typeof Hr[Ge])throw ve.create("invalid-app-argument",{appName:Je});return Hr[Ge]()};void 0!==oe.serviceProps&&(0,p.ZB)(ht,oe.serviceProps),ze[Ge]=ht,nt.prototype[Ge]=function(...Hr){return this._getService.bind(this,Je).apply(this,oe.multipleInstances?Hr:[])}}return"PUBLIC"===oe.type?ze[Ge]:null},removeApp:function At(oe){delete et[oe]},useAsService:function Qe(oe,Je){return"serverAuth"===Je?null:Je},modularAPIs:W}};function xe(oe){if(!(0,p.r3)(et,oe=oe||W._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:oe});return et[oe]}return ze.default=ze,Object.defineProperty(ze,"apps",{get:function Ne(){return Object.keys(et).map(oe=>et[oe])}}),xe.App=nt,ze}(se);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function et(ze){(0,p.ZB)(nt,ze)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),nt}(),q=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=H;!function me(nt){(0,W.registerVersion)("@firebase/app-compat","0.2.13",nt)}()},534:(wt,Se,O)=>{O.r(Se),O.d(Se,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>$a,_DEFAULT_ENTRY_NAME:()=>kn,_addComponent:()=>Ot,_addOrOverwriteComponent:()=>tn,_apps:()=>Gt,_clearComponents:()=>Sn,_components:()=>wi,_getProvider:()=>cn,_registerComponent:()=>un,_removeServiceInstance:()=>ca,deleteApp:()=>Lo,getApp:()=>ri,getApps:()=>os,initializeApp:()=>Ui,onLog:()=>as,registerVersion:()=>Bi,setLogLevel:()=>ii});var p=O(5861),U=O(4537),W=O(7879),re=O(9058);const se=(ge,te)=>te.some(Me=>ge instanceof Me);let Ie,ve;const H=new WeakMap,q=new WeakMap,ce=new WeakMap,Ke=new WeakMap,me=new WeakMap;let et={get(ge,te,Me){if(ge instanceof IDBTransaction){if("done"===te)return q.get(ge);if("objectStoreNames"===te)return ge.objectStoreNames||ce.get(ge);if("store"===te)return Me.objectStoreNames[1]?void 0:Me.objectStore(Me.objectStoreNames[0])}return Be(ge[te])},set:(ge,te,Me)=>(ge[te]=Me,!0),has:(ge,te)=>ge instanceof IDBTransaction&&("done"===te||"store"===te)||te in ge};function xe(ge){return"function"==typeof ge?function At(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...te){return ge.apply(Ne(this),te),Be(H.get(this))}:function(...te){return Be(ge.apply(Ne(this),te))}:function(te,...Me){const ct=ge.call(Ne(this),te,...Me);return ce.set(ct,te.sort?te.sort():[te]),Be(ct)}}(ge):(ge instanceof IDBTransaction&&function nt(ge){if(q.has(ge))return;const te=new Promise((Me,ct)=>{const Mt=()=>{ge.removeEventListener("complete",kt),ge.removeEventListener("error",yn),ge.removeEventListener("abort",yn)},kt=()=>{Me(),Mt()},yn=()=>{ct(ge.error||new DOMException("AbortError","AbortError")),Mt()};ge.addEventListener("complete",kt),ge.addEventListener("error",yn),ge.addEventListener("abort",yn)});q.set(ge,te)}(ge),se(ge,function Ve(){return Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,et):ge)}function Be(ge){if(ge instanceof IDBRequest)return function Xe(ge){const te=new Promise((Me,ct)=>{const Mt=()=>{ge.removeEventListener("success",kt),ge.removeEventListener("error",yn)},kt=()=>{Me(Be(ge.result)),Mt()},yn=()=>{ct(ge.error),Mt()};ge.addEventListener("success",kt),ge.addEventListener("error",yn)});return te.then(Me=>{Me instanceof IDBCursor&&H.set(Me,ge)}).catch(()=>{}),me.set(te,ge),te}(ge);if(Ke.has(ge))return Ke.get(ge);const te=xe(ge);return te!==ge&&(Ke.set(ge,te),me.set(te,ge)),te}const Ne=ge=>me.get(ge),oe=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],Ge=new Map;function ht(ge,te){if(!(ge instanceof IDBDatabase)||te in ge||"string"!=typeof te)return;if(Ge.get(te))return Ge.get(te);const Me=te.replace(/FromIndex$/,""),ct=te!==Me,Mt=Je.includes(Me);if(!(Me in(ct?IDBIndex:IDBObjectStore).prototype)||!Mt&&!oe.includes(Me))return;const kt=function(){var yn=(0,p.Z)(function*(rr,...$n){const $i=this.transaction(rr,Mt?"readwrite":"readonly");let js=$i.store;return ct&&(js=js.index($n.shift())),(yield Promise.all([js[Me](...$n),Mt&&$i.done]))[0]});return function($n){return yn.apply(this,arguments)}}();return Ge.set(te,kt),kt}!function ze(ge){et=ge(et)}(ge=>({...ge,get:(te,Me,ct)=>ht(te,Me)||ge.get(te,Me,ct),has:(te,Me)=>!!ht(te,Me)||ge.has(te,Me)}));class Hr{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function ti(ge){const te=ge.getComponent();return"VERSION"===te?.type}(Me)){const ct=Me.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Me=>Me).join(" ")}}const Vi="@firebase/app",Nn=new W.Yd("@firebase/app"),kn="[DEFAULT]",Kt={[Vi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,wi=new Map;function Ot(ge,te){try{ge.container.addComponent(te)}catch(Me){Nn.debug(`Component ${te.name} failed to register with FirebaseApp ${ge.name}`,Me)}}function tn(ge,te){ge.container.addOrOverwriteComponent(te)}function un(ge){const te=ge.name;if(wi.has(te))return Nn.debug(`There were multiple attempts to register component ${te}.`),!1;wi.set(te,ge);for(const Me of Gt.values())Ot(Me,ge);return!0}function cn(ge,te){const Me=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),ge.container.getProvider(te)}function ca(ge,te,Me=kn){cn(ge,te).clearInstance(Me)}function Sn(){wi.clear()}const Zt=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fu{constructor(te,Me,ct){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}const $a="9.23.0";function Ui(ge,te={}){let Me=ge;"object"!=typeof te&&(te={name:te});const ct=Object.assign({name:kn,automaticDataCollectionEnabled:!1},te),Mt=ct.name;if("string"!=typeof Mt||!Mt)throw Zt.create("bad-app-name",{appName:String(Mt)});if(Me||(Me=(0,re.aH)()),!Me)throw Zt.create("no-options");const kt=Gt.get(Mt);if(kt){if((0,re.vZ)(Me,kt.options)&&(0,re.vZ)(ct,kt.config))return kt;throw Zt.create("duplicate-app",{appName:Mt})}const yn=new U.H0(Mt);for(const $n of wi.values())yn.addComponent($n);const rr=new Fu(Me,ct,yn);return Gt.set(Mt,rr),rr}function ri(ge=kn){const te=Gt.get(ge);if(!te&&ge===kn&&(0,re.aH)())return Ui();if(!te)throw Zt.create("no-app",{appName:ge});return te}function os(){return Array.from(Gt.values())}function Lo(ge){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,p.Z)(function*(ge){const te=ge.name;Gt.has(te)&&(Gt.delete(te),yield Promise.all(ge.container.getProviders().map(Me=>Me.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function Bi(ge,te,Me){var ct;let Mt=null!==(ct=Kt[ge])&&void 0!==ct?ct:ge;Me&&(Mt+=`-${Me}`);const kt=Mt.match(/\s|\//),yn=te.match(/\s|\//);if(kt||yn){const rr=[`Unable to register library "${Mt}" with version "${te}":`];return kt&&rr.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),kt&&yn&&rr.push("and"),yn&&rr.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Nn.warn(rr.join(" "))}un(new U.wA(`${Mt}-version`,()=>({library:Mt,version:te}),"VERSION"))}function as(ge,te){if(null!==ge&&"function"!=typeof ge)throw Zt.create("invalid-log-argument");(0,W.Am)(ge,te)}function ii(ge){(0,W.Ub)(ge)}const ho="firebase-heartbeat-database",Ai=1,z="firebase-heartbeat-store";let V=null;function Y(){return V||(V=function Oe(ge,te,{blocked:Me,upgrade:ct,blocking:Mt,terminated:kt}={}){const yn=indexedDB.open(ge,te),rr=Be(yn);return ct&&yn.addEventListener("upgradeneeded",$n=>{ct(Be(yn.result),$n.oldVersion,$n.newVersion,Be(yn.transaction),$n)}),Me&&yn.addEventListener("blocked",$n=>Me($n.oldVersion,$n.newVersion,$n)),rr.then($n=>{kt&&$n.addEventListener("close",()=>kt()),Mt&&$n.addEventListener("versionchange",$i=>Mt($i.oldVersion,$i.newVersion,$i))}).catch(()=>{}),rr}(ho,Ai,{upgrade:(ge,te)=>{0===te&&ge.createObjectStore(z)}}).catch(ge=>{throw Zt.create("idb-open",{originalErrorMessage:ge.message})})),V}function ne(){return(ne=(0,p.Z)(function*(ge){try{return yield(yield Y()).transaction(z).objectStore(z).get(dn(ge))}catch(te){if(te instanceof re.ZR)Nn.warn(te.message);else{const Me=Zt.create("idb-get",{originalErrorMessage:te?.message});Nn.warn(Me.message)}}})).apply(this,arguments)}function ft(ge,te){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(ge,te){try{const ct=(yield Y()).transaction(z,"readwrite");yield ct.objectStore(z).put(te,dn(ge)),yield ct.done}catch(Me){if(Me instanceof re.ZR)Nn.warn(Me.message);else{const ct=Zt.create("idb-set",{originalErrorMessage:Me?.message});Nn.warn(ct.message)}}})).apply(this,arguments)}function dn(ge){return`${ge.name}!${ge.options.appId}`}class Un{constructor(te){this.container=te,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new mr(Me),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var te=this;return(0,p.Z)(function*(){const ct=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=nn();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!te._heartbeatsCache.heartbeats.some(kt=>kt.date===Mt))return te._heartbeatsCache.heartbeats.push({date:Mt,agent:ct}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(kt=>{const yn=new Date(kt.date).valueOf();return Date.now()-yn<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,p.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Me=nn(),{heartbeatsToSend:ct,unsentEntries:Mt}=function Bn(ge,te=1024){const Me=[];let ct=ge.slice();for(const Mt of ge){const kt=Me.find(yn=>yn.agent===Mt.agent);if(kt){if(kt.dates.push(Mt.date),Qt(Me)>te){kt.dates.pop();break}}else if(Me.push({agent:Mt.agent,dates:[Mt.date]}),Qt(Me)>te){Me.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Me,unsentEntries:ct}}(te._heartbeatsCache.heartbeats),kt=(0,re.L)(JSON.stringify({version:2,heartbeats:ct}));return te._heartbeatsCache.lastSentHeartbeatDate=Me,Mt.length>0?(te._heartbeatsCache.heartbeats=Mt,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),kt})()}}function nn(){return(new Date).toISOString().substring(0,10)}class mr{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,p.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function pe(ge){return ne.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Me=this;return(0,p.Z)(function*(){var ct;if(yield Me._canUseIndexedDBPromise){const kt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(ct=te.lastSentHeartbeatDate)&&void 0!==ct?ct:kt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Me=this;return(0,p.Z)(function*(){var ct;if(yield Me._canUseIndexedDBPromise){const kt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(ct=te.lastSentHeartbeatDate)&&void 0!==ct?ct:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...te.heartbeats]})}})()}}function Qt(ge){return(0,re.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function Vo(ge){un(new U.wA("platform-logger",te=>new Hr(te),"PRIVATE")),un(new U.wA("heartbeat",te=>new Un(te),"PRIVATE")),Bi(Vi,"0.9.13",ge),Bi(Vi,"0.9.13","esm2017"),Bi("fire-js","")}("")},4537:(wt,Se,O)=>{O.d(Se,{H0:()=>Ve,wA:()=>W});var p=O(5861),U=O(9058);class W{constructor(H,q,ce){this.name=H,this.instanceFactory=q,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const re="[DEFAULT]";class se{constructor(H,q){this.name=H,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const q=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(q)){const ce=new U.BH;if(this.instancesDeferred.set(q,ce),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:q});Ke&&ce.resolve(Ke)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(H){var q;const ce=this.normalizeInstanceIdentifier(H?.identifier),Ke=null!==(q=H?.optional)&&void 0!==q&&q;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(me){if(Ke)return null;throw me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ve(_e){return"EAGER"===_e.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[q,ce]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(q);try{const me=this.getOrInitializeService({instanceIdentifier:Ke});ce.resolve(me)}catch{}}}}clearInstance(H=re){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,p.Z)(function*(){const q=Array.from(H.instances.values());yield Promise.all([...q.filter(ce=>"INTERNAL"in ce).map(ce=>ce.INTERNAL.delete()),...q.filter(ce=>"_delete"in ce).map(ce=>ce._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=re){return this.instances.has(H)}getOptions(H=re){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:q={}}=H,ce=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(ce))throw Error(`${this.name}(${ce}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ce,options:q});for(const[me,Xe]of this.instancesDeferred.entries())ce===this.normalizeInstanceIdentifier(me)&&Xe.resolve(Ke);return Ke}onInit(H,q){var ce;const Ke=this.normalizeInstanceIdentifier(q),me=null!==(ce=this.onInitCallbacks.get(Ke))&&void 0!==ce?ce:new Set;me.add(H),this.onInitCallbacks.set(Ke,me);const Xe=this.instances.get(Ke);return Xe&&H(Xe,Ke),()=>{me.delete(H)}}invokeOnInitCallbacks(H,q){const ce=this.onInitCallbacks.get(q);if(ce)for(const Ke of ce)try{Ke(H,q)}catch{}}getOrInitializeService({instanceIdentifier:H,options:q={}}){let ce=this.instances.get(H);if(!ce&&this.component&&(ce=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=H,_e===re?void 0:_e),options:q}),this.instances.set(H,ce),this.instancesOptions.set(H,q),this.invokeOnInitCallbacks(ce,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,ce)}catch{}var _e;return ce||null}normalizeInstanceIdentifier(H=re){return this.component?this.component.multipleInstances?H:re:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ve{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const q=this.getProvider(H.name);if(q.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);q.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const q=new se(H,this);return this.providers.set(H,q),q}getProviders(){return Array.from(this.providers.values())}}},7879:(wt,Se,O)=>{O.d(Se,{Am:()=>_e,Ub:()=>Ve,Yd:()=>ve,in:()=>U});const p=[];var U=function(H){return H[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",H}(U||{});const W={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},re=U.INFO,se={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Ie=(H,q,...ce)=>{if(q<H.logLevel)return;const Ke=(new Date).toISOString(),me=se[q];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[me](`[${Ke}]  ${H.name}:`,...ce)};class ve{constructor(q){this.name=q,this._logLevel=re,this._logHandler=Ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in U))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?W[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...q),this._logHandler(this,U.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...q),this._logHandler(this,U.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,U.INFO,...q),this._logHandler(this,U.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,U.WARN,...q),this._logHandler(this,U.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...q),this._logHandler(this,U.ERROR,...q)}}function Ve(H){p.forEach(q=>{q.setLogLevel(H)})}function _e(H,q){for(const ce of p){let Ke=null;q&&q.level&&(Ke=W[q.level]),ce.userLogHandler=null===H?null:(me,Xe,...nt)=>{const et=nt.map(ze=>{if(null==ze)return null;if("string"==typeof ze)return ze;if("number"==typeof ze||"boolean"==typeof ze)return ze.toString();if(ze instanceof Error)return ze.message;try{return JSON.stringify(ze)}catch{return null}}).filter(ze=>ze).join(" ");Xe>=(Ke??me.logLevel)&&H({level:U[Xe].toLowerCase(),message:et,args:nt,type:me.name})}}}},5861:(wt,Se,O)=>{function p(W,re,se,Ie,ve,Ve,_e){try{var H=W[Ve](_e),q=H.value}catch(ce){return void se(ce)}H.done?re(q):Promise.resolve(q).then(Ie,ve)}function U(W){return function(){var re=this,se=arguments;return new Promise(function(Ie,ve){var Ve=W.apply(re,se);function _e(q){p(Ve,Ie,ve,_e,H,"next",q)}function H(q){p(Ve,Ie,ve,_e,H,"throw",q)}_e(void 0)})}}O.d(Se,{Z:()=>U})},7582:(wt,Se,O)=>{function re(he,le){var Ee={};for(var we in he)Object.prototype.hasOwnProperty.call(he,we)&&le.indexOf(we)<0&&(Ee[we]=he[we]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(we=Object.getOwnPropertySymbols(he);He<we.length;He++)le.indexOf(we[He])<0&&Object.prototype.propertyIsEnumerable.call(he,we[He])&&(Ee[we[He]]=he[we[He]])}return Ee}function ce(he,le,Ee,we){return new(Ee||(Ee=Promise))(function(We,bt){function sn(Tt){try{Nt(we.next(Tt))}catch(_t){bt(_t)}}function cr(Tt){try{Nt(we.throw(Tt))}catch(_t){bt(_t)}}function Nt(Tt){Tt.done?We(Tt.value):function He(We){return We instanceof Ee?We:new Ee(function(bt){bt(We)})}(Tt.value).then(sn,cr)}Nt((we=we.apply(he,le||[])).next())})}function Be(he){return this instanceof Be?(this.v=he,this):new Be(he)}function Ne(he,le,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,we=Ee.apply(he,le||[]),We=[];return He={},bt("next"),bt("throw"),bt("return"),He[Symbol.asyncIterator]=function(){return this},He;function bt(Ln){we[Ln]&&(He[Ln]=function(lr){return new Promise(function(ni,ye){We.push([Ln,lr,ni,ye])>1||sn(Ln,lr)})})}function sn(Ln,lr){try{!function cr(Ln){Ln.value instanceof Be?Promise.resolve(Ln.value.v).then(Nt,Tt):_t(We[0][2],Ln)}(we[Ln](lr))}catch(ni){_t(We[0][3],ni)}}function Nt(Ln){sn("next",Ln)}function Tt(Ln){sn("throw",Ln)}function _t(Ln,lr){Ln(lr),We.shift(),We.length&&sn(We[0][0],We[0][1])}}function Qe(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,le=he[Symbol.asyncIterator];return le?le.call(he):(he=function nt(he){var le="function"==typeof Symbol&&Symbol.iterator,Ee=le&&he[le],we=0;if(Ee)return Ee.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&we>=he.length&&(he=void 0),{value:he&&he[we++],done:!he}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Ee={},we("next"),we("throw"),we("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function we(We){Ee[We]=he[We]&&function(bt){return new Promise(function(sn,cr){!function He(We,bt,sn,cr){Promise.resolve(cr).then(function(Nt){We({value:Nt,done:sn})},bt)}(sn,cr,(bt=he[We](bt)).done,bt.value)})}}}O.d(Se,{FC:()=>Ne,KL:()=>Qe,_T:()=>re,mG:()=>ce,qq:()=>Be}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=9624)}]);